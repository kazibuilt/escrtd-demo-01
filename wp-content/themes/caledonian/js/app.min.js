/*! For license information please see app.min.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={815:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval("\n;// CONCATENATED MODULE: ./app/src/js/app/appStore.js\n/* harmony default export */ const appStore = ({\n  main: null,\n  rootUrl: null,\n  isDesktop: null,\n  firstNavigation: null,\n  currentSection: null,\n  client: {\n    browser: '',\n    device: '',\n    lang: 'es',\n    os: '',\n    orientation: null,\n    sizes: {\n      width: window.innerWidth,\n      height: window.innerHeight\n    },\n    mousePosition: {\n      x: window.innerWidth / 2,\n      y: window.innerHeight / 2\n    }\n  }\n});\n;// CONCATENATED MODULE: ./app/src/js/utils/string.js\n//Copyright 2018 Vicente Lucendo - vicen@vlucendo.com\nvar string = {\n  //converts a string number '#FFFFFF' to hex 0xffffff - it gets used on pixi\n  toHex: function toHex(str) {\n    return parseInt(str.substring(1), 16);\n  },\n  //true or false if text is on the string\n  contains: function contains(str, text) {\n    return str.indexOf(text) > -1;\n  }\n};\n;// CONCATENATED MODULE: ./app/src/js/utils/is.js\n//Copyright 2018 Vicente Lucendo - vicen@vlucendo.com\n\nvar is = {\n  array: function array(a) {\n    return Array.isArray(a);\n  },\n  object: function object(a) {\n    return string.contains(Object.prototype.toString.call(a), 'Object');\n  },\n  path: function path(a) {\n    return is.obj(a) && a.hasOwnProperty('totalLength');\n  },\n  //eslint-disable-line\n  svg: function svg(a) {\n    return a instanceof SVGElement;\n  },\n  node: function node(a) {\n    return a.nodeType || is.svg(a);\n  },\n  nodeList: function nodeList(a) {\n    return a instanceof NodeList || a instanceof HTMLCollection;\n  },\n  string: function string(a) {\n    return typeof a === 'string';\n  },\n  number: function number(a) {\n    return !isNaN(parseFloat(a)) && isFinite(a);\n  },\n  \"function\": function _function(a) {\n    return typeof a === 'function';\n  },\n  undefined: function undefined(a) {\n    return typeof a === 'undefined';\n  },\n  hex: function hex(a) {\n    return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a);\n  },\n  rgb: function rgb(a) {\n    return /^rgb/.test(a);\n  },\n  hsl: function hsl(a) {\n    return /^hsl/.test(a);\n  },\n  color: function color(a) {\n    return is.hex(a) || is.rgb(a) || is.hsl(a);\n  }\n};\n;// CONCATENATED MODULE: ./app/src/js/classes/domEvents.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n//Copyright 2018 Vicente Lucendo - vicen@vlucendo.com\n\n\nvar domEvents_default = /*#__PURE__*/function () {\n  function _default() {\n    _classCallCheck(this, _default);\n\n    this._eventCache = [];\n  }\n\n  _createClass(_default, [{\n    key: \"_removeEvent\",\n    value: function _removeEvent(index) {\n      //remove event listener\n      this._eventCache[index].node.removeEventListener(this._eventCache[index].action, this._eventCache[index].cb); //remove element from eventcache\n\n\n      this._eventCache.splice(index, 1);\n    }\n  }, {\n    key: \"add\",\n    value: function add(node, eventName, _func) {\n      var _this = this;\n\n      var context = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var arg = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var rLink = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n      //nodelist or single node?\n      var _nodes = is.nodeList(node) || is.array(node) ? node : [node]; //loop though the nodes\n\n\n      var _loop = function _loop(i) {\n        //create callback passing the event, argument and source node\n        var _cb = context !== false ? function (e) {\n          _func.call(context, e, arg, _nodes[i]);\n        } : function (e) {\n          _func(e, arg, _nodes[i]);\n        }; //add the event to the node event cache\n\n\n        _this._eventCache.push({\n          node: _nodes[i],\n          action: eventName,\n          func: _func,\n          cb: _cb,\n          routerLink: rLink\n        }); //add the event to the node\n\n\n        _nodes[i].addEventListener(eventName, _cb);\n      };\n\n      for (var i = 0; i < _nodes.length; i++) {\n        _loop(i);\n      }\n    } //this function removes non router events meeting the criteria\n\n  }, {\n    key: \"remove\",\n    value: function remove(node, eventName, func) {\n      //nodelist or single node?\n      var _nodes = is.nodeList(node) || is.array(node) ? node : [node]; //loop though the nodes\n\n\n      for (var k = 0; k < _nodes.length; k++) {\n        var i = 0;\n\n        while (i < this._eventCache.length) {\n          //check if it is the same node and is not a router link\n          if (this._eventCache[i].node === _nodes[k] && !this._eventCache[i].routerLink) {\n            if (eventName && func) {\n              if (this._eventCache[i].action === eventName && this._eventCache[i].func === func) this._removeEvent(i);else i++;\n            } else if (eventName) {\n              if (this._eventCache[i].action === eventName) this._removeEvent(i);else i++;\n            } else if (func) {\n              if (this._eventCache[i].func === func) this._removeEvent(i);else i++;\n            } else {\n              this._removeEvent(i);\n            }\n          } else {\n            i++;\n          }\n        }\n      }\n    } //this function removes all non router links\n\n  }, {\n    key: \"removeAll\",\n    value: function removeAll() {\n      var i = 0;\n\n      while (i < this._eventCache.length) {\n        if (!this._eventCache[i].routerLink) this._removeEvent(i);else i++;\n      }\n    } //this function removes everything, it must only be used by component classes after elements are removed\n    //from the dom so there are not problems with unbound router links clicked by the user refreshing the page\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      while (this._eventCache.length > 0) {\n        this._removeEvent(0);\n      }\n    }\n  }]);\n\n  return _default;\n}();\n\n\n// EXTERNAL MODULE: ./node_modules/gsap/index.js + 2 modules\nvar gsap = __webpack_require__(358);\n;// CONCATENATED MODULE: ./app/src/js/app/appUi.js\nfunction appUi_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction appUi_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction appUi_createClass(Constructor, protoProps, staticProps) { if (protoProps) appUi_defineProperties(Constructor.prototype, protoProps); if (staticProps) appUi_defineProperties(Constructor, staticProps); return Constructor; }\n\n// app\n\n // classes\n\n // gsap\n\n\nvar _singleton = null;\n\nvar appUi = /*#__PURE__*/function () {\n  function appUi(data) {\n    appUi_classCallCheck(this, appUi);\n\n    if (!_singleton) {\n      this.data = data;\n      _singleton = this;\n    } else {\n      return _singleton;\n    } // store\n\n\n    this.appStore = appStore; // app references\n\n    this.appCore = new app_appCore(); // Events\n\n    this.domEvents = new domEvents_default(); // Cursor vars\n\n    this.cursor = {\n      position: {\n        x: 0,\n        y: 0\n      },\n      livePosition: {\n        x: 0,\n        y: 0\n      },\n      lock: false\n    };\n    this.cursorDrag = {\n      isOpen: false,\n      isPlayed: false,\n      isReduced: false,\n      openTimeline: null,\n      closeTimeline: null\n    }; // Info vars\n\n    this.info = {\n      isOpen: false\n    };\n    this.header = null;\n    this.guides = null;\n    this.background = null;\n    this.loaderDuration = 1;\n  }\n\n  appUi_createClass(appUi, [{\n    key: \"init\",\n    value: function init() {\n      this.header = {\n        isOpen: false,\n        isAnimating: false,\n        isLocked: false\n      };\n      this.initLoader();\n      this.initMenu();\n      this.initSubmenu();\n    }\n  }, {\n    key: \"selectors\",\n    value: function selectors() {\n      // Deafult\n      this.$app = document.getElementById('app');\n      this.$logo = document.getElementById('logo'); // Cursor\n\n      this.$cursor = document.getElementById('cursor');\n      this.$cursorDot = this.$cursor.querySelector('.cursor__dot');\n      this.$cursorMinus = this.$cursor.querySelector('.cursor__minus');\n      this.$cursorPlus = this.$cursor.querySelector('.cursor__plus');\n      this.$cursorDrag = this.$cursor.querySelector('.cursor__drag'); // Mask\n\n      this.$mask = document.getElementById('mask'); // Loader\n\n      this.$loader = document.getElementById('loader');\n\n      if (this.$loader) {\n        this.$loaderMask = this.$loader.querySelector('.mask');\n        this.$loaderInner = this.$loader.querySelector('.inner');\n        this.$loaderLogo = this.$loader.querySelector('.inner .letterlogo');\n        this.$loaderLogoLetters = this.$loaderLogo.querySelectorAll('.inner .letterlogo .letter');\n        this.$loaderProgress = this.$loader.querySelector('.inner .progress');\n      } // Header\n\n\n      this.$header = document.getElementById('header');\n\n      if (this.$header) {\n        this.$headerLogo = this.$header.querySelector('.logo');\n        this.$headerMenu = this.$header.querySelector('nav.menu');\n        this.$headerMenuItems = this.$headerMenu.querySelectorAll('li');\n        this.$headerSubmenu = this.$header.querySelector('nav.submenu');\n        this.$headerSubmenuItems = this.$headerSubmenu.querySelectorAll('li');\n        this.$headerTrigger = this.$header.querySelector('.trigger');\n        this.$headerTriggerText = this.$headerTrigger.querySelector('.text');\n        this.$headerTriggerIcon = this.$headerTrigger.querySelector('.icon');\n      } // Info\n\n\n      this.$info = document.getElementById('info');\n\n      if (this.$info) {\n        this.$infoCloser = this.$info.querySelector('.closer');\n        this.$infoMask = this.$info.querySelector('.mask');\n        this.$infoContent = this.$info.querySelector('.content');\n      } // Guides\n\n\n      this.$guides = document.getElementById('guides');\n\n      if (this.$guides) {\n        this.$guidesSwitcher = this.$guides.querySelector('.guides__switcher');\n        this.$guidesSwitcher2 = this.$guides.querySelector('.guides__switcher2');\n        this.$guidesHr = this.$guides.querySelector('.guides__horizontal');\n        this.$guidesVr = this.$guides.querySelector('.guides__vertical');\n        this.$guidesHr2 = this.$guides.querySelector('.guides__horizontal2');\n        this.$guidesVr2 = this.$guides.querySelector('.guides__vertical2');\n      } // Cookies\n\n\n      this.$cookies = document.getElementById('cookie-law-info-bar');\n\n      if (this.$cookies) {\n        this.$cookiesConfigureButton = document.querySelector('a.cli_settings_button');\n        this.$cookiesModal = document.querySelector('.cli-modal');\n        this.$cookiesCategory = this.$cookiesModal.querySelectorAll('a.cli-nav-link');\n      }\n    }\n  }, {\n    key: \"events\",\n    value: function events() {\n      var _this = this;\n\n      // Header\n      if (this.$header) this.domEvents.add(this.$headerTrigger, 'click', function () {\n        _this.triggerMenu();\n      }); // Info\n\n      if (this.$info) {\n        this.domEvents.add(this.$infoMask, 'click', function (e, a, el) {\n          _this.closeInfo();\n        });\n        this.domEvents.add(this.$infoCloser, 'click', function (e, a, el) {\n          _this.closeInfo();\n        });\n      } // Guides\n\n\n      if (this.$guides) {\n        this.domEvents.add(this.$guidesSwitcher, 'click', function () {\n          _this.guidesSwitcher();\n        });\n        this.domEvents.add(this.$guidesSwitcher2, 'click', function () {\n          _this.guidesSwitcher2();\n        });\n      }\n\n      if (this.$cursor && this.appStore.isDesktop) this.domEvents.add(document, 'mousemove', function (e) {\n        _this.moveCursor(e);\n      }); // this.domEvents.add(document, 'mousemove', (e, a, el) => { this.cursorOver(e, a, el); });\n\n      if (!this.appStore.isDesktop) {\n        this.previousScroll = 0;\n        this.menuOpened = true;\n        gsap/* default.to */.ZP.to(this.$header, {\n          y: '0%',\n          duration: 0.8,\n          ease: 'expo.out'\n        });\n        this.domEvents.add(window, 'scroll', function () {\n          if (_this.header.isOpen || _this.header.isLocked) return;\n          var scroll = document.documentElement.scrollTop;\n\n          if (scroll < _this.previousScroll || scroll <= 0) {\n            if (!_this.menuOpened) {\n              _this.menuOpened = true;\n              gsap/* default.to */.ZP.to(_this.$header, {\n                y: '0%',\n                duration: 0.8,\n                ease: 'expo.out'\n              });\n            }\n          } else {\n            if (_this.menuOpened) {\n              _this.menuOpened = false;\n              gsap/* default.to */.ZP.to(_this.$header, {\n                y: '-100%',\n                duration: 0.8,\n                ease: 'expo.out'\n              });\n            }\n          }\n\n          _this.previousScroll = scroll;\n        });\n      } // Cookies\n\n\n      if (this.$cookiesConfigureButton) {\n        // eslint-disable-next-line no-script-url\n        var disabled = 'javascript: void(0)';\n        this.$cookiesConfigureButton.setAttribute('href', disabled);\n      }\n\n      if (this.$cookiesModal) {\n        // eslint-disable-next-line no-script-url\n        var _disabled = 'javascript: void(0)';\n\n        for (var i = 0; i < this.$cookiesCategory.length; i++) {\n          this.$cookiesCategory[i].setAttribute('href', _disabled);\n        }\n      }\n    }\n  }, {\n    key: \"initLoader\",\n    value: function initLoader() {\n      // Animate in next slide\n      gsap/* default.to */.ZP.to(this.$loaderLogo, {\n        opacity: 1,\n        duration: 0.4,\n        ease: 'powe2.out'\n      });\n      if (this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.$loaderProgress, {\n        opacity: 1,\n        duration: 0.4,\n        ease: 'powe2.out'\n      });\n\n      for (var i = 0; i < this.$loaderLogoLetters.length; i++) {\n        if (this.appStore.isDesktop) gsap/* default.set */.ZP.set(this.$loaderLogoLetters[i], {\n          y: -(window.innerHeight / 2 + window.innerWidth * 0.05)\n        });else gsap/* default.set */.ZP.set(this.$loaderLogoLetters[i], {\n          opacity: 0.0001\n        });\n        gsap/* default.to */.ZP.to(this.$loaderLogoLetters[i], {\n          y: 0,\n          ease: 'expo.inOut',\n          opacity: 1,\n          duration: 1.2,\n          delay: 0 + i * 0.02\n        });\n      }\n    }\n  }, {\n    key: \"hideLoader\",\n    value: function hideLoader() {\n      var _this2 = this;\n\n      if (this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.$loaderProgress, {\n        opacity: 0.0001,\n        duration: 0.6,\n        ease: 'powe2.out'\n      });\n\n      for (var i = 0; i < this.$loaderLogoLetters.length; i++) {\n        if (this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.$loaderLogoLetters[i], {\n          y: window.innerHeight / 2 + window.innerWidth * 0.1,\n          ease: 'expo.inOut',\n          duration: 1.2,\n          delay: 0 + i * 0.05\n        });else gsap/* default.to */.ZP.to(this.$loaderLogoLetters[i], {\n          opacity: 0.0001,\n          ease: 'expo.inOut',\n          duration: 1.2,\n          delay: 0 + i * 0.02\n        });\n      }\n\n      gsap/* default.to */.ZP.to([this.$loaderMask, this.$loaderInner], {\n        y: '100%',\n        duration: 1.8,\n        ease: 'expo.inOut',\n        delay: this.appStore.isDesktop ? 0 : 0.8,\n        onComplete: function onComplete() {\n          gsap/* default.set */.ZP.set(_this2.$loader, {\n            display: 'none',\n            onComplete: function onComplete() {\n              _this2.$loader.remove();\n            }\n          });\n        }\n      });\n    } // hideLoader()\n    // {\n    //     // gsap.to(this.$loaderProgress, { opacity: 0.0001, duration: 0.6, ease: 'powe2.out' });\n    //     gsap.to(this.$loaderProgress, { opacity: 0.0001,\n    //         duration: 0.6,\n    //         ease: 'powe2.out',\n    //         onComplete: () =>\n    //         {\n    //             gsap.to(this.$loaderInner, {\n    //                 y: '-100%',\n    //                 duration: this.loaderDuration,\n    //                 ease: 'power4.out',\n    //                 onComplete: () =>\n    //                 {\n    //                     gsap.set(this.$loader, { display: 'none' });\n    //                 }\n    //             });\n    //         } });\n    // }\n\n  }, {\n    key: \"initMenu\",\n    value: function initMenu() {\n      gsap/* default.set */.ZP.set(this.$headerTriggerText.children[1], {\n        y: '-100%'\n      });\n\n      for (var i = 0; i < this.$headerMenuItems.length; i++) {\n        gsap/* default.set */.ZP.set(this.$headerMenuItems[i].children[0], {\n          y: '-100%'\n        });\n      }\n    }\n  }, {\n    key: \"triggerMenu\",\n    value: function triggerMenu() {\n      var _this3 = this;\n\n      if (this.header.isAnimating) return;\n      this.header.isAnimating = true;\n\n      if (!this.header.isOpen) {\n        // Set overlay\n        gsap/* default.to */.ZP.to(this.appStore.currentSection.$overlay, {\n          opacity: 0.1,\n          duration: 0.8,\n          ease: 'power2.out'\n        }); // Reposition menu on promotionsingle\n\n        if (this.appStore.current === 'promotionssingle' && this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.$header, {\n          y: '0vw',\n          duration: 0.8,\n          ease: 'expo.inOut'\n        }); // Hide logo\n\n        if (this.appStore.current !== 'home' && this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.$headerLogo, {\n          opacity: 0.0001,\n          pointerEvents: 'none',\n          duration: 0.2,\n          ease: 'power2.out'\n        });\n\n        if (this.appStore.isDesktop) {\n          gsap/* default.to */.ZP.to(this.$app, {\n            willChange: 'transform',\n            scale: 0.9,\n            y: '5vw',\n            duration: 0.8,\n            ease: 'expo.inOut'\n          });\n          this.$headerMenu.style.pointerEvents = 'all';\n        } else {\n          gsap/* default.to */.ZP.to(this.$app, {\n            willChange: 'transform',\n            y: '10vw',\n            duration: 0.8,\n            ease: 'expo.inOut'\n          });\n          this.$headerMenu.style.display = 'block';\n          gsap/* default.to */.ZP.to(this.$headerMenu, {\n            y: '0%',\n            duration: 0.8,\n            ease: 'expo.inOut'\n          });\n          document.documentElement.style.overflow = 'hidden';\n        } // Animate menu items\n\n\n        for (var i = 0; i < this.$headerMenuItems.length; i++) {\n          gsap/* default.to */.ZP.to(this.$headerMenuItems[i].children[0], {\n            y: '0%',\n            duration: this.appStore.isDesktop ? 0.8 : 0.3,\n            ease: 'expo.inOut',\n            delay: this.appStore.isDesktop ? 0.1 + i * 0.05 : 0.5 + i * 0.02\n          });\n        }\n\n        if (this.appStore.isDesktop) {\n          // gsap.to(this.$headerTrigger, { y: '2.5vw', duration: 0.8, ease: 'expo.inOut' });\n          gsap/* default.to */.ZP.to(this.$headerTriggerText.children[1], {\n            y: '0%',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0.1\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerText.children[0], {\n            y: '100%',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0.1\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[0], {\n            rotation: '45deg',\n            backgroundColor: '#ffffff',\n            y: '5px',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0.1\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[1], {\n            rotation: '-45deg',\n            backgroundColor: '#ffffff',\n            y: '-5px',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0.1\n          });\n        } else {\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[0], {\n            rotation: '45deg',\n            y: '5px',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0.1\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[1], {\n            rotation: '-45deg',\n            y: '-5px',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0.1\n          });\n        }\n\n        gsap/* default.delayedCall */.ZP.delayedCall(0.8, function () {\n          _this3.header.isAnimating = false;\n          _this3.header.isOpen = true;\n        });\n      } else {\n        // Unset overlay\n        gsap/* default.to */.ZP.to(this.appStore.currentSection.$overlay, {\n          opacity: 0.0001,\n          duration: 0.8,\n          ease: 'power2.out'\n        }); // Reposition menu on promotionsingle\n\n        if (this.appStore.current === 'promotionssingle' && this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.$header, {\n          y: '-2.5vw',\n          duration: 0.8,\n          ease: 'expo.inOut'\n        }); // Hide logo\n\n        if (this.appStore.current !== 'home' && this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.$headerLogo, {\n          opacity: 1,\n          duration: 0.2,\n          pointerEvents: 'initial',\n          ease: 'power2.out',\n          delay: 0.6\n        });\n\n        if (this.appStore.isDesktop) {\n          gsap/* default.to */.ZP.to(this.$app, {\n            willChange: '',\n            scale: 1,\n            y: 0,\n            duration: 0.8,\n            ease: 'expo.inOut',\n            clearProps: 'all'\n          });\n          this.$headerMenu.style.pointerEvents = 'none';\n        } else {\n          gsap/* default.to */.ZP.to(this.$app, {\n            willChange: 'transform',\n            y: 0,\n            duration: 0.8,\n            ease: 'expo.inOut',\n            clearProps: 'all'\n          });\n          gsap/* default.to */.ZP.to(this.$headerMenu, {\n            y: '-100%',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            onComplete: function onComplete() {\n              _this3.$headerMenu.style.display = 'block';\n            }\n          });\n          document.documentElement.style.overflow = 'initial';\n        } // Animate menu items\n\n\n        for (var _i = 0; _i < this.$headerMenuItems.length; _i++) {\n          gsap/* default.to */.ZP.to(this.$headerMenuItems[_i].children[0], {\n            y: '-100%',\n            duration: this.appStore.isDesktop ? 0.8 : 0.4,\n            ease: 'expo.inOut',\n            delay: 0\n          });\n        }\n\n        if (this.appStore.isDesktop) {\n          gsap/* default.to */.ZP.to(this.$headerTriggerText.children[1], {\n            y: '-100%',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerText.children[0], {\n            y: '0%',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[0], {\n            rotation: '0deg',\n            backgroundColor: '#EC1C24',\n            y: '0',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[1], {\n            rotation: '0deg',\n            backgroundColor: '#EC1C24',\n            y: '0',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0\n          });\n        } else {\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[0], {\n            rotation: '0deg',\n            y: '0',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0\n          });\n          gsap/* default.to */.ZP.to(this.$headerTriggerIcon.children[1], {\n            rotation: '0deg',\n            y: '0',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0\n          });\n        }\n\n        gsap/* default.delayedCall */.ZP.delayedCall(0.8, function () {\n          _this3.header.isAnimating = false;\n          _this3.header.isOpen = false;\n        });\n      }\n    }\n  }, {\n    key: \"initSubmenu\",\n    value: function initSubmenu() {\n      var _this4 = this;\n\n      for (var i = 0; i < this.$headerSubmenuItems.length; i++) {\n        gsap/* default.set */.ZP.set(this.$headerSubmenuItems[i].children[0], {\n          y: '-100%'\n        });\n        this.domEvents.add(this.$headerSubmenuItems[i], 'mouseenter', function (e, a, el) {\n          _this4.enterSubmenu(e, a, el);\n        });\n        this.domEvents.add(this.$headerSubmenuItems[i], 'mouseleave', function (e, a, el) {\n          _this4.leaveSubmenu(e, a, el);\n        });\n      }\n    }\n  }, {\n    key: \"enterSubmenu\",\n    value: function enterSubmenu(e, a, el) {\n      gsap/* default.to */.ZP.to(el.children[0].children[0], {\n        x: '0px',\n        scaleX: 1,\n        duration: 0.4,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(el.children[0].children[1], {\n        x: '12px',\n        opacity: 0.4,\n        duration: 0.4,\n        ease: 'expo.out'\n      });\n    }\n  }, {\n    key: \"leaveSubmenu\",\n    value: function leaveSubmenu(e, a, el) {\n      gsap/* default.to */.ZP.to(el.children[0].children[0], {\n        x: '-4px',\n        scaleX: 0,\n        duration: 0.4,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(el.children[0].children[1], {\n        x: '0px',\n        opacity: 1,\n        duration: 0.4,\n        ease: 'expo.out'\n      });\n    }\n  }, {\n    key: \"triggerSubmenu\",\n    value: function triggerSubmenu(_show) {\n      if (_show) {\n        gsap/* default.to */.ZP.to([this.$headerLogo, this.$headerTrigger], {\n          opacity: 0.0001,\n          pointerEvents: 'none',\n          duration: 0.2,\n          ease: 'power2.out'\n        });\n\n        for (var i = 0; i < this.$headerSubmenuItems.length; i++) {\n          gsap/* default.set */.ZP.set(this.$headerSubmenuItems[i].children[0], {\n            y: '-100%'\n          });\n          gsap/* default.to */.ZP.to(this.$headerSubmenuItems[i].children[0], {\n            y: '0%',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0 + i * 0.05\n          });\n        }\n\n        this.$headerSubmenu.style.pointerEvents = 'all';\n      } else {\n        gsap/* default.to */.ZP.to([this.$headerLogo, this.$headerTrigger], {\n          opacity: 1,\n          pointerEvents: 'initial',\n          duration: 0.2,\n          ease: 'power2.out',\n          delay: 0.8\n        });\n\n        for (var _i2 = 0; _i2 < this.$headerSubmenuItems.length; _i2++) {\n          gsap/* default.to */.ZP.to(this.$headerSubmenuItems[_i2].children[0], {\n            y: '-100%',\n            duration: 0.8,\n            ease: 'expo.inOut',\n            delay: 0 + (this.$headerSubmenuItems.length - _i2) * 0.05\n          });\n        }\n\n        this.$headerSubmenu.style.pointerEvents = 'none';\n      }\n    }\n  }, {\n    key: \"moveCursor\",\n    value: function moveCursor(e) {\n      if (this.cursor.lock) return; // Check velocity\n\n      this.cursor.livePosition.x = e.clientX;\n      this.cursor.livePosition.y = e.clientY;\n      var movementX = this.cursor.livePosition.x - this.cursor.position.x;\n      var movementY = this.cursor.livePosition.y - this.cursor.position.y;\n      var movement = Math.sqrt(movementX * movementX + movementY * movementY);\n      var velocity = movement / 10; // this._drag.velocity = lerp(this._drag.velocity, velocity, this._drag.ease * 2);\n\n      gsap/* default.to */.ZP.to(this.$cursorDot, {\n        x: this.cursor.livePosition.x,\n        y: this.cursor.livePosition.y,\n        duration: 1,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.$cursorMinus, {\n        x: this.cursor.livePosition.x,\n        y: this.cursor.livePosition.y,\n        duration: 1,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.$cursorPlus, {\n        x: this.cursor.livePosition.x,\n        y: this.cursor.livePosition.y,\n        duration: 1,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.$cursorDrag, {\n        x: this.cursor.livePosition.x,\n        y: this.cursor.livePosition.y,\n        duration: 1,\n        ease: 'expo.out'\n      });\n      this.cursor.position.x = this.cursor.livePosition.x;\n      this.cursor.position.y = this.cursor.livePosition.y;\n    }\n  }, {\n    key: \"openInfo\",\n    value: function openInfo(e, a, el) {\n      var _this5 = this;\n\n      if (this.info.isOpen) return;\n      this.info.isOpen = true;\n      if (this.appStore.isDesktop) this.appStore.currentSection.superScroller._scroll.enable = false;\n      if (el.dataset.href) this.appCore.highway.redirect(el.dataset.href); // const textContent = this.$form.textContent;\n      // // const shortcode = '<?php echo do_shortcode(' + textContent + ')';\n      // const yourHTML = '<div class=\"mydiv\"><?php do_shortcode(\"' + textContent + '\");?></div>';\n      // // document.getElementsByClassName('services-right')[0].innerHTML = yourHTML;\n      // this.$infoContent.children[1].insertAdjacentHTML('afterbegin', yourHTML);\n\n      console.log(this.appStore.current);\n      gsap/* default.delayedCall */.ZP.delayedCall(el.dataset.href && this.appStore.current !== 'contact' ? 2 : 0, function () {\n        gsap/* default.set */.ZP.set(_this5.$info, {\n          display: 'block'\n        });\n        gsap/* default.set */.ZP.set(_this5.$infoCloser, {\n          display: 'block'\n        });\n        gsap/* default.to */.ZP.to(_this5.$infoMask, {\n          opacity: 1,\n          duration: 0.6,\n          ease: 'power2.out'\n        });\n        gsap/* default.to */.ZP.to(_this5.$infoContent, {\n          x: '0%',\n          duration: 1,\n          ease: 'expo.inOut'\n        });\n        gsap/* default.to */.ZP.to(_this5.$infoCloser, {\n          opacity: 1,\n          duration: 0.2,\n          ease: 'power2.out',\n          delay: 1\n        });\n      });\n      e.preventDefault();\n      return false;\n    }\n  }, {\n    key: \"closeInfo\",\n    value: function closeInfo() {\n      var _this6 = this;\n\n      gsap/* default.to */.ZP.to(this.$infoCloser, {\n        opacity: 0.0001,\n        duration: 0.2,\n        ease: 'power2.out'\n      });\n      gsap/* default.to */.ZP.to(this.$infoContent, {\n        x: '100%',\n        duration: 1,\n        ease: 'expo.inOut'\n      });\n      gsap/* default.to */.ZP.to(this.$infoMask, {\n        opacity: 0.0001,\n        duration: 0.2,\n        ease: 'power2.out',\n        delay: 1,\n        onComplete: function onComplete() {\n          gsap/* default.set */.ZP.set(_this6.$infoCloser, {\n            display: 'none'\n          });\n          gsap/* default.set */.ZP.set(_this6.$info, {\n            display: 'none'\n          });\n          _this6.info.isOpen = false;\n          if (_this6.appStore.isDesktop) _this6.appStore.currentSection.superScroller._scroll.enable = true;\n        }\n      });\n    }\n  }, {\n    key: \"enterDragCursor\",\n    value: function enterDragCursor() {\n      gsap/* default.killTweensOf */.ZP.killTweensOf([this.$cursorDrag, this.$cursorDrag.children[0], this.$cursorDot, this.$cursorPlus]);\n      this.$cursorMinus.style.display = 'block';\n      this.$cursorPlus.style.display = 'block';\n      this.$cursorDrag.style.display = 'block';\n      gsap/* default.to */.ZP.to(this.$cursorDot, {\n        scale: 1,\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.$cursorMinus, {\n        scale: 1,\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.$cursorPlus, {\n        scale: 1,\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      }); //gsap.to(this.$cursorPlus.children[0], { opacity: 0.0001, duration: 0.3, ease: 'expo.out', delay: 0.1 });\n\n      gsap/* default.to */.ZP.to(this.$cursorDrag, {\n        scale: 1,\n        opacity: 1,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.$cursorDrag.children[0], {\n        opacity: 1,\n        duration: 0.3,\n        ease: 'expo.out',\n        delay: 0.1\n      });\n    }\n  }, {\n    key: \"leaveDragCursor\",\n    value: function leaveDragCursor() {\n      var _this7 = this;\n\n      gsap/* default.killTweensOf */.ZP.killTweensOf([this.$cursorDrag, this.$cursorDrag.children[0], this.$cursorDot, this.$cursorPlus]);\n      gsap/* default.to */.ZP.to(this.$cursorDot, {\n        scale: 0.35,\n        opacity: 1,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to([this.$cursorDrag, this.$cursorPlus], {\n        scale: 0.35,\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to([this.$cursorDrag.children[0], this.$cursorPlus.children[0]], {\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out',\n        onComplete: function onComplete() {\n          _this7.$cursorDrag.style.display = 'none';\n          _this7.$cursorMinus.style.display = 'none';\n          _this7.$cursorPlus.style.display = 'none';\n        }\n      });\n    } // overCursor(e, a, el)\n    // {\n    //     if(e.target.closest('a') !== null || e.target.closest('div').classList.contains('trigger'))\n    //     {\n    //         if(!this.isCursorViewing)\n    //         {\n    //             this.isCursorViewing = true;\n    //             gsap.to(this.$cursor.children[0], { scale: 0, duration: 0.8, ease: 'expo.out' });\n    //         }\n    //     }\n    //     else if(e.target.closest('div').classList.contains('drag') || e.target.closest('div').classList.contains('dot'))\n    //     {\n    //         if(!this.isCursorViewing)\n    //         {\n    //             this.isCursorViewing = true;\n    //             gsap.to(this.$cursor.children[0], { scale: 0, duration: 0.8, ease: 'expo.out' });\n    //             gsap.to(this.$cursor.children[1], { scale: 0, duration: 0.8, ease: 'expo.out' });\n    //         }\n    //     }\n    //     else if(e.target.closest('div').classList.contains('slider__bullets__item'))\n    //     {\n    //         if(!this.isCursorViewing)\n    //         {\n    //             this.isCursorViewing = true;\n    //             gsap.to(this.$cursor.children[0], { scale: 0.7, opacity: 0.2, duration: 0.8, ease: 'expo.out' });\n    //             gsap.to(this.$cursor.children[1], { scale: 0, duration: 0.8, ease: 'expo.out' });\n    //         }\n    //     }\n    //     else\n    //     {\n    //         if(this.isCursorViewing)\n    //         {\n    //             this.isCursorViewing = false;\n    //             gsap.to(this.$cursor.children[0], { scale: 1, opacity: 0.5, duration: 0.8, ease: 'expo.out' });\n    //             gsap.to(this.$cursor.children[1], { scale: 1, duration: 0.8, ease: 'expo.out' });\n    //         }\n    //     }\n    // }\n\n  }, {\n    key: \"guidesSwitcher\",\n    value: function guidesSwitcher() {\n      if (this.$guidesHr.style.display === 'block') {\n        gsap/* default.set */.ZP.set(this.$guidesHr, {\n          display: 'none'\n        });\n        gsap/* default.set */.ZP.set(this.$guidesVr, {\n          display: 'none'\n        });\n      } else {\n        gsap/* default.set */.ZP.set(this.$guidesHr, {\n          display: 'block'\n        });\n        gsap/* default.set */.ZP.set(this.$guidesVr, {\n          display: 'block'\n        });\n      }\n    }\n  }, {\n    key: \"guidesSwitcher2\",\n    value: function guidesSwitcher2() {\n      if (this.$guidesHr2.style.display === 'block') {\n        gsap/* default.set */.ZP.set(this.$guidesHr2, {\n          display: 'none'\n        });\n        gsap/* default.set */.ZP.set(this.$guidesVr2, {\n          display: 'none'\n        });\n      } else {\n        gsap/* default.set */.ZP.set(this.$guidesHr2, {\n          display: 'block'\n        });\n        gsap/* default.set */.ZP.set(this.$guidesVr2, {\n          display: 'block'\n        });\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {// this.$notice = document.getElementById('notice');\n      // if(!this.appStore.isDesktop)\n      // {\n      //     if(width > height)\n      //     {\n      //         gsap.set(this.$notice, { display: 'block' });\n      //         this.$notice.addEventListener('touchmove', (e) => { e.preventDefault(); });\n      //     }\n      //     else\n      //     {\n      //         gsap.set(this.$notice, { display: 'none' });\n      //     }\n      // }\n    }\n  }, {\n    key: \"resizeOrientation\",\n    value: function resizeOrientation() {} // eslint-disable-line\n\n  }, {\n    key: \"split\",\n    value: function split(x, n) {\n      if (x < n) {\n        document.write('-1 ');\n      } else if (x % n === 0) {\n        for (var i = 0; i < n; i++) {\n          document.write(x / n + ' ');\n        }\n      } else {\n        var zp = n - x % n;\n        var pp = Math.floor(x / n);\n\n        for (var _i3 = 0; _i3 < n; _i3++) {\n          if (_i3 >= zp) document.write(pp + 1 + ' ');else document.write(pp + ' ');\n        }\n      }\n    }\n  }, {\n    key: \"splitInParts\",\n    value: function splitInParts(num, parts) {\n      var sumParts = 0;\n      var totalParts = [];\n\n      for (var i = 0; i < parts - 1; i++) {\n        var pn = Math.random() * (num - sumParts);\n        sumParts += Math.min(pn, num * 0.5);\n        totalParts.push(sumParts);\n      }\n\n      sumParts += num - sumParts;\n      totalParts.push(sumParts);\n      return totalParts;\n    }\n  }]);\n\n  return appUi;\n}();\n\n/* harmony default export */ const app_appUi = (appUi);\n// EXTERNAL MODULE: ./node_modules/@dogstudio/highway/build/highway.module.js\nvar highway_module = __webpack_require__(219);\n// EXTERNAL MODULE: ./node_modules/gsap/ScrollTrigger.js\nvar ScrollTrigger = __webpack_require__(82);\n// EXTERNAL MODULE: ./node_modules/preload-it/dist/preload-it.js\nvar preload_it = __webpack_require__(130);\nvar preload_it_default = /*#__PURE__*/__webpack_require__.n(preload_it);\n// EXTERNAL MODULE: ./node_modules/lazyload/lazyload.js\nvar lazyload = __webpack_require__(261);\nvar lazyload_default = /*#__PURE__*/__webpack_require__.n(lazyload);\n// EXTERNAL MODULE: ./node_modules/virtual-scroll/lib/virtualscroll.js\nvar virtualscroll = __webpack_require__(389);\nvar virtualscroll_default = /*#__PURE__*/__webpack_require__.n(virtualscroll);\n;// CONCATENATED MODULE: ./app/src/js/classes/superScroller.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction superScroller_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction superScroller_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction superScroller_createClass(Constructor, protoProps, staticProps) { if (protoProps) superScroller_defineProperties(Constructor.prototype, protoProps); if (staticProps) superScroller_defineProperties(Constructor, staticProps); return Constructor; }\n\n// utilities\n\n\n // empty function\n\nvar noop = function noop() {}; // eslint-disable-line\n\n\nvar _default = /*#__PURE__*/function () {\n  function _default(options) {\n    var _this = this;\n\n    superScroller_classCallCheck(this, _default);\n\n    // store\n    this.appStore = appStore; // hook functions\n\n    this._onRaf = options.onRaf || noop;\n    this._onScroll = options.onScroll || noop;\n    this._currentSection = options.currentSection ? options.currentSection : null;\n    this._global = {\n      percent: {\n        x: 0,\n        y: 0\n      },\n      mode: options.mode || 'vertical'\n    };\n\n    var lerp = function lerp(value1, value2, amount) {\n      amount = amount < 0 ? 0 : amount;\n      amount = amount > 1 ? 1 : amount;\n      return value1 + (value2 - value1) * amount;\n    }; // scroll properties\n\n\n    if (options.scroll) {\n      // default virtualScroll options\n      this._virtualScroll = null;\n      this._virtualScrollOptions = {\n        el: typeof options.el !== 'undefined' ? _typeof(options.el) : window,\n        mouseMultiplier: typeof options.mouseMultiplier !== 'undefined' ? options.mouseMultiplier : this.appStore.client.os === 'windows' ? 1 : 0.4,\n        touchMultiplier: typeof options.touchMultiplier !== 'undefined' ? options.touchMultiplier : 2,\n        firefoxMultiplier: typeof options.firefoxMultiplier !== 'undefined' ? options.firefoxMultiplier : 50,\n        limitInertia: typeof options.limitInertia !== 'undefined' ? _typeof(options.limitInertia) : false,\n        passive: typeof options.passive !== 'undefined' ? options.pasive : false,\n        useKeyboard: false\n      };\n      this._scroll = {\n        enable: typeof options.enable !== 'undefined' ? options.enable : true,\n        target: options.scrollTarget,\n        width: 0,\n        height: 0,\n        timeout: false,\n        dragging: false,\n        ratio: {\n          x: 0,\n          y: 0\n        },\n        clickedPoint: {\n          x: 0,\n          y: 0\n        },\n        position: {\n          x: 0,\n          y: 0\n        },\n        lastPosition: {\n          x: 0,\n          y: 0\n        },\n        livePosition: {\n          x: 0,\n          y: 0\n        },\n        maxScroll: {\n          x: 0,\n          y: 0\n        }\n      };\n\n      this._scrollDown = function (e) {\n        gsap/* gsap.delayedCall */.p8.delayedCall(0.2, function () {\n          _this._scroll.target.parentNode.style.pointerEvents = 'none';\n        }); // set flag\n\n        _this._scroll.dragging = true;\n\n        _this._scroll.target.classList.add('dragging'); // get the point the user clicked on the bar\n\n\n        _this._scroll.clickedPoint.x = e.clientX - _this._scroll.livePosition.x;\n        _this._scroll.clickedPoint.y = e.clientY - _this._scroll.livePosition.y; // track the mouse events\n\n        document.addEventListener('mousemove', _this._scrollDrag);\n        document.addEventListener('mouseup', _this._scrollUp);\n      };\n\n      this._scrollDrag = function (e) {\n        if (_this._global.mode === 'horizontal') {\n          // calculate the amount the user moved from the clicked point on the scrollbar, checking limits\n          _this._scroll.position.x = Math.min(0, Math.max(_this._scroll.maxScroll.x, e.clientX - _this._scroll.clickedPoint.x)); // update global percentage\n\n          _this._global.percent.x = _this._scroll.position.x / _this._scroll.maxScroll.x;\n        } else {\n          // calculate the amount the user moved from the clicked point on the scrollbar, checking limits\n          _this._scroll.position.y = Math.min(0, Math.max(_this._scroll.maxScroll.y, e.clientY - _this._scroll.clickedPoint.y)); // update global percentage\n\n          _this._global.percent.y = _this._scroll.position.y / _this._scroll.maxScroll.y;\n        }\n      };\n\n      this._scrollUp = function () {\n        gsap/* gsap.delayedCall */.p8.delayedCall(0.2, function () {\n          _this._scroll.target.parentNode.style.pointerEvents = 'all';\n        }); // stop tracking the two mouse events\n\n        document.removeEventListener('mousemove', _this._scrollDrag);\n        document.removeEventListener('mouseup', _this._scrollUp); // set flag\n\n        _this._scroll.dragging = false;\n\n        _this._scroll.target.classList.remove('dragging');\n      }; // bind mousedown event\n\n\n      if (this._global.mode === 'horizontal') this._scroll.target.addEventListener('mousedown', this._scrollDown);\n\n      this._scrollMove = function (e) {\n        _this._onScroll(); // Prevent pointerevents on scroll\n\n\n        _this._scroll.target.parentNode.style.pointerEvents = 'none';\n        clearTimeout(_this._scroll.timeout);\n        _this._scroll.timeout = setTimeout(function () {\n          _this._scroll.target.parentNode.style.pointerEvents = 'all';\n        }, 200); // check if scroll is allowed\n\n        if (!_this._scroll.enable) return; // update scroll\n\n        if (_this._global.mode === 'horizontal') {\n          // get scroll values\n          _this._scroll.position.x = Math.min(0, Math.max(_this._scroll.maxScroll.x, _this._scroll.position.x += e.deltaY));\n          _this._scroll.position.x = Math.min(0, Math.max(_this._scroll.maxScroll.x, _this._scroll.position.x += e.deltaX));\n          _this._global.percent.x = _this._scroll.position.x / _this._scroll.maxScroll.x;\n          _this._scroll.lastPosition.x = _this._scroll.position.x;\n        } else {\n          // get scroll values\n          _this._scroll.position.y = Math.min(0, Math.max(_this._scroll.maxScroll.y, _this._scroll.position.y += e.deltaY));\n          _this._global.percent.y = _this._scroll.position.y / _this._scroll.maxScroll.y;\n          _this._scroll.lastPosition.y = _this._scroll.position.y;\n        }\n\n        e.originalEvent.preventDefault();\n      };\n\n      this._scrollRaf = function () {\n        if (_this._global.mode === 'horizontal') _this._scroll.livePosition.x = lerp(_this._scroll.livePosition.x, _this._scroll.maxScroll.x * _this._global.percent.x, 0.1);else _this._scroll.livePosition.y = lerp(_this._scroll.livePosition.y, _this._scroll.maxScroll.y * _this._global.percent.y, 0.1);\n        _this._scroll.target.style.transform = 'translate3d(' + _this._scroll.livePosition.x + 'px,' + _this._scroll.livePosition.y + 'px, 0px)';\n      };\n\n      this._onKeyDown = function (e) {\n        // Return if input is focused\n        var $inputs = document.querySelectorAll('input');\n\n        for (var i = 0; i < $inputs.length; i++) {\n          if (document.activeElement.name === $inputs[i].name) return false;\n        } // init scroll values\n\n\n        var scrollX = 0;\n        var scrollY = 0; // get window height and width\n\n        var windowHeight = window.innerHeight - 40;\n        var windowWidth = window.innerWidth - 40; // check pressed key\n\n        switch (e.keyCode) {\n          case 37:\n            scrollX = -120;\n            break;\n\n          case 38:\n            scrollY = -120;\n            break;\n\n          case 39:\n            scrollX = 120;\n            break;\n\n          case 40:\n            scrollY = 120;\n            break;\n\n          case  true && e.shiftKey:\n            scrollX = -windowWidth;\n            scrollY = -windowHeight;\n            break;\n\n          case 32:\n            scrollX = windowWidth;\n            scrollY = windowHeight;\n            break;\n\n          default:\n            return;\n        } // update scroll\n\n\n        _this.scrollUpdate(scrollX, scrollY);\n      };\n    } // bar properties\n\n\n    if (options.bar) {\n      this._bar = {\n        enable: true,\n        target: options.barTarget,\n        width: 0,\n        height: 0,\n        dragging: false,\n        ratio: {\n          x: 0,\n          y: 0\n        },\n        position: {\n          x: 0,\n          y: 0\n        },\n        livePosition: {\n          x: 0,\n          y: 0\n        },\n        maxScroll: {\n          x: 0,\n          y: 0\n        },\n        clickedPoint: {\n          x: 0,\n          y: 0\n        }\n      };\n\n      this._barDown = function (e) {\n        // set flag\n        _this._bar.dragging = true;\n\n        _this._bar.target.classList.add('dragging'); // get the point the user clicked on the bar\n\n\n        _this._bar.clickedPoint.x = e.clientX - _this._bar.livePosition.x;\n        _this._bar.clickedPoint.y = e.clientY - _this._bar.livePosition.y; // track the mouse events\n\n        document.addEventListener('mousemove', _this._barMove);\n        document.addEventListener('mouseup', _this._barUp);\n      };\n\n      this._barMove = function (e) {\n        if (_this._global.mode === 'horizontal') {\n          // calculate the amount the user moved from the clicked point on the scrollbar, checking limits\n          _this._bar.position.x = Math.min(Math.max(e.clientX - _this._bar.clickedPoint.x, 0), _this._bar.maxScroll.x); // update global percentage\n\n          _this._global.percent.x = _this._bar.position.x / _this._bar.maxScroll.x;\n          _this._scroll.position.x = _this._global.percent.x * _this._scroll.maxScroll.x;\n        } else {\n          // calculate the amount the user moved from the clicked point on the scrollbar, checking limits\n          _this._bar.position.y = Math.min(Math.max(e.clientY - _this._bar.clickedPoint.y, 0), _this._bar.maxScroll.y); // update global percentage\n\n          _this._global.percent.y = _this._bar.position.y / _this._bar.maxScroll.y;\n          _this._scroll.position.y = _this._global.percent.y * _this._scroll.maxScroll.y;\n        }\n      };\n\n      this._barUp = function () {\n        // stop tracking the two mouse events\n        document.removeEventListener('mousemove', _this._barMove);\n        document.removeEventListener('mouseup', _this._barUp); // set flag\n\n        _this._bar.dragging = false;\n\n        _this._bar.target.classList.remove('dragging');\n      };\n\n      this._barRaf = function () {\n        if (_this._global.mode === 'horizontal') _this._bar.livePosition.x = lerp(_this._bar.livePosition.x, _this._bar.maxScroll.x * _this._global.percent.x, 0.1);else _this._bar.livePosition.y = lerp(_this._bar.livePosition.y, _this._bar.maxScroll.y * _this._global.percent.y, 0.1);\n        _this._bar.target.style.transform = 'translate3d(' + _this._bar.livePosition.x + 'px,' + _this._bar.livePosition.y + 'px, 0px)';\n      }; // bind mousedown event\n\n\n      this._bar.target.addEventListener('mousedown', this._barDown);\n    }\n\n    this._raf = function () {\n      if (!_this._scroll.enable) return;\n      if (_this._scroll) _this._scrollRaf();\n      if (_this._bar) _this._barRaf();\n\n      _this._onRaf(_this._scroll.livePosition, _this._global.percent);\n    }; // bind to gsap ticker\n\n\n    gsap/* gsap.ticker.add */.p8.ticker.add(this._raf); // bind\n\n    this.init();\n  }\n\n  superScroller_createClass(_default, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      // virtualscroll properties\n      if (this._virtualScroll !== 'undefined') {\n        this._virtualScroll = new (virtualscroll_default())(this._virtualScrollOptions);\n\n        this._virtualScroll.on(function (e) {\n          _this2._scrollMove(e);\n        }); // bind keydown event\n\n\n        document.addEventListener('keydown', this._onKeyDown);\n      }\n    }\n  }, {\n    key: \"scrollUpdate\",\n    value: function scrollUpdate(scrollX, scrollY) {\n      // Update scroll values\n      this._scroll.position.x = Math.min(0, Math.max(this._scroll.position.x -= scrollX, this._scroll.maxScroll.y));\n      this._scroll.position.y = Math.min(0, Math.max(this._scroll.position.y -= scrollY, this._scroll.maxScroll.y));\n      gsap/* gsap.to */.p8.to(this._global.percent, {\n        x: this._scroll.position.x / this._scroll.maxScroll.x,\n        y: this._scroll.position.y / this._scroll.maxScroll.y,\n        ease: 'power4.out',\n        duration: 0.4\n      });\n    }\n  }, {\n    key: \"scrollAnimate\",\n    value: function scrollAnimate(_position) {\n      var _duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n\n      var _ease = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'power4.inOut';\n\n      var _force = arguments.length > 3 ? arguments[3] : undefined;\n\n      _duration = this.appStore.client.browser === 'firefox' ? _duration / 2 : _duration;\n      if (!_force && !this._scroll.enable) return;\n      this._scroll.position.y = Math.max(-_position, this._scroll.maxScroll.y);\n      gsap/* gsap.to */.p8.to(this._global.percent, {\n        y: this._scroll.position.y / this._scroll.maxScroll.y,\n        ease: _ease,\n        duration: _duration\n      });\n    }\n  }, {\n    key: \"scrollResize\",\n    value: function scrollResize() {\n      //\n      this._scroll.width = this._scroll.target.getBoundingClientRect().width;\n      this._scroll.height = this._scroll.target.getBoundingClientRect().height;\n      this._scroll.maxScroll.x = -(this._scroll.width - window.innerWidth);\n      this._scroll.maxScroll.y = -(this._scroll.height - window.innerHeight);\n    }\n  }, {\n    key: \"barResize\",\n    value: function barResize() {\n      // get container el sizes\n      this._bar.parentWidth = this._bar.target.parentNode.getBoundingClientRect().width;\n      this._bar.parentHeight = this._bar.target.parentNode.getBoundingClientRect().height; // get bar size\n\n      if (this._global.mode === 'horizontal') {\n        this._bar.width = this._bar.parentWidth * this._bar.parentWidth / this._scroll.width;\n        this._bar.height = this._bar.target.getBoundingClientRect().height;\n        this._bar.target.style.width = this._bar.width + 'px';\n      } else {\n        this._bar.width = this._bar.target.getBoundingClientRect().width;\n        this._bar.height = this._bar.parentHeight * this._bar.parentHeight / this._scroll.height;\n        this._bar.target.style.height = this._bar.height + 'px';\n      } // calculate maximum scroll\n\n\n      this._bar.maxScroll.x = this._bar.parentWidth - this._bar.width;\n      this._bar.maxScroll.y = this._bar.parentHeight - this._bar.height;\n      this._bar.ratio.x = this._bar.width / this._bar.parentWidth;\n      this._bar.ratio.y = this._bar.height / this._bar.parentHeight;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      if (this._scroll) this.scrollResize();\n      if (this._bar) this.barResize();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      gsap/* gsap.ticker.remove */.p8.ticker.remove(this._raf);\n    }\n  }]);\n\n  return _default;\n}();\n\n\n;// CONCATENATED MODULE: ./app/src/js/utils/strings.js\n/*!\n * strings: 3.2.6\n * https://greensock.com\n *\n * Copyright 2008-2020, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nvar _trimExp = /(^\\s+|\\s+$)/g;\nvar emojiExp = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF](?:[\\u200D\\uFE0F][\\uD800-\\uDBFF][\\uDC00-\\uDFFF]){2,}|\\uD83D\\uDC69(?:\\u200D(?:(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC67|(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC66)|\\uD83C[\\uDFFB-\\uDFFF])|\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C\\uDFF3\\uFE0F\\u200D\\uD83C\\uDF08|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]\\uFE0F|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92])|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC6F\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3C-\\uDD3E\\uDDD6-\\uDDDF])\\u200D[\\u2640\\u2642]\\uFE0F|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83C\\uDDE9(?:\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF])|\\uD83C\\uDDF7(?:\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC])|\\uD83C\\uDDE8(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uFE0F\\u200D[\\u2640\\u2642]|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642])\\uFE0F|(?:\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\uD83D\\uDC69\\u200D[\\u2695\\u2696\\u2708]|\\uD83D\\uDC68(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708]))\\uFE0F|\\uD83C\\uDDF2(?:\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF])|\\uD83D\\uDC69\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D(?:\\uD83D[\\uDC68\\uDC69])|\\uD83D[\\uDC68\\uDC69]))|\\uD83C\\uDDF1(?:\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE])|\\uD83C\\uDDEF(?:\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5])|\\uD83C\\uDDED(?:\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA])|\\uD83C\\uDDEB(?:\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7])|[#\\*0-9]\\uFE0F\\u20E3|\\uD83C\\uDDE7(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDE6(?:\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF])|\\uD83C\\uDDFF(?:\\uD83C[\\uDDE6\\uDDF2\\uDDFC])|\\uD83C\\uDDF5(?:\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE])|\\uD83C\\uDDFB(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA])|\\uD83C\\uDDF3(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF])|\\uD83C\\uDFF4\\uDB40\\uDC67\\uDB40\\uDC62(?:\\uDB40\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73|\\uDB40\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74|\\uDB40\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67)\\uDB40\\uDC7F|\\uD83D\\uDC68(?:\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83D\\uDC68|(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92])|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]))|\\uD83C\\uDDF8(?:\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF])|\\uD83C\\uDDF0(?:\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDFE(?:\\uD83C[\\uDDEA\\uDDF9])|\\uD83C\\uDDEE(?:\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9])|\\uD83C\\uDDF9(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF])|\\uD83C\\uDDEC(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE])|\\uD83C\\uDDFA(?:\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF])|\\uD83C\\uDDEA(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA])|\\uD83C\\uDDFC(?:\\uD83C[\\uDDEB\\uDDF8])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2\\uDFC7]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC70\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDCAA\\uDD74\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD30-\\uDD36\\uDDD1-\\uDDD5])(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83D\\uDC68(?:\\u200D(?:(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC67|(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC66)|\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u26F9\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2-\\uDFC4\\uDFC7\\uDFCA-\\uDFCC]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66-\\uDC69\\uDC6E\\uDC70-\\uDC78\\uDC7C\\uDC81-\\uDC83\\uDC85-\\uDC87\\uDCAA\\uDD74\\uDD75\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE45-\\uDE47\\uDE4B-\\uDE4F\\uDEA3\\uDEB4-\\uDEB6\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD26\\uDD30-\\uDD39\\uDD3D\\uDD3E\\uDDD1-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])?|(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDEEB\\uDEEC\\uDEF4-\\uDEF8]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD4C\\uDD50-\\uDD6B\\uDD80-\\uDD97\\uDDC0\\uDDD0-\\uDDE6])|(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDEE0-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEF8]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD4C\\uDD50-\\uDD6B\\uDD80-\\uDD97\\uDDC0\\uDDD0-\\uDDE6])\\uFE0F)/;\nfunction getText(e) {\n  var type = e.nodeType,\n      result = \"\";\n\n  if (type === 1 || type === 9 || type === 11) {\n    if (typeof e.textContent === \"string\") {\n      return e.textContent;\n    } else {\n      for (e = e.firstChild; e; e = e.nextSibling) {\n        result += getText(e);\n      }\n    }\n  } else if (type === 3 || type === 4) {\n    return e.nodeValue;\n  }\n\n  return result;\n}\nfunction splitInnerHTML(element, delimiter, trim) {\n  var node = element.firstChild,\n      result = [];\n\n  while (node) {\n    if (node.nodeType === 3) {\n      result.push.apply(result, emojiSafeSplit((node.nodeValue + \"\").replace(/^\\n+/g, \"\").replace(/\\s+/g, \" \"), delimiter, trim));\n    } else if ((node.nodeName + \"\").toLowerCase() === \"br\") {\n      result[result.length - 1] += \"<br>\";\n    } else {\n      result.push(node.outerHTML);\n    }\n\n    node = node.nextSibling;\n  }\n\n  return result;\n}\n/*\n//smaller kb version that only handles the simpler emoji's, which is often perfectly adequate.\n\nlet _emoji = \"[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2694-\\u2697]|\\uD83E[\\uDD10-\\uDD5D]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]\",\n\t_emojiExp = new RegExp(_emoji),\n\t_emojiAndCharsExp = new RegExp(_emoji + \"|.\", \"g\"),\n\t_emojiSafeSplit = (text, delimiter, trim) => {\n\t\tif (trim) {\n\t\t\ttext = text.replace(_trimExp, \"\");\n\t\t}\n\t\treturn ((delimiter === \"\" || !delimiter) && _emojiExp.test(text)) ? text.match(_emojiAndCharsExp) : text.split(delimiter || \"\");\n\t};\n */\n\nfunction emojiSafeSplit(text, delimiter, trim) {\n  text += \"\"; // make sure it's cast as a string. Someone may pass in a number.\n\n  if (trim) {\n    text = text.replace(_trimExp, \"\");\n  }\n\n  if (delimiter && delimiter !== \"\") {\n    return text.replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\").split(delimiter);\n  }\n\n  var result = [],\n      l = text.length,\n      i = 0,\n      j,\n      character;\n\n  for (; i < l; i++) {\n    character = text.charAt(i);\n\n    if (character.charCodeAt(0) >= 0xD800 && character.charCodeAt(0) <= 0xDBFF || text.charCodeAt(i + 1) >= 0xFE00 && text.charCodeAt(i + 1) <= 0xFE0F) {\n      //special emoji characters use 2 or 4 unicode characters that we must keep together.\n      j = ((text.substr(i, 12).split(emojiExp) || [])[1] || \"\").length || 2;\n      character = text.substr(i, j);\n      result.emoji = 1;\n      i += j - 1;\n    }\n\n    result.push(character === \">\" ? \"&gt;\" : character === \"<\" ? \"&lt;\" : character);\n  }\n\n  return result;\n}\n;// CONCATENATED MODULE: ./app/src/js/classes/splitText.js\nfunction splitText_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { splitText_typeof = function _typeof(obj) { return typeof obj; }; } else { splitText_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return splitText_typeof(obj); }\n\n/*!\n * SplitText: 3.2.6\n * https://greensock.com\n *\n * @license Copyright 2008-2020, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\n\n\nvar _doc,\n    _win,\n    _coreInitted,\n    _stripExp = /(?:\\r|\\n|\\t\\t)/g,\n    //find carriage returns, new line feeds and double-tabs.\n_multipleSpacesExp = /(?:\\s\\s+)/g,\n    _initCore = function _initCore() {\n  _doc = document;\n  _win = window;\n  _coreInitted = 1;\n},\n    _bonusValidated = 1,\n    //<name>SplitText</name>\n_getComputedStyle = function _getComputedStyle(element) {\n  return _win.getComputedStyle(element);\n},\n    _isArray = Array.isArray,\n    _slice = [].slice,\n    _toArray = function _toArray(value, leaveStrings) {\n  //takes any value and returns an array. If it's a string (and leaveStrings isn't true), it'll use document.querySelectorAll() and convert that to an array. It'll also accept iterables like jQuery objects.\n  var type;\n  return _isArray(value) ? value : (type = splitText_typeof(value)) === \"string\" && !leaveStrings && value ? _slice.call(_doc.querySelectorAll(value), 0) : value && type === \"object\" && \"length\" in value ? _slice.call(value, 0) : value ? [value] : [];\n},\n    _isAbsolute = function _isAbsolute(vars) {\n  return vars.position === \"absolute\" || vars.absolute === true;\n},\n    //some characters are combining marks (think diacritics/accents in European languages) which involve 2 or 4 characters that combine in the browser to form a single character. Pass in the remaining text and an array of the special characters to search for and if the text starts with one of those special characters, it'll spit back the number of characters to retain (often 2 or 4). Used in the specialChars features that was introduced in 0.6.0.\n_findSpecialChars = function _findSpecialChars(text, chars) {\n  var i = chars.length,\n      s;\n\n  while (--i > -1) {\n    s = chars[i];\n\n    if (text.substr(0, s.length) === s) {\n      return s.length;\n    }\n  }\n},\n    _divStart = \" style='position:relative;display:inline-block;'\",\n    _cssClassFunc = function _cssClassFunc(cssClass, tag) {\n  if (cssClass === void 0) {\n    cssClass = \"\";\n  }\n\n  var iterate = ~cssClass.indexOf(\"++\"),\n      num = 1;\n\n  if (iterate) {\n    cssClass = cssClass.split(\"++\").join(\"\");\n  }\n\n  return function () {\n    return \"<\" + tag + _divStart + (cssClass ? \" class='\" + cssClass + (iterate ? num++ : \"\") + \"'>\" : \">\");\n  };\n},\n    _swapText = function _swapText(element, oldText, newText) {\n  var type = element.nodeType;\n\n  if (type === 1 || type === 9 || type === 11) {\n    for (element = element.firstChild; element; element = element.nextSibling) {\n      _swapText(element, oldText, newText);\n    }\n  } else if (type === 3 || type === 4) {\n    element.nodeValue = element.nodeValue.split(oldText).join(newText);\n  }\n},\n    _pushReversed = function _pushReversed(a, merge) {\n  var i = merge.length;\n\n  while (--i > -1) {\n    a.push(merge[i]);\n  }\n},\n    _isBeforeWordDelimiter = function _isBeforeWordDelimiter(e, root, wordDelimiter) {\n  var next;\n\n  while (e && e !== root) {\n    next = e._next || e.nextSibling;\n\n    if (next) {\n      return next.textContent.charAt(0) === wordDelimiter;\n    }\n\n    e = e.parentNode || e._parent;\n  }\n},\n    _deWordify = function _deWordify(e) {\n  var children = _toArray(e.childNodes),\n      l = children.length,\n      i,\n      child;\n\n  for (i = 0; i < l; i++) {\n    child = children[i];\n\n    if (child._isSplit) {\n      _deWordify(child);\n    } else {\n      if (i && child.previousSibling.nodeType === 3) {\n        child.previousSibling.nodeValue += child.nodeType === 3 ? child.nodeValue : child.firstChild.nodeValue;\n      } else if (child.nodeType !== 3) {\n        e.insertBefore(child.firstChild, child);\n      }\n\n      e.removeChild(child);\n    }\n  }\n},\n    _getStyleAsNumber = function _getStyleAsNumber(name, computedStyle) {\n  return parseFloat(computedStyle[name]) || 0;\n},\n    _setPositionsAfterSplit = function _setPositionsAfterSplit(element, vars, allChars, allWords, allLines, origWidth, origHeight) {\n  var cs = _getComputedStyle(element),\n      paddingLeft = _getStyleAsNumber(\"paddingLeft\", cs),\n      lineOffsetY = -999,\n      borderTopAndBottom = _getStyleAsNumber(\"borderBottomWidth\", cs) + _getStyleAsNumber(\"borderTopWidth\", cs),\n      borderLeftAndRight = _getStyleAsNumber(\"borderLeftWidth\", cs) + _getStyleAsNumber(\"borderRightWidth\", cs),\n      padTopAndBottom = _getStyleAsNumber(\"paddingTop\", cs) + _getStyleAsNumber(\"paddingBottom\", cs),\n      padLeftAndRight = _getStyleAsNumber(\"paddingLeft\", cs) + _getStyleAsNumber(\"paddingRight\", cs),\n      lineThreshold = _getStyleAsNumber(\"fontSize\", cs) * 0.2,\n      textAlign = cs.textAlign,\n      charArray = [],\n      wordArray = [],\n      lineArray = [],\n      wordDelimiter = vars.wordDelimiter || \" \",\n      tag = vars.tag ? vars.tag : vars.span ? \"span\" : \"div\",\n      types = vars.type || vars.split || \"chars,words,lines\",\n      lines = allLines && ~types.indexOf(\"lines\") ? [] : null,\n      words = ~types.indexOf(\"words\"),\n      chars = ~types.indexOf(\"chars\"),\n      absolute = _isAbsolute(vars),\n      linesClass = vars.linesClass,\n      iterateLine = ~(linesClass || \"\").indexOf(\"++\"),\n      spaceNodesToRemove = [],\n      i,\n      j,\n      l,\n      node,\n      nodes,\n      isChild,\n      curLine,\n      addWordSpaces,\n      style,\n      lineNode,\n      lineWidth,\n      offset;\n\n  if (iterateLine) {\n    linesClass = linesClass.split(\"++\").join(\"\");\n  } //copy all the descendant nodes into an array (we can't use a regular nodeList because it's live and we may need to renest things)\n\n\n  j = element.getElementsByTagName(\"*\");\n  l = j.length;\n  nodes = [];\n\n  for (i = 0; i < l; i++) {\n    nodes[i] = j[i];\n  } //for absolute positioning, we need to record the x/y offsets and width/height for every <div>. And even if we're not positioning things absolutely, in order to accommodate lines, we must figure out where the y offset changes so that we can sense where the lines break, and we populate the lines array.\n\n\n  if (lines || absolute) {\n    for (i = 0; i < l; i++) {\n      node = nodes[i];\n      isChild = node.parentNode === element;\n\n      if (isChild || absolute || chars && !words) {\n        offset = node.offsetTop;\n\n        if (lines && isChild && Math.abs(offset - lineOffsetY) > lineThreshold && (node.nodeName !== \"BR\" || i === 0)) {\n          //we found some rare occasions where a certain character like &#8209; could cause the offsetTop to be off by 1 pixel, so we build in a threshold.\n          curLine = [];\n          lines.push(curLine);\n          lineOffsetY = offset;\n        }\n\n        if (absolute) {\n          //record offset x and y, as well as width and height so that we can access them later for positioning. Grabbing them at once ensures we don't trigger a browser paint & we maximize performance.\n          node._x = node.offsetLeft;\n          node._y = offset;\n          node._w = node.offsetWidth;\n          node._h = node.offsetHeight;\n        }\n\n        if (lines) {\n          if (node._isSplit && isChild || !chars && isChild || words && isChild || !words && node.parentNode.parentNode === element && !node.parentNode._isSplit) {\n            curLine.push(node);\n            node._x -= paddingLeft;\n\n            if (_isBeforeWordDelimiter(node, element, wordDelimiter)) {\n              node._wordEnd = true;\n            }\n          }\n\n          if (node.nodeName === \"BR\" && (node.nextSibling && node.nextSibling.nodeName === \"BR\" || i === 0)) {\n            //two consecutive <br> tags signify a new [empty] line. Also, if the entire block of content STARTS with a <br>, add a line.\n            lines.push([]);\n          }\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < l; i++) {\n    node = nodes[i];\n    isChild = node.parentNode === element;\n\n    if (node.nodeName === \"BR\") {\n      if (lines || absolute) {\n        if (node.parentNode) {\n          node.parentNode.removeChild(node);\n        }\n\n        nodes.splice(i--, 1);\n        l--;\n      } else if (!words) {\n        element.appendChild(node);\n      }\n\n      continue;\n    }\n\n    if (absolute) {\n      style = node.style;\n\n      if (!words && !isChild) {\n        node._x += node.parentNode._x;\n        node._y += node.parentNode._y;\n      }\n\n      style.left = node._x + \"px\";\n      style.top = node._y + \"px\";\n      style.position = \"absolute\";\n      style.display = \"block\"; //if we don't set the width/height, things collapse in older versions of IE and the origin for transforms is thrown off in all browsers.\n\n      style.width = node._w + 1 + \"px\"; //IE is 1px short sometimes. Avoid wrapping\n\n      style.height = node._h + \"px\";\n    }\n\n    if (!words && chars) {\n      //we always start out wrapping words in their own <div> so that line breaks happen correctly, but here we'll remove those <div> tags if necessary and renest the characters directly into the element rather than inside the word <div>\n      if (node._isSplit) {\n        node._next = node.nextSibling;\n        node.parentNode.appendChild(node); //put it at the end to keep the order correct.\n      } else if (node.parentNode._isSplit) {\n        node._parent = node.parentNode;\n\n        if (!node.previousSibling && node.firstChild) {\n          node.firstChild._isFirst = true;\n        }\n\n        if (node.nextSibling && node.nextSibling.textContent === \" \" && !node.nextSibling.nextSibling) {\n          //if the last node inside a nested element is just a space (like T<span>nested </span>), remove it otherwise it'll get placed in the wrong order. Don't remove it right away, though, because we need to sense when words/characters are before a space like _isBeforeWordDelimiter(). Removing it now would make that a false negative.\n          spaceNodesToRemove.push(node.nextSibling);\n        }\n\n        node._next = node.nextSibling && node.nextSibling._isFirst ? null : node.nextSibling;\n        node.parentNode.removeChild(node);\n        nodes.splice(i--, 1);\n        l--;\n      } else if (!isChild) {\n        offset = !node.nextSibling && _isBeforeWordDelimiter(node.parentNode, element, wordDelimiter); //if this is the last letter in the word (and we're not breaking by lines and not positioning things absolutely), we need to add a space afterwards so that the characters don't just mash together\n\n        if (node.parentNode._parent) {\n          node.parentNode._parent.appendChild(node);\n        }\n\n        if (offset) {\n          node.parentNode.appendChild(_doc.createTextNode(\" \"));\n        }\n\n        if (tag === \"span\") {\n          node.style.display = \"inline\"; //so that word breaks are honored properly.\n        }\n\n        charArray.push(node);\n      }\n    } else if (node.parentNode._isSplit && !node._isSplit && node.innerHTML !== \"\") {\n      wordArray.push(node);\n    } else if (chars && !node._isSplit) {\n      if (tag === \"span\") {\n        node.style.display = \"inline\";\n      }\n\n      charArray.push(node);\n    }\n  }\n\n  i = spaceNodesToRemove.length;\n\n  while (--i > -1) {\n    spaceNodesToRemove[i].parentNode.removeChild(spaceNodesToRemove[i]);\n  }\n\n  if (lines) {\n    //the next 7 lines just give us the line width in the most reliable way and figure out the left offset (if position isn't relative or absolute). We must set the width along with text-align to ensure everything works properly for various alignments.\n    if (absolute) {\n      lineNode = _doc.createElement(tag);\n      element.appendChild(lineNode);\n      lineWidth = lineNode.offsetWidth + \"px\";\n      offset = lineNode.offsetParent === element ? 0 : element.offsetLeft;\n      element.removeChild(lineNode);\n    }\n\n    style = element.style.cssText;\n    element.style.cssText = \"display:none;\"; //to improve performance, set display:none on the element so that the browser doesn't have to worry about reflowing or rendering while we're renesting things. We'll revert the cssText later.\n    //we can't use element.innerHTML = \"\" because that causes IE to literally delete all the nodes and their content even though we've stored them in an array! So we must loop through the children and remove them.\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    addWordSpaces = wordDelimiter === \" \" && (!absolute || !words && !chars);\n\n    for (i = 0; i < lines.length; i++) {\n      curLine = lines[i];\n      lineNode = _doc.createElement(tag);\n      lineNode.style.cssText = \"display:block;text-align:\" + textAlign + \";position:\" + (absolute ? \"absolute;\" : \"relative;\");\n\n      if (linesClass) {\n        lineNode.className = linesClass + (iterateLine ? i + 1 : \"\");\n      }\n\n      lineArray.push(lineNode);\n      l = curLine.length;\n\n      for (j = 0; j < l; j++) {\n        if (curLine[j].nodeName !== \"BR\") {\n          node = curLine[j];\n          lineNode.appendChild(node);\n\n          if (addWordSpaces && node._wordEnd) {\n            lineNode.appendChild(_doc.createTextNode(\" \"));\n          }\n\n          if (absolute) {\n            if (j === 0) {\n              lineNode.style.top = node._y + \"px\";\n              lineNode.style.left = paddingLeft + offset + \"px\";\n            }\n\n            node.style.top = \"0px\";\n\n            if (offset) {\n              node.style.left = node._x - offset + \"px\";\n            }\n          }\n        }\n      }\n\n      if (l === 0) {\n        //if there are no nodes in the line (typically meaning there were two consecutive <br> tags, just add a non-breaking space so that things display properly.\n        lineNode.innerHTML = \"&nbsp;\";\n      } else if (!words && !chars) {\n        _deWordify(lineNode);\n\n        _swapText(lineNode, String.fromCharCode(160), \" \");\n      }\n\n      if (absolute) {\n        lineNode.style.width = lineWidth;\n        lineNode.style.height = node._h + \"px\";\n      }\n\n      element.appendChild(lineNode);\n    }\n\n    element.style.cssText = style;\n  } //if everything shifts to being position:absolute, the container can collapse in terms of height or width, so fix that here.\n\n\n  if (absolute) {\n    if (origHeight > element.clientHeight) {\n      element.style.height = origHeight - padTopAndBottom + \"px\";\n\n      if (element.clientHeight < origHeight) {\n        //IE8 and earlier use a different box model - we must include padding and borders\n        element.style.height = origHeight + borderTopAndBottom + \"px\";\n      }\n    }\n\n    if (origWidth > element.clientWidth) {\n      element.style.width = origWidth - padLeftAndRight + \"px\";\n\n      if (element.clientWidth < origWidth) {\n        //IE8 and earlier use a different box model - we must include padding and borders\n        element.style.width = origWidth + borderLeftAndRight + \"px\";\n      }\n    }\n  }\n\n  _pushReversed(allChars, charArray);\n\n  if (words) {\n    _pushReversed(allWords, wordArray);\n  }\n\n  _pushReversed(allLines, lineArray);\n},\n    _splitRawText = function _splitRawText(element, vars, wordStart, charStart) {\n  var tag = vars.tag ? vars.tag : vars.span ? \"span\" : \"div\",\n      types = vars.type || vars.split || \"chars,words,lines\",\n      //words = (types.indexOf(\"words\") !== -1),\n  chars = ~types.indexOf(\"chars\"),\n      absolute = _isAbsolute(vars),\n      wordDelimiter = vars.wordDelimiter || \" \",\n      space = wordDelimiter !== \" \" ? \"\" : absolute ? \"&#173; \" : \" \",\n      wordEnd = \"</\" + tag + \">\",\n      wordIsOpen = 1,\n      specialChars = vars.specialChars ? typeof vars.specialChars === \"function\" ? vars.specialChars : _findSpecialChars : null,\n      //specialChars can be an array or a function. For performance reasons, we always set this local \"specialChars\" to a function to which we pass the remaining text and whatever the original vars.specialChars was so that if it's an array, it works with the _findSpecialChars() function.\n  text,\n      splitText,\n      i,\n      j,\n      l,\n      character,\n      hasTagStart,\n      testResult,\n      container = _doc.createElement(\"div\"),\n      parent = element.parentNode;\n\n  parent.insertBefore(container, element);\n  container.textContent = element.nodeValue;\n  parent.removeChild(element);\n  element = container;\n  text = getText(element);\n  hasTagStart = text.indexOf(\"<\") !== -1;\n\n  if (vars.reduceWhiteSpace !== false) {\n    text = text.replace(_multipleSpacesExp, \" \").replace(_stripExp, \"\");\n  }\n\n  if (hasTagStart) {\n    text = text.split(\"<\").join(\"{{LT}}\"); //we can't leave \"<\" in the string, or when we set the innerHTML, it can be interpreted as a node\n  }\n\n  l = text.length;\n  splitText = (text.charAt(0) === \" \" ? space : \"\") + wordStart();\n\n  for (i = 0; i < l; i++) {\n    character = text.charAt(i);\n\n    if (specialChars && (testResult = specialChars(text.substr(i), vars.specialChars))) {\n      // look for any specialChars that were declared. Remember, they can be passed in like {specialChars:[\"\", \"\", \"\"]} or a function could be defined instead. Either way, the function should return the number of characters that should be grouped together for this \"character\".\n      character = text.substr(i, testResult || 1);\n      splitText += chars && character !== \" \" ? charStart() + character + \"</\" + tag + \">\" : character;\n      i += testResult - 1;\n    } else if (character === wordDelimiter && text.charAt(i - 1) !== wordDelimiter && i) {\n      splitText += wordIsOpen ? wordEnd : \"\";\n      wordIsOpen = 0;\n\n      while (text.charAt(i + 1) === wordDelimiter) {\n        //skip over empty spaces (to avoid making them words)\n        splitText += space;\n        i++;\n      }\n\n      if (i === l - 1) {\n        splitText += space;\n      } else if (text.charAt(i + 1) !== \")\") {\n        splitText += space + wordStart();\n        wordIsOpen = 1;\n      }\n    } else if (character === \"{\" && text.substr(i, 6) === \"{{LT}}\") {\n      splitText += chars ? charStart() + \"{{LT}}\" + \"</\" + tag + \">\" : \"{{LT}}\";\n      i += 5;\n    } else if (character.charCodeAt(0) >= 0xD800 && character.charCodeAt(0) <= 0xDBFF || text.charCodeAt(i + 1) >= 0xFE00 && text.charCodeAt(i + 1) <= 0xFE0F) {\n      //special emoji characters use 2 or 4 unicode characters that we must keep together.\n      j = ((text.substr(i, 12).split(emojiExp) || [])[1] || \"\").length || 2;\n      splitText += chars && character !== \" \" ? charStart() + text.substr(i, j) + \"</\" + tag + \">\" : text.substr(i, j);\n      i += j - 1;\n    } else {\n      splitText += chars && character !== \" \" ? charStart() + character + \"</\" + tag + \">\" : character;\n    }\n  }\n\n  element.outerHTML = splitText + (wordIsOpen ? wordEnd : \"\");\n\n  if (hasTagStart) {\n    _swapText(parent, \"{{LT}}\", \"<\"); //note: don't perform this on \"element\" because that gets replaced with all new elements when we set element.outerHTML.\n\n  }\n},\n    _split = function _split(element, vars, wordStart, charStart) {\n  var children = _toArray(element.childNodes),\n      l = children.length,\n      absolute = _isAbsolute(vars),\n      i,\n      child;\n\n  if (element.nodeType !== 3 || l > 1) {\n    vars.absolute = false;\n\n    for (i = 0; i < l; i++) {\n      child = children[i];\n\n      if (child.nodeType !== 3 || /\\S+/.test(child.nodeValue)) {\n        if (absolute && child.nodeType !== 3 && _getComputedStyle(child).display === \"inline\") {\n          //if there's a child node that's display:inline, switch it to inline-block so that absolute positioning works properly (most browsers don't report offsetTop/offsetLeft properly inside a <span> for example)\n          child.style.display = \"inline-block\";\n          child.style.position = \"relative\";\n        }\n\n        child._isSplit = true;\n\n        _split(child, vars, wordStart, charStart); //don't split lines on child elements\n\n      }\n    }\n\n    vars.absolute = absolute;\n    element._isSplit = true;\n    return;\n  }\n\n  _splitRawText(element, vars, wordStart, charStart);\n};\n\nvar SplitText = /*#__PURE__*/function () {\n  function SplitText(element, vars) {\n    if (!_coreInitted) {\n      _initCore();\n    }\n\n    this.elements = _toArray(element);\n    this.chars = [];\n    this.words = [];\n    this.lines = [];\n    this._originals = [];\n    this.vars = vars || {};\n\n    if (_bonusValidated) {\n      this.split(vars);\n    }\n  }\n\n  var _proto = SplitText.prototype;\n\n  _proto.split = function split(vars) {\n    if (this.isSplit) {\n      this.revert();\n    }\n\n    this.vars = vars = vars || this.vars;\n    this._originals.length = this.chars.length = this.words.length = this.lines.length = 0;\n\n    var i = this.elements.length,\n        tag = vars.tag ? vars.tag : vars.span ? \"span\" : \"div\",\n        wordStart = _cssClassFunc(vars.wordsClass, tag),\n        charStart = _cssClassFunc(vars.charsClass, tag),\n        origHeight,\n        origWidth,\n        e; //we split in reversed order so that if/when we position:absolute elements, they don't affect the position of the ones after them in the document flow (shifting them up as they're taken out of the document flow).\n\n\n    while (--i > -1) {\n      e = this.elements[i];\n      this._originals[i] = e.innerHTML;\n      origHeight = e.clientHeight;\n      origWidth = e.clientWidth;\n\n      _split(e, vars, wordStart, charStart);\n\n      _setPositionsAfterSplit(e, vars, this.chars, this.words, this.lines, origWidth, origHeight);\n    }\n\n    this.chars.reverse();\n    this.words.reverse();\n    this.lines.reverse();\n    this.isSplit = true;\n    return this;\n  };\n\n  _proto.revert = function revert() {\n    var originals = this._originals;\n\n    if (!originals) {\n      throw \"revert() call wasn't scoped properly.\";\n    }\n\n    this.elements.forEach(function (e, i) {\n      return e.innerHTML = originals[i];\n    });\n    this.chars = [];\n    this.words = [];\n    this.lines = [];\n    this.isSplit = false;\n    return this;\n  };\n\n  SplitText.create = function create(element, vars) {\n    return new SplitText(element, vars);\n  };\n\n  return SplitText;\n}();\nSplitText.version = \"3.2.6\";\n\n;// CONCATENATED MODULE: ./app/src/js/renderers/renderer.js\nfunction renderer_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { renderer_typeof = function _typeof(obj) { return typeof obj; }; } else { renderer_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return renderer_typeof(obj); }\n\nfunction renderer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction renderer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction renderer_createClass(Constructor, protoProps, staticProps) { if (protoProps) renderer_defineProperties(Constructor.prototype, protoProps); if (staticProps) renderer_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (renderer_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n// app\n\n\n // classes\n\n // Highway\n\n // Preload\n\n\n // Utilities\n\n\n // import SuperObserver from '../classes/superObserver';\n// Gsap\n\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z);\n\nvar Renderer = /*#__PURE__*/function (_Highway$Renderer) {\n  _inherits(Renderer, _Highway$Renderer);\n\n  var _super = _createSuper(Renderer);\n\n  function Renderer(properties) {\n    var _this;\n\n    renderer_classCallCheck(this, Renderer);\n\n    _this = _super.call(this, properties); // store\n\n    _this.appStore = appStore; // app references\n\n    _this.appCore = new app_appCore();\n    _this.appUi = new app_appUi(); // Events\n\n    _this.domEvents = new domEvents_default(); // Save slug\n    // if(this.appStore.from === 'home')\n    //     this.appUi.navigation.isLocked = true;\n\n    _this.hash = window.location.hash !== '' ? window.location.hash : null;\n    _this.params = new URLSearchParams(window.location.search);\n    _this.appStore.firstNavigation = _this.appStore.currentSection === null;\n    _this.appStore.current = _this.properties.slug;\n    _this.appStore.currentSub = _this.appStore.current === 'project' ? location.pathname.split('/')[location.pathname.split('/').length - 2] : null;\n    _this.appStore.currentSection = _assertThisInitialized(_this); // if(this.appStore.firstNavigation)\n    //     this.appStore.firstNavigation();\n    // Preloader\n\n    _this.preloadMain = null;\n    _this.preloadSecondary = null;\n    _this.preloadDelay = _this.appStore.isDesktop ? 3 : 1.2; //this.preloadDelay = 0;\n\n    _this.preloadItems = {\n      main: [],\n      // Mandatory items\n      secondary: [] // Secondary items\n\n    }; // Scroll\n\n    _this.superScroller = null;\n    _this.superTrigger = null;\n    if (history.scrollRestoration) history.scrollRestoration = 'manual';\n    return _this;\n  }\n\n  renderer_createClass(Renderer, [{\n    key: \"onEnter\",\n    value: function onEnter() {\n      this.checkElements();\n      this.preselectors();\n      this.selectors();\n      this.events();\n      this.preload();\n      this.splitTexts = [];\n\n      if (!this.params.has('trp-edit-translation')) {\n        // Set animations\n        this.setLabels();\n        this.setTitles();\n        this.setDescriptions();\n        this.setImages();\n        this.setLinks();\n        this.setMinilines();\n      }\n\n      this.beforeEnter();\n    }\n  }, {\n    key: \"checkElements\",\n    value: function checkElements() {\n      if (this.appStore.isDesktop) {\n        this.$elementsMobile = document.querySelectorAll('[data-mobile]');\n\n        for (var i = 0; i < this.$elementsMobile.length; i++) {\n          this.$elementsMobile[i].remove();\n        }\n      } else {\n        this.$elementsDesktop = document.querySelectorAll('[data-desktop]');\n\n        for (var _i = 0; _i < this.$elementsDesktop.length; _i++) {\n          this.$elementsDesktop[_i].remove();\n        }\n      }\n    }\n  }, {\n    key: \"preselectors\",\n    value: function preselectors() {\n      // Set reference to current section\n      this.$el = this.wrap.lastElementChild;\n      this.$inner = this.$el.querySelector('[data-scroll-wrapper] .inner');\n      this.$scrollbar = this.$el.querySelector('[data-scroll-wrapper] .scrollbar');\n      this.$overlay = this.$el.querySelector('.overlay');\n    }\n  }, {\n    key: \"selectors\",\n    value: function selectors() {} // eslint-disable-line\n\n  }, {\n    key: \"events\",\n    value: function events() {} // eslint-disable-line\n\n  }, {\n    key: \"preload\",\n    value: function preload() {} // eslint-disable-line\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {} // eslint-disable-line\n\n  }, {\n    key: \"onEnterCompleted\",\n    value: function onEnterCompleted() {\n      var _this2 = this;\n\n      // Lazy load\n      this.lazyLoad = new (lazyload_default())(this.lazyLoad, {\n        root: null,\n        rootMargin: window.innerHeight * 0.25 + 'px',\n        threshold: 0\n      }); // this.lazyLoad.loadImages();\n      // If first navigation and need preload\n\n      if (this.preloadItems.main.length > 0 && this.appStore.firstNavigation) {\n        var _index = 0;\n\n        var _preloadOn = new Date().getTime();\n\n        this.preloadMain = preload_it_default()();\n        this.preloadMain.fetch(this.preloadItems.main); // this.preloadMain.onprogress = (event) => { this.appUi.$loaderProgress.innerHTML = event.progress + '%'; };\n\n        this.preloadMain.onprogress = function (event) {\n          var _amount = event.progress / 100;\n\n          console.log(_amount);\n          gsap/* default.to */.ZP.to(_this2.appUi.$loaderProgress.children[0], {\n            scaleX: Math.min(_amount, 0.95),\n            ease: 'expo.inOut',\n            duration: _this2.preloadDelay / (_this2.preloadItems.main.length + 1),\n            delay: _this2.preloadDelay / (_this2.preloadItems.main.length + 1) * _index\n          });\n          _index++;\n        };\n\n        this.preloadMain.oncomplete = function (items) {\n          var _preloadOff = new Date().getTime();\n\n          var _preloadDifference = (_preloadOff - _preloadOn) / 1000;\n\n          var _preloadDelay = Math.max(0, _this2.preloadDelay - _preloadDifference);\n\n          gsap/* default.delayedCall */.ZP.delayedCall(_preloadDelay, function () {\n            gsap/* default.to */.ZP.to(_this2.appUi.$loaderProgress.children[0], {\n              scaleX: 1,\n              ease: 'expo.out',\n              duration: 0.2,\n              onComplete: function onComplete() {\n                _this2.start();\n              }\n            });\n          });\n        };\n      } // if first navigation but dont need preloads\n      else if (this.preloadItems.main.length === 0 && this.appStore.firstNavigation) {\n        // Fake progress\n        var splitProgress = this.appUi.splitInParts(1, 5);\n\n        for (var i = 0; i < splitProgress.length; i++) {\n          var _duration = i === 0 ? this.preloadDelay * splitProgress[0] : this.preloadDelay * splitProgress[i] - this.preloadDelay * splitProgress[i - 1];\n\n          var _delay = i === 0 ? 0 : this.preloadDelay * splitProgress[i - 1];\n\n          gsap/* default.to */.ZP.to(this.appUi.$loaderProgress.children[0], {\n            scaleX: splitProgress[i],\n            ease: 'expo.inOut',\n            duration: _duration,\n            delay: _delay\n          });\n        }\n\n        gsap/* default.delayedCall */.ZP.delayedCall(this.preloadDelay, function () {\n          _this2.start();\n        });\n      } else {\n        this.start();\n      }\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      if (this.appStore.firstNavigation) {\n        // Remove loader\n        this.appUi.hideLoader();\n      }\n\n      this.scroll();\n\n      if (this.appStore.isDesktop) {\n        if (this.appStore.firstNavigation) gsap/* default.fromTo */.ZP.fromTo(this.appStore.currentSection.$el, {\n          y: '-5vw'\n        }, {\n          y: '0vw',\n          duration: 1.8,\n          ease: 'expo.inOut'\n        });else gsap/* default.fromTo */.ZP.fromTo(this.appStore.currentSection.$el, {\n          y: '-5vw'\n        }, {\n          y: '0vw',\n          duration: 1,\n          ease: 'expo.out'\n        });\n      } else {\n        if (this.appStore.firstNavigation) gsap/* default.to */.ZP.to(this.appStore.currentSection.$el, {\n          opacity: 1,\n          duration: 1,\n          ease: 'expo.out',\n          delay: 1.8\n        });\n      }\n\n      if (this.appStore.firstNavigation) this.appCore.navigateStart();\n\n      if (!this.params.has('trp-edit-translation')) {\n        // Init animations\n        this.initLabels();\n        this.initTitles();\n        this.initDescriptions();\n        this.initImages();\n        this.initLinks();\n        this.initMinilines();\n      }\n\n      this.initInfo();\n      this.preenter();\n      gsap/* default.delayedCall */.ZP.delayedCall(this.appStore.firstNavigation ? 1.8 : 1, function () {\n        _this3.enter();\n\n        if (_this3.superScroller) _this3.superScroller._scroll.enable = true;\n        if (_this3.hash) _this3.scrollTo(_this3.hash);\n\n        _this3.beforeResize(window.innerWidth, window.innerHeight);\n      });\n\n      if (this.preloadItems.secondary.length > 0) {\n        this.preloadSecondary = preload_it_default()();\n        this.preloadSecondary.fetch(this.preloadItems.secondary);\n      }\n    }\n  }, {\n    key: \"scroll\",\n    value: function scroll() {\n      var _this4 = this;\n\n      if (this.$inner) {\n        if (this.appStore.isDesktop) {\n          // Superscroller\n          this.superScroller = new _default({\n            enable: false,\n            scroll: true,\n            scrollTarget: this.$inner,\n            bar: true,\n            barTarget: this.$scrollbar.children[0],\n            onRaf: function onRaf(scroll, percent) {\n              _this4.requestAnimationFrame();\n\n              if (_this4.appStore.current === 'home') {\n                if (_this4.appUi.$headerSubmenu) gsap/* default.to */.ZP.to(_this4.appUi.$headerSubmenu, {\n                  y: scroll.y * 2,\n                  ease: 'expo.out'\n                });\n              } else {\n                if (_this4.appUi.$logo) gsap/* default.to */.ZP.to(_this4.appUi.$logo, {\n                  y: scroll.y * 2,\n                  ease: 'expo.out'\n                });\n              }\n\n              if (_this4.appUi.$headerTrigger && _this4.appStore.current === 'home') {\n                if (scroll.y <= -window.innerHeight) gsap/* default.to */.ZP.to(_this4.appUi.$headerTrigger, {\n                  opacity: 1,\n                  ease: 'expo.out'\n                });else gsap/* default.to */.ZP.to(_this4.appUi.$headerTrigger, {\n                  opacity: 0.0001,\n                  pointerEvents: 'initial',\n                  ease: 'expo.out'\n                });\n              }\n\n              if (_this4.superTrigger) _this4.superTrigger.update();\n            }\n          }); // Scroll Trigger\n\n          this.superTrigger = ScrollTrigger/* default */.Z;\n          this.superTrigger.defaults({\n            scroller: this.$inner\n          });\n          this.superTrigger.scrollerProxy(this.$inner, {\n            scrollTop: function scrollTop(value) {\n              return -_this4.superScroller._scroll.livePosition.y;\n            },\n            getBoundingClientRect: function getBoundingClientRect() {\n              return {\n                top: 0,\n                left: 0,\n                width: window.innerWidth,\n                height: window.innerHeight\n              };\n            }\n          });\n          this.superTrigger.refresh();\n        } else {\n          this.superTrigger = ScrollTrigger/* default */.Z;\n          this.superTrigger.config({\n            autoRefreshEvents: 'DOMContentLoaded,load',\n            syncInterval: 999999999\n          });\n          this.superTrigger.refresh();\n          gsap/* default.ticker.add */.ZP.ticker.add(function () {\n            _this4.requestAnimationFrame();\n          });\n          this.superTriggerTl = gsap/* default.timeline */.ZP.timeline({\n            defaults: {\n              ease: 'none'\n            },\n            scrollTrigger: {\n              trigger: this.$app,\n              scrub: true,\n              start: 'top top',\n              end: 'bottom bottom',\n              onUpdate: function onUpdate(self) {\n                _this4.superScrollerMobile = self.progress * self.end; // if(this.appUi.$header)\n                //     gsap.to(this.appUi.$header, { y: -(self.progress * this.$inner.getBoundingClientRect().height) });\n                // if(this.appUi.$logo)\n                //     gsap.to(this.appUi.$logo, { y: -(self.progress * this.$inner.getBoundingClientRect().height) / 2 });\n                // if(this.appUi.$headerTriggerText && !this.appStore.isDesktop)\n                //     gsap.to(this.appUi.$headerTriggerText, { y: -(self.progress * this.$inner.getBoundingClientRect().height) / 2 });\n              }\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"preenter\",\n    value: function preenter() {}\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(hash) {\n      var $target = this.$el.querySelector(hash);\n\n      if ($target) {\n        if (this.appStore.isDesktop) {\n          var offset = $target.getBoundingClientRect().y + this.superScroller._scroll.livePosition.y;\n\n          this.superScroller.scrollAnimate(offset, 2, 'power4.inOut');\n        } else {\n          var _offset = $target.getBoundingClientRect().y + document.documentElement.scrollTop;\n\n          gsap/* default.to */.ZP.to(document.documentElement, {\n            scrollTop: _offset,\n            duration: 2,\n            ease: 'power4.inOut'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"requestAnimationFrame\",\n    value: function requestAnimationFrame() {\n      if (this.superTrigger) this.superTrigger.update();\n    }\n  }, {\n    key: \"setLabels\",\n    value: function setLabels() {\n      if (this.appStore.isDesktop) this.$labels = this.$el.querySelectorAll('.label:not(.promotion .label)');else this.$labels = this.$el.querySelectorAll('.label');\n\n      if (this.$labels) {\n        for (var i = 0; i < this.$labels.length; i++) {\n          var split = new SplitText(this.$labels[i], {\n            type: 'lines, words',\n            linesClass: 'line line--++',\n            wordsClass: 'word word--++',\n            charsClass: 'char char--++'\n          }); // eslint-disable-line\n\n          this.splitTexts.push(split);\n          this.$labels[i].classList.add('split');\n          var lines = this.$labels[i].querySelectorAll('.line');\n\n          for (var j = 0; j < lines.length; j++) {\n            var words = lines[j].querySelectorAll(':scope > .word,:scope > strong');\n\n            for (var k = 0; k < words.length; k++) {\n              gsap/* default.set */.ZP.set(words[k], {\n                y: '100%'\n              });\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"setTitles\",\n    value: function setTitles() {\n      this.$titles = this.$el.querySelectorAll('.title:not(.post .title)');\n\n      if (this.$titles) {\n        for (var i = 0; i < this.$titles.length; i++) {\n          var split = new SplitText(this.$titles[i], {\n            type: 'lines, words',\n            linesClass: 'line line--++',\n            wordsClass: 'word word--++',\n            charsClass: 'char char--++'\n          }); // eslint-disable-line\n\n          this.splitTexts.push(split);\n          this.$titles[i].classList.add('split');\n          var lines = this.$titles[i].querySelectorAll('.line');\n\n          for (var j = 0; j < lines.length; j++) {\n            var words = lines[j].querySelectorAll(':scope > .word,:scope > strong');\n\n            for (var k = 0; k < words.length; k++) {\n              // if(words[k].tagName === 'DIV')\n              //     //gsap.set(words[k], { opacity: 0.0001 });\n              // else\n              if (words[k].tagName === 'STRONG') words[k].insertAdjacentHTML('beforeend', '<span class=\"mask\"></span>');\n            }\n          }\n        }\n      }\n\n      this.$titlesInfo = this.$el.querySelectorAll('.info .title');\n\n      if (this.$titlesInfo) {\n        for (var _i2 = 0; _i2 < this.$titlesInfo.length; _i2++) {\n          var _split = new SplitText(this.$titlesInfo[_i2], {\n            type: 'lines, words',\n            linesClass: 'line line--++',\n            wordsClass: 'word word--++',\n            charsClass: 'char char--++'\n          }); // eslint-disable-line\n\n\n          this.splitTexts.push(_split);\n\n          this.$titlesInfo[_i2].classList.add('split');\n\n          var _lines = this.$titlesInfo[_i2].querySelectorAll('.line');\n\n          for (var _j = 0; _j < _lines.length; _j++) {\n            var _words = _lines[_j].querySelectorAll(':scope > .word,:scope > strong');\n\n            for (var _k = 0; _k < _words.length; _k++) {\n              gsap/* default.set */.ZP.set(_words[_k], {\n                y: '100%'\n              });\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"setDescriptions\",\n    value: function setDescriptions() {\n      this.$descriptions = this.$el.querySelectorAll('.wysiwyg:not(.principles .principles__item .info .wysiwyg, .features .features__item .info .wysiwyg)');\n\n      if (this.$descriptions) {\n        for (var i = 0; i < this.$descriptions.length; i++) {\n          gsap/* default.set */.ZP.set(this.$descriptions[i], {\n            y: this.appStore.isDesktop ? '5vw' : '20px',\n            scaleY: 1.1,\n            opacity: 0.0001,\n            willChange: 'transition, opacity'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"setImages\",\n    value: function setImages() {\n      this.$imagesMask = this.$el.querySelectorAll('.image--mask');\n\n      for (var i = 0; i < this.$imagesMask.length; i++) {\n        gsap/* default.set */.ZP.set(this.$imagesMask[i], {\n          y: '-102%'\n        });\n        gsap/* default.set */.ZP.set(this.$imagesMask[i].children[0], {\n          y: '102%'\n        });\n      }\n\n      this.$imagesAppear = this.$el.querySelectorAll('.image--appear');\n\n      for (var _i3 = 0; _i3 < this.$imagesAppear.length; _i3++) {\n        gsap/* default.set */.ZP.set(this.$imagesAppear[_i3], {\n          y: '5vw'\n        });\n        gsap/* default.set */.ZP.set(this.$imagesAppear[_i3].children[0], {\n          scale: 1.2,\n          opacity: 0.0001\n        });\n      }\n    }\n  }, {\n    key: \"setLinks\",\n    value: function setLinks() {\n      var _this5 = this;\n\n      this.$links = this.$el.querySelectorAll('.link:not(.post .link)');\n\n      if (this.$links) {\n        for (var i = 0; i < this.$links.length; i++) {\n          gsap/* default.set */.ZP.set(this.$links[i], {\n            y: this.appStore.isDesktop ? '10vw' : '40px',\n            opacity: 0.0001\n          });\n          gsap/* default.set */.ZP.set(this.$links[i].children[0], {\n            opacity: 0.0001\n          });\n          gsap/* default.set */.ZP.set(this.$links[i].querySelector('svg'), {\n            opacity: 0.0001,\n            rotation: '450deg'\n          });\n          gsap/* default.set */.ZP.set(this.$links[i].querySelector('svg circle'), {\n            strokeDashoffset: '1181.24px'\n          });\n          this.domEvents.add(this.$links[i], 'mouseenter', function (e, a, el) {\n            _this5.enterLink(e, a, el);\n          });\n          this.domEvents.add(this.$links[i], 'mouseleave', function (e, a, el) {\n            _this5.leaveLink(e, a, el);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"setMinilines\",\n    value: function setMinilines() {\n      this.$minilines = this.$el.querySelectorAll('.miniline');\n\n      if (this.$minilines) {\n        for (var i = 0; i < this.$minilines.length; i++) {\n          gsap/* default.set */.ZP.set(this.$minilines[i], {\n            scaleX: 0\n          });\n        }\n      }\n    }\n  }, {\n    key: \"enterLink\",\n    value: function enterLink(e, a, el) {\n      // gsap.to(el.children[1], { x: '-1rem', ease: 'expo.out', duration: 0.8 });\n      gsap/* default.killTweensOf */.ZP.killTweensOf([el.querySelector('svg'), el.querySelector('svg circle')]);\n      gsap/* default.to */.ZP.to(el.querySelector('svg'), {\n        rotation: '450deg',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('svg circle'), {\n        strokeDashoffset: '1181.24px',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n    }\n  }, {\n    key: \"leaveLink\",\n    value: function leaveLink(e, a, el) {\n      // gsap.to(el.children[1], { x: '0', ease: 'expo.out', duration: 0.8 });\n      gsap/* default.killTweensOf */.ZP.killTweensOf([el.querySelector('svg'), el.querySelector('svg circle')]);\n      gsap/* default.to */.ZP.to(el.querySelector('svg'), {\n        rotation: '0deg',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('svg circle'), {\n        strokeDashoffset: '0px',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n    }\n  }, {\n    key: \"initLabels\",\n    value: function initLabels() {\n      var _this6 = this;\n\n      if (this.$labels) {\n        var _loop = function _loop(i) {\n          ScrollTrigger/* default.create */.Z.create({\n            trigger: _this6.$labels[i],\n            // start: 'top 80%',\n            onEnter: function onEnter() {\n              var lines = _this6.$labels[i].querySelectorAll('.line');\n\n              for (var j = 0; j < lines.length; j++) {\n                var words = lines[j].querySelectorAll(':scope > .word, :scope > strong');\n\n                for (var k = 0; k < words.length; k++) {\n                  gsap/* default.to */.ZP.to(words[k], {\n                    y: 0,\n                    ease: 'expo.out',\n                    duration: 1.4,\n                    delay: 0.1 + k * 0.05\n                  });\n                }\n              }\n            }\n          });\n        };\n\n        for (var i = 0; i < this.$labels.length; i++) {\n          _loop(i);\n        }\n      }\n    }\n  }, {\n    key: \"initTitles\",\n    value: function initTitles() {\n      var _this7 = this;\n\n      if (this.$titles) {\n        var _loop2 = function _loop2(i) {\n          ScrollTrigger/* default.create */.Z.create({\n            trigger: _this7.$titles[i],\n            // start: 'top 80%',\n            onEnter: function onEnter() {\n              var lines = _this7.$titles[i].querySelectorAll('.line');\n\n              for (var j = 0; j < lines.length; j++) {\n                var words = lines[j].querySelectorAll(':scope > .word, :scope > strong');\n\n                for (var k = 0; k < words.length; k++) {\n                  // if(words[k].tagName === 'DIV')\n                  //     gsap.to(words[k], { opacity: 1, ease: 'power2.out', delay: (j * 0.1) + (k * 0.05) });\n                  // else\n                  if (words[k].tagName === 'STRONG' && words[k].querySelector('.mask')) gsap/* default.to */.ZP.to(words[k].querySelector('.mask'), {\n                    scaleX: 0,\n                    ease: 'expo.inOut',\n                    duration: 1.2,\n                    delay: j * 0.1 + k * 0.05\n                  });\n                }\n              }\n            }\n          });\n        };\n\n        for (var i = 0; i < this.$titles.length; i++) {\n          _loop2(i);\n        }\n      }\n\n      if (this.$titlesInfo) {\n        var _loop3 = function _loop3(_i4) {\n          ScrollTrigger/* default.create */.Z.create({\n            trigger: _this7.$titlesInfo[_i4],\n            // start: 'top 80%',\n            onEnter: function onEnter() {\n              var lines = _this7.$titlesInfo[_i4].querySelectorAll('.line');\n\n              for (var j = 0; j < lines.length; j++) {\n                var words = lines[j].querySelectorAll(':scope > .word, :scope > strong');\n\n                for (var k = 0; k < words.length; k++) {\n                  gsap/* default.to */.ZP.to(words[k], {\n                    y: 0,\n                    ease: 'expo.out',\n                    duration: 1.4,\n                    delay: j * 0.1 + k * 0.05\n                  });\n                }\n              }\n            }\n          });\n        };\n\n        for (var _i4 = 0; _i4 < this.$titlesInfo.length; _i4++) {\n          _loop3(_i4);\n        }\n      }\n    }\n  }, {\n    key: \"initDescriptions\",\n    value: function initDescriptions() {\n      var _this8 = this;\n\n      if (this.$descriptions) {\n        var _loop4 = function _loop4(i) {\n          ScrollTrigger/* default.create */.Z.create({\n            trigger: _this8.$descriptions[i],\n            start: _this8.appStore.isDesktop ? 'top bottom' : 'top 80%',\n            once: true,\n            onEnter: function onEnter() {\n              gsap/* default.to */.ZP.to(_this8.$descriptions[i], {\n                y: '0',\n                scaleY: 1,\n                opacity: 1,\n                duration: 2,\n                ease: 'expo.out',\n                clearProps: 'all'\n              });\n            }\n          });\n        };\n\n        for (var i = 0; i < this.$descriptions.length; i++) {\n          _loop4(i);\n        }\n      }\n    }\n  }, {\n    key: \"initImages\",\n    value: function initImages() {\n      var _this9 = this;\n\n      var _loop5 = function _loop5(i) {\n        ScrollTrigger/* default.create */.Z.create({\n          trigger: _this9.$imagesMask[i],\n          start: 'top 80%',\n          once: true,\n          onEnter: function onEnter() {\n            gsap/* default.to */.ZP.to(_this9.$imagesMask[i], {\n              y: '0%',\n              duration: 1.8,\n              ease: 'expo.inOut',\n              delay: 0\n            });\n            gsap/* default.to */.ZP.to(_this9.$imagesMask[i].children[0], {\n              y: '0%',\n              scale: 1,\n              duration: 1.8,\n              ease: 'expo.inOut',\n              delay: 0\n            });\n          }\n        });\n      };\n\n      for (var i = 0; i < this.$imagesMask.length; i++) {\n        _loop5(i);\n      }\n\n      var _loop6 = function _loop6(_i5) {\n        ScrollTrigger/* default.create */.Z.create({\n          trigger: _this9.$imagesAppear[_i5],\n          start: 'top bottom',\n          once: true,\n          onEnter: function onEnter() {\n            gsap/* default.to */.ZP.to(_this9.$imagesAppear[_i5], {\n              y: '0%',\n              duration: 2,\n              ease: 'expo.out',\n              delay: 0\n            });\n            gsap/* default.to */.ZP.to(_this9.$imagesAppear[_i5].children[0], {\n              scale: 1,\n              opacity: 1,\n              duration: 1.2,\n              ease: 'expo.out',\n              delay: 0\n            });\n          }\n        });\n      };\n\n      for (var _i5 = 0; _i5 < this.$imagesAppear.length; _i5++) {\n        _loop6(_i5);\n      }\n    }\n  }, {\n    key: \"initLinks\",\n    value: function initLinks() {\n      var _this10 = this;\n\n      if (this.$links) {\n        var _loop7 = function _loop7(i) {\n          ScrollTrigger/* default.create */.Z.create({\n            trigger: _this10.$links[i],\n            start: 'top bottom',\n            once: true,\n            onEnter: function onEnter() {\n              gsap/* default.to */.ZP.to(_this10.$links[i], {\n                y: 0,\n                opacity: 1,\n                duration: 2,\n                ease: 'expo.out'\n              });\n              gsap/* default.to */.ZP.to(_this10.$links[i].children[0], {\n                opacity: 1,\n                duration: 2,\n                ease: 'expo.out'\n              });\n              gsap/* default.to */.ZP.to(_this10.$links[i].querySelector('svg'), {\n                opacity: 1,\n                rotation: '0',\n                duration: 2,\n                ease: 'expo.out'\n              });\n              gsap/* default.to */.ZP.to(_this10.$links[i].querySelector('svg circle'), {\n                strokeDashoffset: '0px',\n                duration: 2,\n                ease: 'expo.out'\n              });\n            }\n          });\n        };\n\n        for (var i = 0; i < this.$links.length; i++) {\n          _loop7(i);\n        }\n      }\n    }\n  }, {\n    key: \"initMinilines\",\n    value: function initMinilines() {\n      var _this11 = this;\n\n      if (this.$minilines) {\n        var _loop8 = function _loop8(i) {\n          ScrollTrigger/* default.create */.Z.create({\n            trigger: _this11.$minilines[i],\n            start: 'top 80%',\n            once: true,\n            onEnter: function onEnter() {\n              gsap/* default.to */.ZP.to(_this11.$minilines[i], {\n                scaleX: 1,\n                duration: 1,\n                ease: 'expo.out'\n              });\n            }\n          });\n        };\n\n        for (var i = 0; i < this.$minilines.length; i++) {\n          _loop8(i);\n        }\n      }\n    }\n  }, {\n    key: \"initInfo\",\n    value: function initInfo() {\n      var _this12 = this;\n\n      // Check infotrigger sidebar element\n      this.$infotrigger = this.$el.querySelector('.infotrigger');\n\n      if (this.$infotrigger) {\n        gsap/* default.to */.ZP.to(this.$infotrigger, {\n          opacity: 1,\n          ease: 'power2.out',\n          duration: 0.8,\n          delay: 1\n        });\n        this.domEvents.add(this.$infotrigger, 'click', function (e, a, el) {\n          _this12.appUi.openInfo(e);\n        });\n      } // Check infotrigger button elements\n\n\n      this.$buttontriggers = this.$el.querySelectorAll('.button--infotrigger');\n\n      for (var i = 0; i < this.$buttontriggers.length; i++) {\n        this.domEvents.add(this.$buttontriggers[i], 'click', function (e, a, el) {\n          _this12.appUi.openInfo(e, a, el);\n        });\n      }\n\n      this.appUi.info.isOpen = false;\n    }\n  }, {\n    key: \"beforeResize\",\n    value: function beforeResize(width, height) {\n      if (this.superScroller) this.superScroller.resize();\n      this.resize(width, height);\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {} // eslint-disable-line\n\n  }, {\n    key: \"resizeOrientation\",\n    value: function resizeOrientation(width, height, orientation) {\n      for (var i = 0; i < this.splitTexts.length; i++) {\n        this.splitTexts[i].revert();\n      } //this.setImages();\n\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {} // eslint-disable-line\n\n  }, {\n    key: \"onLeave\",\n    value: function onLeave() {\n      this.leave();\n    }\n  }, {\n    key: \"leave\",\n    value: function leave() {\n      if (this.domEvents) this.domEvents.destroy();\n      if (this.superScroller) this.superScroller.destroy();\n      if (this.superDragger) this.superDragger.destroy();\n    }\n  }, {\n    key: \"onLeaveCompleted\",\n    value: function onLeaveCompleted() {\n      this.afterLeave();\n    }\n  }, {\n    key: \"afterLeave\",\n    value: function afterLeave() {} // eslint-disable-line\n\n  }]);\n\n  return Renderer;\n}(highway_module/* default.Renderer */.Z.Renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const renderer = (Renderer);\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererDefault.js\nfunction rendererDefault_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererDefault_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererDefault_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererDefault_typeof(obj); }\n\nfunction rendererDefault_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererDefault_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererDefault_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererDefault_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererDefault_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererDefault_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererDefault_setPrototypeOf(subClass, superClass); }\n\nfunction rendererDefault_setPrototypeOf(o, p) { rendererDefault_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererDefault_setPrototypeOf(o, p); }\n\nfunction rendererDefault_createSuper(Derived) { var hasNativeReflectConstruct = rendererDefault_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererDefault_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererDefault_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererDefault_possibleConstructorReturn(this, result); }; }\n\nfunction rendererDefault_possibleConstructorReturn(self, call) { if (call && (rendererDefault_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererDefault_assertThisInitialized(self); }\n\nfunction rendererDefault_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererDefault_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererDefault_getPrototypeOf(o) { rendererDefault_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererDefault_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n // Other\n// import Slider from '../classes/slider';\n// import SplitText from '../classes/splitText';\n\nvar RendererDefault = /*#__PURE__*/function (_Renderer) {\n  rendererDefault_inherits(RendererDefault, _Renderer);\n\n  var _super = rendererDefault_createSuper(RendererDefault);\n\n  function RendererDefault() {\n    rendererDefault_classCallCheck(this, RendererDefault);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererDefault_createClass(RendererDefault, [{\n    key: \"selectors\",\n    value: function selectors() {} // eslint-disable-line\n\n  }, {\n    key: \"events\",\n    value: function events() {} // eslint-disable-line\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {} // eslint-disable-line\n\n  }, {\n    key: \"enter\",\n    value: function enter() {} // eslint-disable-line\n\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }]);\n\n  return RendererDefault;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererDefault = (RendererDefault);\n;// CONCATENATED MODULE: ./app/src/js/classes/superDragger.js\nfunction superDragger_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction superDragger_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction superDragger_createClass(Constructor, protoProps, staticProps) { if (protoProps) superDragger_defineProperties(Constructor.prototype, protoProps); if (staticProps) superDragger_defineProperties(Constructor, staticProps); return Constructor; }\n\n //empty function\n\nvar superDragger_noop = function noop() {}; //eslint-disable-line\n\n\nvar lerp = function lerp(a, b, n) {\n  return (1 - n) * a + n * b;\n};\n\nvar superDragger_default = /*#__PURE__*/function () {\n  function _default(options) {\n    var _this = this;\n\n    superDragger_classCallCheck(this, _default);\n\n    //hook functions\n    this._onRaf = options.onRaf || superDragger_noop;\n    this._onMouseEnter = options.onMouseEnter || superDragger_noop;\n    this._onMouseLeave = options.onMouseLeave || superDragger_noop;\n    this._onDragStart = options.onDragStart || superDragger_noop;\n    this._onDragMove = options.onDragMove || superDragger_noop;\n    this._onDragEnd = options.onDragEnd || superDragger_noop;\n    this._onSnap = options.onSnap || superDragger_noop;\n    this._onSnapLimits = options._onSnapLimits || superDragger_noop;\n    this.rAF = undefined;\n    this._drag = {\n      enable: typeof options.enable !== 'undefined' ? options.enable : true,\n      el: options.el,\n      elClickables: options.elClickables || [],\n      inner: options.inner || options.el.children[0],\n      ease: options.ease || 0.1,\n      speed: options.speed || 2,\n      dragging: false,\n      width: 0,\n      height: 0,\n      velocity: 0,\n      direction: 0,\n      on: {\n        x: 0,\n        y: 0\n      },\n      off: {\n        x: 0,\n        y: 0\n      },\n      offset: {\n        x: 0,\n        y: 0\n      },\n      movement: {\n        x: 0,\n        y: 0\n      },\n      position: {\n        x: 0,\n        y: 0\n      },\n      lastPosition: {\n        x: 0,\n        y: 0\n      },\n      livePosition: {\n        x: 0,\n        y: 0\n      },\n      min: {\n        x: 0,\n        y: 0\n      },\n      max: {\n        x: 0,\n        y: 0\n      },\n      total: 0,\n      snap: typeof options.snap !== 'undefined' ? options.snap : false,\n      snapPositions: [],\n      snapLimits: [],\n      snapAnimating: false,\n      inertia: typeof options.inertia !== 'undefined' ? options.inertia : 0.4,\n      elasticity: typeof options.elasticity !== 'undefined' ? options.elasticity : false,\n      elasticityType: typeof options.elasticityType !== 'undefined' ? options.elasticityType : 1\n    };\n    if (this._drag.snap && this._drag.inertia === 0) throw Error('If snap is true, inertia should be great than 0');\n\n    this.raf = function () {\n      _this._onRaf(_this._drag); //Move inner\n\n\n      _this._drag.livePosition.x = lerp(_this._drag.livePosition.x, _this._drag.position.x, _this._drag.ease);\n      _this.$dragInner.style.transform = \"translate3d(\".concat(_this._drag.livePosition.x, \"px, 0, 0)\");\n\n      if (_this._drag.elasticity) {\n        //Check velocity\n        var movementX = Math.abs(_this._drag.livePosition.x - _this._drag.position.x);\n        var movement = Math.sqrt(movementX * movementX + movementX * movementX);\n        var velocity = movement / 10;\n        _this._drag.velocity = lerp(_this._drag.velocity, velocity, _this._drag.ease * 2); //Do elasticity\n\n        var elasticity = _this._drag.velocity * -_this._drag.direction;\n\n        for (var i = 0; i < _this.$dragItems.length; i++) {\n          if (_this._drag.elasticityType === 1 ? _this._drag.direction < 0 : _this._drag.direction > 0) _this.$dragItems[i].style.transform = \"translate3d(\".concat(i * elasticity, \"px, 0, 0)\");else _this.$dragItems[i].style.transform = \"translate3d(\".concat((_this.$dragItems.length - i) * elasticity, \"px, 0, 0)\");\n        }\n      }\n    };\n\n    this.selectors();\n    this.init();\n  }\n\n  superDragger_createClass(_default, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$drag = this._drag.el;\n      this.$dragInner = this._drag.inner;\n      this.$dragItems = this._drag.inner.children;\n      this.$dragClickables = this._drag.elClickables;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      this.setBounds(); //add requestAnimationFrame\n\n      gsap/* gsap.ticker.add */.p8.ticker.add(this.raf); //add events\n      //this.$dragInner.addEventListener('click', (e) => { this.click(e); });\n\n      for (var i = 0; i < this.$dragClickables.length; i++) {\n        this.$dragClickables[i].addEventListener('click', function (e) {\n          _this2.click(e);\n        }, true);\n      }\n\n      this.$dragInner.addEventListener('mousedown', function (e) {\n        _this2.on(e);\n      });\n      this.$drag.addEventListener('mouseenter', function (e) {\n        _this2.enter(e);\n      });\n      this.$drag.addEventListener('mouseleave', function (e) {\n        _this2.leave(e);\n      });\n      document.addEventListener('mousemove', function (e) {\n        _this2.move(e);\n      });\n      document.addEventListener('mouseup', function (e) {\n        _this2.off(e);\n      });\n      document.addEventListener('resize', function (e) {\n        _this2.resize(e);\n      });\n    }\n  }, {\n    key: \"setBounds\",\n    value: function setBounds() {\n      var dragBounding = this.$drag.getBoundingClientRect();\n      var dragInnerBounding = this.$dragInner.getBoundingClientRect();\n      this._drag.width = dragBounding.width;\n      this._drag.height = dragBounding.height;\n      this._drag.min.x = dragBounding.width - dragInnerBounding.width;\n      this._drag.max.x = 0;\n      this._drag.offset.x = dragBounding.x; //Check limits for inertia\n\n      this._drag.snapLimits.push(0);\n\n      this._drag.snapLimits.push(dragBounding.width - dragInnerBounding.width);\n\n      if (this._drag.snap) {\n        for (var i = 0; i < this.$dragItems.length; i++) {\n          var bounds = this.$dragItems[i].getBoundingClientRect();\n          var snap = bounds.x - this._drag.offset.x;\n\n          this._drag.snapPositions.push(-snap);\n        }\n      }\n    }\n  }, {\n    key: \"click\",\n    value: function click(e) {\n      if (Math.abs(this._drag.on.x - this._drag.off.x) > 10) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      this._onMouseEnter();\n    }\n  }, {\n    key: \"on\",\n    value: function on(e) {\n      var _this3 = this;\n\n      this._drag.dragging = true;\n      this._drag.on.x = e.clientX;\n      this.onTimeout = setTimeout(function () {\n        _this3._onDragStart();\n\n        _this3.$drag.classList.add('is--dragging');\n      }, 120);\n    }\n  }, {\n    key: \"move\",\n    value: function move(e) {\n      e.preventDefault();\n      if (!this._drag.dragging || !this._drag.enable) return;\n\n      this._onDragMove();\n\n      this._drag.movement = e.clientX - this._drag.on.x;\n      this._drag.direction = Math.sign(e.clientX - this._drag.on.x);\n      this._drag.position.x = this._drag.lastPosition.x + e.clientX - this._drag.on.x;\n      this._drag.position.x = Math.min(this._drag.max.x + this._drag.width / 4 * this._drag.inertia, Math.max(this._drag.position.x, this._drag.min.x - this._drag.width / 4 * this._drag.inertia));\n    }\n  }, {\n    key: \"off\",\n    value: function off(e) {\n      clearTimeout(this.onTimeout);\n      if (!this._drag.dragging) return;\n      this._drag.dragging = false;\n      this._drag.off.x = e.clientX;\n      this._drag.lastPosition.x = this._drag.position.x;\n\n      this._onDragEnd();\n\n      this.$drag.classList.remove('is--dragging');\n\n      if (this._drag.position.x > 0 || this._drag.position.x < this._drag.min.x) {\n        this.snapLimits();\n      } else {\n        if (this._drag.snap) this.snap();\n      }\n    }\n  }, {\n    key: \"leave\",\n    value: function leave() {\n      this._onMouseLeave();\n    }\n  }, {\n    key: \"snap\",\n    value: function snap() {\n      //this._drag.snapAnimating = true;\n      var goal = this._drag.position.x;\n\n      var closest = this._drag.snapPositions.reduce(function (prev, curr) {\n        return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n      });\n\n      this._drag.position.x = closest;\n      this._drag.lastPosition.x = closest;\n\n      this._onSnap();\n    }\n  }, {\n    key: \"snapLimits\",\n    value: function snapLimits() {\n      //this._drag.snapAnimating = true;\n      var goal = this._drag.position.x;\n\n      var closest = this._drag.snapLimits.reduce(function (prev, curr) {\n        return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n      });\n\n      this._drag.position.x = closest;\n      this._drag.lastPosition.x = closest;\n\n      this._onSnapLimits();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(value1, value2, amount) {\n      amount = amount < 0 ? 0 : amount;\n      amount = amount > 1 ? 1 : amount;\n      return value1 + (value2 - value1) * amount;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      this.setBounds();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      //empty options\n      this._drag = {}; //remove requestAnimationFrame\n\n      gsap/* gsap.ticker.remove */.p8.ticker.remove(this.raf); //Remove events\n\n      document.removeEventListener('mousedown', this.on);\n      document.removeEventListener('resize', this.resize);\n    }\n  }]);\n\n  return _default;\n}();\n\n\n// EXTERNAL MODULE: ./node_modules/gsap/Draggable.js + 1 modules\nvar Draggable = __webpack_require__(354);\n;// CONCATENATED MODULE: ./app/src/js/utils/VelocityTracker.js\nfunction VelocityTracker_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction VelocityTracker_createClass(Constructor, protoProps, staticProps) { if (protoProps) VelocityTracker_defineProperties(Constructor.prototype, protoProps); if (staticProps) VelocityTracker_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction VelocityTracker_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*!\n * VelocityTracker: 3.6.1\n * https://greensock.com\n *\n * Copyright 2008-2021, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nvar VelocityTracker_gsap,\n    VelocityTracker_coreInitted,\n    VelocityTracker_toArray,\n    _getUnit,\n    _first,\n    _ticker,\n    _time1,\n    _time2,\n    _getCache,\n    _getGSAP = function _getGSAP() {\n  return VelocityTracker_gsap || typeof window !== \"undefined\" && (VelocityTracker_gsap = window.gsap);\n},\n    _lookup = {},\n    _round = function _round(value) {\n  return Math.round(value * 10000) / 10000;\n},\n    _getID = function _getID(target) {\n  return _getCache(target).id;\n},\n    _getByTarget = function _getByTarget(target) {\n  return _lookup[_getID(typeof target === \"string\" ? VelocityTracker_toArray(target)[0] : target)];\n},\n    _onTick = function _onTick(time) {\n  var pt = _first,\n      val; //if the frame rate is too high, we won't be able to track the velocity as well, so only update the values about 20 times per second\n\n  if (time - _time1 >= 0.05) {\n    _time2 = _time1;\n    _time1 = time;\n\n    while (pt) {\n      val = pt.g(pt.t, pt.p);\n\n      if (val !== pt.v1 || time - pt.t1 > 0.2) {\n        //use a threshold of 0.2 seconds for zeroing-out velocity. If we only use 0.05 and things update slightly slower, like some Android devices dispatch \"touchmove\" events sluggishly so 2 or 3 ticks of the gsap.ticker may elapse inbetween, thus it may appear like the object is not moving but it actually is but it's not updating as frequently. A threshold of 0.2 seconds seems to be a good balance. We want to update things frequently (0.05 seconds) when they're moving so that we can respond to fast motions accurately, but we want to be more resistant to go back to a zero velocity.\n        pt.v2 = pt.v1;\n        pt.v1 = val;\n        pt.t2 = pt.t1;\n        pt.t1 = time;\n      }\n\n      pt = pt._next;\n    }\n  }\n},\n    _types = {\n  deg: 360,\n  rad: Math.PI * 2\n},\n    VelocityTracker_initCore = function _initCore() {\n  VelocityTracker_gsap = _getGSAP();\n\n  if (VelocityTracker_gsap) {\n    VelocityTracker_toArray = VelocityTracker_gsap.utils.toArray;\n    _getUnit = VelocityTracker_gsap.utils.getUnit;\n    _getCache = VelocityTracker_gsap.core.getCache;\n    _ticker = VelocityTracker_gsap.ticker;\n    VelocityTracker_coreInitted = 1;\n  }\n};\n\nvar PropTracker = function PropTracker(target, property, type, next) {\n  VelocityTracker_classCallCheck(this, PropTracker);\n\n  this.t = target;\n  this.p = property;\n  this.g = target._gsap.get;\n  this.rCap = _types[type || _getUnit(this.g(target, property))]; //rotational cap (for degrees, \"deg\", it's 360 and for radians, \"rad\", it's Math.PI * 2)\n\n  this.v1 = this.v2 = 0;\n  this.t1 = this.t2 = _ticker.time;\n\n  if (next) {\n    this._next = next;\n    next._prev = this;\n  }\n};\n\nvar VelocityTracker = /*#__PURE__*/function () {\n  function VelocityTracker(target, property) {\n    VelocityTracker_classCallCheck(this, VelocityTracker);\n\n    if (!VelocityTracker_coreInitted) {\n      VelocityTracker_initCore();\n    }\n\n    this.target = VelocityTracker_toArray(target)[0];\n    _lookup[_getID(this.target)] = this;\n    this._props = {};\n    property && this.add(property);\n  }\n\n  VelocityTracker_createClass(VelocityTracker, [{\n    key: \"get\",\n    value: function get(property, skipRecentTick) {\n      var pt = this._props[property] || console.warn(\"Not tracking \" + property + \" velocity.\"),\n          val,\n          dif,\n          rotationCap;\n      val = parseFloat(skipRecentTick ? pt.v1 : pt.g(pt.t, pt.p));\n      dif = val - parseFloat(pt.v2);\n      rotationCap = pt.rCap;\n\n      if (rotationCap) {\n        //rotational values need special interpretation so that if, for example, they go from 179 to -178 degrees it is interpreted as a change of 3 instead of -357.\n        dif = dif % rotationCap;\n\n        if (dif !== dif % (rotationCap / 2)) {\n          dif = dif < 0 ? dif + rotationCap : dif - rotationCap;\n        }\n      }\n\n      return _round(dif / ((skipRecentTick ? pt.t1 : _ticker.time) - pt.t2));\n    }\n  }, {\n    key: \"getAll\",\n    value: function getAll() {\n      var result = {},\n          props = this._props,\n          p;\n\n      for (p in props) {\n        result[p] = this.get(p);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"isTracking\",\n    value: function isTracking(property) {\n      return property in this._props;\n    }\n  }, {\n    key: \"add\",\n    value: function add(property, type) {\n      if (!(property in this._props)) {\n        if (!_first) {\n          _ticker.add(_onTick);\n\n          _time1 = _time2 = _ticker.time;\n        }\n\n        _first = this._props[property] = new PropTracker(this.target, property, type, _first);\n      }\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(property) {\n      var pt = this._props[property],\n          prev,\n          next;\n\n      if (pt) {\n        prev = pt._prev;\n        next = pt._next;\n\n        if (prev) {\n          prev._next = next;\n        }\n\n        if (next) {\n          next._prev = prev;\n        } else if (_first === pt) {\n          _ticker.remove(_onTick);\n\n          _first = 0;\n        }\n\n        delete this._props[property];\n      }\n    }\n  }, {\n    key: \"kill\",\n    value: function kill(shallow) {\n      for (var p in this._props) {\n        this.remove(p);\n      }\n\n      if (!shallow) {\n        delete _lookup[_getID(this.target)];\n      }\n    }\n  }], [{\n    key: \"register\",\n    value: function register(core) {\n      VelocityTracker_gsap = core;\n\n      VelocityTracker_initCore();\n    }\n  }, {\n    key: \"track\",\n    value: function track(targets, properties, types) {\n      if (!VelocityTracker_coreInitted) {\n        VelocityTracker_initCore();\n      }\n\n      var result = [],\n          targs = VelocityTracker_toArray(targets),\n          a = properties.split(\",\"),\n          t = (types || \"\").split(\",\"),\n          i = targs.length,\n          tracker,\n          j;\n\n      while (i--) {\n        tracker = _getByTarget(targs[i]) || new VelocityTracker(targs[i]);\n        j = a.length;\n\n        while (j--) {\n          tracker.add(a[j], t[j] || t[0]);\n        }\n\n        result.push(tracker);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"untrack\",\n    value: function untrack(targets, properties) {\n      var props = (properties || \"\").split(\",\");\n\n      VelocityTracker_toArray(targets).forEach(function (target) {\n        var tracker = _getByTarget(target);\n\n        if (tracker) {\n          if (!props.length) {\n            tracker.kill(1);\n          } else {\n            props.forEach(function (p) {\n              return tracker.remove(p);\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"isTracking\",\n    value: function isTracking(target, property) {\n      var tracker = _getByTarget(target);\n\n      return tracker && tracker.isTracking(property);\n    }\n  }, {\n    key: \"getVelocity\",\n    value: function getVelocity(target, property) {\n      var tracker = _getByTarget(target);\n\n      return !tracker || !tracker.isTracking(property) ? console.warn(\"Not tracking velocity of \" + property) : tracker.get(property);\n    }\n  }]);\n\n  return VelocityTracker;\n}();\nVelocityTracker.getByTarget = _getByTarget;\n_getGSAP() && VelocityTracker_gsap.registerPlugin(VelocityTracker);\n\n;// CONCATENATED MODULE: ./app/src/js/classes/InertiaPlugin.js\nfunction InertiaPlugin_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { InertiaPlugin_typeof = function _typeof(obj) { return typeof obj; }; } else { InertiaPlugin_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return InertiaPlugin_typeof(obj); }\n\n/*!\n * InertiaPlugin 3.6.1\n * https://greensock.com\n *\n * @license Copyright 2008-2021, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\n\n\nvar InertiaPlugin_gsap,\n    InertiaPlugin_coreInitted,\n    _parseEase,\n    InertiaPlugin_toArray,\n    _power3,\n    _config,\n    InertiaPlugin_getUnit,\n    PropTween,\n    InertiaPlugin_getCache,\n    _checkPointRatio,\n    _clamp,\n    _processingVars,\n    _getTracker = VelocityTracker.getByTarget,\n    InertiaPlugin_getGSAP = function _getGSAP() {\n  return InertiaPlugin_gsap || typeof window !== \"undefined\" && (InertiaPlugin_gsap = window.gsap) && InertiaPlugin_gsap.registerPlugin && InertiaPlugin_gsap;\n},\n    _isString = function _isString(value) {\n  return typeof value === \"string\";\n},\n    _isNumber = function _isNumber(value) {\n  return typeof value === \"number\";\n},\n    _isObject = function _isObject(value) {\n  return InertiaPlugin_typeof(value) === \"object\";\n},\n    _isFunction = function _isFunction(value) {\n  return typeof value === \"function\";\n},\n    InertiaPlugin_bonusValidated = 1,\n    //<name>InertiaPlugin</name>\nInertiaPlugin_isArray = Array.isArray,\n    _emptyFunc = function _emptyFunc(p) {\n  return p;\n},\n    _bigNum = 1e10,\n    _tinyNum = 1 / _bigNum,\n    _checkPoint = 0.05,\n    InertiaPlugin_round = function _round(value) {\n  return Math.round(value * 10000) / 10000;\n},\n    _extend = function _extend(obj, defaults, exclude) {\n  for (var p in defaults) {\n    if (!(p in obj) && p !== exclude) {\n      obj[p] = defaults[p];\n    }\n  }\n\n  return obj;\n},\n    _deepClone = function _deepClone(obj) {\n  var copy = {},\n      p,\n      v;\n\n  for (p in obj) {\n    copy[p] = _isObject(v = obj[p]) ? _deepClone(v) : v;\n  }\n\n  return copy;\n},\n    _getClosest = function _getClosest(n, values, max, min, radius) {\n  var i = values.length,\n      closest = 0,\n      absDif = _bigNum,\n      val,\n      dif,\n      p,\n      dist;\n\n  if (_isObject(n)) {\n    while (i--) {\n      val = values[i];\n      dif = 0;\n\n      for (p in n) {\n        dist = val[p] - n[p];\n        dif += dist * dist;\n      }\n\n      if (dif < absDif) {\n        closest = i;\n        absDif = dif;\n      }\n    }\n\n    if ((radius || _bigNum) < _bigNum && radius < Math.sqrt(absDif)) {\n      return n;\n    }\n  } else {\n    while (i--) {\n      val = values[i];\n      dif = val - n;\n\n      if (dif < 0) {\n        dif = -dif;\n      }\n\n      if (dif < absDif && val >= min && val <= max) {\n        closest = i;\n        absDif = dif;\n      }\n    }\n  }\n\n  return values[closest];\n},\n    _parseEnd = function _parseEnd(curProp, end, max, min, name, radius) {\n  if (curProp.end === \"auto\") {\n    return curProp;\n  }\n\n  var endVar = curProp.end,\n      adjustedEnd,\n      p;\n  max = isNaN(max) ? _bigNum : max;\n  min = isNaN(min) ? -_bigNum : min;\n\n  if (_isObject(end)) {\n    //for objects, like {x, y} where they're linked and we must pass an object to the function or find the closest value in an array.\n    adjustedEnd = end.calculated ? end : (_isFunction(endVar) ? endVar(end) : _getClosest(end, endVar, max, min, radius)) || end;\n\n    if (!end.calculated) {\n      for (p in adjustedEnd) {\n        end[p] = adjustedEnd[p];\n      }\n\n      end.calculated = true;\n    }\n\n    adjustedEnd = adjustedEnd[name];\n  } else {\n    adjustedEnd = _isFunction(endVar) ? endVar(end) : InertiaPlugin_isArray(endVar) ? _getClosest(end, endVar, max, min, radius) : parseFloat(endVar);\n  }\n\n  if (adjustedEnd > max) {\n    adjustedEnd = max;\n  } else if (adjustedEnd < min) {\n    adjustedEnd = min;\n  }\n\n  return {\n    max: adjustedEnd,\n    min: adjustedEnd,\n    unitFactor: curProp.unitFactor\n  };\n},\n    _getNumOrDefault = function _getNumOrDefault(vars, property, defaultValue) {\n  return isNaN(vars[property]) ? defaultValue : +vars[property];\n},\n    _calculateChange = function _calculateChange(velocity, duration) {\n  return duration * _checkPoint * velocity / _checkPointRatio;\n},\n    _calculateDuration = function _calculateDuration(start, end, velocity) {\n  return Math.abs((end - start) * _checkPointRatio / velocity / _checkPoint);\n},\n    _reservedProps = {\n  resistance: 1,\n  checkpoint: 1,\n  preventOvershoot: 1,\n  linkedProps: 1,\n  radius: 1,\n  duration: 1\n},\n    _processLinkedProps = function _processLinkedProps(target, vars, getVal, resistance) {\n  if (vars.linkedProps) {\n    //when there are linkedProps (typically \"x,y\" where snapping has to factor in multiple properties, we must first populate an object with all of those end values, then feed it to the function that make any necessary alterations. So the point of this first loop is to simply build an object (like {x:100, y:204.5}) for feeding into that function which we'll do later in the \"real\" loop.\n    var linkedPropNames = vars.linkedProps.split(\",\"),\n        linkedProps = {},\n        i,\n        p,\n        curProp,\n        curVelocity,\n        tracker,\n        curDuration;\n\n    for (i = 0; i < linkedPropNames.length; i++) {\n      p = linkedPropNames[i];\n      curProp = vars[p];\n\n      if (curProp) {\n        if (_isNumber(curProp.velocity)) {\n          curVelocity = curProp.velocity;\n        } else {\n          tracker = tracker || _getTracker(target);\n          curVelocity = tracker && tracker.isTracking(p) ? tracker.get(p) : 0;\n        }\n\n        curDuration = Math.abs(curVelocity / _getNumOrDefault(curProp, \"resistance\", resistance));\n        linkedProps[p] = parseFloat(getVal(target, p)) + _calculateChange(curVelocity, curDuration);\n      }\n    }\n\n    return linkedProps;\n  }\n},\n    _calculateTweenDuration = function _calculateTweenDuration(target, vars) {\n  var maxDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n  var minDuration = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.2;\n  var overshootTolerance = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var recordEnd = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n  _isString(target) && (target = InertiaPlugin_toArray(target)[0]);\n\n  if (!target) {\n    return 0;\n  }\n\n  var duration = 0,\n      clippedDuration = _bigNum,\n      inertiaVars = vars.inertia || vars,\n      getVal = InertiaPlugin_getCache(target).get,\n      resistance = _getNumOrDefault(inertiaVars, \"resistance\", _config.resistance),\n      p,\n      curProp,\n      curDuration,\n      curVelocity,\n      curVal,\n      end,\n      curClippedDuration,\n      tracker,\n      unitFactor,\n      linkedProps; //when there are linkedProps (typically \"x,y\" where snapping has to factor in multiple properties, we must first populate an object with all of those end values, then feed it to the function that make any necessary alterations. So the point of this first loop is to simply build an object (like {x:100, y:204.5}) for feeding into that function which we'll do later in the \"real\" loop.\n\n\n  linkedProps = _processLinkedProps(target, inertiaVars, getVal, resistance);\n\n  for (p in inertiaVars) {\n    if (!_reservedProps[p]) {\n      curProp = inertiaVars[p];\n\n      if (!_isObject(curProp)) {\n        tracker = tracker || _getTracker(target);\n\n        if (tracker && tracker.isTracking(p)) {\n          curProp = _isNumber(curProp) ? {\n            velocity: curProp\n          } : {\n            velocity: tracker.get(p)\n          }; //if we're tracking this property, we should use the tracking velocity and then use the numeric value that was passed in as the min and max so that it tweens exactly there.\n        } else {\n          curVelocity = +curProp || 0;\n          curDuration = Math.abs(curVelocity / resistance);\n        }\n      }\n\n      if (_isObject(curProp)) {\n        if (_isNumber(curProp.velocity)) {\n          curVelocity = curProp.velocity;\n        } else {\n          tracker = tracker || _getTracker(target);\n          curVelocity = tracker && tracker.isTracking(p) ? tracker.get(p) : 0;\n        }\n\n        curDuration = _clamp(minDuration, maxDuration, Math.abs(curVelocity / _getNumOrDefault(curProp, \"resistance\", resistance)));\n        curVal = parseFloat(getVal(target, p)) || 0;\n        end = curVal + _calculateChange(curVelocity, curDuration);\n\n        if (\"end\" in curProp) {\n          curProp = _parseEnd(curProp, linkedProps && p in linkedProps ? linkedProps : end, curProp.max, curProp.min, p, inertiaVars.radius);\n\n          if (recordEnd) {\n            _processingVars === vars && (_processingVars = inertiaVars = _deepClone(vars));\n            inertiaVars[p] = _extend(curProp, inertiaVars[p], \"end\");\n          }\n        }\n\n        if (\"max\" in curProp && end > +curProp.max + _tinyNum) {\n          unitFactor = curProp.unitFactor || _config.unitFactors[p] || 1; //some values are measured in special units like radians in which case our thresholds need to be adjusted accordingly.\n          //if the value is already exceeding the max or the velocity is too low, the duration can end up being uncomfortably long but in most situations, users want the snapping to occur relatively quickly (0.75 seconds), so we implement a cap here to make things more intuitive. If the max and min match, it means we're animating to a particular value and we don't want to shorten the time unless the velocity is really slow. Example: a rotation where the start and natural end value are less than the snapping spot, but the natural end is pretty close to the snap.\n\n          curClippedDuration = curVal > curProp.max && curProp.min !== curProp.max || curVelocity * unitFactor > -15 && curVelocity * unitFactor < 45 ? minDuration + (maxDuration - minDuration) * 0.1 : _calculateDuration(curVal, curProp.max, curVelocity);\n\n          if (curClippedDuration + overshootTolerance < clippedDuration) {\n            clippedDuration = curClippedDuration + overshootTolerance;\n          }\n        } else if (\"min\" in curProp && end < +curProp.min - _tinyNum) {\n          unitFactor = curProp.unitFactor || _config.unitFactors[p] || 1; //some values are measured in special units like radians in which case our thresholds need to be adjusted accordingly.\n          //if the value is already exceeding the min or if the velocity is too low, the duration can end up being uncomfortably long but in most situations, users want the snapping to occur relatively quickly (0.75 seconds), so we implement a cap here to make things more intuitive.\n\n          curClippedDuration = curVal < curProp.min && curProp.min !== curProp.max || curVelocity * unitFactor > -45 && curVelocity * unitFactor < 15 ? minDuration + (maxDuration - minDuration) * 0.1 : _calculateDuration(curVal, curProp.min, curVelocity);\n\n          if (curClippedDuration + overshootTolerance < clippedDuration) {\n            clippedDuration = curClippedDuration + overshootTolerance;\n          }\n        }\n\n        curClippedDuration > duration && (duration = curClippedDuration);\n      }\n\n      curDuration > duration && (duration = curDuration);\n    }\n  }\n\n  duration > clippedDuration && (duration = clippedDuration);\n  return duration > maxDuration ? maxDuration : duration < minDuration ? minDuration : duration;\n},\n    InertiaPlugin_initCore = function _initCore() {\n  InertiaPlugin_gsap = InertiaPlugin_getGSAP();\n\n  if (InertiaPlugin_gsap) {\n    _parseEase = InertiaPlugin_gsap.parseEase;\n    InertiaPlugin_toArray = InertiaPlugin_gsap.utils.toArray;\n    InertiaPlugin_getUnit = InertiaPlugin_gsap.utils.getUnit;\n    InertiaPlugin_getCache = InertiaPlugin_gsap.core.getCache;\n    _clamp = InertiaPlugin_gsap.utils.clamp;\n    _power3 = _parseEase(\"power3\");\n    _checkPointRatio = _power3(0.05);\n    PropTween = InertiaPlugin_gsap.core.PropTween;\n    InertiaPlugin_gsap.config({\n      resistance: 100,\n      unitFactors: {\n        time: 1000,\n        totalTime: 1000,\n        progress: 1000,\n        totalProgress: 1000\n      }\n    });\n    _config = InertiaPlugin_gsap.config();\n    InertiaPlugin_gsap.registerPlugin(VelocityTracker);\n    InertiaPlugin_coreInitted = 1;\n  }\n};\n\nvar InertiaPlugin = {\n  version: \"3.6.1\",\n  name: \"inertia\",\n  register: function register(core) {\n    InertiaPlugin_gsap = core;\n\n    InertiaPlugin_initCore();\n  },\n  init: function init(target, vars, tween, index, targets) {\n    InertiaPlugin_coreInitted || InertiaPlugin_initCore();\n\n    var tracker = _getTracker(target);\n\n    if (vars === \"auto\") {\n      if (!tracker) {\n        console.warn(\"No inertia tracking on \" + target + \". InertiaPlugin.track(target) first.\");\n        return;\n      }\n\n      vars = tracker.getAll();\n    }\n\n    this.target = target;\n    this.tween = tween;\n    _processingVars = vars; // gets swapped inside _calculateTweenDuration() if there's a function-based value encountered (to avoid double-calling it)\n\n    var cache = target._gsap,\n        getVal = cache.get,\n        dur = vars.duration,\n        durIsObj = _isObject(dur),\n        preventOvershoot = vars.preventOvershoot || durIsObj && dur.overshoot === 0,\n        resistance = _getNumOrDefault(vars, \"resistance\", _config.resistance),\n        duration = _isNumber(dur) ? dur : _calculateTweenDuration(target, vars, durIsObj && dur.max || 10, durIsObj && dur.min || 0.2, durIsObj && \"overshoot\" in dur ? +dur.overshoot : preventOvershoot ? 0 : 1, true),\n        p,\n        curProp,\n        curVal,\n        unit,\n        velocity,\n        change1,\n        end,\n        change2,\n        linkedProps;\n\n    vars = _processingVars;\n    _processingVars = 0; //when there are linkedProps (typically \"x,y\" where snapping has to factor in multiple properties, we must first populate an object with all of those end values, then feed it to the function that make any necessary alterations. So the point of this first loop is to simply build an object (like {x:100, y:204.5}) for feeding into that function which we'll do later in the \"real\" loop.\n\n    linkedProps = _processLinkedProps(target, vars, getVal, resistance);\n\n    for (p in vars) {\n      if (!_reservedProps[p]) {\n        curProp = vars[p];\n        _isFunction(curProp) && (curProp = curProp(index, target, targets));\n\n        if (_isNumber(curProp)) {\n          velocity = curProp;\n        } else if (_isObject(curProp) && !isNaN(curProp.velocity)) {\n          velocity = +curProp.velocity;\n        } else {\n          if (tracker && tracker.isTracking(p)) {\n            velocity = tracker.get(p);\n          } else {\n            console.warn(\"ERROR: No velocity was defined for \" + target + \" property: \" + p);\n          }\n        }\n\n        change1 = _calculateChange(velocity, duration);\n        change2 = 0;\n        curVal = getVal(target, p);\n        unit = InertiaPlugin_getUnit(curVal);\n        curVal = parseFloat(curVal);\n\n        if (_isObject(curProp)) {\n          end = curVal + change1;\n\n          if (\"end\" in curProp) {\n            curProp = _parseEnd(curProp, linkedProps && p in linkedProps ? linkedProps : end, curProp.max, curProp.min, p, vars.radius);\n          }\n\n          if (\"max\" in curProp && +curProp.max < end) {\n            if (preventOvershoot || curProp.preventOvershoot) {\n              change1 = curProp.max - curVal;\n            } else {\n              change2 = curProp.max - curVal - change1;\n            }\n          } else if (\"min\" in curProp && +curProp.min > end) {\n            if (preventOvershoot || curProp.preventOvershoot) {\n              change1 = curProp.min - curVal;\n            } else {\n              change2 = curProp.min - curVal - change1;\n            }\n          }\n        }\n\n        this._props.push(p);\n\n        this._pt = new PropTween(this._pt, target, p, curVal, 0, _emptyFunc, 0, cache.set(target, p, this));\n        this._pt.u = unit || 0;\n        this._pt.c1 = change1;\n        this._pt.c2 = change2;\n      }\n    }\n\n    tween.duration(duration);\n    return InertiaPlugin_bonusValidated;\n  },\n  render: function render(ratio, data) {\n    var pt = data._pt;\n    ratio = _power3(data.tween._time / data.tween._dur);\n\n    while (pt) {\n      pt.set(pt.t, pt.p, InertiaPlugin_round(pt.s + pt.c1 * ratio + pt.c2 * ratio * ratio) + pt.u, pt.d, ratio);\n      pt = pt._next;\n    }\n  }\n};\n\"track,untrack,isTracking,getVelocity,getByTarget\".split(\",\").forEach(function (name) {\n  return InertiaPlugin[name] = VelocityTracker[name];\n});\nInertiaPlugin_getGSAP() && InertiaPlugin_gsap.registerPlugin(InertiaPlugin);\n\n;// CONCATENATED MODULE: ./app/src/js/classes/Draggable.js\nfunction Draggable_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction Draggable_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction Draggable_createClass(Constructor, protoProps, staticProps) { if (protoProps) Draggable_defineProperties(Constructor.prototype, protoProps); if (staticProps) Draggable_defineProperties(Constructor, staticProps); return Constructor; }\n\n// Gsap\n\n\n\ngsap/* gsap.registerPlugin */.p8.registerPlugin(Draggable/* Draggable */._);\ngsap/* gsap.registerPlugin */.p8.registerPlugin(InertiaPlugin); //empty function\n\nvar Draggable_noop = function noop() {}; //eslint-disable-line\n\n\nvar Draggable_lerp = function lerp(a, b, n) {\n  return (1 - n) * a + n * b;\n}; // Utilities\n\n\n\n\nvar Draggable_default = /*#__PURE__*/function () {\n  function _default(options) {\n    Draggable_classCallCheck(this, _default);\n\n    //hook functions\n    this._onDragStart = options.onDragStart || Draggable_noop;\n    this._onDrag = options.onDrag || Draggable_noop;\n    this._onDragEnd = options.onDragEnd || Draggable_noop;\n    this._onProgress = options.onProgress || Draggable_noop;\n    this._onPress = options.onPress || Draggable_noop;\n    this._onRelease = options.onRelease || Draggable_noop; // this._onSnap = options.onSnap || noop;\n    // this._onSnapLimits = options._onSnapLimits || noop;\n\n    this.slider = options.target;\n    this.sliderContent = options.targetInner;\n    this.snap = typeof options.snap !== 'undefined' ? options.snap : false;\n    this.item = this.sliderContent.querySelector('.slider__item');\n    this.draggable = null;\n    this.divNode = null;\n    this.current = 0;\n    this.last = 0; // this.BoundItemWidth = this.item.getBoundingClientRect().width;\n    // this.styleRightItem = window.getComputedStyle(this.sliderContent.querySelector('a'), null);\n    // this.SnapItem = this.BoundItemWidth + (parseInt(this.styleRightItem.marginRight, 10));\n\n    this.init();\n  } // eslint-disable-next-line no-empty-function\n\n\n  Draggable_createClass(_default, [{\n    key: \"events\",\n    value: function events() {}\n  }, {\n    key: \"createDraggable\",\n    value: function createDraggable() {\n      var _this = this;\n\n      this.draggable = Draggable/* Draggable.create */._.create(this.sliderContent, {\n        type: 'x',\n        lockAxis: true,\n        autoScroll: true,\n        dragResistance: 0.1,\n        edgeResistance: 0.8,\n        bounds: this.slider,\n        inertia: true,\n        throwProps: true,\n        snap: function snap(value) {\n          return _this.snap ? Math.round(value / -_this.item.offsetWidth) * -_this.item.offsetWidth : value;\n        },\n        onDrag: function onDrag() {\n          _this._onDrag(_this);\n        },\n        onThrowUpdate: function onThrowUpdate() {\n          _this._onDrag();\n        },\n        onDragStart: function onDragStart() {\n          _this._onDragStart();\n        },\n        onDragEnd: function onDragEnd() {\n          _this._onDragEnd();\n        },\n        onProgress: function onProgress(e) {\n          _this._onProgress(e);\n        },\n        onPress: function onPress(e) {\n          _this._onPress(e);\n        },\n        onRelease: function onRelease(e) {\n          _this._onRelease(e);\n        } // snap: {\n        //     x: (endValue) => {\n        //         return Math.round(endValue / this.SnapItem) * this.SnapItem;\n        //     },\n        // },\n        // onPress: (e) =>\n        // {\n        //     gsap.to(this.sliderContent, { scale: 0.9, ease: 'power1.out', duration: 1 });\n        //     // gsap.to(this.$circle, { scale: .8, ease: 'power1.out', duration: .5 });\n        //     // this.$circle.querySelector('.label').innerHTML = \"\";\n        //     // this.$circle.querySelector('.label').appendChild(\n        //     //     this.$circle.querySelector('.label').ownerDocument.importNode(this.doc.documentElement, true));\n        // },\n        // onRelease: () =>\n        // {\n        //     gsap.to(this.sliderContent, { scale: 1, ease: 'power1.out', duration: 1 });\n        //     // gsap.to(this.$circle, { scale: 1, ease: 'power1.out', duration: .5 });\n        //     // this.$circle.querySelector('.label').innerHTML = \"DRAG\";\n        // }\n\n      });\n    } // set up dots\n\n  }, {\n    key: \"setupDots\",\n    value: function setupDots() {\n      for (var i = 0; i < this.slides.length; i++) {\n        this.divNode = document.createElement('div');\n        this.divNode.classList.add('nav_dot');\n        this.divNode.id = 'dot_' + i + '';\n        this.$navDots.appendChild(this.divNode); // this.divNode = ;\n        // this.$navDots.prepend('<div class=\"nav_dot\" id=\"dot_' + i + '\"></div>');\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {// this.BoundItemWidth = this.item.getBoundingClientRect().width;\n      // this.styleRightItem = window.getComputedStyle(this.sliderContent.querySelector('a'), null);\n      // this.SnapItem = this.BoundItemWidth + (parseInt(this.styleRightItem.marginRight, 10));\n      //gsap.to(this.slider, { x: 0, ease: 'power4.inOut', duration: 1 });\n      // this.BoundItemWidth = this.item.getBoundingClientRect().width;\n      // this.styleRightItem = window.getComputedStyle(this.sliderContent.querySelector('a'), null);\n      // this.SnapItem = this.BoundItemWidth + (parseInt(this.styleRightItem.marginRight, 10));\n      // if (window.innerWidth >= 1025) {\n      //     this.draggable[0].disable();\n      //     gsap.to(this.slider, { x: 0, ease: 'power4.inOut', duration: 1 });\n      // }\n      // else\n      //     this.draggable[0].enable();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.draggable.kill();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.createDraggable(); // this.setupDots();\n    }\n  }]);\n\n  return _default;\n}();\n\n\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererHome.js\nfunction rendererHome_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererHome_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererHome_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererHome_typeof(obj); }\n\nfunction rendererHome_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererHome_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererHome_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererHome_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererHome_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererHome_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererHome_setPrototypeOf(subClass, superClass); }\n\nfunction rendererHome_setPrototypeOf(o, p) { rendererHome_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererHome_setPrototypeOf(o, p); }\n\nfunction rendererHome_createSuper(Derived) { var hasNativeReflectConstruct = rendererHome_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererHome_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererHome_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererHome_possibleConstructorReturn(this, result); }; }\n\nfunction rendererHome_possibleConstructorReturn(self, call) { if (call && (rendererHome_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererHome_assertThisInitialized(self); }\n\nfunction rendererHome_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererHome_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererHome_getPrototypeOf(o) { rendererHome_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererHome_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n // Other\n// import Slider from '../classes/slider';\n// import SplitText from '../classes/splitText';\n\nvar RendererHome = /*#__PURE__*/function (_Renderer) {\n  rendererHome_inherits(RendererHome, _Renderer);\n\n  var _super = rendererHome_createSuper(RendererHome);\n\n  function RendererHome() {\n    rendererHome_classCallCheck(this, RendererHome);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererHome_createClass(RendererHome, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$hero = this.$el.querySelector('.home__hero');\n      this.$poster = this.$el.querySelector('.home__poster');\n      this.$masterworks = this.$el.querySelector('.home__masterworks');\n      this.$related = this.$el.querySelector('.home__related'); // Video\n\n      this.$video = this.$hero.querySelector('.video');\n\n      if (this.$video) {\n        this.$videoLoop = this.$video.querySelector('.video__loop');\n        this.$videoLoopItem = this.$video.querySelector('.video__loop video');\n        this.$videoPoster = this.$video.querySelector('.video__poster');\n        this.$videoTrigger = this.$video.querySelector('.video__trigger');\n        this.$videoModal = this.$el.querySelector('.video--modal');\n        this.$videoMask = this.$videoModal.querySelector('.video__mask');\n        this.$videoPlayer = this.$videoModal.querySelector('.video__player');\n        this.$videoPlayerItem = this.$videoModal.querySelector('.video__player video');\n        this.$videoCloser = this.$videoModal.querySelector('.video__closer');\n      }\n    }\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {// if(this.appStore.isDesktop)\n      //     gsap.set(this.$hero.querySelector('.logo'), { opacity: 0.0001 });\n      // gsap.set(this.$hero.querySelector('.title'), { opacity: 0.0001 });\n    }\n  }, {\n    key: \"events\",\n    value: function events() {\n      var _this = this;\n\n      if (this.$videoPlayer && this.$videoTrigger) {\n        this.domEvents.add(this.$videoTrigger, 'click', function (e, a, el) {\n          if (_this.appStore.isDesktop) {\n            _this.lastScroll = _this.superScroller._scroll.livePosition.y;\n\n            var _offset = _this.$videoLoop.getBoundingClientRect().top - window.innerWidth * 0.05;\n\n            _this.superScroller.scrollAnimate(_offset - _this.lastScroll, 1, 'expo.inOut', true);\n\n            gsap/* default.delayedCall */.ZP.delayedCall(1, function () {\n              _this.videoOpen(e, a, el);\n            });\n          } else {\n            _this.videoOpen(e, a, el);\n          }\n        });\n        this.domEvents.add(this.$videoCloser, 'click', function (e, a, el) {\n          _this.videoClose(e, a, el);\n        });\n        this.domEvents.add(this.$videoMask, 'click', function (e, a, el) {\n          _this.videoClose(e, a, el);\n        });\n        this.domEvents.add(this.$videoPlayerItem, 'ended', function (e, a, el) {\n          _this.videoClose(e, a, el);\n        });\n\n        if (this.appStore.isDesktop) {\n          this.domEvents.add(this.$videoTrigger, 'mouseenter', function (e, a, el) {\n            _this.enterIcon(e, a, el);\n          });\n          this.domEvents.add(this.$videoTrigger, 'mouseleave', function (e, a, el) {\n            _this.leaveIcon(e, a, el);\n          });\n          this.domEvents.add(this.$videoCloser, 'mouseenter', function (e, a, el) {\n            _this.enterIcon(e, a, el);\n          });\n          this.domEvents.add(this.$videoCloser, 'mouseleave', function (e, a, el) {\n            _this.leaveIcon(e, a, el);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      // if(this.appStore.isDesktop)\n      //     gsap.to(this.$hero.querySelector('.logo'), { opacity: 1, duration: 1, ease: 'power2.out' });\n      // gsap.to(this.$hero.querySelector('.title'), { opacity: 1, duration: 1, ease: 'power2.out' });\n      if (this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.appUi.$headerSubmenu, {\n        opacity: 1,\n        duration: 1,\n        ease: 'power2.out'\n      });\n      if (this.appStore.isDesktop) this.initHero();\n      this.initScrolltitle();\n      this.initParallaxPoster();\n      this.initMasterworks();\n      this.initRelated();\n    }\n  }, {\n    key: \"initHero\",\n    value: function initHero() {\n      if (this.$hero) {\n        this.$heroOuters = this.$hero.querySelectorAll('.outer');\n        var heroTimeline = gsap/* default.timeline */.ZP.timeline({\n          defaults: {\n            ease: 'none'\n          },\n          scrollTrigger: {\n            trigger: this.$hero,\n            scrub: true,\n            start: 'top top',\n            end: window.innerHeight * 2 + 'px top'\n          }\n        });\n\n        for (var i = 0; i < this.$heroOuters.length; i++) {\n          heroTimeline.to(this.$heroOuters[i], {\n            y: i * 15 + 'vw'\n          }, 0);\n        }\n      }\n    }\n  }, {\n    key: \"videoOpen\",\n    value: function videoOpen() {\n      this.$videoLoopItem.pause();\n      gsap/* default.set */.ZP.set(this.$videoModal, {\n        display: 'block',\n        zIndex: 1000\n      });\n      if (this.appStore.isDesktop) this.superScroller._scroll.enable = false;else this.$videoModal.addEventListener('touchmove', function (e) {\n        e.preventDefault();\n      });\n      this.opened = true;\n      this.$videoPlayerItem.play();\n      this.$videoPlayerItem.style.visibility = 'visible';\n      gsap/* default.to */.ZP.to(this.$videoMask, {\n        opacity: 0.8,\n        ease: 'expo.out',\n        duration: 0.5\n      });\n      gsap/* default.to */.ZP.to(this.$videoPlayer, {\n        y: '-50%',\n        ease: 'expo.out',\n        duration: 0.8,\n        delay: 0.5\n      });\n      gsap/* default.to */.ZP.to(this.$videoCloser, {\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 0.8,\n        delay: 1.3\n      });\n    }\n  }, {\n    key: \"videoClose\",\n    value: function videoClose() {\n      var _this2 = this;\n\n      this.opened = false;\n      gsap/* default.to */.ZP.to(this.$videoCloser, {\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 0.8\n      });\n      gsap/* default.to */.ZP.to(this.$videoPlayer, {\n        y: this.appStore.isDesktop ? '-200%' : '-300%',\n        ease: 'expo.out',\n        duration: 0.8,\n        delay: 0.5\n      });\n      gsap/* default.to */.ZP.to(this.$videoMask, {\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 0.5,\n        delay: 1.3,\n        onComplete: function onComplete() {\n          _this2.$videoLoopItem.play();\n\n          _this2.$videoPlayerItem.style.visibility = 'hidden';\n\n          _this2.$videoPlayerItem.pause();\n\n          _this2.$videoPlayerItem.currentTime = 0;\n          gsap/* default.set */.ZP.set(_this2.$videoModal, {\n            display: 'none',\n            zIndex: 'initial'\n          });\n          if (_this2.appStore.isDesktop) _this2.superScroller._scroll.enable = true;\n        }\n      });\n    }\n  }, {\n    key: \"enterIcon\",\n    value: function enterIcon(e, a, el) {\n      gsap/* default.to */.ZP.to(el, {\n        scale: 0.9,\n        duration: 1.5,\n        ease: 'expo.out'\n      });\n    }\n  }, {\n    key: \"leaveIcon\",\n    value: function leaveIcon(e, a, el) {\n      gsap/* default.to */.ZP.to(el, {\n        scale: 1,\n        duration: 1.5,\n        ease: 'expo.out'\n      });\n    }\n  }, {\n    key: \"initScrolltitle\",\n    value: function initScrolltitle() {\n      var _this3 = this;\n\n      this.scrolltitles = [];\n      this.$scrolltitles = this.$el.querySelectorAll('.scrolltitle');\n\n      var _loop = function _loop(i) {\n        var speed = _this3.$scrolltitles[i].dataset.speed;\n        var scrolltitle = {};\n        scrolltitle.$scrolltitlesItems = _this3.$scrolltitles[i].children;\n        _this3.$scrolltitles[i].style.width = scrolltitle.$scrolltitlesItems[0].offsetWidth + 'px';\n        scrolltitle.scrollTitleInnerLeft = gsap/* default.timeline */.ZP.timeline({\n          paused: false,\n          defaults: {\n            ease: 'none',\n            duration: _this3.appStore.isDesktop ? scrolltitle.$scrolltitlesItems[0].offsetWidth / 300 : scrolltitle.$scrolltitlesItems[0].offsetWidth / 100,\n            repeat: '-1',\n            onReverseComplete: function onReverseComplete() {\n              scrolltitle.scrollTitleInnerLeft.pause();\n              scrolltitle.scrollTitleInnerRight.play();\n            }\n          }\n        });\n\n        for (var j = 0; j < scrolltitle.$scrolltitlesItems.length; j++) {\n          scrolltitle.scrollTitleInnerLeft.to(scrolltitle.$scrolltitlesItems[j], {\n            x: -100 * speed + '%'\n          }, 0);\n        }\n\n        scrolltitle.scrollTitleInnerRight = gsap/* default.timeline */.ZP.timeline({\n          paused: true,\n          defaults: {\n            ease: 'none',\n            duration: _this3.appStore.isDesktop ? scrolltitle.$scrolltitlesItems[0].offsetWidth / 300 : scrolltitle.$scrolltitlesItems[0].offsetWidth / 100,\n            repeat: '-1',\n            onReverseComplete: function onReverseComplete() {\n              scrolltitle.scrollTitleInnerRight.pause();\n              scrolltitle.scrollTitleInnerLeft.play();\n            }\n          }\n        });\n\n        for (var _j = 0; _j < scrolltitle.$scrolltitlesItems.length; _j++) {\n          scrolltitle.scrollTitleInnerRight.to(scrolltitle.$scrolltitlesItems[_j], {\n            x: 100 * speed + '%'\n          }, 0);\n        }\n\n        if (_this3.appStore.isDesktop) {\n          scrolltitle.scrollTitleOuter = gsap/* default.timeline */.ZP.timeline({\n            defaults: {\n              ease: 'none'\n            },\n            scrollTrigger: {\n              trigger: _this3.$scrolltitles[i],\n              scrub: true,\n              start: 'top bottom',\n              end: 'bottom top',\n              onUpdate: function onUpdate(self) {\n                // this.scrollTitleInner.timeScale(self.direction);\n                if (!scrolltitle.scrollTitleInnerLeft.paused()) scrolltitle.scrollTitleInnerLeft.reversed(self.direction !== 1);\n                if (!scrolltitle.scrollTitleInnerRight.paused()) scrolltitle.scrollTitleInnerRight.reversed(self.direction === 1);\n              }\n            }\n          });\n          scrolltitle.scrollTitleOuter.fromTo(_this3.$scrolltitles[i], {\n            x: window.innerWidth * 0.2 * speed\n          }, {\n            x: -window.innerWidth * 0.2 * speed\n          }, 0);\n        }\n\n        _this3.scrolltitles.push(scrolltitle);\n      };\n\n      for (var i = 0; i < this.$scrolltitles.length; i++) {\n        _loop(i);\n      }\n    }\n  }, {\n    key: \"resizeScrolltitles\",\n    value: function resizeScrolltitles() {\n      for (var i = 0; i < this.$scrolltitles.length; i++) {\n        this.$scrolltitles[i].style.width = '';\n      }\n\n      for (var _i = 0; _i < this.scrolltitles.length; _i++) {\n        if (this.scrolltitles[_i].scrollTitleInnerLeft) this.scrolltitles[_i].scrollTitleInnerLeft.pause(0).kill(true);\n        if (this.scrolltitles[_i].scrollTitleInnerRight) this.scrolltitles[_i].scrollTitleInnerRight.pause(0).kill(true);\n        if (this.scrolltitles[_i].scrollTitleOuter) this.scrolltitles[_i].scrollTitleOuter.pause(0).kill(true);\n      }\n\n      this.initScrolltitle();\n    }\n  }, {\n    key: \"initParallaxPoster\",\n    value: function initParallaxPoster() {\n      if (this.$poster) {\n        this.$posterImage = this.$poster.querySelector('.image');\n        this.$posterTitle = this.$poster.querySelector('.supertitle');\n        this.timelineParallaxPoster = gsap/* default.timeline */.ZP.timeline({\n          defaults: {\n            ease: 'none'\n          },\n          scrollTrigger: {\n            trigger: this.$posterImage,\n            scrub: true,\n            start: '-=' + window.innerWidth * 0.05 + ' bottom',\n            end: this.$posterImage.getBoundingClientRect().height - window.innerWidth * 0.05 + ' top'\n          }\n        });\n        var top = this.$posterImage.getBoundingClientRect().height / 2 - this.$posterTitle.getBoundingClientRect().height / 2;\n        var offset = this.$posterImage.getBoundingClientRect().height / 2 - this.$posterTitle.getBoundingClientRect().height / 2 - window.innerWidth * 0.05;\n        this.$posterTitle.style.top = top + 'px';\n        this.timelineParallaxPoster.set(this.$posterTitle, {\n          y: -offset\n        }, 0);\n        this.timelineParallaxPoster.to(this.$posterTitle, {\n          y: offset\n        }, 0);\n      }\n    }\n  }, {\n    key: \"initMasterworks\",\n    value: function initMasterworks() {\n      if (this.$masterworks) {\n        gsap/* default.set */.ZP.set(this.$masterworks.querySelector('.background__bg'), {\n          y: '-10vw',\n          scale: 1.2\n        });\n        var backgroundTimeline = gsap/* default.timeline */.ZP.timeline({\n          scrollTrigger: {\n            trigger: this.$masterworks.querySelector('.background'),\n            start: 'top bottom',\n            end: 'bottom top',\n            scrub: true // onToggle: (isActive) =>\n            // {\n            //     isActive ? this.$videoCover.querySelector('.video__player video').play() : this.$videoCover.querySelector('.video__player video').pause();\n            // }\n\n          },\n          defaults: {\n            duration: 1,\n            ease: 'none'\n          }\n        });\n        backgroundTimeline.to(this.$masterworks.querySelector('.background__bg'), {\n          y: '10vw',\n          scale: 1,\n          duration: 1\n        }, 0);\n      }\n    }\n  }, {\n    key: \"initRelated\",\n    value: function initRelated() {\n      var _this4 = this;\n\n      // Selectors\n      this.$relatedSlider = this.$related.querySelector('.slider');\n      this.$relatedSliderInner = this.$related.querySelector('.slider__inner');\n      this.$relatedSliderItems = this.$related.querySelectorAll('.slider__item');\n      this.$relatedPromotions = this.$related.querySelectorAll('.promotion');\n\n      if (this.appStore.isDesktop) {\n        for (var i = 0; i < this.$relatedPromotions.length; i++) {\n          this.domEvents.add(this.$relatedPromotions[i], 'mouseenter', function (e, a, el) {\n            _this4.promotionEnter(el);\n          });\n          this.domEvents.add(this.$relatedPromotions[i], 'mouseleave', function (e, a, el) {\n            _this4.promotionLeave(el);\n          });\n        }\n\n        if (this.$relatedSliderItems.length > 4) {\n          this.$relatedSliderInner.style.justifyContent = 'flex-start';\n          this.$relatedSliderInner.style.minWidth = 'auto';\n          this.domEvents.add(this.$relatedSliderInner, 'mouseenter', function (e, a, el) {\n            _this4.appUi.enterDragCursor();\n          });\n          this.domEvents.add(this.$relatedSliderInner, 'mouseleave', function (e, a, el) {\n            _this4.appUi.leaveDragCursor();\n          });\n          this.relatedDraggable = new superDragger_default({\n            el: this.$relatedSlider,\n            elClickables: this.$relatedPromotions,\n            inner: this.$relatedSliderInner,\n            onDragStart: function onDragStart() {\n              _this4.superScroller._scroll.enable = false;\n\n              for (var _i2 = 0; _i2 < _this4.$relatedPromotions.length; _i2++) {\n                gsap/* default.to */.ZP.to(_this4.$relatedPromotions[_i2], {\n                  scale: 0.94,\n                  opacity: 1,\n                  ease: 'expo.out',\n                  duration: 0.6\n                });\n                gsap/* default.to */.ZP.to(_this4.$relatedPromotions[_i2].querySelector('.inner .background__bg'), {\n                  scale: 1,\n                  opacity: 1,\n                  ease: 'expo.out',\n                  duration: 0.6\n                });\n              }\n            },\n            onDragEnd: function onDragEnd() {\n              _this4.superScroller._scroll.enable = true;\n\n              for (var _i3 = 0; _i3 < _this4.$relatedPromotions.length; _i3++) {\n                gsap/* default.to */.ZP.to(_this4.$relatedPromotions[_i3], {\n                  scale: 1,\n                  opacity: 1,\n                  ease: 'expo.out',\n                  duration: 0.6\n                });\n                gsap/* default.to */.ZP.to(_this4.$relatedPromotions[_i3].querySelector('.inner .background__bg'), {\n                  scale: 1.1,\n                  ease: 'expo.out',\n                  duration: 0.6\n                });\n              }\n            }\n          });\n        }\n      } else {\n        this.$relatedSliderInner.style.justifyContent = 'flex-start';\n        this.$relatedSliderInner.style.minWidth = 'auto';\n        this.relatedDraggable = new Draggable_default({\n          target: this.$relatedSlider,\n          targetInner: this.$relatedSliderInner,\n          snap: true\n        });\n      }\n    }\n  }, {\n    key: \"promotionEnter\",\n    value: function promotionEnter(el) {\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .background__bg'), {\n        scale: 1,\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n    }\n  }, {\n    key: \"promotionLeave\",\n    value: function promotionLeave(el) {\n      if (this.relatedDraggable && this.relatedDraggable._drag.dragging) return;\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .background__bg'), {\n        scale: 1.1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }, {\n    key: \"resizeOrientation\",\n    value: function resizeOrientation() {\n      for (var i = 0; i < this.splitTexts.length; i++) {\n        this.splitTexts[i].revert();\n      }\n\n      this.resizeScrolltitles();\n    }\n  }]);\n\n  return RendererHome;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererHome = (RendererHome);\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererAbout.js\nfunction rendererAbout_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererAbout_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererAbout_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererAbout_typeof(obj); }\n\nfunction rendererAbout_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererAbout_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererAbout_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererAbout_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererAbout_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererAbout_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererAbout_setPrototypeOf(subClass, superClass); }\n\nfunction rendererAbout_setPrototypeOf(o, p) { rendererAbout_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererAbout_setPrototypeOf(o, p); }\n\nfunction rendererAbout_createSuper(Derived) { var hasNativeReflectConstruct = rendererAbout_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererAbout_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererAbout_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererAbout_possibleConstructorReturn(this, result); }; }\n\nfunction rendererAbout_possibleConstructorReturn(self, call) { if (call && (rendererAbout_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererAbout_assertThisInitialized(self); }\n\nfunction rendererAbout_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererAbout_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererAbout_getPrototypeOf(o) { rendererAbout_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererAbout_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n\n // Other\n// import Slider from '../classes/slider';\n\n\n\nvar RendererAbout = /*#__PURE__*/function (_Renderer) {\n  rendererAbout_inherits(RendererAbout, _Renderer);\n\n  var _super = rendererAbout_createSuper(RendererAbout);\n\n  function RendererAbout() {\n    rendererAbout_classCallCheck(this, RendererAbout);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererAbout_createClass(RendererAbout, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$hero = this.$el.querySelector('.about__hero');\n      if (this.$hero) this.$heroImages = this.$hero.querySelectorAll('.image');\n    }\n  }, {\n    key: \"events\",\n    value: function events() {} // eslint-disable-line\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {\n      if (this.appStore.isDesktop) this.setCta();\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      if (this.appStore.isDesktop) this.initCta();\n    }\n  }, {\n    key: \"setCta\",\n    value: function setCta() {\n      this.$cta = this.$el.querySelector('.cta');\n\n      if (this.$cta) {\n        gsap/* default.set */.ZP.set(this.$cta.querySelector('.mask'), {\n          scaleY: 0\n        });\n        gsap/* default.set */.ZP.set(this.$cta.querySelector('.button'), {\n          y: '5vw'\n        });\n      }\n    }\n  }, {\n    key: \"initCta\",\n    value: function initCta() {\n      var _this = this;\n\n      if (this.$cta) {\n        ScrollTrigger/* default.create */.Z.create({\n          trigger: this.$cta,\n          start: 'top bottom',\n          once: true,\n          onEnter: function onEnter() {\n            gsap/* default.to */.ZP.to(_this.$cta.querySelector('.mask'), {\n              scaleY: 1,\n              duration: 2,\n              ease: 'expo.inOut'\n            });\n            gsap/* default.to */.ZP.to(_this.$cta.querySelector('.button'), {\n              y: 0,\n              duration: 2,\n              ease: 'expo.inOut'\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }]);\n\n  return RendererAbout;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererAbout = (RendererAbout);\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererPhilosophy.js\nfunction rendererPhilosophy_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererPhilosophy_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererPhilosophy_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererPhilosophy_typeof(obj); }\n\nfunction rendererPhilosophy_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererPhilosophy_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererPhilosophy_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererPhilosophy_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererPhilosophy_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererPhilosophy_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererPhilosophy_setPrototypeOf(subClass, superClass); }\n\nfunction rendererPhilosophy_setPrototypeOf(o, p) { rendererPhilosophy_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererPhilosophy_setPrototypeOf(o, p); }\n\nfunction rendererPhilosophy_createSuper(Derived) { var hasNativeReflectConstruct = rendererPhilosophy_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererPhilosophy_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererPhilosophy_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererPhilosophy_possibleConstructorReturn(this, result); }; }\n\nfunction rendererPhilosophy_possibleConstructorReturn(self, call) { if (call && (rendererPhilosophy_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererPhilosophy_assertThisInitialized(self); }\n\nfunction rendererPhilosophy_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererPhilosophy_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererPhilosophy_getPrototypeOf(o) { rendererPhilosophy_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererPhilosophy_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n\n // Other\n// import Slider from '../classes/slider';\n\n\n\nvar RendererPhilosophy = /*#__PURE__*/function (_Renderer) {\n  rendererPhilosophy_inherits(RendererPhilosophy, _Renderer);\n\n  var _super = rendererPhilosophy_createSuper(RendererPhilosophy);\n\n  function RendererPhilosophy() {\n    rendererPhilosophy_classCallCheck(this, RendererPhilosophy);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererPhilosophy_createClass(RendererPhilosophy, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$mision = this.$el.querySelector('.philosophy__mision');\n\n      if (this.$mision) {\n        this.$misionTitles = this.$mision.querySelectorAll('.supertitle');\n        this.$misionImage = this.$mision.querySelector('.image');\n      }\n\n      this.$vision = this.$el.querySelector('.philosophy__vision');\n\n      if (this.$vision) {\n        this.$visionTitles = this.$vision.querySelectorAll('.supertitle');\n        this.$visionImage = this.$vision.querySelector('.image');\n      }\n\n      this.$quote = this.$el.querySelector('.philosophy__quote');\n\n      if (this.$quote) {\n        this.$quoteIcon = this.$quote.querySelector('.quote__icon');\n        this.$quoteText = this.$quote.querySelector('quote__text');\n      }\n\n      this.$assets = this.$el.querySelector('.philosophy__assets');\n\n      if (this.$assets) {\n        if (this.appStore.isDesktop) this.$assetsTitles = this.$assets.querySelectorAll('.supertitle');else this.$assetsTitle = this.$assets.querySelector('.supertitle');\n        this.$assetsImages = this.$assets.querySelectorAll('.image');\n      }\n\n      this.$principles = this.$el.querySelector('.philosophy__principles');\n\n      if (this.$principles) {\n        this.$principlesTitle = this.$principles.querySelector('.supertitle');\n        this.$principlesItems = this.$principles.querySelectorAll('.principles__item');\n      }\n    }\n  }, {\n    key: \"events\",\n    value: function events() {} // eslint-disable-line\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {\n      if (this.appStore.isDesktop) this.setSupertitles();else this.setSupertitlesMobile();\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      if (this.appStore.isDesktop) this.initSupertitles();else this.initSupertitlesMobile();\n      this.initQuote();\n      this.initPrinciples();\n    }\n  }, {\n    key: \"setSupertitles\",\n    value: function setSupertitles() {\n      gsap/* default.set */.ZP.set(this.$misionImage.children[0], {\n        scale: 1.2\n      }, 0);\n      this.$supertitles = this.$el.querySelectorAll('.supertitle');\n\n      if (this.$supertitles) {\n        for (var $i = 0; $i < this.$supertitles.length; $i++) {\n          new SplitText(this.$supertitles[$i], {\n            type: 'chars',\n            linesClass: 'line line--++',\n            wordsClass: 'word word--++',\n            charsClass: 'char char--++'\n          }); // eslint-disable-line\n\n          this.$supertitles[$i].classList.add('split', 'split--chars'); // for(let j = 0; j < this.$supertitles[$i].querySelectorAll('.supertitle .line').length; j++)\n          // {\n          //     this.$supertitles[$i].querySelectorAll('.supertitle .line')[j].insertAdjacentHTML('beforeend', '<span class=\"underline\"></span>');\n          //     this.$supertitles[$i].querySelectorAll('.supertitle .line')[j].insertAdjacentHTML('afterend', '<span class=\"break\"></span>');\n          // }\n        }\n      }\n\n      this.$mision.style.paddingTop = window.innerHeight / 2 - this.$misionTitles[0].getBoundingClientRect().height / 2 + 'px';\n      this.$assets.querySelector('.columns--inner-2').style.paddingTop = this.$assetsImages[0].getBoundingClientRect().height + 'px';\n    }\n  }, {\n    key: \"initQuote\",\n    value: function initQuote() {\n      if (this.$quote) {\n        gsap/* default.set */.ZP.set(this.$quoteIcon, {\n          y: '2.5vw'\n        }, 0);\n        var quoteTimeline = gsap/* default.timeline */.ZP.timeline({\n          defaults: {\n            ease: 'none'\n          },\n          scrollTrigger: {\n            trigger: this.$quote,\n            scrub: true,\n            start: 'top bottom',\n            end: 'bottom top'\n          }\n        });\n        quoteTimeline.to(this.$quoteIcon, {\n          y: '-2.5vw'\n        }, 0);\n      }\n    }\n  }, {\n    key: \"initSupertitles\",\n    value: function initSupertitles() {\n      // Mision\n      var misionStart = window.innerHeight / 2 - this.$misionTitles[0].getBoundingClientRect().height / 2;\n      var misionEnd = window.innerHeight / 2 + this.$misionTitles[0].getBoundingClientRect().height / 2;\n      var misionOffset = this.$misionImage.getBoundingClientRect().y + this.$misionImage.getBoundingClientRect().height - this.$misionTitles[0].getBoundingClientRect().top;\n      var misionTimeline = gsap/* default.timeline */.ZP.timeline({\n        defaults: {\n          ease: 'none'\n        },\n        scrollTrigger: {\n          trigger: this.$misionTitles[0],\n          scrub: true,\n          start: 'top ' + misionStart + 'px',\n          end: misionOffset + 'px ' + misionEnd + 'px'\n        }\n      });\n      misionTimeline.to(this.$misionTitles[0], {\n        y: (misionOffset - this.$misionTitles[0].getBoundingClientRect().height) / 2,\n        duration: 0.5\n      }, 0);\n      misionTimeline.to(this.$misionTitles[1], {\n        y: misionOffset - this.$misionTitles[0].getBoundingClientRect().height,\n        duration: 1\n      }, 0);\n      misionTimeline.to(this.$misionImage.children[0], {\n        scale: 1,\n        duration: 1\n      }, 0); // Vision\n\n      var visionStart = window.innerHeight / 2 - this.$visionTitles[0].getBoundingClientRect().height / 2;\n      var visionEnd = window.innerHeight / 2 + this.$visionTitles[0].getBoundingClientRect().height / 2;\n      var visionOffset = this.$visionImage.getBoundingClientRect().top + this.$visionImage.getBoundingClientRect().height - this.$visionTitles[0].getBoundingClientRect().top;\n      gsap/* default.set */.ZP.set(this.$visionImage.children[0], {\n        scale: 1.2\n      }, 0);\n      var visionTimeline = gsap/* default.timeline */.ZP.timeline({\n        defaults: {\n          ease: 'none'\n        },\n        scrollTrigger: {\n          trigger: this.$visionTitles[0],\n          scrub: true,\n          start: 'top ' + visionStart + 'px',\n          end: visionOffset + 'px ' + visionEnd + 'px'\n        }\n      });\n      visionTimeline.to(this.$visionTitles[0], {\n        y: (visionOffset - this.$visionTitles[0].getBoundingClientRect().height) / 2,\n        duration: 0.5\n      }, 0);\n      visionTimeline.to(this.$visionTitles[1], {\n        y: visionOffset - this.$visionTitles[0].getBoundingClientRect().height,\n        duration: 1\n      }, 0);\n      visionTimeline.to(this.$visionImage.children[0], {\n        scale: 1,\n        duration: 1\n      }, 0); // gsap.set(this.$visionImage.children[0], { scale: 1.2 }, 0);\n      // const visionTimeline2 = gsap.timeline({\n      //     defaults: { ease: 'none' },\n      //     scrollTrigger: {\n      //         trigger: this.$visionTitles[0],\n      //         scrub: true,\n      //         start: 'top bottom',\n      //         end: visionOffset + 'px ' + visionEnd + 'px',\n      //     }\n      // });\n      // visionTimeline2.to(this.$visionImage.children[0], { scale: 1, duration: 1 }, 0);\n      // Assets\n\n      var assetsStart = window.innerHeight / 2 - this.$assetsTitles[0].getBoundingClientRect().height / 2;\n      var assetsEnd = window.innerHeight / 2 + this.$assetsTitles[0].getBoundingClientRect().height / 2;\n      var assetsActiOffset = this.$assetsTitles[0].getBoundingClientRect().height + window.innerWidth * 0.125;\n      var assetsVosOffset = this.$assetsTitles[1].getBoundingClientRect().height + this.$assetsImages[0].getBoundingClientRect().height + window.innerWidth * 0.125;\n      var assetsActiTimeline = gsap/* default.timeline */.ZP.timeline({\n        defaults: {\n          ease: 'none'\n        },\n        scrollTrigger: {\n          trigger: this.$assetsTitles[0],\n          scrub: true,\n          start: 'top ' + assetsStart + 'px',\n          end: assetsActiOffset + 'px ' + assetsEnd + 'px'\n        }\n      });\n      assetsActiTimeline.to(this.$assetsTitles[0], {\n        y: assetsActiOffset - this.$assetsTitles[0].getBoundingClientRect().height,\n        duration: 0.5\n      }, 0);\n      var assetsVosTimeline = gsap/* default.timeline */.ZP.timeline({\n        defaults: {\n          ease: 'none'\n        },\n        scrollTrigger: {\n          trigger: this.$assetsTitles[1],\n          scrub: true,\n          start: 'top ' + assetsStart + 'px',\n          end: assetsVosOffset + 'px ' + assetsEnd + 'px'\n        }\n      });\n      assetsVosTimeline.to(this.$assetsTitles[1], {\n        y: assetsVosOffset - this.$assetsTitles[1].getBoundingClientRect().height,\n        duration: 0.5\n      }, 0);\n    }\n  }, {\n    key: \"setSupertitlesMobile\",\n    value: function setSupertitlesMobile() {\n      this.$fixedTitles = this.$el.querySelectorAll('.fixed .supertitle');\n      new SplitText(this.$fixedTitles[0], {\n        type: 'words',\n        wordsClass: 'word word--++'\n      });\n      gsap/* default.set */.ZP.set(this.$fixedTitles[0].children[0], {\n        opacity: 0.0001\n      });\n      new SplitText(this.$fixedTitles[1], {\n        type: 'words',\n        wordsClass: 'word word--++'\n      });\n      gsap/* default.set */.ZP.set(this.$fixedTitles[1].children[0], {\n        opacity: 0.0001\n      });\n      new SplitText(this.$fixedTitles[2], {\n        type: 'words',\n        wordsClass: 'word word--++'\n      });\n      gsap/* default.set */.ZP.set(this.$fixedTitles[2].children[0], {\n        opacity: 0.0001\n      });\n      new SplitText(this.$fixedTitles[3], {\n        type: 'words',\n        wordsClass: 'word word--++'\n      });\n      gsap/* default.set */.ZP.set(this.$fixedTitles[3].children[0], {\n        opacity: 0.0001\n      });\n      gsap/* default.to */.ZP.to(this.$fixedTitles[0].children[0], {\n        opacity: 1,\n        ease: 'power2.out',\n        duration: 0.1\n      });\n    }\n  }, {\n    key: \"initSupertitlesMobile\",\n    value: function initSupertitlesMobile() {\n      var _this = this;\n\n      // Mision\n      this.superTrigger.create({\n        trigger: this.$mision,\n        scrub: true,\n        start: 'top top+=100',\n        end: 'bottom 110%',\n        onEnter: function onEnter() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[0].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeave: function onLeave() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[0].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onEnterBack: function onEnterBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[0].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeaveBack: function onLeaveBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[0].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        }\n      }); // Vision\n\n      this.superTrigger.create({\n        trigger: this.$vision,\n        scrub: true,\n        start: 'top 50%',\n        end: 'bottom 110%',\n        onEnter: function onEnter() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[1].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeave: function onLeave() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[1].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onEnterBack: function onEnterBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[1].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeaveBack: function onLeaveBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[1].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        }\n      }); // Assets\n\n      this.superTrigger.create({\n        trigger: this.$assets,\n        scrub: true,\n        start: 'top 50%',\n        end: 'bottom 110%',\n        onEnter: function onEnter() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[2].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeave: function onLeave() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[2].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onEnterBack: function onEnterBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[2].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeaveBack: function onLeaveBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[2].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        }\n      }); // Principles\n\n      this.superTrigger.create({\n        trigger: this.$principles,\n        scrub: true,\n        start: 'top 35%',\n        end: 'bottom 110%',\n        onEnter: function onEnter() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[3].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeave: function onLeave() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[3].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onEnterBack: function onEnterBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[3].children[0], {\n            opacity: 1,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        },\n        onLeaveBack: function onLeaveBack() {\n          gsap/* default.to */.ZP.to(_this.$fixedTitles[3].children[0], {\n            opacity: 0.0001,\n            ease: 'power2.out',\n            duration: 0.2\n          });\n        }\n      });\n    }\n  }, {\n    key: \"initPrinciples\",\n    value: function initPrinciples() {\n      this.principlesTimelines = [];\n\n      for (var i = 0; i < this.$principlesItems.length; i++) {\n        gsap/* default.set */.ZP.set(this.$principlesItems[i].querySelector('.background__bg'), {\n          y: this.appStore.isDesktop ? -window.innerHeight + 200 : -(window.innerHeight * 0.5) + 200,\n          scale: 1.2\n        }, 0);\n        gsap/* default.set */.ZP.set(this.$principlesItems[i].querySelector('.background__mask'), {\n          opacity: 1\n        }, 0);\n        var principleTimeline = gsap/* default.timeline */.ZP.timeline({\n          defaults: {\n            ease: 'none'\n          },\n          scrollTrigger: {\n            trigger: this.$principlesItems[i].querySelector('.background'),\n            scrub: true,\n            start: 'top bottom',\n            end: 'bottom bottom' //end: 'top+=' + window.innerHeight + ' bottom'\n\n          }\n        });\n        principleTimeline.to(this.$principlesItems[i].querySelector('.background__bg'), {\n          y: 0,\n          scale: 1\n        }, 0);\n        principleTimeline.to(this.$principlesItems[i].querySelector('.background__mask'), {\n          opacity: 0.0001,\n          duration: 0.5\n        }, 0);\n        this.principlesTimelines.push(principleTimeline);\n      }\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }]);\n\n  return RendererPhilosophy;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererPhilosophy = (RendererPhilosophy);\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererPromotions.js\nfunction rendererPromotions_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererPromotions_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererPromotions_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererPromotions_typeof(obj); }\n\nfunction rendererPromotions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererPromotions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererPromotions_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererPromotions_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererPromotions_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererPromotions_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererPromotions_setPrototypeOf(subClass, superClass); }\n\nfunction rendererPromotions_setPrototypeOf(o, p) { rendererPromotions_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererPromotions_setPrototypeOf(o, p); }\n\nfunction rendererPromotions_createSuper(Derived) { var hasNativeReflectConstruct = rendererPromotions_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererPromotions_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererPromotions_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererPromotions_possibleConstructorReturn(this, result); }; }\n\nfunction rendererPromotions_possibleConstructorReturn(self, call) { if (call && (rendererPromotions_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererPromotions_assertThisInitialized(self); }\n\nfunction rendererPromotions_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererPromotions_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererPromotions_getPrototypeOf(o) { rendererPromotions_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererPromotions_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n\n\n // Other\n// import Slider from '../classes/slider';\n\n\n\nvar RendererPromotions = /*#__PURE__*/function (_Renderer) {\n  rendererPromotions_inherits(RendererPromotions, _Renderer);\n\n  var _super = rendererPromotions_createSuper(RendererPromotions);\n\n  function RendererPromotions() {\n    rendererPromotions_classCallCheck(this, RendererPromotions);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererPromotions_createClass(RendererPromotions, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$promotions = this.$el.querySelectorAll('.promotion');\n      this.$slider = this.$el.querySelector('.slider');\n      this.$sliderInner = this.$slider.querySelector('.slider__inner');\n      this.$sliderScrollbar = this.$slider.querySelector('.slider__scrollbar');\n    }\n  }, {\n    key: \"events\",\n    value: function events() {\n      this.splitTexts = [];\n      this.scrollTriggers = [];\n\n      for (var i = 0; i < this.$promotions.length; i++) {\n        this.promotionInit(this.$promotions[i]);\n      }\n    }\n  }, {\n    key: \"scroll\",\n    value: function scroll() {\n      var _this = this;\n\n      if (this.$sliderInner) {\n        if (this.appStore.isDesktop) {\n          // Superscroller\n          this.sliderScroller = new _default({\n            mode: 'horizontal',\n            scroll: true,\n            scrollTarget: this.$sliderInner,\n            bar: false\n          });\n          if (this.appUi.$headerLogo) gsap/* default.to */.ZP.to(this.appUi.$headerLogo, {\n            y: 0,\n            ease: 'expo.out'\n          });\n        } else {\n          // this.superTrigger = ScrollTrigger;\n          this.superTrigger = ScrollTrigger/* default */.Z;\n          this.superTrigger.refresh();\n          gsap/* default.ticker.add */.ZP.ticker.add(function () {\n            _this.requestAnimationFrame();\n          });\n          this.superTriggerTl = gsap/* default.timeline */.ZP.timeline({\n            defaults: {\n              ease: 'none'\n            },\n            scrollTrigger: {\n              trigger: this.$app,\n              scrub: true,\n              start: 'top top',\n              end: 'bottom bottom',\n              onUpdate: function onUpdate(self) {\n                _this.superScrollerMobile = self.progress * self.end; // if(this.appUi.$header)\n                //     gsap.to(this.appUi.$header, { y: -(self.progress * this.$el.getBoundingClientRect().height) });\n                // if(this.appUi.$logo)\n                //     gsap.to(this.appUi.$logo, { y: -(self.progress * this.$el.getBoundingClientRect().height) / 2 });\n                // if(this.appUi.$headerTriggerText && !this.appStore.isDesktop)\n                //     gsap.to(this.appUi.$headerTriggerText, { y: -(self.progress * this.$el.getBoundingClientRect().height) / 2 });\n              }\n            }\n          });\n        }\n      }\n    } // beforeEnter()\n    // {\n    //     if(this.appStore.isDesktop)\n    //     {\n    //         for(let i = 0; i < this.$promotions.length; i++)\n    //             gsap.set(this.$promotions[i], { x: '20vw', opacity: 0.0001 });\n    //     }\n    // }\n    // enter()\n    // {\n    //     if(this.appStore.isDesktop)\n    //     {\n    //         for(let i = 0; i < this.$promotions.length; i++)\n    //             gsap.to(this.$promotions[i], { x: '0vw', opacity: 1, duration: 2, ease: 'expo.out', delay: i * 0.2 });\n    //     }\n    //     else\n    //     {\n    //         // Animate first promotion numbers in mobile\n    //         const pending = this.$promotions[0].querySelector('.pending').dataset.value;\n    //         const pendingSplit = pending.split('');\n    //         for(let i = 0; i < pendingSplit.length; i++)\n    //             gsap.to(this.$promotions[0].querySelector('.pending').querySelectorAll('.number')[i], { y: -((pendingSplit[i] * 100)) + '%', opacity: 1, ease: 'expo.out', duration: 2, delay: 1 + (i * 0.01) });\n    //     }\n    //     if(!this.appStore.isDesktop)\n    //         this.initPromotionMobile();\n    // }\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {\n      if (this.appStore.isDesktop) {\n        // Set promotions\n        for (var i = 0; i < this.$promotions.length; i++) {\n          gsap/* default.set */.ZP.set(this.$promotions[i], {\n            y: '-2.5vw',\n            willChange: 'transform'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"preenter\",\n    value: function preenter() {\n      if (this.appStore.isDesktop) {\n        // Init promotions\n        for (var i = 0; i < this.$promotions.length; i++) {\n          gsap/* default.to */.ZP.to(this.$promotions[i], {\n            y: '0vw',\n            duration: 1,\n            delay: i * 0.05,\n            ease: 'expo.out',\n            clearProps: 'willChange'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      var _this2 = this;\n\n      if (!this.appStore.isDesktop) {\n        gsap/* default.to */.ZP.to(this.$promotions[0].querySelector('.pending'), {\n          opacity: 1,\n          ease: 'expo.out',\n          duration: 2\n        });\n        var pending = this.$promotions[0].querySelector('.pending').dataset.value;\n        var pendingSplit = pending.split('');\n\n        for (var j = 0; j < pendingSplit.length; j++) {\n          gsap/* default.to */.ZP.to(this.$promotions[0].querySelector('.pending').querySelectorAll('.number')[j], {\n            y: (9 - pendingSplit[j]) * 100 + 100 + '%',\n            opacity: 1,\n            ease: 'expo.out',\n            duration: 2,\n            delay: j * 0.1\n          });\n        }\n      }\n\n      if (this.appStore.isDesktop) {\n        for (var i = 0; i < this.$promotions.length; i++) {\n          this.domEvents.add(this.$promotions[i], 'mouseenter', function (e, a, el) {\n            _this2.promotionEnter(el);\n          });\n          this.domEvents.add(this.$promotions[i], 'mouseleave', function (e, a, el) {\n            _this2.promotionLeave(el);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"promotionInit\",\n    value: function promotionInit(el) {\n      if (this.appStore.isDesktop) {\n        var firstLabel = el.querySelector('.label--1');\n        var firstLabelSplit = new SplitText(firstLabel, {\n          type: 'lines, words',\n          linesClass: 'line line--++',\n          wordsClass: 'word word--++',\n          charsClass: 'char char--++'\n        }); // eslint-disable-line\n\n        this.splitTexts.push(firstLabelSplit);\n        firstLabel.classList.add('split');\n        var firstLabelWords = el.querySelectorAll('.label--1 .word');\n\n        for (var j = 0; j < firstLabelWords.length; j++) {\n          gsap/* default.set */.ZP.set(firstLabelWords[j], {\n            y: '0%'\n          });\n        }\n\n        var secondLabel = el.querySelector('.label--2');\n        var secondLabelSplit = new SplitText(secondLabel, {\n          type: 'lines, words',\n          linesClass: 'line line--++',\n          wordsClass: 'word word--++',\n          charsClass: 'char char--++'\n        }); // eslint-disable-line\n\n        this.splitTexts.push(secondLabelSplit);\n        secondLabel.classList.add('split');\n        var secondLabelWords = el.querySelectorAll('.label--2 .word');\n\n        for (var _j = 0; _j < secondLabelWords.length; _j++) {\n          gsap/* default.set */.ZP.set(secondLabelWords[_j], {\n            y: '100%'\n          });\n        }\n      } else {\n        var promotionTrigger = ScrollTrigger/* default.create */.Z.create({\n          defaults: {\n            ease: 'none'\n          },\n          trigger: el.querySelector('.pending'),\n          start: 'top bottom',\n          once: true,\n          onEnter: function onEnter() {\n            gsap/* default.set */.ZP.set(el.querySelector('.pending'), {\n              display: 'flex'\n            });\n            var pending = el.querySelector('.pending').dataset.value;\n            var pendingSplit = pending.split('');\n            gsap/* default.to */.ZP.to(el.querySelector('.pending'), {\n              opacity: 1,\n              ease: 'expo.out',\n              duration: 2\n            });\n\n            for (var i = 0; i < pendingSplit.length; i++) {\n              gsap/* default.to */.ZP.to(el.querySelector('.pending').querySelectorAll('.number')[i], {\n                y: (9 - pendingSplit[i]) * 100 + 100 + '%',\n                opacity: 1,\n                ease: 'expo.out',\n                duration: 2,\n                delay: i * 0.1\n              });\n            } // gsap.to(el.querySelector('.pending'), { opacity: 1, ease: 'expo.out', duration: 2 });\n            // const pending = el.querySelector('.pending').dataset.value;\n            // const pendingSplit = pending.split('');\n            // for(let j = 0; j < pendingSplit.length; j++)\n            //     gsap.to(el.querySelector('.pending').querySelectorAll('.number')[j], { y: (((9 - pendingSplit[j]) * 100) + 100) + '%', opacity: 1, ease: 'expo.out', duration: 2, delay: j * 0.1 });\n\n          }\n        });\n        this.scrollTriggers.push(promotionTrigger);\n      }\n    }\n  }, {\n    key: \"promotionEnter\",\n    value: function promotionEnter(el) {\n      gsap/* default.killTweensOf */.ZP.killTweensOf([el.querySelector('.outer'), el.querySelector('.pending')]);\n      gsap/* default.set */.ZP.set(el.querySelector('.pending'), {\n        display: 'flex'\n      });\n      gsap/* default.set */.ZP.set(el.querySelector('.outer'), {\n        display: 'block'\n      });\n      var pending = el.querySelector('.pending').dataset.value;\n      var pendingSplit = pending.split('');\n      gsap/* default.to */.ZP.to(el.querySelector('.pending'), {\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 2\n      });\n\n      for (var i = 0; i < pendingSplit.length; i++) {\n        gsap/* default.to */.ZP.to(el.querySelector('.pending').querySelectorAll('.number')[i], {\n          y: (9 - pendingSplit[i]) * 100 + 100 + '%',\n          opacity: 1,\n          ease: 'expo.out',\n          duration: 2,\n          delay: i * 0.1\n        });\n      }\n\n      gsap/* default.to */.ZP.to(el.querySelector('.outer .background__bg'), {\n        scale: 1,\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.outer .background__overlay'), {\n        opacity: 0.5,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .background__bg'), {\n        scale: 1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .mask'), {\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .info'), {\n        color: '#fff',\n        ease: 'expo.out',\n        duration: 0.6\n      });\n\n      if (this.appStore.isDesktop) {\n        var firstLabelWords = el.querySelectorAll('.label--1 .word');\n\n        for (var _i = 0; _i < firstLabelWords.length; _i++) {\n          gsap/* default.to */.ZP.to(firstLabelWords[_i], {\n            y: '-100%',\n            ease: 'expo.out',\n            duration: 0.6\n          });\n        }\n\n        var secondLabelWords = el.querySelectorAll('.label--2 .word');\n\n        for (var _i2 = 0; _i2 < secondLabelWords.length; _i2++) {\n          gsap/* default.to */.ZP.to(secondLabelWords[_i2], {\n            y: '0%',\n            ease: 'expo.out',\n            duration: 0.6\n          });\n        }\n      }\n    }\n  }, {\n    key: \"promotionLeave\",\n    value: function promotionLeave(el) {\n      var pending = el.querySelector('.pending').dataset.value;\n      var pendingSplit = pending.split('');\n      gsap/* default.to */.ZP.to(el.querySelector('.pending'), {\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 0.4,\n        onComplete: function onComplete() {\n          for (var i = 0; i < pendingSplit.length; i++) {\n            gsap/* default.killTweensOf */.ZP.killTweensOf(el.querySelector('.pending').querySelectorAll('.number')[i]);\n            gsap/* default.set */.ZP.set(el.querySelector('.pending').querySelectorAll('.number')[i], {\n              y: '0%'\n            });\n          }\n        }\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.outer .background__bg'), {\n        scale: 1.1,\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.outer .background__overlay'), {\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .background__bg'), {\n        scale: 1.1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .mask'), {\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .info'), {\n        color: '#000',\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.set */.ZP.set(el.querySelector('.outer'), {\n        display: 'block',\n        delay: 0.6\n      });\n      gsap/* default.set */.ZP.set(el.querySelector('.pending'), {\n        display: 'none',\n        delay: 0.6\n      });\n\n      if (this.appStore.isDesktop) {\n        var firstLabelWords = el.querySelectorAll('.label--1 .word');\n\n        for (var i = 0; i < firstLabelWords.length; i++) {\n          gsap/* default.to */.ZP.to(firstLabelWords[i], {\n            y: '0%',\n            ease: 'expo.out',\n            duration: 0.6\n          });\n        }\n\n        var secondLabelWords = el.querySelectorAll('.label--2 .word');\n\n        for (var _i3 = 0; _i3 < secondLabelWords.length; _i3++) {\n          gsap/* default.to */.ZP.to(secondLabelWords[_i3], {\n            y: '100%',\n            ease: 'expo.out',\n            duration: 0.6\n          });\n        }\n      }\n    } // promotionClick(e, el, clicked)\n    // {\n    //     if(e.shiftKey || e.ctrlKey || e.metaKey)\n    //         return;\n    //     this.clickedDone = true;\n    //     this.clicked = clicked;\n    //     for(let i = 0; i < this.$promotions.length; i++)\n    //     {\n    //         // if(i !== clicked)\n    //         // {\n    //             gsap.to(this.$promotions[i].querySelector('.inner .mask'), { opacity: 0.0001, duration: 0.2 });\n    //             gsap.to(this.$promotions[i].querySelector('.inner .info'), { opacity: 0.0001, ease: 'expo.out', duration: 1 });\n    //             gsap.to(this.$promotions[i].querySelector('.outer .background'), { y: '100%', ease: 'expo.inOut', duration: 1 });\n    //             gsap.to(this.$promotions[i].querySelector('.outer .background .background__bg'), { y: '-100%', scale: 1, ease: 'expo.inOut', duration: 1 });\n    //             gsap.to(this.$promotions[i].querySelector('.inner .background'), { y: '100%', ease: 'expo.inOut', duration: 1 });\n    //             gsap.to(this.$promotions[i].querySelector('.inner .background .background__bg'), { y: '-100%', scale: 1, ease: 'expo.inOut', duration: 1 });\n    //             gsap.delayedCall(1, () =>\n    //             {\n    //                 gsap.to(this.$promotions[i], { opacity: 0.0001 });\n    //             });\n    //         // }\n    //     }\n    // }\n\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      if (this.sliderScroller) this.sliderScroller.resize();\n    }\n  }]);\n\n  return RendererPromotions;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererPromotions = (RendererPromotions);\n;// CONCATENATED MODULE: ./app/src/js/components/slider.js\nfunction slider_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction slider_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction slider_createClass(Constructor, protoProps, staticProps) { if (protoProps) slider_defineProperties(Constructor.prototype, protoProps); if (staticProps) slider_defineProperties(Constructor, staticProps); return Constructor; }\n\n//utilities\n\n //import WheelIndicator from 'wheel-indicator';\n//utilities\n\n\n\nvar slider_noop = function noop() {}; // eslint-disable-line\n\n\nvar slider_default = /*#__PURE__*/function () {\n  function _default(options) {\n    slider_classCallCheck(this, _default);\n\n    // hook functions\n    this._onSet = options.onSet || slider_noop;\n    this._onUnset = options.onUnset || slider_noop;\n    this._onChange = options.onChange || slider_noop;\n    this.domEvents = new domEvents_default();\n    this.lightbox = {\n      target: options.target,\n      current: 0,\n      total: 0,\n      direction: 'next',\n      directionValue: 100,\n      directionValue2: 70,\n      directionText: 100,\n      dir: 1,\n      progress: 0,\n      prev: 0,\n      next: 0,\n      duration: typeof options.duration !== 'undefined' ? options.duration : 1,\n      totalDuration: 1,\n      ease: 'expo.inOut',\n      animating: false,\n      tlAnimation: null\n    }; //asignamos el selector\n\n    this.$el = options.el;\n    this.$mySplitText = null;\n    this.selectors();\n    this.events();\n    this.init();\n  }\n\n  slider_createClass(_default, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$lightbox = this.lightbox.target;\n      this.$lightboxMask = this.$lightbox.querySelector('.lightbox__mask');\n      this.$lightboxInner = this.$lightbox.querySelector('.lightbox__inner');\n      this.$lightboxInnerItems = this.$lightboxInner.querySelectorAll('.lightbox__item');\n      this.$lightboxPrev = this.$lightbox.querySelector('.lightbox__prev');\n      this.$lightboxNext = this.$lightbox.querySelector('.lightbox__next');\n      this.$lightboxClose = this.$lightbox.querySelector('.lightbox__close');\n    }\n  }, {\n    key: \"events\",\n    value: function events() {\n      var _this = this;\n\n      this.domEvents.add(this.$lightboxPrev, 'click', function () {\n        _this.change('prev');\n      });\n      this.domEvents.add(this.$lightboxNext, 'click', function () {\n        _this.change('next');\n      });\n      this.domEvents.add(this.$lightboxClose, 'click', function () {\n        _this.unset();\n      }); // Navigate with keyboard cursors\n\n      this._onKeyDown = function (e) {\n        // check pressed key\n        switch (e.keyCode) {\n          case 39:\n            _this.change('next');\n\n            break;\n\n          case 37:\n            _this.change('prev');\n\n            break;\n        }\n      };\n\n      var touchstartX = 0;\n      var touchendX = 0;\n\n      this._checkDirection = function (e) {\n        if (touchendX < touchstartX) _this.change('next');\n        if (touchendX > touchstartX) _this.change('prev');\n      };\n\n      document.addEventListener('touchstart', function (e) {\n        touchstartX = e.changedTouches[0].screenX;\n      });\n      document.addEventListener('touchend', function (e) {\n        touchendX = e.changedTouches[0].screenX;\n\n        _this._checkDirection();\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      // Set total count\n      this.lightbox.total = this.$lightboxInnerItems.length;\n\n      for (var i = 0; i < this.$lightboxInnerItems.length; i++) {\n        gsap/* default.set */.ZP.set(this.$lightboxInnerItems[i], {\n          display: 'none'\n        });\n      }\n\n      gsap/* default.set */.ZP.set(this.$lightboxInnerItems[0], {\n        display: 'block'\n      }); // Bind keydown event\n\n      document.addEventListener('keydown', this._onKeyDown);\n    }\n  }, {\n    key: \"set\",\n    value: function set(index) {\n      this._onSet(index);\n\n      gsap/* default.set */.ZP.set(this.$lightboxInnerItems[this.lightbox.prev], {\n        display: 'none'\n      });\n      gsap/* default.set */.ZP.set(this.$lightbox, {\n        display: 'block'\n      });\n      gsap/* default.to */.ZP.to(this.$lightboxMask, {\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 1\n      });\n      gsap/* default.to */.ZP.to(this.$lightboxInner, {\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 1,\n        delay: 0.5\n      });\n      gsap/* default.set */.ZP.set(this.$lightboxInnerItems[index], {\n        display: 'block'\n      }); // gsap.set(this.$lightboxInnerItems[index].querySelector('.background'), { x: '0%', y: '-100%' });\n      // gsap.set(this.$lightboxInnerItems[index].querySelector('.background .background__bg'), { y: '100%' });\n      // gsap.to(this.$lightboxInnerItems[index].querySelector('.background'), { y: '0%', duration: 1, ease: 'expo.out', delay: 0.5 });\n      // gsap.to(this.$lightboxInnerItems[index].querySelector('.background .background__bg'), { y: '0%', duration: 1, ease: 'expo.out', delay: 0.5 });\n\n      gsap/* default.to */.ZP.to([this.$lightboxPrev, this.$lightboxNext, this.$lightboxClose], {\n        opacity: 1,\n        duration: 1,\n        ease: 'expo.out',\n        delay: 0.5\n      });\n      this.lightbox.current = index;\n    }\n  }, {\n    key: \"unset\",\n    value: function unset() {\n      var _this2 = this;\n\n      this._onUnset(this.lightbox.current); // gsap.to(this.$lightboxInnerItems[this.lightbox.current].querySelector('.background'), { y: '100%', duration: 1, ease: 'expo.out', delay: 0 });\n      // gsap.to(this.$lightboxInnerItems[this.lightbox.current].querySelector('.background .background__bg'), { y: '-100%', duration: 1, ease: 'expo.out', delay: 0 });\n\n\n      gsap/* default.to */.ZP.to([this.$lightboxPrev, this.$lightboxNext, this.$lightboxClose], {\n        opacity: 0.0001,\n        duration: 1,\n        ease: 'expo.out',\n        delay: 0\n      });\n      gsap/* default.to */.ZP.to(this.$lightboxMask, {\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 1,\n        delay: 0.5\n      });\n      gsap/* default.to */.ZP.to(this.$lightboxInner, {\n        opacity: 0.0001,\n        ease: 'expo.out',\n        duration: 1\n      });\n      gsap/* default.delayedCall */.ZP.delayedCall(1.5, function () {\n        gsap/* default.set */.ZP.set(_this2.$lightbox, {\n          display: 'none'\n        });\n        gsap/* default.set */.ZP.set(_this2.$lightboxInnerItems[_this2.lightbox.current], {\n          display: 'none'\n        });\n        gsap/* default.set */.ZP.set(_this2.$lightboxInnerItems[_this2.lightbox.current].querySelector('.background'), {\n          y: '0%'\n        });\n        gsap/* default.set */.ZP.set(_this2.$lightboxInnerItems[_this2.lightbox.current].querySelector('.background .background__bg'), {\n          y: '0%'\n        });\n      });\n    }\n  }, {\n    key: \"change\",\n    value: function change(direction) {\n      var _this3 = this;\n\n      if (this.lightbox.animating) return;\n\n      this._onChange();\n\n      this.lightbox.animating = true;\n      this.lightbox.direction = direction;\n\n      if (direction === 'next') {\n        this.lightbox.next = (this.lightbox.current + 1) % this.lightbox.total;\n        this.lightbox.prev = this.lightbox.current === -1 ? this.lightbox.total - 1 : this.lightbox.current;\n        this.lightbox.dir = true;\n      } else {\n        this.lightbox.next = this.lightbox.current === 0 ? this.lightbox.total - 1 : this.lightbox.current - 1;\n        this.lightbox.prev = this.lightbox.current === -1 ? this.lightbox.total - 1 : this.lightbox.current;\n        this.lightbox.dir = false;\n      }\n\n      this.lightbox.current = this.lightbox.next; //Set next slide\n\n      gsap/* default.set */.ZP.set(this.$lightboxInnerItems[this.lightbox.next].querySelector('.background'), {\n        x: this.lightbox.dir ? '100%' : '-100%'\n      });\n      gsap/* default.set */.ZP.set(this.$lightboxInnerItems[this.lightbox.next], {\n        display: 'block'\n      }); //Animate out current slide\n\n      gsap/* default.to */.ZP.to(this.$lightboxInnerItems[this.lightbox.prev].querySelector('.background'), {\n        x: this.lightbox.dir ? '-100%' : '100%',\n        ease: 'expo.inOut',\n        duration: 1\n      });\n      gsap/* default.to */.ZP.to(this.$lightboxInnerItems[this.lightbox.next].querySelector('.background'), {\n        x: '0%',\n        ease: 'expo.inOut',\n        duration: 1\n      });\n      gsap/* default.delayedCall */.ZP.delayedCall(this.lightbox.duration, function () {\n        gsap/* default.set */.ZP.set(_this3.$lightboxInnerItems[_this3.lightbox.prev], {\n          display: 'none'\n        });\n        _this3.lightbox.animating = false;\n      });\n    }\n  }]);\n\n  return _default;\n}();\n\n\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererPromotionsSingle.js\nfunction rendererPromotionsSingle_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererPromotionsSingle_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererPromotionsSingle_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererPromotionsSingle_typeof(obj); }\n\nfunction rendererPromotionsSingle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererPromotionsSingle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererPromotionsSingle_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererPromotionsSingle_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererPromotionsSingle_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererPromotionsSingle_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererPromotionsSingle_setPrototypeOf(subClass, superClass); }\n\nfunction rendererPromotionsSingle_setPrototypeOf(o, p) { rendererPromotionsSingle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererPromotionsSingle_setPrototypeOf(o, p); }\n\nfunction rendererPromotionsSingle_createSuper(Derived) { var hasNativeReflectConstruct = rendererPromotionsSingle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererPromotionsSingle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererPromotionsSingle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererPromotionsSingle_possibleConstructorReturn(this, result); }; }\n\nfunction rendererPromotionsSingle_possibleConstructorReturn(self, call) { if (call && (rendererPromotionsSingle_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererPromotionsSingle_assertThisInitialized(self); }\n\nfunction rendererPromotionsSingle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererPromotionsSingle_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererPromotionsSingle_getPrototypeOf(o) { rendererPromotionsSingle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererPromotionsSingle_getPrototypeOf(o); }\n\n// Gsap\n\n // import Masonry from 'masonry-layout';\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n\n // Other\n// import Slider from '../classes/slider';\n// import SplitText from '../classes/splitText';\n\nvar RendererPromotionsSingle = /*#__PURE__*/function (_Renderer) {\n  rendererPromotionsSingle_inherits(RendererPromotionsSingle, _Renderer);\n\n  var _super = rendererPromotionsSingle_createSuper(RendererPromotionsSingle);\n\n  function RendererPromotionsSingle() {\n    rendererPromotionsSingle_classCallCheck(this, RendererPromotionsSingle);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererPromotionsSingle_createClass(RendererPromotionsSingle, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$hero = this.$el.querySelector('.promotionssingle__hero');\n      this.$background = this.$el.querySelector('.promotionssingle__background');\n      this.$content = this.$el.querySelector('.promotionssingle__content');\n      this.$featured = this.$el.querySelector('.promotionssingle__featured');\n      this.$gallery = this.$el.querySelector('.promotionssingle__gallery');\n      this.$from = this.$el.querySelector('.promotionssingle__from');\n      this.$related = this.$el.querySelector('.promotionssingle__related');\n      this.$form = this.$el.querySelector('.promotionssingle__form');\n      this.$footer = this.$el.querySelector('.promotionssingle__footer');\n    }\n  }, {\n    key: \"preload\",\n    value: function preload() {\n      // Preloader\n      var _main = [];\n      if (this.$hero.querySelector('.image img')) _main.push(this.$hero.querySelector('.image img').src);\n      var _secondary = [];\n      if (this.$background.querySelector('.background__bg')) _main.push(this.$background.querySelector('.background__bg').style.backgroundImage.substring(5, this.$background.querySelector('.background__bg').style.backgroundImage.length - 2));\n      if (this.$featured.querySelector('.background__bg')) _main.push(this.$featured.querySelector('.background__bg').style.backgroundImage.substring(5, this.$featured.querySelector('.background__bg').style.backgroundImage.length - 2));\n      this.preloadItems = {\n        main: _main,\n        secondary: _secondary\n      };\n    }\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {\n      // Hide drag after click\n      this.appUi.leaveDragCursor();\n\n      if (this.appStore.isDesktop) {\n        gsap/* default.set */.ZP.set(this.$hero.querySelector('.image'), {\n          y: '-100%'\n        });\n        gsap/* default.set */.ZP.set(this.$hero.querySelector('.image img'), {\n          y: '100%'\n        });\n      }\n\n      gsap/* default.set */.ZP.set(this.$hero.querySelector('.mask .bg'), {\n        scaleY: this.appStore.isDesktop ? 0 : 1\n      });\n      gsap/* default.set */.ZP.set(this.$hero.querySelector('.mask .center'), {\n        opacity: 0.0001\n      });\n    }\n  }, {\n    key: \"preenter\",\n    value: function preenter() {\n      if (this.appStore.isDesktop) {\n        gsap/* default.to */.ZP.to(this.$hero.querySelector('.image'), {\n          y: '0%',\n          duration: this.appStore.firstNavigation ? 1.8 : 1.8,\n          ease: this.appStore.firstNavigation ? 'expo.inOut' : 'expo.out',\n          delay: 0\n        });\n        gsap/* default.to */.ZP.to(this.$hero.querySelector('.image img'), {\n          y: '0%',\n          duration: this.appStore.firstNavigation ? 1.8 : 1.8,\n          ease: this.appStore.firstNavigation ? 'expo.inOut' : 'expo.out',\n          delay: 0\n        });\n      }\n\n      gsap/* default.to */.ZP.to(this.$hero.querySelector('.mask .bg'), {\n        scaleY: 1,\n        duration: this.appStore.firstNavigation ? 1.6 : 1.6,\n        ease: this.appStore.firstNavigation ? 'expo.inOut' : 'expo.out',\n        delay: this.appStore.firstNavigation ? 0.2 : 0.2\n      });\n      gsap/* default.to */.ZP.to(this.$hero.querySelector('.mask .center'), {\n        opacity: 1,\n        ease: 'power2.out',\n        duration: 0.8,\n        delay: 1\n      });\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      this.appUi.$infoContent.querySelector('input[name=\"info-subject\"]').value = 'Informacin sobre ' + this.$hero.querySelector('.mask .center .title').getAttribute('data-title');\n      if (this.appStore.isDesktop) this.initScrolltitle();else this.initScrolltitleMobile();\n      this.initBackground();\n      this.initParallax();\n      this.initLightbox();\n      this.initGallery();\n      this.initRelated();\n    }\n  }, {\n    key: \"initScrolltitle\",\n    value: function initScrolltitle() {\n      var _this = this;\n\n      this.$scrolltitle = this.$el.querySelector('.scrolltitle');\n\n      if (this.$scrolltitle) {\n        this.$scrolltitleItems = this.$scrolltitle.children;\n        this.$scrolltitle.style.width = this.$scrolltitleItems[0].offsetWidth + 'px';\n        this.scrollTitleInnerLeft = gsap/* default.timeline */.ZP.timeline({\n          paused: false,\n          defaults: {\n            ease: 'none',\n            duration: this.$scrolltitleItems[0].offsetWidth / 300,\n            repeat: '-1',\n            onReverseComplete: function onReverseComplete() {\n              _this.scrollTitleInnerLeft.pause();\n\n              _this.scrollTitleInnerRight.play();\n            }\n          }\n        });\n\n        for (var i = 0; i < this.$scrolltitleItems.length; i++) {\n          this.scrollTitleInnerLeft.to(this.$scrolltitleItems[i], {\n            x: '-100%'\n          }, 0);\n        }\n\n        this.scrollTitleInnerRight = gsap/* default.timeline */.ZP.timeline({\n          paused: true,\n          defaults: {\n            ease: 'none',\n            duration: this.$scrolltitleItems[0].offsetWidth / 300,\n            repeat: '-1',\n            onReverseComplete: function onReverseComplete() {\n              _this.scrollTitleInnerRight.pause();\n\n              _this.scrollTitleInnerLeft.play();\n            }\n          }\n        });\n\n        for (var _i = 0; _i < this.$scrolltitleItems.length; _i++) {\n          this.scrollTitleInnerRight.to(this.$scrolltitleItems[_i], {\n            x: '100%'\n          }, 0);\n        }\n\n        this.scrollTitleOuter = gsap/* default.timeline */.ZP.timeline({\n          defaults: {\n            ease: 'none'\n          },\n          scrollTrigger: {\n            trigger: this.$scrolltitle,\n            scrub: true,\n            start: 'top bottom',\n            end: 'bottom top',\n            onUpdate: function onUpdate(self) {\n              // this.scrollTitleInner.timeScale(self.direction);\n              if (!_this.scrollTitleInnerLeft.paused()) _this.scrollTitleInnerLeft.reversed(self.direction !== 1);\n              if (!_this.scrollTitleInnerRight.paused()) _this.scrollTitleInnerRight.reversed(self.direction === 1);\n            }\n          }\n        });\n        this.scrollTitleOuter.fromTo(this.$scrolltitle, {\n          x: window.innerWidth * 0.2\n        }, {\n          x: -window.innerWidth * 0.2\n        }, 0);\n      }\n    }\n  }, {\n    key: \"initScrolltitleMobile\",\n    value: function initScrolltitleMobile() {\n      this.$scrolltitles = this.$el.querySelectorAll('.scrolltitle');\n\n      if (this.$scrolltitles) {\n        for (var i = 0; i < this.$scrolltitles.length; i++) {\n          this.$scrolltitlesItems = this.$scrolltitles[i].children[0].children;\n          this.scrollTitleTimeline = gsap/* default.timeline */.ZP.timeline({\n            paused: false,\n            defaults: {\n              ease: 'none',\n              duration: this.$scrolltitlesItems.length * 8 + i * 10,\n              repeat: '-1'\n            }\n          });\n          this.scrollTitleTimeline.to(this.$scrolltitles[i].children, {\n            x: -100 + '%'\n          }, 0);\n        }\n      }\n    }\n  }, {\n    key: \"initBackground\",\n    value: function initBackground() {\n      if (this.$background) {\n        gsap/* default.set */.ZP.set(this.$background.querySelector('.background .background__overlay'), {\n          opacity: 1\n        });\n        gsap/* default.set */.ZP.set(this.$background.querySelector('.background .background__bg'), {\n          y: '-80%',\n          scale: 1.2\n        });\n        var backgroundTimeline = gsap/* default.timeline */.ZP.timeline({\n          scrollTrigger: {\n            trigger: this.$background,\n            start: 'top bottom',\n            end: 'bottom top',\n            scrub: true // onToggle: (isActive) =>\n            // {\n            //     isActive ? this.$videoCover.querySelector('.video__player video').play() : this.$videoCover.querySelector('.video__player video').pause();\n            // }\n\n          },\n          defaults: {\n            duration: 1,\n            ease: 'none'\n          }\n        });\n        backgroundTimeline.to(this.$background.querySelector('.background .background__overlay'), {\n          opacity: 0.5,\n          duration: 0.5\n        }, 0);\n        backgroundTimeline.to(this.$background.querySelector('.background .background__bg'), {\n          y: '80%',\n          scale: 1,\n          duration: 1\n        }, 0);\n      }\n    }\n  }, {\n    key: \"initParallax\",\n    value: function initParallax() {\n      if (this.$content) {\n        gsap/* default.set */.ZP.set(this.$content.querySelector('.image--2'), {\n          y: '-5vw'\n        });\n        var contentTimeline = gsap/* default.timeline */.ZP.timeline({\n          scrollTrigger: {\n            trigger: this.$content,\n            start: 'top bottom',\n            end: 'bottom top',\n            scrub: true // onToggle: (isActive) =>\n            // {\n            //     isActive ? this.$videoCover.querySelector('.video__player video').play() : this.$videoCover.querySelector('.video__player video').pause();\n            // }\n\n          },\n          defaults: {\n            duration: 1,\n            ease: 'none'\n          }\n        });\n        contentTimeline.to(this.$content.querySelector('.image--2'), {\n          y: '5vw',\n          duration: 1\n        }, 0);\n      }\n\n      if (this.$featured) {\n        gsap/* default.set */.ZP.set(this.$featured.querySelector('.image'), {\n          y: '10vw'\n        });\n        var featuredTimeline = gsap/* default.timeline */.ZP.timeline({\n          scrollTrigger: {\n            trigger: this.$featured,\n            start: 'top bottom',\n            end: 'bottom top',\n            scrub: true // onToggle: (isActive) =>\n            // {\n            //     isActive ? this.$videoCover.querySelector('.video__player video').play() : this.$videoCover.querySelector('.video__player video').pause();\n            // }\n\n          },\n          defaults: {\n            duration: 1,\n            ease: 'none'\n          }\n        });\n        featuredTimeline.to(this.$featured.querySelector('.image'), {\n          y: '-10vw',\n          duration: 1\n        }, 0);\n      }\n    }\n  }, {\n    key: \"initLightbox\",\n    value: function initLightbox() {\n      var _this2 = this;\n\n      this.$lightbox = this.$el.querySelector('.lightbox');\n      this.lightbox = new slider_default({\n        target: this.$lightbox,\n        onUnset: function onUnset(index) {\n          _this2.closeLightbox(index);\n        }\n      });\n    }\n  }, {\n    key: \"initGallery\",\n    value: function initGallery() {\n      var _this3 = this;\n\n      if (this.$gallery) {\n        // Selectors\n        this.$galleryGrid = this.$gallery.querySelector('.grid');\n        this.$galleryGridInner = this.$gallery.querySelector('.grid__inner');\n        this.$galleryGridItems = this.$gallery.querySelectorAll('.grid__item');\n        this.$galleryButton = this.$gallery.querySelector('.button');\n        gsap/* default.set */.ZP.set(this.$galleryGrid, {\n          display: 'block'\n        });\n        this.domEvents.add(this.$galleryGrid, 'mouseenter', function (e, a, el) {\n          _this3.appUi.enterDragCursor();\n        });\n        this.domEvents.add(this.$galleryGrid, 'mouseleave', function (e, a, el) {\n          _this3.appUi.leaveDragCursor();\n        });\n        this.gallery = {\n          isZoomed: false,\n          isExpanded: false,\n          isAnimating: false,\n          count: 0,\n          margin: window.innerWidth * 0.05,\n          references: {\n            0: [15, 15, 0, 5],\n            1: [20, 15, 0, 25],\n            2: [20, 15, 20, 5],\n            3: [15, 10, 25, 25],\n            4: [30, 20, 45, 5],\n            5: [10, 15, 45, 30],\n            6: [15, 10, 60, 30],\n            7: [15, 10, 80, 5],\n            8: [20, 15, 80, 20],\n            9: [25, 40, 105, 5],\n            10: [15, 15, 135, 5],\n            11: [20, 15, 135, 25],\n            12: [20, 15, 155, 5],\n            13: [15, 10, 160, 25],\n            14: [30, 20, 180, 5],\n            15: [10, 15, 180, 30],\n            16: [15, 10, 195, 30],\n            17: [15, 10, 215, 5],\n            18: [20, 15, 215, 20]\n          },\n          relativeWidth: 0,\n          relativePositions: {},\n          absoluteWidth: 0,\n          absolutePositions: {}\n        };\n        this.gallery.count = this.$galleryGridItems.length; // Get absolute positions\n\n        for (var i = 0; i < this.$galleryGridItems.length; i++) {\n          var _width = window.innerWidth * this.gallery.references[i][0] / (this.appStore.isDeskop || this.appStore.client.orientation === 'horizontal' ? 100 : 50);\n\n          var _height = window.innerWidth * this.gallery.references[i][1] / (this.appStore.isDeskop || this.appStore.client.orientation === 'horizontal' ? 100 : 50);\n\n          var _left = window.innerWidth * this.gallery.references[i][2] / (this.appStore.isDeskop || this.appStore.client.orientation === 'horizontal' ? 100 : 50);\n\n          var _top = window.innerWidth * this.gallery.references[i][3] / (this.appStore.isDeskop || this.appStore.client.orientation === 'horizontal' ? 100 : 50);\n\n          var _ratio = 1 / ((window.innerHeight - window.innerWidth * 0.1) / _height);\n\n          var _multiplier = (window.innerHeight - window.innerWidth * 0.1) / _height;\n\n          this.gallery.absolutePositions[i] = [_width, _height, _left, _top, _ratio, _multiplier];\n        }\n\n        this.gallery.absoluteWidth = this.gallery.absolutePositions[this.gallery.count - 1][0] + this.gallery.absolutePositions[this.gallery.count - 1][2]; // Get relative positions\n\n        for (var _i2 = 0; _i2 < this.$galleryGridItems.length; _i2++) {\n          var _multiplier2 = this.gallery.absolutePositions[_i2][5];\n\n          var _width2 = _multiplier2 * this.gallery.absolutePositions[_i2][0];\n\n          var _height2 = _multiplier2 * this.gallery.absolutePositions[_i2][1];\n\n          var _left2 = _i2 === 0 ? 0 : this.gallery.relativePositions[_i2 - 1][2] + this.gallery.relativePositions[_i2 - 1][0] + this.gallery.margin;\n\n          var _top2 = window.innerWidth * 0.05;\n\n          this.gallery.relativePositions[_i2] = [_width2, _height2, _left2, _top2];\n        }\n\n        this.gallery.relativeWidth = this.gallery.relativePositions[this.gallery.count - 1][0] + this.gallery.relativePositions[this.gallery.count - 1][2]; // Set initial positions\n\n        var _loop = function _loop(_i3) {\n          if (_this3.gallery.isZoomed) {\n            _this3.$galleryGridItems[_i3].style.width = _this3.gallery.relativePositions[_i3][0] + 'px';\n            _this3.$galleryGridItems[_i3].style.height = _this3.gallery.relativePositions[_i3][1] + 'px';\n            _this3.$galleryGridItems[_i3].style.transform = 'translateX(' + _this3.gallery.relativePositions[_i3][2] + 'px) translateY(' + _this3.gallery.relativePositions[_i3][3] + 'px)';\n            _this3.$galleryGridItems[_i3].children[0].children[0].style.transform = 'scale(1)';\n          } else {\n            _this3.$galleryGridItems[_i3].style.width = _this3.gallery.relativePositions[_i3][0] + 'px';\n            _this3.$galleryGridItems[_i3].style.height = _this3.gallery.relativePositions[_i3][1] + 'px';\n            _this3.$galleryGridItems[_i3].style.transform = 'translateX(' + _this3.gallery.absolutePositions[_i3][2] + 'px) translateY(' + _this3.gallery.absolutePositions[_i3][3] + 'px) scale(' + _this3.gallery.absolutePositions[_i3][4] + ')';\n            _this3.$galleryGridItems[_i3].children[0].children[0].style.transform = 'scale(1.1)';\n          }\n\n          if (_this3.appStore.isDesktop) {\n            _this3.domEvents.add(_this3.$galleryGridItems[_i3], 'mouseenter', function (e, a, el) {\n              _this3.enterImage(el);\n            });\n\n            _this3.domEvents.add(_this3.$galleryGridItems[_i3], 'mouseleave', function (e, a, el) {\n              _this3.leaveImage(el);\n            });\n\n            _this3.domEvents.add(_this3.$galleryGridItems[_i3].querySelector('.expand'), 'mouseenter', function (e, a, el) {\n              _this3.enterExpand(el);\n            });\n\n            _this3.domEvents.add(_this3.$galleryGridItems[_i3].querySelector('.expand'), 'mouseleave', function (e, a, el) {\n              _this3.leaveExpand(el);\n            });\n\n            _this3.domEvents.add(_this3.$galleryGridItems[_i3].querySelector('.expand'), 'click', function (e, a, el) {\n              _this3.clickExpand(e, a, el, _i3);\n            });\n\n            _this3.domEvents.add(_this3.$galleryGridItems[_i3], 'click', function (e, a, el) {\n              if (_this3.gallery.isZoomed) _this3.compressGallery(_i3);else _this3.expandGallery(_i3);\n            });\n          } else {\n            _this3.domEvents.add(_this3.$galleryGridItems[_i3], 'click', function (e, a, el) {\n              _this3.clickExpand(e, a, el, _i3);\n            });\n          }\n        };\n\n        for (var _i3 = 0; _i3 < this.$galleryGridItems.length; _i3++) {\n          _loop(_i3);\n        }\n\n        if (!this.appStore.isDesktop) this.domEvents.add(this.$galleryButton, 'click', function (e, a, el) {\n          _this3.openLightbox(0);\n        });\n        if (this.gallery.isZoomed) this.$galleryGridInner.style.minWidth = this.gallery.relativeWidth + 'px';else this.$galleryGridInner.style.minWidth = this.gallery.absoluteWidth + 'px';\n\n        if (this.appStore.isDesktop) {\n          this.galleryDraggable = new superDragger_default({\n            el: this.$galleryGrid,\n            elClickables: this.$galleryGridItems,\n            inner: this.$galleryGridInner,\n            onDragStart: function onDragStart() {\n              if (!_this3.gallery.isZoomed && _this3.appStore.isDesktop) {\n                for (var _i4 = 0; _i4 < _this3.$galleryGridItems.length; _i4++) {\n                  gsap/* default.to */.ZP.to(_this3.$galleryGridItems[_i4].children[0].children[0], {\n                    scale: 1,\n                    ease: 'expo.out',\n                    duration: 1\n                  });\n                }\n              }\n\n              if (_this3.appStore.isDesktop) {\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDot, {\n                  scale: 0.6,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag, {\n                  scale: 0.6,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag.children[0], {\n                  opacity: 0.0001,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n              }\n\n              _this3.gallery.dragging = true;\n            },\n            onDragEnd: function onDragEnd() {\n              if (!_this3.gallery.isZoomed && _this3.appStore.isDesktop) {\n                for (var _i5 = 0; _i5 < _this3.$galleryGridItems.length; _i5++) {\n                  gsap/* default.to */.ZP.to(_this3.$galleryGridItems[_i5].children[0].children[0], {\n                    scale: 1.1,\n                    ease: 'expo.out',\n                    duration: 1\n                  });\n                }\n              }\n\n              if (_this3.appStore.isDesktop) {\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDot, {\n                  scale: 1,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag, {\n                  scale: 1,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag.children[0], {\n                  opacity: 1,\n                  duration: 0.3,\n                  ease: 'expo.out',\n                  delay: 0.1\n                });\n              }\n\n              _this3.gallery.dragging = false;\n            }\n          });\n        } else {\n          this.galleryDraggable = new Draggable_default({\n            target: this.$galleryGrid,\n            targetInner: this.$galleryGridInner,\n            onPress: function onPress() {\n              if (_this3.appStore.isDesktop) {\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDot, {\n                  scale: 0.6,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag, {\n                  scale: 0.6,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag.children[0], {\n                  opacity: 0.0001,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n              }\n\n              _this3.gallery.dragging = true;\n            },\n            onRelease: function onRelease() {\n              if (_this3.appStore.isDesktop) {\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDot, {\n                  scale: 1,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag, {\n                  scale: 1,\n                  duration: 0.3,\n                  ease: 'expo.out'\n                });\n                gsap/* default.to */.ZP.to(_this3.appUi.$cursorDrag.children[0], {\n                  opacity: 1,\n                  duration: 0.3,\n                  ease: 'expo.out',\n                  delay: 0.1\n                });\n              }\n\n              _this3.gallery.dragging = false;\n            },\n            onDragStart: function onDragStart(drag) {\n              if (!_this3.gallery.isZoomed && _this3.appStore.isDesktop) {\n                for (var _i6 = 0; _i6 < _this3.$galleryGridItems.length; _i6++) {\n                  gsap/* default.to */.ZP.to(_this3.$galleryGridItems[_i6].children[0].children[0], {\n                    scale: 1,\n                    ease: 'expo.out',\n                    duration: 1\n                  });\n                }\n              }\n            },\n            onDragEnd: function onDragEnd() {\n              if (!_this3.gallery.isZoomed && _this3.appStore.isDesktop) {\n                for (var _i7 = 0; _i7 < _this3.$galleryGridItems.length; _i7++) {\n                  gsap/* default.to */.ZP.to(_this3.$galleryGridItems[_i7].children[0].children[0], {\n                    scale: 1.1,\n                    ease: 'expo.out',\n                    duration: 1\n                  });\n                }\n              }\n            }\n          });\n        }\n\n        this.galleryTimeline = gsap/* default.timeline */.ZP.timeline({\n          defaults: {\n            ease: 'none'\n          },\n          scrollTrigger: {\n            trigger: this.$gallery,\n            scrub: true,\n            start: 'top bottom',\n            end: 'bottom top'\n          }\n        });\n        this.galleryTimeline.fromTo(this.$galleryGrid, {\n          x: window.innerWidth * 0.1\n        }, {\n          x: -window.innerWidth * 0.1\n        }, 0);\n      }\n    }\n  }, {\n    key: \"compressGallery\",\n    value: function compressGallery(index) {\n      var _this4 = this;\n\n      if (this.gallery.isExpanded) return;\n      gsap/* default.to */.ZP.to(this.appUi.$cursorPlus, {\n        scale: 0.7,\n        rotation: '0deg',\n        opacity: 1,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n        scale: 0.7,\n        rotation: '0deg',\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n\n      for (var i = 0; i < this.$galleryGridItems.length; i++) {\n        gsap/* default.killTweensOf */.ZP.killTweensOf(this.$galleryGridItems[i], this.$galleryGridItems[i].querySelector('.background .expand'));\n        var positions = this.gallery.absolutePositions[i];\n        var relativePositions = this.gallery.relativePositions[i];\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i], {\n          x: positions[2],\n          y: positions[3],\n          scale: positions[4],\n          duration: 1.4,\n          ease: 'expo.inOut'\n        });\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i].children[0].children[0], {\n          scale: 1.1,\n          duration: 1.4,\n          ease: 'expo.inOut'\n        });\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i].querySelector('.background .expand'), {\n          opacity: 0.0001,\n          duration: 0.2,\n          ease: 'power2.out'\n        });\n      }\n\n      this.$galleryGridInner.style.minWidth = this.gallery.absoluteWidth + 'px';\n      var $el = this.gallery.absolutePositions[index];\n      var center = $el[2] - window.innerWidth / 2 + $el[0] / 2;\n      var _maxX = 0;\n\n      var _minX = -(this.gallery.absoluteWidth - window.innerWidth);\n\n      var _center = Math.min(_maxX, Math.max(_minX, -center));\n\n      if (this.appStore.isDesktop) gsap/* default.to */.ZP.to([this.galleryDraggable._drag.livePosition, this.galleryDraggable._drag.position, this.galleryDraggable._drag.lastPosition], {\n        x: _center,\n        duration: 1.4,\n        ease: 'expo.inOut'\n      });\n      gsap/* default.to */.ZP.to(this.$galleryGridInner, {\n        x: _center,\n        duration: 1.4,\n        ease: 'expo.inOut',\n        onComplete: function onComplete() {\n          if (_this4.appStore.isDesktop) _this4.galleryDraggable.resize();else _this4.galleryDraggable.draggable[0].applyBounds();\n        }\n      });\n      this.gallery.isZoomed = false;\n    }\n  }, {\n    key: \"expandGallery\",\n    value: function expandGallery(index) {\n      var _this5 = this;\n\n      gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n        scale: 0.7,\n        rotation: '90deg',\n        opacity: 1,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.appUi.$cursorPlus, {\n        scale: 0.7,\n        rotation: '90deg',\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n\n      for (var i = 0; i < this.$galleryGridItems.length; i++) {\n        gsap/* default.killTweensOf */.ZP.killTweensOf(this.$galleryGridItems[i]);\n        var positions = this.gallery.relativePositions[i];\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i], {\n          x: positions[2],\n          y: positions[3],\n          scale: 1,\n          duration: 1.4,\n          ease: 'expo.inOut'\n        });\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i].children[0].children[0], {\n          scale: 1,\n          duration: 1.4,\n          ease: 'expo.inOut'\n        });\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i].querySelector('.background .background__overlay2'), {\n          opacity: 0.0001,\n          duration: 0.2,\n          ease: 'power2.out'\n        });\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i].querySelector('.background .expand'), {\n          opacity: 1,\n          duration: 0.2,\n          ease: 'power2.out',\n          delay: 1.4\n        });\n      }\n\n      this.$galleryGridInner.style.minWidth = this.gallery.relativeWidth + 'px';\n      var $el = this.gallery.relativePositions[index];\n      var center = $el[2] - window.innerWidth / 2 + $el[0] / 2; // Center gallery\n\n      var offset = this.$gallery.getBoundingClientRect().top;\n      if (this.superScroller) this.superScroller.scrollAnimate(-this.superScroller._scroll.livePosition.y + offset, 1.4, 'expo.inOut');\n      var _maxX = 0;\n\n      var _minX = -(this.gallery.relativeWidth - window.innerWidth);\n\n      var _center = Math.min(_maxX, Math.max(_minX, -center));\n\n      if (this.appStore.isDesktop) gsap/* default.to */.ZP.to([this.galleryDraggable._drag.livePosition, this.galleryDraggable._drag.position, this.galleryDraggable._drag.lastPosition], {\n        x: _center,\n        duration: 1.4,\n        ease: 'expo.inOut'\n      });\n      gsap/* default.to */.ZP.to(this.$galleryGridInner, {\n        x: _center,\n        duration: 1.4,\n        ease: 'expo.inOut',\n        onComplete: function onComplete() {\n          if (_this5.appStore.isDesktop) _this5.galleryDraggable.resize();else _this5.galleryDraggable.draggable[0].applyBounds();\n        }\n      });\n      this.gallery.isZoomed = true;\n    }\n  }, {\n    key: \"openLightbox\",\n    value: function openLightbox(index) {\n      var _this6 = this;\n\n      gsap/* default.to */.ZP.to(this.appUi.$headerTrigger, {\n        opacity: 0.0001,\n        pointerEvents: 'none',\n        duration: 0.8,\n        ease: 'power2.out'\n      });\n      if (this.$infoTrigger) gsap/* default.to */.ZP.to(this.$infoTrigger, {\n        opacity: 0.0001,\n        pointerEvents: 'none',\n        duration: 0.8,\n        ease: 'power2.out'\n      });\n\n      if (this.superScroller) {\n        var offset = this.$gallery.getBoundingClientRect().top;\n        this.superScroller.scrollAnimate(-this.superScroller._scroll.livePosition.y + offset, 1.4, 'expo.inOut');\n        gsap/* default.delayedCall */.ZP.delayedCall(1.4, function () {\n          _this6.superScroller._scroll.enable = false;\n        });\n      }\n\n      for (var i = 0; i < this.$galleryGridItems.length; i++) {\n        gsap/* default.to */.ZP.to(this.$galleryGridItems[i].querySelector('.expand'), {\n          opacity: 0.0001,\n          duration: 0.2,\n          ease: 'power2.out'\n        });\n      }\n\n      this.lightbox.set(index);\n    }\n  }, {\n    key: \"closeLightbox\",\n    value: function closeLightbox(index) {\n      var $el = this.gallery.relativePositions[index];\n      var center = $el[2] - window.innerWidth / 2 + $el[0] / 2; // Center gallery\n\n      if (this.superScroller) {\n        this.superScroller._scroll.enable = true;\n        var offset = this.$gallery.getBoundingClientRect().top;\n        if (this.superScroller) this.superScroller.scrollAnimate(-this.superScroller._scroll.livePosition.y + offset, 1.4, 'expo.inOut');\n      }\n\n      var _maxX = 0;\n\n      var _minX = -(this.gallery.relativeWidth - window.innerWidth);\n\n      var _center = Math.min(_maxX, Math.max(_minX, -center));\n\n      if (this.appStore.isDesktop) gsap/* default.set */.ZP.set([this.galleryDraggable._drag.livePosition, this.galleryDraggable._drag.position, this.galleryDraggable._drag.lastPosition], {\n        x: _center\n      });\n      gsap/* default.set */.ZP.set(this.$galleryGridInner, {\n        x: _center\n      });\n      if (this.appStore.isDesktop) this.galleryDraggable.resize();else this.galleryDraggable.draggable[0].applyBounds();\n      gsap/* default.to */.ZP.to(this.appUi.$headerTrigger, {\n        opacity: 1,\n        pointerEvents: 'all',\n        duration: 0.8,\n        ease: 'power2.out',\n        delay: 1\n      });\n      if (this.$infoTrigger) gsap/* default.to */.ZP.to(this.$infoTrigger, {\n        opacity: 1,\n        pointerEvents: 'all',\n        duration: 0.8,\n        ease: 'power2.out',\n        delay: 1\n      });\n\n      if (this.appStore.isDesktop) {\n        for (var i = 0; i < this.$galleryGridItems.length; i++) {\n          gsap/* default.to */.ZP.to(this.$galleryGridItems[i].querySelector('.expand'), {\n            opacity: 1,\n            duration: 0.2,\n            ease: 'power2.out',\n            delay: 0\n          });\n        }\n      }\n\n      this.gallery.isExpanded = false;\n    }\n  }, {\n    key: \"enterImage\",\n    value: function enterImage(el) {\n      if (!this.gallery.dragging) {\n        if (!this.gallery.isZoomed) {\n          gsap/* default.to */.ZP.to(el.querySelector('.background .background__overlay2'), {\n            opacity: 1,\n            duration: 0.2,\n            ease: 'power2.out'\n          });\n          gsap/* default.to */.ZP.to(el.children[0].children[0], {\n            scale: 1,\n            ease: 'expo.out',\n            duration: 1\n          });\n          gsap/* default.killTweensOf */.ZP.killTweensOf([this.appUi.$cursorDrag, this.appUi.$cursorDrag.children[0], this.appUi.$cursorPlus, this.appUi.$cursorPlus.children[0]]);\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDot, {\n            scale: 0.7,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n            scale: 0.7,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorPlus, {\n            scale: 0.7,\n            opacity: 1,\n            duration: 0.3,\n            ease: 'expo.out'\n          }); //gsap.to(this.appUi.$cursorPlus.children[0], { opacity: 1, duration: 0.3, ease: 'expo.out' });\n\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag, {\n            scale: 0.7,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag.children[0], {\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n        } else {\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDot, {\n            scale: 0.7,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n            scale: 0.7,\n            opacity: 1,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorPlus, {\n            scale: 0.7,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          }); //gsap.to(this.appUi.$cursorMinus.children[0], { opacity: 1, duration: 0.3, ease: 'expo.out' });\n\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag, {\n            scale: 0.7,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag.children[0], {\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"leaveImage\",\n    value: function leaveImage(el) {\n      if (!this.gallery.dragging) {\n        if (!this.gallery.isZoomed) {\n          gsap/* default.to */.ZP.to(el.querySelector('.background .background__overlay2'), {\n            opacity: 0.0001,\n            duration: 0.2,\n            ease: 'power2.out'\n          });\n          gsap/* default.to */.ZP.to(el.children[0].children[0], {\n            scale: 1.1,\n            ease: 'expo.out',\n            duration: 1\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDot, {\n            scale: 1,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag, {\n            scale: 1,\n            opacity: 1,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag.children[0], {\n            opacity: 1,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n            scale: 1,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorPlus, {\n            scale: 1,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          }); //gsap.to(this.appUi.$cursorPlus.children[0], { scale: 1, opacity: 0.0001, duration: 0.3, ease: 'expo.out' });\n        } else {\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDot, {\n            scale: 1,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag, {\n            scale: 1,\n            opacity: 1,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorDrag.children[0], {\n            opacity: 1,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n            scale: 1,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          });\n          gsap/* default.to */.ZP.to(this.appUi.$cursorPlus, {\n            scale: 1,\n            opacity: 0.0001,\n            duration: 0.3,\n            ease: 'expo.out'\n          }); //gsap.to(this.appUi.$cursorMinus.children[0], { scale: 1, opacity: 0.0001, duration: 0.3, ease: 'expo.out' });\n        }\n      }\n    }\n  }, {\n    key: \"enterExpand\",\n    value: function enterExpand() {\n      gsap/* default.to */.ZP.to(this.appUi.$cursorDot, {\n        scale: 0.35,\n        opacity: 1,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n        scale: 0.35,\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      }); //gsap.to(this.appUi.$cursorMinus.children[0], { scale: 1, opacity: 0.0001, duration: 0.3, ease: 'expo.out' });\n    }\n  }, {\n    key: \"leaveExpand\",\n    value: function leaveExpand() {\n      gsap/* default.to */.ZP.to(this.appUi.$cursorDot, {\n        scale: 0.7,\n        opacity: 0.0001,\n        duration: 0.3,\n        ease: 'expo.out'\n      });\n      gsap/* default.to */.ZP.to(this.appUi.$cursorMinus, {\n        scale: 0.7,\n        opacity: 1,\n        duration: 0.3,\n        ease: 'expo.out'\n      }); //gsap.to(this.appUi.$cursorMinus.children[0], { opacity: 1, duration: 0.3, ease: 'expo.out' });\n    }\n  }, {\n    key: \"clickExpand\",\n    value: function clickExpand(e, a, el, index) {\n      this.gallery.isExpanded = true;\n      this.openLightbox(index);\n    }\n  }, {\n    key: \"resizeGallery\",\n    value: function resizeGallery() {\n      // Get absolute positions\n      for (var i = 0; i < this.$galleryGridItems.length; i++) {\n        var _width = window.innerWidth * this.gallery.references[i][0] / 100;\n\n        var _height = window.innerWidth * this.gallery.references[i][1] / 100;\n\n        var _left = window.innerWidth * this.gallery.references[i][2] / 100;\n\n        var _top = window.innerWidth * this.gallery.references[i][3] / 100;\n\n        var _ratio = 1 / ((window.innerHeight - window.innerWidth * 0.1) / _height);\n\n        var _multiplier = (window.innerHeight - window.innerWidth * 0.1) / _height;\n\n        this.gallery.absolutePositions[i] = [_width, _height, _left, _top, _ratio, _multiplier];\n      }\n\n      this.gallery.absoluteWidth = this.gallery.absolutePositions[this.gallery.count - 1][0] + this.gallery.absolutePositions[this.gallery.count - 1][2]; // Get relative positions\n\n      for (var _i8 = 0; _i8 < this.$galleryGridItems.length; _i8++) {\n        var _multiplier3 = this.gallery.absolutePositions[_i8][5];\n\n        var _width3 = _multiplier3 * this.gallery.absolutePositions[_i8][0];\n\n        var _height3 = _multiplier3 * this.gallery.absolutePositions[_i8][1];\n\n        var _left3 = _i8 === 0 ? 0 : this.gallery.relativePositions[_i8 - 1][2] + this.gallery.relativePositions[_i8 - 1][0] + this.gallery.margin;\n\n        var _top3 = window.innerWidth * 0.05;\n\n        this.gallery.relativePositions[_i8] = [_width3, _height3, _left3, _top3];\n      }\n\n      this.gallery.relativeWidth = this.gallery.relativePositions[this.gallery.count - 1][0] + this.gallery.relativePositions[this.gallery.count - 1][2];\n    }\n  }, {\n    key: \"initRelated\",\n    value: function initRelated() {\n      var _this7 = this;\n\n      // Selectors\n      this.$relatedSlider = this.$related.querySelector('.slider');\n      this.$relatedSliderInner = this.$related.querySelector('.slider__inner');\n      this.$relatedSliderItems = this.$related.querySelectorAll('.slider__item');\n      this.$relatedPromotions = this.$related.querySelectorAll('.promotion');\n\n      if (this.appStore.isDesktop) {\n        for (var i = 0; i < this.$relatedPromotions.length; i++) {\n          this.domEvents.add(this.$relatedPromotions[i], 'mouseenter', function (e, a, el) {\n            _this7.promotionEnter(el);\n          });\n          this.domEvents.add(this.$relatedPromotions[i], 'mouseleave', function (e, a, el) {\n            _this7.promotionLeave(el);\n          });\n        }\n\n        this.domEvents.add(this.$relatedSliderInner, 'mouseenter', function (e, a, el) {\n          _this7.appUi.enterDragCursor();\n        });\n        this.domEvents.add(this.$relatedSliderInner, 'mouseleave', function (e, a, el) {\n          _this7.appUi.leaveDragCursor();\n        });\n        this.relatedDraggable = new superDragger_default({\n          el: this.$relatedSlider,\n          elClickables: this.$relatedPromotions,\n          inner: this.$relatedSliderInner,\n          onDragStart: function onDragStart() {\n            _this7.superScroller._scroll.enable = false;\n\n            for (var _i9 = 0; _i9 < _this7.$relatedPromotions.length; _i9++) {\n              gsap/* default.to */.ZP.to(_this7.$relatedPromotions[_i9], {\n                scale: 0.94,\n                opacity: 1,\n                ease: 'expo.out',\n                duration: 0.6\n              });\n              gsap/* default.to */.ZP.to(_this7.$relatedPromotions[_i9].querySelector('.inner .background__bg'), {\n                scale: 1,\n                opacity: 1,\n                ease: 'expo.out',\n                duration: 0.6\n              });\n            }\n          },\n          onDragEnd: function onDragEnd() {\n            _this7.superScroller._scroll.enable = true;\n\n            for (var _i10 = 0; _i10 < _this7.$relatedPromotions.length; _i10++) {\n              gsap/* default.to */.ZP.to(_this7.$relatedPromotions[_i10], {\n                scale: 1,\n                opacity: 1,\n                ease: 'expo.out',\n                duration: 0.6\n              });\n              gsap/* default.to */.ZP.to(_this7.$relatedPromotions[_i10].querySelector('.inner .background__bg'), {\n                scale: 1.1,\n                ease: 'expo.out',\n                duration: 0.6\n              });\n            }\n          }\n        });\n      } else {\n        this.relatedDraggable = new Draggable_default({\n          target: this.$relatedSlider,\n          targetInner: this.$relatedSliderInner,\n          snap: true\n        });\n      }\n    }\n  }, {\n    key: \"promotionEnter\",\n    value: function promotionEnter(el) {\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .background__bg'), {\n        scale: 1,\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n    }\n  }, {\n    key: \"promotionLeave\",\n    value: function promotionLeave(el) {\n      if (this.relatedDraggable && this.relatedDraggable._drag.dragging) return;\n      gsap/* default.to */.ZP.to(el.querySelector('.inner .background__bg'), {\n        scale: 1.1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }, {\n    key: \"resize\",\n    value: function resize() {// if(this.lightboxDraggable)\n      //     this.lightboxDraggable.resize();\n      // this.resizeGallery();\n    }\n  }]);\n\n  return RendererPromotionsSingle;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererPromotionsSingle = (RendererPromotionsSingle);\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererMasterworks.js\nfunction rendererMasterworks_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererMasterworks_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererMasterworks_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererMasterworks_typeof(obj); }\n\nfunction rendererMasterworks_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererMasterworks_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererMasterworks_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererMasterworks_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererMasterworks_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererMasterworks_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererMasterworks_setPrototypeOf(subClass, superClass); }\n\nfunction rendererMasterworks_setPrototypeOf(o, p) { rendererMasterworks_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererMasterworks_setPrototypeOf(o, p); }\n\nfunction rendererMasterworks_createSuper(Derived) { var hasNativeReflectConstruct = rendererMasterworks_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererMasterworks_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererMasterworks_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererMasterworks_possibleConstructorReturn(this, result); }; }\n\nfunction rendererMasterworks_possibleConstructorReturn(self, call) { if (call && (rendererMasterworks_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererMasterworks_assertThisInitialized(self); }\n\nfunction rendererMasterworks_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererMasterworks_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererMasterworks_getPrototypeOf(o) { rendererMasterworks_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererMasterworks_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n // Other\n// import Slider from '../classes/slider';\n// import SplitText from '../classes/splitText';\n\nvar RendererMasterworks = /*#__PURE__*/function (_Renderer) {\n  rendererMasterworks_inherits(RendererMasterworks, _Renderer);\n\n  var _super = rendererMasterworks_createSuper(RendererMasterworks);\n\n  function RendererMasterworks() {\n    rendererMasterworks_classCallCheck(this, RendererMasterworks);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererMasterworks_createClass(RendererMasterworks, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$hero = this.$el.querySelector('.masterworks__hero');\n      this.$intro = this.$el.querySelector('.masterworks__intro');\n      this.$features = this.$el.querySelector('.masterworks__features');\n      if (this.$features) this.$featuresItems = this.$features.querySelectorAll('.features__item');\n    }\n  }, {\n    key: \"events\",\n    value: function events() {} // eslint-disable-line\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {\n      if (this.appStore.isDesktop) {\n        gsap/* default.set */.ZP.set(this.$hero.querySelector('.image'), {\n          y: '-100%'\n        });\n        gsap/* default.set */.ZP.set(this.$hero.querySelector('.image img'), {\n          y: '100%'\n        });\n      }\n\n      gsap/* default.set */.ZP.set(this.$hero.querySelector('.mask .bg'), {\n        scaleY: this.appStore.isDesktop ? 0 : 1\n      });\n      gsap/* default.set */.ZP.set(this.$hero.querySelector('.mask .center'), {\n        opacity: 0.0001\n      });\n    }\n  }, {\n    key: \"preenter\",\n    value: function preenter() {\n      if (this.appStore.isDesktop) {\n        gsap/* default.to */.ZP.to(this.$hero.querySelector('.image'), {\n          y: '0%',\n          duration: 1.8,\n          ease: 'expo.inOut',\n          delay: 0\n        });\n        gsap/* default.to */.ZP.to(this.$hero.querySelector('.image img'), {\n          y: '0%',\n          duration: 1.8,\n          ease: 'expo.inOut',\n          delay: 0\n        });\n      }\n\n      gsap/* default.to */.ZP.to(this.$hero.querySelector('.mask .bg'), {\n        scaleY: 1,\n        duration: 1.6,\n        ease: 'expo.inOut',\n        delay: 0.2\n      });\n      gsap/* default.to */.ZP.to(this.$hero.querySelector('.mask .center'), {\n        opacity: 1,\n        ease: 'power2.out',\n        duration: 0.8,\n        delay: 1\n      });\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      this.appUi.$infoContent.querySelector('input[name=\"info-subject\"]').value = 'Informacin sobre Masterworks';\n      if (this.appStore.isDesktop) this.parallaxHero();\n      this.initFeatures();\n    }\n  }, {\n    key: \"parallaxHero\",\n    value: function parallaxHero() {\n      var _this = this;\n\n      if (this.$hero) {\n        var offset = -(window.innerWidth * 0.05);\n        this.superTrigger.create({\n          trigger: this.$hero,\n          start: 'top top',\n          end: 'bottom top',\n          scrub: true,\n          onUpdate: function onUpdate(self) {\n            gsap/* default.to */.ZP.to(_this.$hero.querySelector('.image img'), {\n              scale: 1 + 0.1 * self.progress\n            });\n            gsap/* default.to */.ZP.to(_this.$hero.querySelector('.mask .bg'), {\n              y: offset * self.progress\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"initFeatures\",\n    value: function initFeatures() {\n      var _this2 = this;\n\n      this.featuresTimelines = [];\n\n      var _loop = function _loop(i) {\n        if (!_this2.appStore.isDesktop) {\n          _this2.domEvents.add(_this2.$featuresItems[i].querySelector('.trigger'), 'click', function () {\n            // Close menu\n            gsap/* default.to */.ZP.to(_this2.appUi.$header, {\n              y: '-100%',\n              duration: 1.4,\n              ease: 'expo.inOut'\n            });\n            _this2.appUi.header.isLocked = true;\n\n            var offset = _this2.$featuresItems[i].getBoundingClientRect().top;\n\n            _this2.appUi.previousScroll = document.documentElement.scrollTop + offset - 1;\n            gsap/* default.to */.ZP.to(document.documentElement, {\n              scrollTop: document.documentElement.scrollTop + offset,\n              duration: 1.4,\n              ease: 'expo.inOut',\n              onComplete: function onComplete() {\n                _this2.appUi.header.isLocked = false;\n              }\n            });\n\n            if (_this2.$featuresItems[i].classList.contains('open')) {\n              gsap/* default.to */.ZP.to(_this2.$featuresItems[i].querySelector('.info'), {\n                y: '50%',\n                ease: 'expo.inOut',\n                duration: 1.4\n              });\n              gsap/* default.to */.ZP.to(_this2.$featuresItems[i].querySelector('.info .wysiwyg'), {\n                opacity: 0.0001,\n                ease: 'power2.out',\n                duration: 0.4,\n                delay: 0\n              });\n\n              _this2.$featuresItems[i].classList.remove('open');\n            } else {\n              gsap/* default.to */.ZP.to(_this2.$featuresItems[i].querySelector('.info'), {\n                y: '0%',\n                ease: 'expo.inOut',\n                duration: 1.4\n              });\n              gsap/* default.to */.ZP.to(_this2.$featuresItems[i].querySelector('.info .wysiwyg'), {\n                opacity: 1,\n                ease: 'power2.out',\n                duration: 0.4,\n                delay: 1\n              });\n\n              _this2.$featuresItems[i].classList.add('open');\n            }\n          });\n        }\n\n        gsap/* default.set */.ZP.set(_this2.$featuresItems[i].querySelector('.background__bg'), {\n          y: _this2.appStore.isDesktop ? -window.innerHeight + 200 : -(window.innerHeight * 0.5) + 200,\n          scale: 1.2\n        }, 0);\n        gsap/* default.set */.ZP.set(_this2.$featuresItems[i].querySelector('.background__mask'), {\n          opacity: 1\n        }, 0);\n        var featureTimeline = gsap/* default.timeline */.ZP.timeline({\n          defaults: {\n            ease: 'none'\n          },\n          scrollTrigger: {\n            trigger: _this2.$featuresItems[i].querySelector('.background'),\n            scrub: true,\n            start: 'top bottom',\n            end: 'bottom bottom'\n          }\n        });\n        featureTimeline.to(_this2.$featuresItems[i].querySelector('.background__bg'), {\n          y: 0,\n          scale: 1\n        }, 0);\n        featureTimeline.to(_this2.$featuresItems[i].querySelector('.background__mask'), {\n          opacity: 0.0001,\n          duration: 0.5\n        }, 0);\n\n        _this2.featuresTimelines.push(featureTimeline);\n      };\n\n      for (var i = 0; i < this.$featuresItems.length; i++) {\n        _loop(i);\n      }\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }]);\n\n  return RendererMasterworks;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererMasterworks = (RendererMasterworks);\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererBlog.js\nfunction rendererBlog_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererBlog_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererBlog_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererBlog_typeof(obj); }\n\nfunction rendererBlog_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererBlog_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererBlog_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererBlog_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererBlog_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererBlog_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererBlog_setPrototypeOf(subClass, superClass); }\n\nfunction rendererBlog_setPrototypeOf(o, p) { rendererBlog_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererBlog_setPrototypeOf(o, p); }\n\nfunction rendererBlog_createSuper(Derived) { var hasNativeReflectConstruct = rendererBlog_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererBlog_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererBlog_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererBlog_possibleConstructorReturn(this, result); }; }\n\nfunction rendererBlog_possibleConstructorReturn(self, call) { if (call && (rendererBlog_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererBlog_assertThisInitialized(self); }\n\nfunction rendererBlog_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererBlog_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererBlog_getPrototypeOf(o) { rendererBlog_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererBlog_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n // Other\n// import Slider from '../classes/slider';\n\n\n\nvar RendererBlog = /*#__PURE__*/function (_Renderer) {\n  rendererBlog_inherits(RendererBlog, _Renderer);\n\n  var _super = rendererBlog_createSuper(RendererBlog);\n\n  function RendererBlog() {\n    rendererBlog_classCallCheck(this, RendererBlog);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererBlog_createClass(RendererBlog, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$list = this.$el.querySelector('.blog__list');\n\n      if (this.$list) {\n        this.$listFilter = this.$list.querySelector('.filter');\n        this.$listFilterTrigger = this.$list.querySelector('.filter__trigger');\n        this.$listFilterInner = this.$list.querySelector('.filter__inner');\n        this.$listFilterItems = this.$list.querySelectorAll('.filter__item');\n      }\n    }\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {\n      this.setPosts();\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      this.initPosts();\n      if (this.appStore.isDesktop) this.pinFilter();else this.initFilter();\n    }\n  }, {\n    key: \"initFilter\",\n    value: function initFilter() {\n      var _this = this;\n\n      this.filter = {\n        isOpen: false\n      };\n      gsap/* default.set */.ZP.set(this.$listFilterInner, {\n        opacity: 0.0001\n      });\n\n      if (this.$listFilterTrigger) {\n        this.domEvents.add(this.$listFilterTrigger, 'click', function () {\n          if (_this.filter.isOpen) _this.hideFilter();else _this.showFilter();\n        });\n      }\n    }\n  }, {\n    key: \"showFilter\",\n    value: function showFilter() {\n      gsap/* default.to */.ZP.to(this.$listFilterInner, {\n        opacity: 1,\n        ease: 'powe2.out',\n        duration: 0.2\n      });\n      this.filter.isOpen = true;\n    }\n  }, {\n    key: \"hideFilter\",\n    value: function hideFilter() {\n      gsap/* default.to */.ZP.to(this.$listFilterInner, {\n        opacity: 0.0001,\n        ease: 'powe2.out',\n        duration: 0.2\n      });\n      this.filter.isOpen = false;\n    }\n  }, {\n    key: \"pinFilter\",\n    value: function pinFilter() {\n      var _this2 = this;\n\n      if (this.$listFilter) {\n        var offset = this.$list.getBoundingClientRect().height - (this.$listFilter.getBoundingClientRect().height + window.innerWidth * 0.20);\n        this.superTrigger.create({\n          trigger: this.$list,\n          start: 'top top',\n          end: 'bottom ' + (this.$listFilter.getBoundingClientRect().height + window.innerWidth * 0.20) + 'px',\n          scrub: true,\n          onUpdate: function onUpdate(self) {\n            gsap/* default.set */.ZP.set(_this2.$listFilter, {\n              y: offset * self.progress\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"setPosts\",\n    value: function setPosts() {\n      var _this3 = this;\n\n      this.$posts = this.$el.querySelectorAll('.post');\n\n      if (this.$posts) {\n        for (var i = 0; i < this.$posts.length; i++) {\n          // Set el\n          if (this.appStore.isDesktop) {\n            gsap/* default.set */.ZP.set(this.$posts[i].querySelector('.image img'), {\n              scale: 1.1\n            });\n            this.domEvents.add(this.$posts[i], 'mouseenter', function (e, a, el) {\n              _this3.enterPost(e, a, el);\n            });\n            this.domEvents.add(this.$posts[i], 'mouseleave', function (e, a, el) {\n              _this3.leavePost(e, a, el);\n            });\n          } // Set titles\n\n\n          var $title = this.$posts[i].querySelector('.title');\n          var split = new SplitText($title, {\n            type: 'lines, words',\n            linesClass: 'line line--++',\n            wordsClass: 'word word--++',\n            charsClass: 'char char--++'\n          }); // eslint-disable-line\n\n          $title.classList.add('split');\n          this.splitTexts.push(split);\n          var lines = $title.querySelectorAll('.line');\n\n          for (var j = 0; j < lines.length; j++) {\n            gsap/* default.set */.ZP.set(lines[j], {\n              opacity: 0.0001,\n              y: '100%'\n            });\n          } // Set link\n\n\n          var $link = this.$posts[i].querySelector('.link');\n          gsap/* default.set */.ZP.set($link, {\n            y: '100%',\n            opacity: 0.0001\n          });\n          gsap/* default.set */.ZP.set($link.children[0], {\n            opacity: 0.0001\n          });\n          gsap/* default.set */.ZP.set($link.querySelector('svg'), {\n            opacity: 0.0001,\n            rotation: '450deg'\n          });\n          gsap/* default.set */.ZP.set($link.querySelector('svg circle'), {\n            strokeDashoffset: '1181.24px'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"initPosts\",\n    value: function initPosts() {\n      var _this4 = this;\n\n      if (this.$posts) {\n        var _loop = function _loop(i) {\n          var _delay = i % 2 ? 0 : 0.1;\n\n          var scrolltrigger = ScrollTrigger/* default.create */.Z.create({\n            trigger: _this4.$posts[i],\n            start: 'center bottom',\n            once: true,\n            onEnter: function onEnter() {\n              // Trigger el\n              //gsap.to(this.$posts[i], { opacity: 1, y: '0%', ease: 'expo.out', duration: 2, delay: _delay });\n              // Trigger titles\n              var $title = _this4.$posts[i].querySelector('.title');\n\n              var lines = $title.querySelectorAll('.line');\n\n              for (var j = 0; j < lines.length; j++) {\n                gsap/* default.to */.ZP.to(lines[j], {\n                  opacity: 1,\n                  y: '0%',\n                  ease: 'expo.out',\n                  duration: 2,\n                  delay: j * 0.1 + _delay\n                });\n              } // Trigger links\n\n\n              var $link = _this4.$posts[i].querySelector('.link');\n\n              gsap/* default.to */.ZP.to($link, {\n                y: 0,\n                opacity: 1,\n                duration: 2,\n                ease: 'expo.out',\n                delay: _delay\n              });\n              gsap/* default.to */.ZP.to($link.children[0], {\n                opacity: 1,\n                duration: 2,\n                ease: 'expo.out',\n                delay: _delay\n              });\n              gsap/* default.to */.ZP.to($link.querySelector('svg'), {\n                opacity: 1,\n                rotation: '0',\n                duration: 2,\n                ease: 'expo.out',\n                delay: _delay\n              });\n              gsap/* default.to */.ZP.to($link.querySelector('svg circle'), {\n                strokeDashoffset: '0px',\n                duration: 2,\n                ease: 'expo.out',\n                delay: _delay\n              });\n            }\n          });\n        };\n\n        for (var i = 0; i < this.$posts.length; i++) {\n          _loop(i);\n        }\n      }\n    }\n  }, {\n    key: \"enterPost\",\n    value: function enterPost(e, a, el) {\n      gsap/* default.to */.ZP.to(el.querySelector('.image img'), {\n        scale: 1,\n        opacity: 1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.killTweensOf */.ZP.killTweensOf([el.querySelector('svg'), el.querySelector('svg circle')]);\n      gsap/* default.to */.ZP.to(el.querySelector('svg'), {\n        rotation: '450deg',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('svg circle'), {\n        strokeDashoffset: '1181.24px',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n    }\n  }, {\n    key: \"leavePost\",\n    value: function leavePost(e, a, el) {\n      gsap/* default.to */.ZP.to(el.querySelector('.image img'), {\n        scale: 1.1,\n        ease: 'expo.out',\n        duration: 0.6\n      });\n      gsap/* default.killTweensOf */.ZP.killTweensOf([el.querySelector('svg'), el.querySelector('svg circle')]);\n      gsap/* default.to */.ZP.to(el.querySelector('svg'), {\n        rotation: '0deg',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n      gsap/* default.to */.ZP.to(el.querySelector('svg circle'), {\n        strokeDashoffset: '0px',\n        ease: 'expo.out',\n        duration: 0.8\n      });\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }]);\n\n  return RendererBlog;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererBlog = (RendererBlog);\n;// CONCATENATED MODULE: ./app/src/js/renderers/rendererBlogSingle.js\nfunction rendererBlogSingle_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { rendererBlogSingle_typeof = function _typeof(obj) { return typeof obj; }; } else { rendererBlogSingle_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return rendererBlogSingle_typeof(obj); }\n\nfunction rendererBlogSingle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction rendererBlogSingle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction rendererBlogSingle_createClass(Constructor, protoProps, staticProps) { if (protoProps) rendererBlogSingle_defineProperties(Constructor.prototype, protoProps); if (staticProps) rendererBlogSingle_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction rendererBlogSingle_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) rendererBlogSingle_setPrototypeOf(subClass, superClass); }\n\nfunction rendererBlogSingle_setPrototypeOf(o, p) { rendererBlogSingle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return rendererBlogSingle_setPrototypeOf(o, p); }\n\nfunction rendererBlogSingle_createSuper(Derived) { var hasNativeReflectConstruct = rendererBlogSingle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = rendererBlogSingle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = rendererBlogSingle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return rendererBlogSingle_possibleConstructorReturn(this, result); }; }\n\nfunction rendererBlogSingle_possibleConstructorReturn(self, call) { if (call && (rendererBlogSingle_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return rendererBlogSingle_assertThisInitialized(self); }\n\nfunction rendererBlogSingle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction rendererBlogSingle_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction rendererBlogSingle_getPrototypeOf(o) { rendererBlogSingle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return rendererBlogSingle_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n\n // Other\n// import Slider from '../classes/slider';\n// import SplitText from '../classes/splitText';\n\nvar RendererBlogSingle = /*#__PURE__*/function (_Renderer) {\n  rendererBlogSingle_inherits(RendererBlogSingle, _Renderer);\n\n  var _super = rendererBlogSingle_createSuper(RendererBlogSingle);\n\n  function RendererBlogSingle() {\n    rendererBlogSingle_classCallCheck(this, RendererBlogSingle);\n\n    return _super.apply(this, arguments);\n  }\n\n  rendererBlogSingle_createClass(RendererBlogSingle, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$flex = this.$el.querySelector('.blogsingle__flex');\n    }\n  }, {\n    key: \"events\",\n    value: function events() {} // eslint-disable-line\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {} // eslint-disable-line\n\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      this.initGalleries();\n      this.initVideos();\n    }\n  }, {\n    key: \"initGalleries\",\n    value: function initGalleries() {\n      var _this = this;\n\n      this.galleries = [];\n      this.$galleries = this.$flex.querySelectorAll('.gallery');\n\n      if (this.$galleries) {\n        var _loop = function _loop(i) {\n          var images = _this.$galleries[0].querySelectorAll('.image');\n\n          var ratio = images[0].style.getPropertyValue('--aspectratio');\n          if (_this.appStore.isDesktop) gsap/* default.set */.ZP.set(_this.$galleries[i], {\n            width: 30 * ratio + 'vw'\n          });else gsap/* default.set */.ZP.set(_this.$galleries[i], {\n            width: 70 * ratio + 'vw'\n          });\n          var gallery = new Draggable_default({\n            target: _this.$galleries[i],\n            targetInner: _this.$galleries[i].children[0],\n            onDrag: function onDrag() {\n              gsap/* default.to */.ZP.to(_this.$galleries[i].children[1].children[0], {\n                scaleX: _this.galleries[i].draggable[0].x / _this.galleries[i].draggable[0].minX\n              });\n            }\n          });\n\n          _this.galleries.push(gallery);\n        };\n\n        for (var i = 0; i < this.$galleries.length; i++) {\n          _loop(i);\n        }\n      }\n    }\n  }, {\n    key: \"initVideos\",\n    value: function initVideos() {\n      var _this2 = this;\n\n      this.videos = [];\n      this.$videos = this.$flex.querySelectorAll('.video');\n\n      if (this.$videos) {\n        var _loop2 = function _loop2(i) {\n          _this2.domEvents.add(_this2.$videos[i].querySelector('.video__trigger'), 'click', function (e, a, el) {\n            gsap/* default.to */.ZP.to(_this2.$videos[i].querySelector('.video__overlay'), {\n              opacity: 0.0001,\n              ease: 'expo.out',\n              duration: 0.8\n            });\n            gsap/* default.to */.ZP.to(_this2.$videos[i].querySelector('.video__trigger'), {\n              scale: 0,\n              opacity: 0.0001,\n              ease: 'expo.out',\n              duration: 0.8\n            });\n            _this2.$videos[i].querySelector('.video__player').style.pointerEvents = 'all';\n\n            _this2.$videos[i].querySelector('.video__player video').setAttribute('controls', 'controls');\n\n            _this2.$videos[i].querySelector('.video__player video').play();\n          });\n        };\n\n        for (var i = 0; i < this.$videos.length; i++) {\n          _loop2(i);\n        }\n      }\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }]);\n\n  return RendererBlogSingle;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const rendererBlogSingle = (RendererBlogSingle);\n;// CONCATENATED MODULE: ./app/src/js/renderers/RendererContact.js\nfunction RendererContact_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { RendererContact_typeof = function _typeof(obj) { return typeof obj; }; } else { RendererContact_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return RendererContact_typeof(obj); }\n\nfunction RendererContact_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction RendererContact_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction RendererContact_createClass(Constructor, protoProps, staticProps) { if (protoProps) RendererContact_defineProperties(Constructor.prototype, protoProps); if (staticProps) RendererContact_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction RendererContact_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) RendererContact_setPrototypeOf(subClass, superClass); }\n\nfunction RendererContact_setPrototypeOf(o, p) { RendererContact_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return RendererContact_setPrototypeOf(o, p); }\n\nfunction RendererContact_createSuper(Derived) { var hasNativeReflectConstruct = RendererContact_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = RendererContact_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = RendererContact_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return RendererContact_possibleConstructorReturn(this, result); }; }\n\nfunction RendererContact_possibleConstructorReturn(self, call) { if (call && (RendererContact_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return RendererContact_assertThisInitialized(self); }\n\nfunction RendererContact_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction RendererContact_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction RendererContact_getPrototypeOf(o) { RendererContact_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return RendererContact_getPrototypeOf(o); }\n\n// Gsap\n\n\ngsap/* default.registerPlugin */.ZP.registerPlugin(ScrollTrigger/* default */.Z); // Import Renderer\n\n // import stylesDefault from './stylesDefault.css'; //eslint-disable-line\n// Utilities\n\n\n // Other\n// import Slider from '../classes/slider';\n// import SplitText from '../classes/splitText';\n\nvar RendererContact = /*#__PURE__*/function (_Renderer) {\n  RendererContact_inherits(RendererContact, _Renderer);\n\n  var _super = RendererContact_createSuper(RendererContact);\n\n  function RendererContact() {\n    RendererContact_classCallCheck(this, RendererContact);\n\n    return _super.apply(this, arguments);\n  }\n\n  RendererContact_createClass(RendererContact, [{\n    key: \"selectors\",\n    value: function selectors() {\n      this.$hero = this.$el.querySelector('.contact__hero');\n\n      if (this.$hero) {\n        this.$heroPin = this.$hero.querySelector('.subcolumns__item--pin');\n        this.$heroFix = this.$hero.querySelector('.subcolumns__item--fix');\n        this.$heroParallax = this.$hero.querySelector('.subcolumns__item--parallax');\n      }\n    } // preload()\n    // {\n    //     // Preloader\n    //     const _main = [];\n    //     const _secondary = [];\n    //     this.preloadItems = {\n    //         main: _main,\n    //         secondary: _secondary\n    //     };\n    // }\n\n  }, {\n    key: \"events\",\n    value: function events() {} // eslint-disable-line\n\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {} // eslint-disable-line\n\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      this.appUi.$infoContent.querySelector('input[name=\"info-subject\"]').value = 'Informacin general';\n\n      if (this.appStore.isDesktop) {\n        this.pinSidebar();\n        this.parallaxSidebar();\n      }\n    }\n  }, {\n    key: \"pinSidebar\",\n    value: function pinSidebar() {\n      var _this = this;\n\n      if (this.$heroPin) {\n        var offset = this.$hero.getBoundingClientRect().height - this.$heroPin.getBoundingClientRect().height - this.$heroFix.getBoundingClientRect().height - window.innerWidth * 0.25;\n        this.superTrigger.create({\n          trigger: this.$hero,\n          start: 'top top',\n          end: offset + 'px top',\n          scrub: true,\n          onUpdate: function onUpdate(self) {\n            gsap/* default.set */.ZP.set(_this.$heroPin, {\n              y: offset * self.progress\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"parallaxSidebar\",\n    value: function parallaxSidebar() {\n      var _this2 = this;\n\n      if (this.$heroParallax) {\n        var offset = -(window.innerWidth * 0.05);\n        this.superTrigger.create({\n          trigger: this.$hero,\n          start: 'top top',\n          end: 'bottom bottom',\n          scrub: true,\n          onUpdate: function onUpdate(self) {\n            gsap/* default.set */.ZP.set(_this2.$heroParallax, {\n              y: offset * self.progress\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"raf\",\n    value: function raf() {} // eslint-disable-line\n\n  }]);\n\n  return RendererContact;\n}(renderer); // Don`t forget to export your renderer\n\n\n/* harmony default export */ const renderers_RendererContact = (RendererContact);\n;// CONCATENATED MODULE: ./app/src/js/transitions/transition.js\nfunction transition_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { transition_typeof = function _typeof(obj) { return typeof obj; }; } else { transition_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return transition_typeof(obj); }\n\nfunction transition_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction transition_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction transition_createClass(Constructor, protoProps, staticProps) { if (protoProps) transition_defineProperties(Constructor.prototype, protoProps); if (staticProps) transition_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction transition_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) transition_setPrototypeOf(subClass, superClass); }\n\nfunction transition_setPrototypeOf(o, p) { transition_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return transition_setPrototypeOf(o, p); }\n\nfunction transition_createSuper(Derived) { var hasNativeReflectConstruct = transition_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = transition_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = transition_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return transition_possibleConstructorReturn(this, result); }; }\n\nfunction transition_possibleConstructorReturn(self, call) { if (call && (transition_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return transition_assertThisInitialized(self); }\n\nfunction transition_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction transition_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction transition_getPrototypeOf(o) { transition_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return transition_getPrototypeOf(o); }\n\n// App\n\n\n // Highway\n\n // Preload\n\n // GSAP Library\n\n\n // Transition\n\nvar Transition = /*#__PURE__*/function (_Highway$Transition) {\n  transition_inherits(Transition, _Highway$Transition);\n\n  var _super = transition_createSuper(Transition);\n\n  function Transition() {\n    transition_classCallCheck(this, Transition);\n\n    return _super.apply(this, arguments);\n  }\n\n  transition_createClass(Transition, [{\n    key: \"out\",\n    value: function out(_ref) {\n      var from = _ref.from,\n          done = _ref.done;\n      // Store\n      this.appStore = appStore; // App references\n\n      this.appCore = new app_appCore();\n      this.appUi = new app_appUi();\n      if (this.preloadMain) this.preloadMain.cancel();\n      if (this.preloadSecondary) this.preloadSecondary.cancel(); // Out animation\n\n      this.outAnimation(from, done);\n    }\n  }, {\n    key: \"outAnimation\",\n    value: function outAnimation(from, done) {\n      from.remove();\n      done();\n    }\n  }, {\n    key: \"in\",\n    value: function _in(_ref2) {\n      var _this = this;\n\n      var from = _ref2.from,\n          to = _ref2.to,\n          done = _ref2.done;\n      // Store\n      this.appStore = appStore; // App references\n\n      this.appCore = new app_appCore();\n      this.appUi = new app_appUi(); // Preloader\n\n      this.preloadMain = null;\n      this.preloadSecondary = null;\n      this.preloadDelay = 0; // Lazy load\n\n      this.lazyLoad = null; // Set animation\n\n      this.setAnimation(from, to);\n      this.preloadItems = this.appCore.highway.To.preloadItems;\n\n      if (this.preloadItems.main.length > 0) {\n        var _preloadOn = new Date().getTime();\n\n        this.preloadMain = preload_it_default()();\n        this.preloadMain.fetch(this.preloadItems.main); // this.preloadMain.onprogress = (event) => { console.log('Primary: ' + event.progress + '%'); };\n\n        this.preloadMain.oncomplete = function (items) {\n          var _preloadOff = new Date().getTime();\n\n          var _preloadDifference = (_preloadOff - _preloadOn) / 1000;\n\n          var _preloadDelay = Math.max(0, _this.preloadDelay - _preloadDifference);\n\n          gsap/* default.delayedCall */.ZP.delayedCall(_preloadDelay, function () {\n            // In animation\n            _this.inAnimation(from, to, done);\n          });\n        };\n\n        if (this.preloadItems.secondary.length > 0) {\n          this.preloadSecondary = preload_it_default()();\n          this.preloadSecondary.fetch(this.preloadItems.secondary); // this.preloadSecondary.onprogress = (event) => { console.log('Secondary: ' + event.progress + '%'); };\n        }\n      } else {\n        gsap/* default.delayedCall */.ZP.delayedCall(this.preloadDelay, function () {\n          // In animation\n          _this.inAnimation(from, to, done);\n        });\n      }\n    }\n  }, {\n    key: \"setAnimation\",\n    value: function setAnimation(from, to) {} // eslint-disable-line\n\n  }, {\n    key: \"inAnimation\",\n    value: function inAnimation(from, to, done) {\n      done();\n    }\n  }]);\n\n  return Transition;\n}(highway_module/* default.Transition */.Z.Transition);\n\n/* harmony default export */ const transition = (Transition);\n;// CONCATENATED MODULE: ./app/src/js/transitions/transitionFade.js\nfunction transitionFade_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { transitionFade_typeof = function _typeof(obj) { return typeof obj; }; } else { transitionFade_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return transitionFade_typeof(obj); }\n\nfunction transitionFade_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction transitionFade_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction transitionFade_createClass(Constructor, protoProps, staticProps) { if (protoProps) transitionFade_defineProperties(Constructor.prototype, protoProps); if (staticProps) transitionFade_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction transitionFade_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) transitionFade_setPrototypeOf(subClass, superClass); }\n\nfunction transitionFade_setPrototypeOf(o, p) { transitionFade_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return transitionFade_setPrototypeOf(o, p); }\n\nfunction transitionFade_createSuper(Derived) { var hasNativeReflectConstruct = transitionFade_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = transitionFade_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = transitionFade_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return transitionFade_possibleConstructorReturn(this, result); }; }\n\nfunction transitionFade_possibleConstructorReturn(self, call) { if (call && (transitionFade_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return transitionFade_assertThisInitialized(self); }\n\nfunction transitionFade_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction transitionFade_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction transitionFade_getPrototypeOf(o) { transitionFade_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return transitionFade_getPrototypeOf(o); }\n\n// Import Transition\n // GSAP Library\n\n // Fade\n\nvar TransitionFade = /*#__PURE__*/function (_Transition) {\n  transitionFade_inherits(TransitionFade, _Transition);\n\n  var _super = transitionFade_createSuper(TransitionFade);\n\n  function TransitionFade() {\n    transitionFade_classCallCheck(this, TransitionFade);\n\n    return _super.apply(this, arguments);\n  }\n\n  transitionFade_createClass(TransitionFade, [{\n    key: \"outAnimation\",\n    value: function outAnimation(from, done) {\n      gsap/* default.fromTo */.ZP.fromTo(from, {\n        opacity: 1\n      }, {\n        opacity: 0,\n        duration: 0.8,\n        onComplete: function onComplete() {\n          from.remove();\n          done();\n        }\n      });\n    }\n  }, {\n    key: \"inAnimation\",\n    value: function inAnimation(from, to, done) {\n      window.scrollTo(0, 0);\n      document.documentElement.scrollTop = 0;\n      done();\n      gsap/* default.to */.ZP.to(to, {\n        opacity: 1,\n        duration: 0.8\n      });\n    }\n  }]);\n\n  return TransitionFade;\n}(transition);\n\n/* harmony default export */ const transitionFade = (TransitionFade);\n;// CONCATENATED MODULE: ./app/src/js/transitions/transitionMask.js\nfunction transitionMask_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { transitionMask_typeof = function _typeof(obj) { return typeof obj; }; } else { transitionMask_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return transitionMask_typeof(obj); }\n\nfunction transitionMask_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction transitionMask_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction transitionMask_createClass(Constructor, protoProps, staticProps) { if (protoProps) transitionMask_defineProperties(Constructor.prototype, protoProps); if (staticProps) transitionMask_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction transitionMask_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) transitionMask_setPrototypeOf(subClass, superClass); }\n\nfunction transitionMask_setPrototypeOf(o, p) { transitionMask_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return transitionMask_setPrototypeOf(o, p); }\n\nfunction transitionMask_createSuper(Derived) { var hasNativeReflectConstruct = transitionMask_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = transitionMask_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = transitionMask_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return transitionMask_possibleConstructorReturn(this, result); }; }\n\nfunction transitionMask_possibleConstructorReturn(self, call) { if (call && (transitionMask_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return transitionMask_assertThisInitialized(self); }\n\nfunction transitionMask_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction transitionMask_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction transitionMask_getPrototypeOf(o) { transitionMask_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return transitionMask_getPrototypeOf(o); }\n\n// Import Transition\n // GSAP Library\n\n // Mask\n\nvar TransitionMask = /*#__PURE__*/function (_Transition) {\n  transitionMask_inherits(TransitionMask, _Transition);\n\n  var _super = transitionMask_createSuper(TransitionMask);\n\n  function TransitionMask() {\n    transitionMask_classCallCheck(this, TransitionMask);\n\n    return _super.apply(this, arguments);\n  }\n\n  transitionMask_createClass(TransitionMask, [{\n    key: \"outAnimation\",\n    value: function outAnimation(from, done) {\n      gsap/* default.set */.ZP.set(this.appUi.$mask, {\n        display: 'block'\n      });\n      gsap/* default.fromTo */.ZP.fromTo(this.appUi.$mask.children[0], {\n        y: '-100%'\n      }, {\n        y: '0%',\n        duration: 1,\n        ease: 'expo.in',\n        delay: this.appUi.header.isOpen ? 0.8 : 0,\n        onStart: function onStart() {\n          gsap/* default.to */.ZP.to(from, {\n            y: '5vw',\n            duration: 1,\n            ease: 'expo.in'\n          });\n        },\n        onComplete: function onComplete() {\n          from.remove();\n          done();\n        }\n      });\n    }\n  }, {\n    key: \"inAnimation\",\n    value: function inAnimation(from, to, done) {\n      var _this = this;\n\n      gsap/* default.set */.ZP.set(this.appUi.$logo, {\n        y: 0\n      });\n      window.scrollTo(0, 0);\n      document.documentElement.scrollTop = 0;\n      done();\n      gsap/* default.to */.ZP.to(this.appUi.$mask.children[0], {\n        y: '100%',\n        duration: 1,\n        ease: 'expo.out',\n        onComplete: function onComplete() {\n          gsap/* default.set */.ZP.set(_this.appUi.$mask, {\n            display: 'none'\n          });\n        }\n      });\n    }\n  }]);\n\n  return TransitionMask;\n}(transition);\n\n/* harmony default export */ const transitionMask = (TransitionMask);\n;// CONCATENATED MODULE: ./app/src/js/app/appCore.js\nfunction appCore_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction appCore_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction appCore_createClass(Constructor, protoProps, staticProps) { if (protoProps) appCore_defineProperties(Constructor.prototype, protoProps); if (staticProps) appCore_defineProperties(Constructor, staticProps); return Constructor; }\n\n// app\n\n // classes\n\n // Highway\n\n // gsap\n\n // Import Renderers\n// import Renderer from '../renderers/renderer';\n\n\n\n\n\n\n\n\n\n\n // Import Transitions\n\n\n\n\nvar appCore_singleton = null;\n\nvar appCore = /*#__PURE__*/function () {\n  function appCore(data) {\n    appCore_classCallCheck(this, appCore);\n\n    if (!appCore_singleton) {\n      this.data = data;\n      appCore_singleton = this;\n    } else {\n      return appCore_singleton;\n    } // console.log('Constructor de appCore');\n    // store\n\n\n    this.appStore = appStore; // app references\n\n    this.appUi = new app_appUi(); // Events\n\n    this.domEvents = new domEvents_default(); // Highway core\n\n    this.highway = null;\n  }\n\n  appCore_createClass(appCore, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      // Call Highway.Core once.\n      this.highway = new highway_module/* default.Core */.Z.Core({\n        renderers: {\n          home: rendererHome,\n          promotions: rendererPromotions,\n          promotionssingle: rendererPromotionsSingle,\n          about: rendererAbout,\n          philosophy: rendererPhilosophy,\n          masterworks: rendererMasterworks,\n          blog: rendererBlog,\n          blogsingle: rendererBlogSingle,\n          contact: renderers_RendererContact,\n          \"default\": rendererDefault\n        },\n        transitions: {\n          \"default\": this.appStore.isDesktop ? transitionMask : transitionFade\n        }\n      });\n      this.highway.on('NAVIGATE_OUT', function (_ref) {\n        var from = _ref.from,\n            trigger = _ref.trigger,\n            location = _ref.location;\n\n        _this.navigateOut(from, trigger, location);\n      });\n      this.highway.on('NAVIGATE_IN', function (_ref2) {\n        var to = _ref2.to,\n            trigger = _ref2.trigger,\n            location = _ref2.location;\n\n        _this.navigateIn(to, trigger, location);\n      });\n      this.highway.on('NAVIGATE_END', function (_ref3) {\n        var to = _ref3.to,\n            from = _ref3.from,\n            trigger = _ref3.trigger,\n            location = _ref3.location;\n\n        _this.navigateEnd(to, from, trigger, location);\n      }); // Cookie links\n\n      var cookieLink = document.querySelector('#cookie-law-info-bar .cookie_action_close_header');\n\n      if (cookieLink) {\n        cookieLink.href = 'javascript:void(0);';\n        cookieLink.setAttribute('data-router-disabled', ''); //this.highway.detach(cookieLink);\n      }\n    }\n  }, {\n    key: \"navigateStart\",\n    value: function navigateStart() {\n      // Start navigation on 0\n      window.scrollTo(0, 0);\n      document.documentElement.scrollTop = 0;\n      if (history.scrollRestoration) history.scrollRestoration = 'manual'; // Show submenu on homepage\n\n      if (this.appStore.current === 'home' && this.appStore.isDesktop) this.appUi.triggerSubmenu(true); // Position the menu on promotionSingle\n\n      if (this.appStore.current === 'promotionssingle' && this.appStore.isDesktop) gsap/* default.set */.ZP.set([this.appUi.$header], {\n        y: '-2.5vw'\n      });else gsap/* default.set */.ZP.set([this.appUi.$header], {\n        y: '0vw'\n      }); // Query admin bar links, and new page's admin bar links\n\n      var languageLinks = document.querySelectorAll('#header .menu-item-object-language_switcher a');\n\n      if (languageLinks) {\n        for (var i = 0; i < languageLinks.length; i++) {\n          languageLinks[i].setAttribute('data-router-disabled', '');\n        }\n\n        this.highway.detach(languageLinks);\n      }\n    }\n  }, {\n    key: \"navigateOut\",\n    value: function navigateOut(from, trigger, location) {\n      this.appStore.from = from.view.dataset.routerView; // Show submenu on homepage\n\n      if (this.appStore.from === 'home' && this.appStore.isDesktop) this.appUi.triggerSubmenu(false);\n      if (this.appUi.header.isOpen) this.appUi.triggerMenu();\n    }\n  }, {\n    key: \"navigateIn\",\n    value: function navigateIn(to, trigger, location) {\n      this.appStore.to = to.view.dataset.routerView; // Show submenu on homepage\n\n      if (this.appStore.to === 'home' && this.appStore.isDesktop) this.appUi.triggerSubmenu(true); // Position the menu on promotionSingle\n\n      if (this.appStore.to === 'promotionssingle' && this.appStore.isDesktop) gsap/* default.to */.ZP.to(this.appUi.$header, {\n        y: '-2.5vw',\n        duration: 1,\n        ease: 'expo.out'\n      });else gsap/* default.to */.ZP.to(this.appUi.$header, {\n        y: '0vw',\n        duration: 1,\n        ease: 'expo.out'\n      });\n    }\n  }, {\n    key: \"navigateEnd\",\n    value: function navigateEnd(to, from, trigger, location) {\n      this.appStore.to = to.view.dataset.routerView; // Remove active item\n\n      if (this.appUi.$header.querySelector('.active')) this.appUi.$header.querySelector('.active').classList.remove('active'); // Add active item\n\n      if (this.appUi.$header.querySelector('.menu-item--' + this.appStore.to)) this.appUi.$header.querySelector('.menu-item--' + this.appStore.to).classList.add('active'); // Set classes\n\n      document.querySelector('body').setAttribute('class', to.page.body.getAttribute('class')); // // Query admin bar links, and new page's admin bar links\n      // const oldLanguageLinks = document.querySelectorAll('#header a');\n      // const newLanguageLinks = to.page.body.querySelectorAll('#header a');\n      // // Replace every admin bar link's href value with new value\n      // if(oldLanguageLinks)\n      // {\n      //     for(let i = 0; i < newLanguageLinks.length; i++)\n      //     {\n      //         oldLanguageLinks[i].parentNode.setAttribute('class', newLanguageLinks[i].parentNode.getAttribute('class'));\n      //         oldLanguageLinks[i].href = newLanguageLinks[i].href;\n      //     }\n      //     // Detach admin bar links from Highway transitions\n      //     this.highway.detach(oldLanguageLinks);\n      // }\n    }\n  }, {\n    key: \"selectors\",\n    value: function selectors() {// Get all menu menuLinks\n      // this.$menuLinks = document.querySelectorAll('#menu ul a');\n    }\n  }, {\n    key: \"events\",\n    value: function events() {// for (let i = 0; i < this.$menuLinks.length; i++) {\n      //     this.domEvents.add(this.$menuLinks[i], 'mouseenter', (e, a, el) => { this.appUi.menuEnter(e, a, el); }, this);\n      //     this.domEvents.add(this.$menuLinks[i], 'mouseleave', (e, a, el) => { this.appUi.menuLeave(e, a, el); }, this);\n      // }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {// console.log('Resize appCore:', width, height);\n      //  this.highway.Helpers.renderers[this.highway.properties.slug].prototype.resize();\n      // console.log(this.highway.Helpers.renderers.locales.prototype);\n    }\n  }, {\n    key: \"resizeOrientation\",\n    value: function resizeOrientation() {// gsap.to(document.documentElement, { opacity: 0.0001, duration: 0.6, ease: 'power2.out', onComplete: () => {\n      //     gsap.to(document.documentElement, { opacity: 1, duration: 0.6, ease: 'power2.out' });\n      // }});\n    }\n  }]);\n\n  return appCore;\n}();\n\n/* harmony default export */ const app_appCore = (appCore);\n;// CONCATENATED MODULE: ./app/src/js/utils/debounce.js\n//Copyright 2018 Vicente Lucendo - vicen@vlucendo.com\n//simple debounce with callback\n/* harmony default export */ function debounce(callback, delay) {\n  var timeout;\n  return function () {\n    clearTimeout(timeout);\n    timeout = setTimeout(callback, delay);\n  };\n}\n;\n// EXTERNAL MODULE: ./node_modules/bowser/es5.js\nvar es5 = __webpack_require__(206);\nvar es5_default = /*#__PURE__*/__webpack_require__.n(es5);\n;// CONCATENATED MODULE: ./app/src/js/app/app.js\nfunction app_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction app_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction app_createClass(Constructor, protoProps, staticProps) { if (protoProps) app_defineProperties(Constructor.prototype, protoProps); if (staticProps) app_defineProperties(Constructor, staticProps); return Constructor; }\n\n// css\n // eslint-disable-line\n// app\n\n\n\n // classes\n\n // gsap\n\n // utils\n\n\n\n\nvar Application = /*#__PURE__*/function () {\n  function Application(options) {\n    app_classCallCheck(this, Application);\n\n    // console.log('Constructor de app');\n    // store\n    this.appStore = appStore; // app references\n\n    this.appCore = new app_appCore();\n    this.appUi = new app_appUi(); // Events\n\n    this.domEvents = new domEvents_default(); // get current url\n\n    this.appStore.rootUrl = window.location.protocol + '// ' + window.location.host; // get client info\n\n    var clientInfo = es5_default().getParser(window.navigator.userAgent).parsedResult;\n    this.appStore.isDesktop = !(window.innerWidth < 1023 || window.innerWidth < window.innerHeight);\n    this.setOS(clientInfo);\n    this.setDevice(clientInfo);\n    this.setOrientation();\n    this.addClasses();\n    this.sayHello();\n    this.checkElements();\n    this.selectors();\n    this.events();\n    this.init();\n  }\n\n  app_createClass(Application, [{\n    key: \"setOS\",\n    value: function setOS(clientInfo) {\n      var os = clientInfo.os.name.toLowerCase(); // detect mac and ios, default windows\n\n      switch (os) {\n        case 'macos':\n          this.appStore.client.os = 'mac';\n          break;\n\n        case 'ios':\n          this.appStore.client.os = 'ios';\n          break;\n\n        default:\n          this.appStore.client.os = 'windows';\n      }\n    }\n  }, {\n    key: \"setDevice\",\n    value: function setDevice(clientInfo) {\n      // get device\n      this.appStore.client.device = clientInfo.platform.type === 'desktop' ? 'desktop' : 'mobile'; // detect browser (only the major ones, default is chrome)\n\n      switch (clientInfo.browser.name) {\n        case 'Internet Explorer':\n          this.appStore.client.browser = 'explorer';\n          break;\n\n        case 'Microsoft Edge':\n          this.appStore.client.browser = 'edge';\n          break;\n\n        case 'Firefox':\n          this.appStore.client.browser = 'firefox';\n          break;\n\n        case 'Safari':\n          this.appStore.client.browser = 'safari';\n          break;\n\n        default:\n          this.appStore.client.browser = 'chrome';\n      }\n    }\n  }, {\n    key: \"setOrientation\",\n    value: function setOrientation() {\n      this.appStore.client.orientation = this.appStore.client.sizes.width > this.appStore.client.sizes.height ? 'horizontal' : 'vertical';\n    }\n  }, {\n    key: \"addClasses\",\n    value: function addClasses() {\n      document.documentElement.classList.add(this.appStore.client.device);\n      document.documentElement.classList.add(this.appStore.client.os);\n      document.documentElement.classList.add(this.appStore.client.browser);\n    }\n  }, {\n    key: \"sayHello\",\n    value: function sayHello() {\n      if (this.appStore.client.browser === 'chrome' || this.appStore.client.browser === 'firefox') {\n        var args = ['\\n%c Developed with  by Dgrees - https:// dgrees.studio %c\\n', 'display: block; padding: 5px 10px; background: #000022; line-height: 40px; color: #ffffff;', 'background: #fff;'];\n        window.console.log.apply(console, args);\n      } else {\n        window.console.log('Developed by Dgrees');\n      }\n    }\n  }, {\n    key: \"checkElements\",\n    value: function checkElements() {\n      if (this.appStore.isDesktop) {\n        this.$elementsMobile = document.querySelectorAll('[data-mobile]');\n\n        for (var i = 0; i < this.$elementsMobile.length; i++) {\n          this.$elementsMobile[i].remove();\n        }\n      } else {\n        this.$elementsDesktop = document.querySelectorAll('[data-desktop]');\n\n        for (var _i = 0; _i < this.$elementsDesktop.length; _i++) {\n          this.$elementsDesktop[_i].remove();\n        }\n      }\n    }\n  }, {\n    key: \"selectors\",\n    value: function selectors() {\n      this.appCore.selectors();\n      this.appUi.selectors();\n    }\n  }, {\n    key: \"events\",\n    value: function events() {\n      var _this = this;\n\n      // bind debounced resize\n      this.domEvents.add(window, 'resize', debounce(function () {\n        _this.resize(window.innerWidth, window.innerHeight);\n      }, 150));\n      var orientationEvent = 'onorientationchange' in window ? 'orientationchange' : 'resize';\n      this.domEvents.add(window, orientationEvent, debounce(function () {\n        _this.resizeOrientation(window.innerWidth, window.innerHeight);\n      }, 150));\n      this.appCore.events();\n      this.appUi.events();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.appCore.init();\n      this.appUi.init();\n      var vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', \"\".concat(vh, \"px\"));\n      this.resize(window.innerWidth, window.innerHeight);\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {\n      // First we get the viewport height and we multiple it by 1% to get a value for a vh unit\n      if (this.appStore.isDesktop) {\n        var vh = window.innerHeight * 0.01;\n        document.documentElement.style.setProperty('--vh', \"\".concat(vh, \"px\"));\n      }\n\n      this.appStore.isDesktop = !(window.innerWidth < 1023 || window.innerWidth < window.innerHeight); // set size vars\n\n      this.appStore.client.sizes.width = width;\n      this.appStore.client.sizes.height = height;\n      this.appCore.resize(width, height);\n      this.appUi.resize(width, height);\n      if (this.appStore.currentSection !== null) this.appStore.currentSection.resize(width, height); // // Check orientation\n      // const newOrientation = this.appStore.client.sizes.width > this.appStore.client.sizes.height ? 'horizontal' : 'vertical';\n      // if(newOrientation !== this.appStore.client.orientation)\n      //     this.resizeOrientation(width, height, newOrientation);\n      // this.appStore.client.orientation = newOrientation;\n    }\n  }, {\n    key: \"resizeOrientation\",\n    value: function resizeOrientation(width, height, orientation) {\n      var vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', \"\".concat(vh, \"px\")); // Check orientation\n\n      var newOrientation = this.appStore.client.sizes.width > this.appStore.client.sizes.height ? 'horizontal' : 'vertical';\n      this.appStore.client.orientation = newOrientation;\n      this.appCore.resizeOrientation(width, height, orientation);\n      this.appUi.resizeOrientation(width, height, orientation);\n      if (this.appStore.currentSection !== null) this.appStore.currentSection.resizeOrientation(width, height, orientation);\n    }\n    /* _checkOrientation()\n    {\n        // if it's not affected by orientation pass the current one (0: horizontal, 1: vertical)\n        if(this.orientation === orientations.NONE)\n            this.// (this.appStore.client.sizes.width > this.appStore.client.sizes.height ? 0 : 1);\n         if(this.orientation === orientations.VERTICAL)\n        {\n            // if width is bigger than height\n            if(this.appStore.client.sizes.width > this.appStore.client.sizes.height)\n                this.rotateDevice(true);\n            else\n                this.rotateDevice(false);\n        }\n        else if(this.orientation === orientations.HORIZONTAL)\n        {\n            // if height is bigger than width\n            if(this.appStore.client.sizes.height > this.appStore.client.sizes.width)\n                this.rotateDevice(true);\n            else\n                this.rotateDevice(false);\n        }\n    } */\n    // rotateDevice(action){} // eslint-disable-line\n\n  }]);\n\n  return Application;\n}();\n\n/* harmony default export */ const app_app = (Application);\n;// CONCATENATED MODULE: ./app/src/js/loader.js\n//apps\n //on document ready create loader\n\nif (document.readyState !== 'loading') {\n  var app = new app_app();\n} else {\n  document.addEventListener('DOMContentLoaded', function () {\n    var app = new app_app();\n  }, false); //eslint-disable-line\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODE1LmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNuSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FDdjhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdG1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuOEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMvU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2Y0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Z0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25KQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FsZWRvbmlhbi8uL2FwcC9zcmMvanMvYXBwL2FwcFN0b3JlLmpzPzkxYmEiLCJ3ZWJwYWNrOi8vY2FsZWRvbmlhbi8uL2FwcC9zcmMvanMvdXRpbHMvc3RyaW5nLmpzP2VlMjgiLCJ3ZWJwYWNrOi8vY2FsZWRvbmlhbi8uL2FwcC9zcmMvanMvdXRpbHMvaXMuanM/ZjU0ZSIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy9jbGFzc2VzL2RvbUV2ZW50cy5qcz9lYTM4Iiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL2FwcC9hcHBVaS5qcz82MTIyIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL2NsYXNzZXMvc3VwZXJTY3JvbGxlci5qcz8wNjhlIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3V0aWxzL3N0cmluZ3MuanM/NDUxYSIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy9jbGFzc2VzL3NwbGl0VGV4dC5qcz83NjcxIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3JlbmRlcmVycy9yZW5kZXJlci5qcz8yODNjIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3JlbmRlcmVycy9yZW5kZXJlckRlZmF1bHQuanM/ODE2NiIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy9jbGFzc2VzL3N1cGVyRHJhZ2dlci5qcz82NWE1Iiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3V0aWxzL1ZlbG9jaXR5VHJhY2tlci5qcz9hOGY1Iiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL2NsYXNzZXMvSW5lcnRpYVBsdWdpbi5qcz84NDNlIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL2NsYXNzZXMvRHJhZ2dhYmxlLmpzP2RiNWQiLCJ3ZWJwYWNrOi8vY2FsZWRvbmlhbi8uL2FwcC9zcmMvanMvcmVuZGVyZXJzL3JlbmRlcmVySG9tZS5qcz8yNjlkIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3JlbmRlcmVycy9yZW5kZXJlckFib3V0LmpzPzQ4ZjAiLCJ3ZWJwYWNrOi8vY2FsZWRvbmlhbi8uL2FwcC9zcmMvanMvcmVuZGVyZXJzL3JlbmRlcmVyUGhpbG9zb3BoeS5qcz85YjQ1Iiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3JlbmRlcmVycy9yZW5kZXJlclByb21vdGlvbnMuanM/ZWU2ZSIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy9jb21wb25lbnRzL3NsaWRlci5qcz80ZDkxIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3JlbmRlcmVycy9yZW5kZXJlclByb21vdGlvbnNTaW5nbGUuanM/MTFlNiIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy9yZW5kZXJlcnMvcmVuZGVyZXJNYXN0ZXJ3b3Jrcy5qcz9iNjhiIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3JlbmRlcmVycy9yZW5kZXJlckJsb2cuanM/NzdiNSIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy9yZW5kZXJlcnMvcmVuZGVyZXJCbG9nU2luZ2xlLmpzPzNlMDMiLCJ3ZWJwYWNrOi8vY2FsZWRvbmlhbi8uL2FwcC9zcmMvanMvcmVuZGVyZXJzL1JlbmRlcmVyQ29udGFjdC5qcz9jZDBlIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3RyYW5zaXRpb25zL3RyYW5zaXRpb24uanM/YTU4OSIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy90cmFuc2l0aW9ucy90cmFuc2l0aW9uRmFkZS5qcz9hYmU4Iiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL3RyYW5zaXRpb25zL3RyYW5zaXRpb25NYXNrLmpzP2M3NTEiLCJ3ZWJwYWNrOi8vY2FsZWRvbmlhbi8uL2FwcC9zcmMvanMvYXBwL2FwcENvcmUuanM/MTZiMCIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy91dGlscy9kZWJvdW5jZS5qcz9mODRjIiwid2VicGFjazovL2NhbGVkb25pYW4vLi9hcHAvc3JjL2pzL2FwcC9hcHAuanM/OTkxNCIsIndlYnBhY2s6Ly9jYWxlZG9uaWFuLy4vYXBwL3NyYy9qcy9sb2FkZXIuanM/Zjk2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gIG1haW46IG51bGwsXG4gIHJvb3RVcmw6IG51bGwsXG4gIGlzRGVza3RvcDogbnVsbCxcbiAgZmlyc3ROYXZpZ2F0aW9uOiBudWxsLFxuICBjdXJyZW50U2VjdGlvbjogbnVsbCxcbiAgY2xpZW50OiB7XG4gICAgYnJvd3NlcjogJycsXG4gICAgZGV2aWNlOiAnJyxcbiAgICBsYW5nOiAnZXMnLFxuICAgIG9zOiAnJyxcbiAgICBvcmllbnRhdGlvbjogbnVsbCxcbiAgICBzaXplczoge1xuICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICB9LFxuICAgIG1vdXNlUG9zaXRpb246IHtcbiAgICAgIHg6IHdpbmRvdy5pbm5lcldpZHRoIC8gMixcbiAgICAgIHk6IHdpbmRvdy5pbm5lckhlaWdodCAvIDJcbiAgICB9XG4gIH1cbn07IiwiLy9Db3B5cmlnaHQgMjAxOCBWaWNlbnRlIEx1Y2VuZG8gLSB2aWNlbkB2bHVjZW5kby5jb21cbmV4cG9ydCB2YXIgc3RyaW5nID0ge1xuICAvL2NvbnZlcnRzIGEgc3RyaW5nIG51bWJlciAnI0ZGRkZGRicgdG8gaGV4IDB4ZmZmZmZmIC0gaXQgZ2V0cyB1c2VkIG9uIHBpeGlcbiAgdG9IZXg6IGZ1bmN0aW9uIHRvSGV4KHN0cikge1xuICAgIHJldHVybiBwYXJzZUludChzdHIuc3Vic3RyaW5nKDEpLCAxNik7XG4gIH0sXG4gIC8vdHJ1ZSBvciBmYWxzZSBpZiB0ZXh0IGlzIG9uIHRoZSBzdHJpbmdcbiAgY29udGFpbnM6IGZ1bmN0aW9uIGNvbnRhaW5zKHN0ciwgdGV4dCkge1xuICAgIHJldHVybiBzdHIuaW5kZXhPZih0ZXh0KSA+IC0xO1xuICB9XG59OyIsIi8vQ29weXJpZ2h0IDIwMTggVmljZW50ZSBMdWNlbmRvIC0gdmljZW5Admx1Y2VuZG8uY29tXG5pbXBvcnQgeyBzdHJpbmcgfSBmcm9tICcuL3N0cmluZyc7XG5leHBvcnQgdmFyIGlzID0ge1xuICBhcnJheTogZnVuY3Rpb24gYXJyYXkoYSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGEpO1xuICB9LFxuICBvYmplY3Q6IGZ1bmN0aW9uIG9iamVjdChhKSB7XG4gICAgcmV0dXJuIHN0cmluZy5jb250YWlucyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSksICdPYmplY3QnKTtcbiAgfSxcbiAgcGF0aDogZnVuY3Rpb24gcGF0aChhKSB7XG4gICAgcmV0dXJuIGlzLm9iaihhKSAmJiBhLmhhc093blByb3BlcnR5KCd0b3RhbExlbmd0aCcpO1xuICB9LFxuICAvL2VzbGludC1kaXNhYmxlLWxpbmVcbiAgc3ZnOiBmdW5jdGlvbiBzdmcoYSkge1xuICAgIHJldHVybiBhIGluc3RhbmNlb2YgU1ZHRWxlbWVudDtcbiAgfSxcbiAgbm9kZTogZnVuY3Rpb24gbm9kZShhKSB7XG4gICAgcmV0dXJuIGEubm9kZVR5cGUgfHwgaXMuc3ZnKGEpO1xuICB9LFxuICBub2RlTGlzdDogZnVuY3Rpb24gbm9kZUxpc3QoYSkge1xuICAgIHJldHVybiBhIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgYSBpbnN0YW5jZW9mIEhUTUxDb2xsZWN0aW9uO1xuICB9LFxuICBzdHJpbmc6IGZ1bmN0aW9uIHN0cmluZyhhKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBhID09PSAnc3RyaW5nJztcbiAgfSxcbiAgbnVtYmVyOiBmdW5jdGlvbiBudW1iZXIoYSkge1xuICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChhKSkgJiYgaXNGaW5pdGUoYSk7XG4gIH0sXG4gIFwiZnVuY3Rpb25cIjogZnVuY3Rpb24gX2Z1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gdHlwZW9mIGEgPT09ICdmdW5jdGlvbic7XG4gIH0sXG4gIHVuZGVmaW5lZDogZnVuY3Rpb24gdW5kZWZpbmVkKGEpIHtcbiAgICByZXR1cm4gdHlwZW9mIGEgPT09ICd1bmRlZmluZWQnO1xuICB9LFxuICBoZXg6IGZ1bmN0aW9uIGhleChhKSB7XG4gICAgcmV0dXJuIC8oXiNbMC05QS1GXXs2fSQpfCheI1swLTlBLUZdezN9JCkvaS50ZXN0KGEpO1xuICB9LFxuICByZ2I6IGZ1bmN0aW9uIHJnYihhKSB7XG4gICAgcmV0dXJuIC9ecmdiLy50ZXN0KGEpO1xuICB9LFxuICBoc2w6IGZ1bmN0aW9uIGhzbChhKSB7XG4gICAgcmV0dXJuIC9eaHNsLy50ZXN0KGEpO1xuICB9LFxuICBjb2xvcjogZnVuY3Rpb24gY29sb3IoYSkge1xuICAgIHJldHVybiBpcy5oZXgoYSkgfHwgaXMucmdiKGEpIHx8IGlzLmhzbChhKTtcbiAgfVxufTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbi8vQ29weXJpZ2h0IDIwMTggVmljZW50ZSBMdWNlbmRvIC0gdmljZW5Admx1Y2VuZG8uY29tXG5pbXBvcnQgeyBpcyB9IGZyb20gJy4uL3V0aWxzL2lzJztcblxudmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gX2RlZmF1bHQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTtcblxuICAgIHRoaXMuX2V2ZW50Q2FjaGUgPSBbXTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwiX3JlbW92ZUV2ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudChpbmRleCkge1xuICAgICAgLy9yZW1vdmUgZXZlbnQgbGlzdGVuZXJcbiAgICAgIHRoaXMuX2V2ZW50Q2FjaGVbaW5kZXhdLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9ldmVudENhY2hlW2luZGV4XS5hY3Rpb24sIHRoaXMuX2V2ZW50Q2FjaGVbaW5kZXhdLmNiKTsgLy9yZW1vdmUgZWxlbWVudCBmcm9tIGV2ZW50Y2FjaGVcblxuXG4gICAgICB0aGlzLl9ldmVudENhY2hlLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQobm9kZSwgZXZlbnROYW1lLCBfZnVuYykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIGNvbnRleHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlO1xuICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZmFsc2U7XG4gICAgICB2YXIgckxpbmsgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IGZhbHNlO1xuXG4gICAgICAvL25vZGVsaXN0IG9yIHNpbmdsZSBub2RlP1xuICAgICAgdmFyIF9ub2RlcyA9IGlzLm5vZGVMaXN0KG5vZGUpIHx8IGlzLmFycmF5KG5vZGUpID8gbm9kZSA6IFtub2RlXTsgLy9sb29wIHRob3VnaCB0aGUgbm9kZXNcblxuXG4gICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7XG4gICAgICAgIC8vY3JlYXRlIGNhbGxiYWNrIHBhc3NpbmcgdGhlIGV2ZW50LCBhcmd1bWVudCBhbmQgc291cmNlIG5vZGVcbiAgICAgICAgdmFyIF9jYiA9IGNvbnRleHQgIT09IGZhbHNlID8gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBfZnVuYy5jYWxsKGNvbnRleHQsIGUsIGFyZywgX25vZGVzW2ldKTtcbiAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgX2Z1bmMoZSwgYXJnLCBfbm9kZXNbaV0pO1xuICAgICAgICB9OyAvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG5vZGUgZXZlbnQgY2FjaGVcblxuXG4gICAgICAgIF90aGlzLl9ldmVudENhY2hlLnB1c2goe1xuICAgICAgICAgIG5vZGU6IF9ub2Rlc1tpXSxcbiAgICAgICAgICBhY3Rpb246IGV2ZW50TmFtZSxcbiAgICAgICAgICBmdW5jOiBfZnVuYyxcbiAgICAgICAgICBjYjogX2NiLFxuICAgICAgICAgIHJvdXRlckxpbms6IHJMaW5rXG4gICAgICAgIH0pOyAvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG5vZGVcblxuXG4gICAgICAgIF9ub2Rlc1tpXS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgX2NiKTtcbiAgICAgIH07XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX25vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIF9sb29wKGkpO1xuICAgICAgfVxuICAgIH0gLy90aGlzIGZ1bmN0aW9uIHJlbW92ZXMgbm9uIHJvdXRlciBldmVudHMgbWVldGluZyB0aGUgY3JpdGVyaWFcblxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUobm9kZSwgZXZlbnROYW1lLCBmdW5jKSB7XG4gICAgICAvL25vZGVsaXN0IG9yIHNpbmdsZSBub2RlP1xuICAgICAgdmFyIF9ub2RlcyA9IGlzLm5vZGVMaXN0KG5vZGUpIHx8IGlzLmFycmF5KG5vZGUpID8gbm9kZSA6IFtub2RlXTsgLy9sb29wIHRob3VnaCB0aGUgbm9kZXNcblxuXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IF9ub2Rlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLl9ldmVudENhY2hlLmxlbmd0aCkge1xuICAgICAgICAgIC8vY2hlY2sgaWYgaXQgaXMgdGhlIHNhbWUgbm9kZSBhbmQgaXMgbm90IGEgcm91dGVyIGxpbmtcbiAgICAgICAgICBpZiAodGhpcy5fZXZlbnRDYWNoZVtpXS5ub2RlID09PSBfbm9kZXNba10gJiYgIXRoaXMuX2V2ZW50Q2FjaGVbaV0ucm91dGVyTGluaykge1xuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSAmJiBmdW5jKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9ldmVudENhY2hlW2ldLmFjdGlvbiA9PT0gZXZlbnROYW1lICYmIHRoaXMuX2V2ZW50Q2FjaGVbaV0uZnVuYyA9PT0gZnVuYykgdGhpcy5fcmVtb3ZlRXZlbnQoaSk7ZWxzZSBpKys7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5fZXZlbnRDYWNoZVtpXS5hY3Rpb24gPT09IGV2ZW50TmFtZSkgdGhpcy5fcmVtb3ZlRXZlbnQoaSk7ZWxzZSBpKys7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZ1bmMpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuX2V2ZW50Q2FjaGVbaV0uZnVuYyA9PT0gZnVuYykgdGhpcy5fcmVtb3ZlRXZlbnQoaSk7ZWxzZSBpKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVFdmVudChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy90aGlzIGZ1bmN0aW9uIHJlbW92ZXMgYWxsIG5vbiByb3V0ZXIgbGlua3NcblxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUFsbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBbGwoKSB7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIHdoaWxlIChpIDwgdGhpcy5fZXZlbnRDYWNoZS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9ldmVudENhY2hlW2ldLnJvdXRlckxpbmspIHRoaXMuX3JlbW92ZUV2ZW50KGkpO2Vsc2UgaSsrO1xuICAgICAgfVxuICAgIH0gLy90aGlzIGZ1bmN0aW9uIHJlbW92ZXMgZXZlcnl0aGluZywgaXQgbXVzdCBvbmx5IGJlIHVzZWQgYnkgY29tcG9uZW50IGNsYXNzZXMgYWZ0ZXIgZWxlbWVudHMgYXJlIHJlbW92ZWRcbiAgICAvL2Zyb20gdGhlIGRvbSBzbyB0aGVyZSBhcmUgbm90IHByb2JsZW1zIHdpdGggdW5ib3VuZCByb3V0ZXIgbGlua3MgY2xpY2tlZCBieSB0aGUgdXNlciByZWZyZXNoaW5nIHRoZSBwYWdlXG5cbiAgfSwge1xuICAgIGtleTogXCJkZXN0cm95XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB3aGlsZSAodGhpcy5fZXZlbnRDYWNoZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50KDApO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0oKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuLy8gYXBwXG5pbXBvcnQgYXBwU3RvcmUgZnJvbSAnLi9hcHBTdG9yZSc7XG5pbXBvcnQgYXBwQ29yZSBmcm9tICcuL2FwcENvcmUnOyAvLyBjbGFzc2VzXG5cbmltcG9ydCBkb21FdmVudHMgZnJvbSAnLi4vY2xhc3Nlcy9kb21FdmVudHMnOyAvLyBnc2FwXG5cbmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnO1xudmFyIF9zaW5nbGV0b24gPSBudWxsO1xuXG52YXIgYXBwVWkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhcHBVaShkYXRhKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGFwcFVpKTtcblxuICAgIGlmICghX3NpbmdsZXRvbikge1xuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgIF9zaW5nbGV0b24gPSB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gX3NpbmdsZXRvbjtcbiAgICB9IC8vIHN0b3JlXG5cblxuICAgIHRoaXMuYXBwU3RvcmUgPSBhcHBTdG9yZTsgLy8gYXBwIHJlZmVyZW5jZXNcblxuICAgIHRoaXMuYXBwQ29yZSA9IG5ldyBhcHBDb3JlKCk7IC8vIEV2ZW50c1xuXG4gICAgdGhpcy5kb21FdmVudHMgPSBuZXcgZG9tRXZlbnRzKCk7IC8vIEN1cnNvciB2YXJzXG5cbiAgICB0aGlzLmN1cnNvciA9IHtcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDBcbiAgICAgIH0sXG4gICAgICBsaXZlUG9zaXRpb246IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMFxuICAgICAgfSxcbiAgICAgIGxvY2s6IGZhbHNlXG4gICAgfTtcbiAgICB0aGlzLmN1cnNvckRyYWcgPSB7XG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgaXNQbGF5ZWQ6IGZhbHNlLFxuICAgICAgaXNSZWR1Y2VkOiBmYWxzZSxcbiAgICAgIG9wZW5UaW1lbGluZTogbnVsbCxcbiAgICAgIGNsb3NlVGltZWxpbmU6IG51bGxcbiAgICB9OyAvLyBJbmZvIHZhcnNcblxuICAgIHRoaXMuaW5mbyA9IHtcbiAgICAgIGlzT3BlbjogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMuaGVhZGVyID0gbnVsbDtcbiAgICB0aGlzLmd1aWRlcyA9IG51bGw7XG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gbnVsbDtcbiAgICB0aGlzLmxvYWRlckR1cmF0aW9uID0gMTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhhcHBVaSwgW3tcbiAgICBrZXk6IFwiaW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdGhpcy5oZWFkZXIgPSB7XG4gICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZSxcbiAgICAgICAgaXNMb2NrZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgdGhpcy5pbml0TG9hZGVyKCk7XG4gICAgICB0aGlzLmluaXRNZW51KCk7XG4gICAgICB0aGlzLmluaXRTdWJtZW51KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNlbGVjdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RvcnMoKSB7XG4gICAgICAvLyBEZWFmdWx0XG4gICAgICB0aGlzLiRhcHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJyk7XG4gICAgICB0aGlzLiRsb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ28nKTsgLy8gQ3Vyc29yXG5cbiAgICAgIHRoaXMuJGN1cnNvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJzb3InKTtcbiAgICAgIHRoaXMuJGN1cnNvckRvdCA9IHRoaXMuJGN1cnNvci5xdWVyeVNlbGVjdG9yKCcuY3Vyc29yX19kb3QnKTtcbiAgICAgIHRoaXMuJGN1cnNvck1pbnVzID0gdGhpcy4kY3Vyc29yLnF1ZXJ5U2VsZWN0b3IoJy5jdXJzb3JfX21pbnVzJyk7XG4gICAgICB0aGlzLiRjdXJzb3JQbHVzID0gdGhpcy4kY3Vyc29yLnF1ZXJ5U2VsZWN0b3IoJy5jdXJzb3JfX3BsdXMnKTtcbiAgICAgIHRoaXMuJGN1cnNvckRyYWcgPSB0aGlzLiRjdXJzb3IucXVlcnlTZWxlY3RvcignLmN1cnNvcl9fZHJhZycpOyAvLyBNYXNrXG5cbiAgICAgIHRoaXMuJG1hc2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFzaycpOyAvLyBMb2FkZXJcblxuICAgICAgdGhpcy4kbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpO1xuXG4gICAgICBpZiAodGhpcy4kbG9hZGVyKSB7XG4gICAgICAgIHRoaXMuJGxvYWRlck1hc2sgPSB0aGlzLiRsb2FkZXIucXVlcnlTZWxlY3RvcignLm1hc2snKTtcbiAgICAgICAgdGhpcy4kbG9hZGVySW5uZXIgPSB0aGlzLiRsb2FkZXIucXVlcnlTZWxlY3RvcignLmlubmVyJyk7XG4gICAgICAgIHRoaXMuJGxvYWRlckxvZ28gPSB0aGlzLiRsb2FkZXIucXVlcnlTZWxlY3RvcignLmlubmVyIC5sZXR0ZXJsb2dvJyk7XG4gICAgICAgIHRoaXMuJGxvYWRlckxvZ29MZXR0ZXJzID0gdGhpcy4kbG9hZGVyTG9nby5xdWVyeVNlbGVjdG9yQWxsKCcuaW5uZXIgLmxldHRlcmxvZ28gLmxldHRlcicpO1xuICAgICAgICB0aGlzLiRsb2FkZXJQcm9ncmVzcyA9IHRoaXMuJGxvYWRlci5xdWVyeVNlbGVjdG9yKCcuaW5uZXIgLnByb2dyZXNzJyk7XG4gICAgICB9IC8vIEhlYWRlclxuXG5cbiAgICAgIHRoaXMuJGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXInKTtcblxuICAgICAgaWYgKHRoaXMuJGhlYWRlcikge1xuICAgICAgICB0aGlzLiRoZWFkZXJMb2dvID0gdGhpcy4kaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5sb2dvJyk7XG4gICAgICAgIHRoaXMuJGhlYWRlck1lbnUgPSB0aGlzLiRoZWFkZXIucXVlcnlTZWxlY3RvcignbmF2Lm1lbnUnKTtcbiAgICAgICAgdGhpcy4kaGVhZGVyTWVudUl0ZW1zID0gdGhpcy4kaGVhZGVyTWVudS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuICAgICAgICB0aGlzLiRoZWFkZXJTdWJtZW51ID0gdGhpcy4kaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJ25hdi5zdWJtZW51Jyk7XG4gICAgICAgIHRoaXMuJGhlYWRlclN1Ym1lbnVJdGVtcyA9IHRoaXMuJGhlYWRlclN1Ym1lbnUucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICAgICAgdGhpcy4kaGVhZGVyVHJpZ2dlciA9IHRoaXMuJGhlYWRlci5xdWVyeVNlbGVjdG9yKCcudHJpZ2dlcicpO1xuICAgICAgICB0aGlzLiRoZWFkZXJUcmlnZ2VyVGV4dCA9IHRoaXMuJGhlYWRlclRyaWdnZXIucXVlcnlTZWxlY3RvcignLnRleHQnKTtcbiAgICAgICAgdGhpcy4kaGVhZGVyVHJpZ2dlckljb24gPSB0aGlzLiRoZWFkZXJUcmlnZ2VyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uJyk7XG4gICAgICB9IC8vIEluZm9cblxuXG4gICAgICB0aGlzLiRpbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8nKTtcblxuICAgICAgaWYgKHRoaXMuJGluZm8pIHtcbiAgICAgICAgdGhpcy4kaW5mb0Nsb3NlciA9IHRoaXMuJGluZm8ucXVlcnlTZWxlY3RvcignLmNsb3NlcicpO1xuICAgICAgICB0aGlzLiRpbmZvTWFzayA9IHRoaXMuJGluZm8ucXVlcnlTZWxlY3RvcignLm1hc2snKTtcbiAgICAgICAgdGhpcy4kaW5mb0NvbnRlbnQgPSB0aGlzLiRpbmZvLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG4gICAgICB9IC8vIEd1aWRlc1xuXG5cbiAgICAgIHRoaXMuJGd1aWRlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndWlkZXMnKTtcblxuICAgICAgaWYgKHRoaXMuJGd1aWRlcykge1xuICAgICAgICB0aGlzLiRndWlkZXNTd2l0Y2hlciA9IHRoaXMuJGd1aWRlcy5xdWVyeVNlbGVjdG9yKCcuZ3VpZGVzX19zd2l0Y2hlcicpO1xuICAgICAgICB0aGlzLiRndWlkZXNTd2l0Y2hlcjIgPSB0aGlzLiRndWlkZXMucXVlcnlTZWxlY3RvcignLmd1aWRlc19fc3dpdGNoZXIyJyk7XG4gICAgICAgIHRoaXMuJGd1aWRlc0hyID0gdGhpcy4kZ3VpZGVzLnF1ZXJ5U2VsZWN0b3IoJy5ndWlkZXNfX2hvcml6b250YWwnKTtcbiAgICAgICAgdGhpcy4kZ3VpZGVzVnIgPSB0aGlzLiRndWlkZXMucXVlcnlTZWxlY3RvcignLmd1aWRlc19fdmVydGljYWwnKTtcbiAgICAgICAgdGhpcy4kZ3VpZGVzSHIyID0gdGhpcy4kZ3VpZGVzLnF1ZXJ5U2VsZWN0b3IoJy5ndWlkZXNfX2hvcml6b250YWwyJyk7XG4gICAgICAgIHRoaXMuJGd1aWRlc1ZyMiA9IHRoaXMuJGd1aWRlcy5xdWVyeVNlbGVjdG9yKCcuZ3VpZGVzX192ZXJ0aWNhbDInKTtcbiAgICAgIH0gLy8gQ29va2llc1xuXG5cbiAgICAgIHRoaXMuJGNvb2tpZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29va2llLWxhdy1pbmZvLWJhcicpO1xuXG4gICAgICBpZiAodGhpcy4kY29va2llcykge1xuICAgICAgICB0aGlzLiRjb29raWVzQ29uZmlndXJlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYS5jbGlfc2V0dGluZ3NfYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuJGNvb2tpZXNNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGktbW9kYWwnKTtcbiAgICAgICAgdGhpcy4kY29va2llc0NhdGVnb3J5ID0gdGhpcy4kY29va2llc01vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuY2xpLW5hdi1saW5rJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAvLyBIZWFkZXJcbiAgICAgIGlmICh0aGlzLiRoZWFkZXIpIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRoZWFkZXJUcmlnZ2VyLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnRyaWdnZXJNZW51KCk7XG4gICAgICB9KTsgLy8gSW5mb1xuXG4gICAgICBpZiAodGhpcy4kaW5mbykge1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kaW5mb01hc2ssICdjbGljaycsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIF90aGlzLmNsb3NlSW5mbygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJGluZm9DbG9zZXIsICdjbGljaycsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIF90aGlzLmNsb3NlSW5mbygpO1xuICAgICAgICB9KTtcbiAgICAgIH0gLy8gR3VpZGVzXG5cblxuICAgICAgaWYgKHRoaXMuJGd1aWRlcykge1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kZ3VpZGVzU3dpdGNoZXIsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy5ndWlkZXNTd2l0Y2hlcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJGd1aWRlc1N3aXRjaGVyMiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLmd1aWRlc1N3aXRjaGVyMigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuJGN1cnNvciAmJiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy5kb21FdmVudHMuYWRkKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgX3RoaXMubW92ZUN1cnNvcihlKTtcbiAgICAgIH0pOyAvLyB0aGlzLmRvbUV2ZW50cy5hZGQoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCAoZSwgYSwgZWwpID0+IHsgdGhpcy5jdXJzb3JPdmVyKGUsIGEsIGVsKTsgfSk7XG5cbiAgICAgIGlmICghdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c1Njcm9sbCA9IDA7XG4gICAgICAgIHRoaXMubWVudU9wZW5lZCA9IHRydWU7XG4gICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyLCB7XG4gICAgICAgICAgeTogJzAlJyxcbiAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh3aW5kb3csICdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzLmhlYWRlci5pc09wZW4gfHwgX3RoaXMuaGVhZGVyLmlzTG9ja2VkKSByZXR1cm47XG4gICAgICAgICAgdmFyIHNjcm9sbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG5cbiAgICAgICAgICBpZiAoc2Nyb2xsIDwgX3RoaXMucHJldmlvdXNTY3JvbGwgfHwgc2Nyb2xsIDw9IDApIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMubWVudU9wZW5lZCkge1xuICAgICAgICAgICAgICBfdGhpcy5tZW51T3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgZ3NhcC50byhfdGhpcy4kaGVhZGVyLCB7XG4gICAgICAgICAgICAgICAgeTogJzAlJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5tZW51T3BlbmVkKSB7XG4gICAgICAgICAgICAgIF90aGlzLm1lbnVPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgZ3NhcC50byhfdGhpcy4kaGVhZGVyLCB7XG4gICAgICAgICAgICAgICAgeTogJy0xMDAlJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMucHJldmlvdXNTY3JvbGwgPSBzY3JvbGw7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBDb29raWVzXG5cblxuICAgICAgaWYgKHRoaXMuJGNvb2tpZXNDb25maWd1cmVCdXR0b24pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNjcmlwdC11cmxcbiAgICAgICAgdmFyIGRpc2FibGVkID0gJ2phdmFzY3JpcHQ6IHZvaWQoMCknO1xuICAgICAgICB0aGlzLiRjb29raWVzQ29uZmlndXJlQnV0dG9uLnNldEF0dHJpYnV0ZSgnaHJlZicsIGRpc2FibGVkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuJGNvb2tpZXNNb2RhbCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2NyaXB0LXVybFxuICAgICAgICB2YXIgX2Rpc2FibGVkID0gJ2phdmFzY3JpcHQ6IHZvaWQoMCknO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kY29va2llc0NhdGVnb3J5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy4kY29va2llc0NhdGVnb3J5W2ldLnNldEF0dHJpYnV0ZSgnaHJlZicsIF9kaXNhYmxlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdExvYWRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0TG9hZGVyKCkge1xuICAgICAgLy8gQW5pbWF0ZSBpbiBuZXh0IHNsaWRlXG4gICAgICBnc2FwLnRvKHRoaXMuJGxvYWRlckxvZ28sIHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgZWFzZTogJ3Bvd2UyLm91dCdcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSBnc2FwLnRvKHRoaXMuJGxvYWRlclByb2dyZXNzLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgIGVhc2U6ICdwb3dlMi5vdXQnXG4gICAgICB9KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRsb2FkZXJMb2dvTGV0dGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIGdzYXAuc2V0KHRoaXMuJGxvYWRlckxvZ29MZXR0ZXJzW2ldLCB7XG4gICAgICAgICAgeTogLSh3aW5kb3cuaW5uZXJIZWlnaHQgLyAyICsgd2luZG93LmlubmVyV2lkdGggKiAwLjA1KVxuICAgICAgICB9KTtlbHNlIGdzYXAuc2V0KHRoaXMuJGxvYWRlckxvZ29MZXR0ZXJzW2ldLCB7XG4gICAgICAgICAgb3BhY2l0eTogMC4wMDAxXG4gICAgICAgIH0pO1xuICAgICAgICBnc2FwLnRvKHRoaXMuJGxvYWRlckxvZ29MZXR0ZXJzW2ldLCB7XG4gICAgICAgICAgeTogMCxcbiAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBkdXJhdGlvbjogMS4yLFxuICAgICAgICAgIGRlbGF5OiAwICsgaSAqIDAuMDJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhpZGVMb2FkZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZUxvYWRlcigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIGdzYXAudG8odGhpcy4kbG9hZGVyUHJvZ3Jlc3MsIHtcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBkdXJhdGlvbjogMC42LFxuICAgICAgICBlYXNlOiAncG93ZTIub3V0J1xuICAgICAgfSk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kbG9hZGVyTG9nb0xldHRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSBnc2FwLnRvKHRoaXMuJGxvYWRlckxvZ29MZXR0ZXJzW2ldLCB7XG4gICAgICAgICAgeTogd2luZG93LmlubmVySGVpZ2h0IC8gMiArIHdpbmRvdy5pbm5lcldpZHRoICogMC4xLFxuICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgICBkdXJhdGlvbjogMS4yLFxuICAgICAgICAgIGRlbGF5OiAwICsgaSAqIDAuMDVcbiAgICAgICAgfSk7ZWxzZSBnc2FwLnRvKHRoaXMuJGxvYWRlckxvZ29MZXR0ZXJzW2ldLCB7XG4gICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgICBkdXJhdGlvbjogMS4yLFxuICAgICAgICAgIGRlbGF5OiAwICsgaSAqIDAuMDJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGdzYXAudG8oW3RoaXMuJGxvYWRlck1hc2ssIHRoaXMuJGxvYWRlcklubmVyXSwge1xuICAgICAgICB5OiAnMTAwJScsXG4gICAgICAgIGR1cmF0aW9uOiAxLjgsXG4gICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgZGVsYXk6IHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wID8gMCA6IDAuOCxcbiAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICBnc2FwLnNldChfdGhpczIuJGxvYWRlciwge1xuICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLiRsb2FkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gLy8gaGlkZUxvYWRlcigpXG4gICAgLy8ge1xuICAgIC8vICAgICAvLyBnc2FwLnRvKHRoaXMuJGxvYWRlclByb2dyZXNzLCB7IG9wYWNpdHk6IDAuMDAwMSwgZHVyYXRpb246IDAuNiwgZWFzZTogJ3Bvd2UyLm91dCcgfSk7XG4gICAgLy8gICAgIGdzYXAudG8odGhpcy4kbG9hZGVyUHJvZ3Jlc3MsIHsgb3BhY2l0eTogMC4wMDAxLFxuICAgIC8vICAgICAgICAgZHVyYXRpb246IDAuNixcbiAgICAvLyAgICAgICAgIGVhc2U6ICdwb3dlMi5vdXQnLFxuICAgIC8vICAgICAgICAgb25Db21wbGV0ZTogKCkgPT5cbiAgICAvLyAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJGxvYWRlcklubmVyLCB7XG4gICAgLy8gICAgICAgICAgICAgICAgIHk6ICctMTAwJScsXG4gICAgLy8gICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmxvYWRlckR1cmF0aW9uLFxuICAgIC8vICAgICAgICAgICAgICAgICBlYXNlOiAncG93ZXI0Lm91dCcsXG4gICAgLy8gICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+XG4gICAgLy8gICAgICAgICAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGdzYXAuc2V0KHRoaXMuJGxvYWRlciwgeyBkaXNwbGF5OiAnbm9uZScgfSk7XG4gICAgLy8gICAgICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgIH0gfSk7XG4gICAgLy8gfVxuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdE1lbnVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdE1lbnUoKSB7XG4gICAgICBnc2FwLnNldCh0aGlzLiRoZWFkZXJUcmlnZ2VyVGV4dC5jaGlsZHJlblsxXSwge1xuICAgICAgICB5OiAnLTEwMCUnXG4gICAgICB9KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRoZWFkZXJNZW51SXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kaGVhZGVyTWVudUl0ZW1zW2ldLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgeTogJy0xMDAlJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidHJpZ2dlck1lbnVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlck1lbnUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuaGVhZGVyLmlzQW5pbWF0aW5nKSByZXR1cm47XG4gICAgICB0aGlzLmhlYWRlci5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgIGlmICghdGhpcy5oZWFkZXIuaXNPcGVuKSB7XG4gICAgICAgIC8vIFNldCBvdmVybGF5XG4gICAgICAgIGdzYXAudG8odGhpcy5hcHBTdG9yZS5jdXJyZW50U2VjdGlvbi4kb3ZlcmxheSwge1xuICAgICAgICAgIG9wYWNpdHk6IDAuMSxcbiAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0J1xuICAgICAgICB9KTsgLy8gUmVwb3NpdGlvbiBtZW51IG9uIHByb21vdGlvbnNpbmdsZVxuXG4gICAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmN1cnJlbnQgPT09ICdwcm9tb3Rpb25zc2luZ2xlJyAmJiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgZ3NhcC50byh0aGlzLiRoZWFkZXIsIHtcbiAgICAgICAgICB5OiAnMHZ3JyxcbiAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0J1xuICAgICAgICB9KTsgLy8gSGlkZSBsb2dvXG5cbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuY3VycmVudCAhPT0gJ2hvbWUnICYmIHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSBnc2FwLnRvKHRoaXMuJGhlYWRlckxvZ28sIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLjIsXG4gICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kYXBwLCB7XG4gICAgICAgICAgICB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJyxcbiAgICAgICAgICAgIHNjYWxlOiAwLjksXG4gICAgICAgICAgICB5OiAnNXZ3JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLiRoZWFkZXJNZW51LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYWxsJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGFwcCwge1xuICAgICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICB5OiAnMTB2dycsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy4kaGVhZGVyTWVudS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGhlYWRlck1lbnUsIHtcbiAgICAgICAgICAgIHk6ICcwJScsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIH0gLy8gQW5pbWF0ZSBtZW51IGl0ZW1zXG5cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGhlYWRlck1lbnVJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyTWVudUl0ZW1zW2ldLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wID8gMC44IDogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZGVsYXk6IHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wID8gMC4xICsgaSAqIDAuMDUgOiAwLjUgKyBpICogMC4wMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgICAgLy8gZ3NhcC50byh0aGlzLiRoZWFkZXJUcmlnZ2VyLCB7IHk6ICcyLjV2dycsIGR1cmF0aW9uOiAwLjgsIGVhc2U6ICdleHBvLmluT3V0JyB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGhlYWRlclRyaWdnZXJUZXh0LmNoaWxkcmVuWzFdLCB7XG4gICAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgICAgIGRlbGF5OiAwLjFcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGhlYWRlclRyaWdnZXJUZXh0LmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICB5OiAnMTAwJScsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZGVsYXk6IDAuMVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyVHJpZ2dlckljb24uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIHJvdGF0aW9uOiAnNDVkZWcnLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICB5OiAnNXB4JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBkZWxheTogMC4xXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLiRoZWFkZXJUcmlnZ2VySWNvbi5jaGlsZHJlblsxXSwge1xuICAgICAgICAgICAgcm90YXRpb246ICctNDVkZWcnLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICB5OiAnLTVweCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZGVsYXk6IDAuMVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyVHJpZ2dlckljb24uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIHJvdGF0aW9uOiAnNDVkZWcnLFxuICAgICAgICAgICAgeTogJzVweCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZGVsYXk6IDAuMVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyVHJpZ2dlckljb24uY2hpbGRyZW5bMV0sIHtcbiAgICAgICAgICAgIHJvdGF0aW9uOiAnLTQ1ZGVnJyxcbiAgICAgICAgICAgIHk6ICctNXB4JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBkZWxheTogMC4xXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBnc2FwLmRlbGF5ZWRDYWxsKDAuOCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5oZWFkZXIuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBfdGhpczMuaGVhZGVyLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVW5zZXQgb3ZlcmxheVxuICAgICAgICBnc2FwLnRvKHRoaXMuYXBwU3RvcmUuY3VycmVudFNlY3Rpb24uJG92ZXJsYXksIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCdcbiAgICAgICAgfSk7IC8vIFJlcG9zaXRpb24gbWVudSBvbiBwcm9tb3Rpb25zaW5nbGVcblxuICAgICAgICBpZiAodGhpcy5hcHBTdG9yZS5jdXJyZW50ID09PSAncHJvbW90aW9uc3NpbmdsZScgJiYgdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIGdzYXAudG8odGhpcy4kaGVhZGVyLCB7XG4gICAgICAgICAgeTogJy0yLjV2dycsXG4gICAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCdcbiAgICAgICAgfSk7IC8vIEhpZGUgbG9nb1xuXG4gICAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmN1cnJlbnQgIT09ICdob21lJyAmJiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgZ3NhcC50byh0aGlzLiRoZWFkZXJMb2dvLCB7XG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdpbml0aWFsJyxcbiAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgZGVsYXk6IDAuNlxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGFwcCwge1xuICAgICAgICAgICAgd2lsbENoYW5nZTogJycsXG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgY2xlYXJQcm9wczogJ2FsbCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLiRoZWFkZXJNZW51LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLiRhcHAsIHtcbiAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBjbGVhclByb3BzOiAnYWxsJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyTWVudSwge1xuICAgICAgICAgICAgeTogJy0xMDAlJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiBvbkNvbXBsZXRlKCkge1xuICAgICAgICAgICAgICBfdGhpczMuJGhlYWRlck1lbnUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2luaXRpYWwnO1xuICAgICAgICB9IC8vIEFuaW1hdGUgbWVudSBpdGVtc1xuXG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMuJGhlYWRlck1lbnVJdGVtcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGhlYWRlck1lbnVJdGVtc1tfaV0uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIHk6ICctMTAwJScsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3AgPyAwLjggOiAwLjQsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBkZWxheTogMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLiRoZWFkZXJUcmlnZ2VyVGV4dC5jaGlsZHJlblsxXSwge1xuICAgICAgICAgICAgeTogJy0xMDAlJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBkZWxheTogMFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyVHJpZ2dlclRleHQuY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIHk6ICcwJScsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZGVsYXk6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGhlYWRlclRyaWdnZXJJY29uLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICByb3RhdGlvbjogJzBkZWcnLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0VDMUMyNCcsXG4gICAgICAgICAgICB5OiAnMCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZGVsYXk6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGhlYWRlclRyaWdnZXJJY29uLmNoaWxkcmVuWzFdLCB7XG4gICAgICAgICAgICByb3RhdGlvbjogJzBkZWcnLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0VDMUMyNCcsXG4gICAgICAgICAgICB5OiAnMCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZGVsYXk6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGhlYWRlclRyaWdnZXJJY29uLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICByb3RhdGlvbjogJzBkZWcnLFxuICAgICAgICAgICAgeTogJzAnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgICAgIGRlbGF5OiAwXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLiRoZWFkZXJUcmlnZ2VySWNvbi5jaGlsZHJlblsxXSwge1xuICAgICAgICAgICAgcm90YXRpb246ICcwZGVnJyxcbiAgICAgICAgICAgIHk6ICcwJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBkZWxheTogMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3NhcC5kZWxheWVkQ2FsbCgwLjgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMuaGVhZGVyLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgX3RoaXMzLmhlYWRlci5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRTdWJtZW51XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRTdWJtZW51KCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kaGVhZGVyU3VibWVudUl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGhlYWRlclN1Ym1lbnVJdGVtc1tpXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgIHk6ICctMTAwJSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRoZWFkZXJTdWJtZW51SXRlbXNbaV0sICdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgX3RoaXM0LmVudGVyU3VibWVudShlLCBhLCBlbCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kaGVhZGVyU3VibWVudUl0ZW1zW2ldLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIF90aGlzNC5sZWF2ZVN1Ym1lbnUoZSwgYSwgZWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJTdWJtZW51XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyU3VibWVudShlLCBhLCBlbCkge1xuICAgICAgZ3NhcC50byhlbC5jaGlsZHJlblswXS5jaGlsZHJlblswXSwge1xuICAgICAgICB4OiAnMHB4JyxcbiAgICAgICAgc2NhbGVYOiAxLFxuICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0sIHtcbiAgICAgICAgeDogJzEycHgnLFxuICAgICAgICBvcGFjaXR5OiAwLjQsXG4gICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsZWF2ZVN1Ym1lbnVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhdmVTdWJtZW51KGUsIGEsIGVsKSB7XG4gICAgICBnc2FwLnRvKGVsLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgIHg6ICctNHB4JyxcbiAgICAgICAgc2NhbGVYOiAwLFxuICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0sIHtcbiAgICAgICAgeDogJzBweCcsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ0cmlnZ2VyU3VibWVudVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyU3VibWVudShfc2hvdykge1xuICAgICAgaWYgKF9zaG93KSB7XG4gICAgICAgIGdzYXAudG8oW3RoaXMuJGhlYWRlckxvZ28sIHRoaXMuJGhlYWRlclRyaWdnZXJdLCB7XG4gICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0J1xuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGhlYWRlclN1Ym1lbnVJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGdzYXAuc2V0KHRoaXMuJGhlYWRlclN1Ym1lbnVJdGVtc1tpXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgeTogJy0xMDAlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kaGVhZGVyU3VibWVudUl0ZW1zW2ldLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgICAgIGRlbGF5OiAwICsgaSAqIDAuMDVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGhlYWRlclN1Ym1lbnUuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhbGwnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ3NhcC50byhbdGhpcy4kaGVhZGVyTG9nbywgdGhpcy4kaGVhZGVyVHJpZ2dlcl0sIHtcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdpbml0aWFsJyxcbiAgICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICBkZWxheTogMC44XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHRoaXMuJGhlYWRlclN1Ym1lbnVJdGVtcy5sZW5ndGg7IF9pMisrKSB7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLiRoZWFkZXJTdWJtZW51SXRlbXNbX2kyXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgeTogJy0xMDAlJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBkZWxheTogMCArICh0aGlzLiRoZWFkZXJTdWJtZW51SXRlbXMubGVuZ3RoIC0gX2kyKSAqIDAuMDVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGhlYWRlclN1Ym1lbnUuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibW92ZUN1cnNvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlQ3Vyc29yKGUpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvci5sb2NrKSByZXR1cm47IC8vIENoZWNrIHZlbG9jaXR5XG5cbiAgICAgIHRoaXMuY3Vyc29yLmxpdmVQb3NpdGlvbi54ID0gZS5jbGllbnRYO1xuICAgICAgdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLnkgPSBlLmNsaWVudFk7XG4gICAgICB2YXIgbW92ZW1lbnRYID0gdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLnggLSB0aGlzLmN1cnNvci5wb3NpdGlvbi54O1xuICAgICAgdmFyIG1vdmVtZW50WSA9IHRoaXMuY3Vyc29yLmxpdmVQb3NpdGlvbi55IC0gdGhpcy5jdXJzb3IucG9zaXRpb24ueTtcbiAgICAgIHZhciBtb3ZlbWVudCA9IE1hdGguc3FydChtb3ZlbWVudFggKiBtb3ZlbWVudFggKyBtb3ZlbWVudFkgKiBtb3ZlbWVudFkpO1xuICAgICAgdmFyIHZlbG9jaXR5ID0gbW92ZW1lbnQgLyAxMDsgLy8gdGhpcy5fZHJhZy52ZWxvY2l0eSA9IGxlcnAodGhpcy5fZHJhZy52ZWxvY2l0eSwgdmVsb2NpdHksIHRoaXMuX2RyYWcuZWFzZSAqIDIpO1xuXG4gICAgICBnc2FwLnRvKHRoaXMuJGN1cnNvckRvdCwge1xuICAgICAgICB4OiB0aGlzLmN1cnNvci5saXZlUG9zaXRpb24ueCxcbiAgICAgICAgeTogdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLnksXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8odGhpcy4kY3Vyc29yTWludXMsIHtcbiAgICAgICAgeDogdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLngsXG4gICAgICAgIHk6IHRoaXMuY3Vyc29yLmxpdmVQb3NpdGlvbi55LFxuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuJGN1cnNvclBsdXMsIHtcbiAgICAgICAgeDogdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLngsXG4gICAgICAgIHk6IHRoaXMuY3Vyc29yLmxpdmVQb3NpdGlvbi55LFxuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuJGN1cnNvckRyYWcsIHtcbiAgICAgICAgeDogdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLngsXG4gICAgICAgIHk6IHRoaXMuY3Vyc29yLmxpdmVQb3NpdGlvbi55LFxuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgfSk7XG4gICAgICB0aGlzLmN1cnNvci5wb3NpdGlvbi54ID0gdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLng7XG4gICAgICB0aGlzLmN1cnNvci5wb3NpdGlvbi55ID0gdGhpcy5jdXJzb3IubGl2ZVBvc2l0aW9uLnk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9wZW5JbmZvXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5JbmZvKGUsIGEsIGVsKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuaW5mby5pc09wZW4pIHJldHVybjtcbiAgICAgIHRoaXMuaW5mby5pc09wZW4gPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB0aGlzLmFwcFN0b3JlLmN1cnJlbnRTZWN0aW9uLnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSBmYWxzZTtcbiAgICAgIGlmIChlbC5kYXRhc2V0LmhyZWYpIHRoaXMuYXBwQ29yZS5oaWdod2F5LnJlZGlyZWN0KGVsLmRhdGFzZXQuaHJlZik7IC8vIGNvbnN0IHRleHRDb250ZW50ID0gdGhpcy4kZm9ybS50ZXh0Q29udGVudDtcbiAgICAgIC8vIC8vIGNvbnN0IHNob3J0Y29kZSA9ICc8P3BocCBlY2hvIGRvX3Nob3J0Y29kZSgnICsgdGV4dENvbnRlbnQgKyAnKSc7XG4gICAgICAvLyBjb25zdCB5b3VySFRNTCA9ICc8ZGl2IGNsYXNzPVwibXlkaXZcIj48P3BocCBkb19zaG9ydGNvZGUoXCInICsgdGV4dENvbnRlbnQgKyAnXCIpOz8+PC9kaXY+JztcbiAgICAgIC8vIC8vIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NlcnZpY2VzLXJpZ2h0JylbMF0uaW5uZXJIVE1MID0geW91ckhUTUw7XG4gICAgICAvLyB0aGlzLiRpbmZvQ29udGVudC5jaGlsZHJlblsxXS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCB5b3VySFRNTCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXBwU3RvcmUuY3VycmVudCk7XG4gICAgICBnc2FwLmRlbGF5ZWRDYWxsKGVsLmRhdGFzZXQuaHJlZiAmJiB0aGlzLmFwcFN0b3JlLmN1cnJlbnQgIT09ICdjb250YWN0JyA/IDIgOiAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGdzYXAuc2V0KF90aGlzNS4kaW5mbywge1xuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAuc2V0KF90aGlzNS4kaW5mb0Nsb3Nlciwge1xuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAudG8oX3RoaXM1LiRpbmZvTWFzaywge1xuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgZHVyYXRpb246IDAuNixcbiAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCdcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAudG8oX3RoaXM1LiRpbmZvQ29udGVudCwge1xuICAgICAgICAgIHg6ICcwJScsXG4gICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnXG4gICAgICAgIH0pO1xuICAgICAgICBnc2FwLnRvKF90aGlzNS4kaW5mb0Nsb3Nlciwge1xuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgZHVyYXRpb246IDAuMixcbiAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgZGVsYXk6IDFcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xvc2VJbmZvXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlSW5mbygpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBnc2FwLnRvKHRoaXMuJGluZm9DbG9zZXIsIHtcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgICBlYXNlOiAncG93ZXIyLm91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRpbmZvQ29udGVudCwge1xuICAgICAgICB4OiAnMTAwJScsXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICBlYXNlOiAnZXhwby5pbk91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRpbmZvTWFzaywge1xuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjIsXG4gICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgZGVsYXk6IDEsXG4gICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uIG9uQ29tcGxldGUoKSB7XG4gICAgICAgICAgZ3NhcC5zZXQoX3RoaXM2LiRpbmZvQ2xvc2VyLCB7XG4gICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnNldChfdGhpczYuJGluZm8sIHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzNi5pbmZvLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgIGlmIChfdGhpczYuYXBwU3RvcmUuaXNEZXNrdG9wKSBfdGhpczYuYXBwU3RvcmUuY3VycmVudFNlY3Rpb24uc3VwZXJTY3JvbGxlci5fc2Nyb2xsLmVuYWJsZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlbnRlckRyYWdDdXJzb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXJEcmFnQ3Vyc29yKCkge1xuICAgICAgZ3NhcC5raWxsVHdlZW5zT2YoW3RoaXMuJGN1cnNvckRyYWcsIHRoaXMuJGN1cnNvckRyYWcuY2hpbGRyZW5bMF0sIHRoaXMuJGN1cnNvckRvdCwgdGhpcy4kY3Vyc29yUGx1c10pO1xuICAgICAgdGhpcy4kY3Vyc29yTWludXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICB0aGlzLiRjdXJzb3JQbHVzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgdGhpcy4kY3Vyc29yRHJhZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIGdzYXAudG8odGhpcy4kY3Vyc29yRG90LCB7XG4gICAgICAgIHNjYWxlOiAxLFxuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRjdXJzb3JNaW51cywge1xuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8odGhpcy4kY3Vyc29yUGx1cywge1xuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTsgLy9nc2FwLnRvKHRoaXMuJGN1cnNvclBsdXMuY2hpbGRyZW5bMF0sIHsgb3BhY2l0eTogMC4wMDAxLCBkdXJhdGlvbjogMC4zLCBlYXNlOiAnZXhwby5vdXQnLCBkZWxheTogMC4xIH0pO1xuXG4gICAgICBnc2FwLnRvKHRoaXMuJGN1cnNvckRyYWcsIHtcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRjdXJzb3JEcmFnLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGRlbGF5OiAwLjFcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsZWF2ZURyYWdDdXJzb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhdmVEcmFnQ3Vyc29yKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIGdzYXAua2lsbFR3ZWVuc09mKFt0aGlzLiRjdXJzb3JEcmFnLCB0aGlzLiRjdXJzb3JEcmFnLmNoaWxkcmVuWzBdLCB0aGlzLiRjdXJzb3JEb3QsIHRoaXMuJGN1cnNvclBsdXNdKTtcbiAgICAgIGdzYXAudG8odGhpcy4kY3Vyc29yRG90LCB7XG4gICAgICAgIHNjYWxlOiAwLjM1LFxuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oW3RoaXMuJGN1cnNvckRyYWcsIHRoaXMuJGN1cnNvclBsdXNdLCB7XG4gICAgICAgIHNjYWxlOiAwLjM1LFxuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byhbdGhpcy4kY3Vyc29yRHJhZy5jaGlsZHJlblswXSwgdGhpcy4kY3Vyc29yUGx1cy5jaGlsZHJlblswXV0sIHtcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiBvbkNvbXBsZXRlKCkge1xuICAgICAgICAgIF90aGlzNy4kY3Vyc29yRHJhZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIF90aGlzNy4kY3Vyc29yTWludXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICBfdGhpczcuJGN1cnNvclBsdXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSAvLyBvdmVyQ3Vyc29yKGUsIGEsIGVsKVxuICAgIC8vIHtcbiAgICAvLyAgICAgaWYoZS50YXJnZXQuY2xvc2VzdCgnYScpICE9PSBudWxsIHx8IGUudGFyZ2V0LmNsb3Nlc3QoJ2RpdicpLmNsYXNzTGlzdC5jb250YWlucygndHJpZ2dlcicpKVxuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgICBpZighdGhpcy5pc0N1cnNvclZpZXdpbmcpXG4gICAgLy8gICAgICAgICB7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5pc0N1cnNvclZpZXdpbmcgPSB0cnVlO1xuICAgIC8vICAgICAgICAgICAgIGdzYXAudG8odGhpcy4kY3Vyc29yLmNoaWxkcmVuWzBdLCB7IHNjYWxlOiAwLCBkdXJhdGlvbjogMC44LCBlYXNlOiAnZXhwby5vdXQnIH0pO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGVsc2UgaWYoZS50YXJnZXQuY2xvc2VzdCgnZGl2JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcmFnJykgfHwgZS50YXJnZXQuY2xvc2VzdCgnZGl2JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb3QnKSlcbiAgICAvLyAgICAge1xuICAgIC8vICAgICAgICAgaWYoIXRoaXMuaXNDdXJzb3JWaWV3aW5nKVxuICAgIC8vICAgICAgICAge1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuaXNDdXJzb3JWaWV3aW5nID0gdHJ1ZTtcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJGN1cnNvci5jaGlsZHJlblswXSwgeyBzY2FsZTogMCwgZHVyYXRpb246IDAuOCwgZWFzZTogJ2V4cG8ub3V0JyB9KTtcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJGN1cnNvci5jaGlsZHJlblsxXSwgeyBzY2FsZTogMCwgZHVyYXRpb246IDAuOCwgZWFzZTogJ2V4cG8ub3V0JyB9KTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBlbHNlIGlmKGUudGFyZ2V0LmNsb3Nlc3QoJ2RpdicpLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyX19idWxsZXRzX19pdGVtJykpXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAgIGlmKCF0aGlzLmlzQ3Vyc29yVmlld2luZylcbiAgICAvLyAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmlzQ3Vyc29yVmlld2luZyA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICAgZ3NhcC50byh0aGlzLiRjdXJzb3IuY2hpbGRyZW5bMF0sIHsgc2NhbGU6IDAuNywgb3BhY2l0eTogMC4yLCBkdXJhdGlvbjogMC44LCBlYXNlOiAnZXhwby5vdXQnIH0pO1xuICAgIC8vICAgICAgICAgICAgIGdzYXAudG8odGhpcy4kY3Vyc29yLmNoaWxkcmVuWzFdLCB7IHNjYWxlOiAwLCBkdXJhdGlvbjogMC44LCBlYXNlOiAnZXhwby5vdXQnIH0pO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGVsc2VcbiAgICAvLyAgICAge1xuICAgIC8vICAgICAgICAgaWYodGhpcy5pc0N1cnNvclZpZXdpbmcpXG4gICAgLy8gICAgICAgICB7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5pc0N1cnNvclZpZXdpbmcgPSBmYWxzZTtcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJGN1cnNvci5jaGlsZHJlblswXSwgeyBzY2FsZTogMSwgb3BhY2l0eTogMC41LCBkdXJhdGlvbjogMC44LCBlYXNlOiAnZXhwby5vdXQnIH0pO1xuICAgIC8vICAgICAgICAgICAgIGdzYXAudG8odGhpcy4kY3Vyc29yLmNoaWxkcmVuWzFdLCB7IHNjYWxlOiAxLCBkdXJhdGlvbjogMC44LCBlYXNlOiAnZXhwby5vdXQnIH0pO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gIH0sIHtcbiAgICBrZXk6IFwiZ3VpZGVzU3dpdGNoZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ3VpZGVzU3dpdGNoZXIoKSB7XG4gICAgICBpZiAodGhpcy4kZ3VpZGVzSHIuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykge1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRndWlkZXNIciwge1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kZ3VpZGVzVnIsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRndWlkZXNIciwge1xuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGd1aWRlc1ZyLCB7XG4gICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ3VpZGVzU3dpdGNoZXIyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGd1aWRlc1N3aXRjaGVyMigpIHtcbiAgICAgIGlmICh0aGlzLiRndWlkZXNIcjIuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykge1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRndWlkZXNIcjIsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGd1aWRlc1ZyMiwge1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGd1aWRlc0hyMiwge1xuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGd1aWRlc1ZyMiwge1xuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUod2lkdGgsIGhlaWdodCkgey8vIHRoaXMuJG5vdGljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpY2UnKTtcbiAgICAgIC8vIGlmKCF0aGlzLmFwcFN0b3JlLmlzRGVza3RvcClcbiAgICAgIC8vIHtcbiAgICAgIC8vICAgICBpZih3aWR0aCA+IGhlaWdodClcbiAgICAgIC8vICAgICB7XG4gICAgICAvLyAgICAgICAgIGdzYXAuc2V0KHRoaXMuJG5vdGljZSwgeyBkaXNwbGF5OiAnYmxvY2snIH0pO1xuICAgICAgLy8gICAgICAgICB0aGlzLiRub3RpY2UuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGUpID0+IHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9KTtcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyAgICAgZWxzZVxuICAgICAgLy8gICAgIHtcbiAgICAgIC8vICAgICAgICAgZ3NhcC5zZXQodGhpcy4kbm90aWNlLCB7IGRpc3BsYXk6ICdub25lJyB9KTtcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2l6ZU9yaWVudGF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZU9yaWVudGF0aW9uKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH0sIHtcbiAgICBrZXk6IFwic3BsaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BsaXQoeCwgbikge1xuICAgICAgaWYgKHggPCBuKSB7XG4gICAgICAgIGRvY3VtZW50LndyaXRlKCctMSAnKTtcbiAgICAgIH0gZWxzZSBpZiAoeCAlIG4gPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICBkb2N1bWVudC53cml0ZSh4IC8gbiArICcgJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB6cCA9IG4gLSB4ICUgbjtcbiAgICAgICAgdmFyIHBwID0gTWF0aC5mbG9vcih4IC8gbik7XG5cbiAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgbjsgX2kzKyspIHtcbiAgICAgICAgICBpZiAoX2kzID49IHpwKSBkb2N1bWVudC53cml0ZShwcCArIDEgKyAnICcpO2Vsc2UgZG9jdW1lbnQud3JpdGUocHAgKyAnICcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNwbGl0SW5QYXJ0c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzcGxpdEluUGFydHMobnVtLCBwYXJ0cykge1xuICAgICAgdmFyIHN1bVBhcnRzID0gMDtcbiAgICAgIHZhciB0b3RhbFBhcnRzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMgLSAxOyBpKyspIHtcbiAgICAgICAgdmFyIHBuID0gTWF0aC5yYW5kb20oKSAqIChudW0gLSBzdW1QYXJ0cyk7XG4gICAgICAgIHN1bVBhcnRzICs9IE1hdGgubWluKHBuLCBudW0gKiAwLjUpO1xuICAgICAgICB0b3RhbFBhcnRzLnB1c2goc3VtUGFydHMpO1xuICAgICAgfVxuXG4gICAgICBzdW1QYXJ0cyArPSBudW0gLSBzdW1QYXJ0cztcbiAgICAgIHRvdGFsUGFydHMucHVzaChzdW1QYXJ0cyk7XG4gICAgICByZXR1cm4gdG90YWxQYXJ0cztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gYXBwVWk7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcFVpOyIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vLyB1dGlsaXRpZXNcbmltcG9ydCBWaXJ0dWFsU2Nyb2xsIGZyb20gJ3ZpcnR1YWwtc2Nyb2xsJztcbmltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwJztcbmltcG9ydCBhcHBTdG9yZSBmcm9tICcuLi9hcHAvYXBwU3RvcmUnOyAvLyBlbXB0eSBmdW5jdGlvblxuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG5cbnZhciBfZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTtcblxuICAgIC8vIHN0b3JlXG4gICAgdGhpcy5hcHBTdG9yZSA9IGFwcFN0b3JlOyAvLyBob29rIGZ1bmN0aW9uc1xuXG4gICAgdGhpcy5fb25SYWYgPSBvcHRpb25zLm9uUmFmIHx8IG5vb3A7XG4gICAgdGhpcy5fb25TY3JvbGwgPSBvcHRpb25zLm9uU2Nyb2xsIHx8IG5vb3A7XG4gICAgdGhpcy5fY3VycmVudFNlY3Rpb24gPSBvcHRpb25zLmN1cnJlbnRTZWN0aW9uID8gb3B0aW9ucy5jdXJyZW50U2VjdGlvbiA6IG51bGw7XG4gICAgdGhpcy5fZ2xvYmFsID0ge1xuICAgICAgcGVyY2VudDoge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgICB9LFxuICAgICAgbW9kZTogb3B0aW9ucy5tb2RlIHx8ICd2ZXJ0aWNhbCdcbiAgICB9O1xuXG4gICAgdmFyIGxlcnAgPSBmdW5jdGlvbiBsZXJwKHZhbHVlMSwgdmFsdWUyLCBhbW91bnQpIHtcbiAgICAgIGFtb3VudCA9IGFtb3VudCA8IDAgPyAwIDogYW1vdW50O1xuICAgICAgYW1vdW50ID0gYW1vdW50ID4gMSA/IDEgOiBhbW91bnQ7XG4gICAgICByZXR1cm4gdmFsdWUxICsgKHZhbHVlMiAtIHZhbHVlMSkgKiBhbW91bnQ7XG4gICAgfTsgLy8gc2Nyb2xsIHByb3BlcnRpZXNcblxuXG4gICAgaWYgKG9wdGlvbnMuc2Nyb2xsKSB7XG4gICAgICAvLyBkZWZhdWx0IHZpcnR1YWxTY3JvbGwgb3B0aW9uc1xuICAgICAgdGhpcy5fdmlydHVhbFNjcm9sbCA9IG51bGw7XG4gICAgICB0aGlzLl92aXJ0dWFsU2Nyb2xsT3B0aW9ucyA9IHtcbiAgICAgICAgZWw6IHR5cGVvZiBvcHRpb25zLmVsICE9PSAndW5kZWZpbmVkJyA/IF90eXBlb2Yob3B0aW9ucy5lbCkgOiB3aW5kb3csXG4gICAgICAgIG1vdXNlTXVsdGlwbGllcjogdHlwZW9mIG9wdGlvbnMubW91c2VNdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubW91c2VNdWx0aXBsaWVyIDogdGhpcy5hcHBTdG9yZS5jbGllbnQub3MgPT09ICd3aW5kb3dzJyA/IDEgOiAwLjQsXG4gICAgICAgIHRvdWNoTXVsdGlwbGllcjogdHlwZW9mIG9wdGlvbnMudG91Y2hNdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMudG91Y2hNdWx0aXBsaWVyIDogMixcbiAgICAgICAgZmlyZWZveE11bHRpcGxpZXI6IHR5cGVvZiBvcHRpb25zLmZpcmVmb3hNdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZmlyZWZveE11bHRpcGxpZXIgOiA1MCxcbiAgICAgICAgbGltaXRJbmVydGlhOiB0eXBlb2Ygb3B0aW9ucy5saW1pdEluZXJ0aWEgIT09ICd1bmRlZmluZWQnID8gX3R5cGVvZihvcHRpb25zLmxpbWl0SW5lcnRpYSkgOiBmYWxzZSxcbiAgICAgICAgcGFzc2l2ZTogdHlwZW9mIG9wdGlvbnMucGFzc2l2ZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnBhc2l2ZSA6IGZhbHNlLFxuICAgICAgICB1c2VLZXlib2FyZDogZmFsc2VcbiAgICAgIH07XG4gICAgICB0aGlzLl9zY3JvbGwgPSB7XG4gICAgICAgIGVuYWJsZTogdHlwZW9mIG9wdGlvbnMuZW5hYmxlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZW5hYmxlIDogdHJ1ZSxcbiAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnNjcm9sbFRhcmdldCxcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgdGltZW91dDogZmFsc2UsXG4gICAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgICAgcmF0aW86IHtcbiAgICAgICAgICB4OiAwLFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgfSxcbiAgICAgICAgY2xpY2tlZFBvaW50OiB7XG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAwXG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAwXG4gICAgICAgIH0sXG4gICAgICAgIGxhc3RQb3NpdGlvbjoge1xuICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgeTogMFxuICAgICAgICB9LFxuICAgICAgICBsaXZlUG9zaXRpb246IHtcbiAgICAgICAgICB4OiAwLFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgfSxcbiAgICAgICAgbWF4U2Nyb2xsOiB7XG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAwXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX3Njcm9sbERvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBnc2FwLmRlbGF5ZWRDYWxsKDAuMiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLl9zY3JvbGwudGFyZ2V0LnBhcmVudE5vZGUuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICAgfSk7IC8vIHNldCBmbGFnXG5cbiAgICAgICAgX3RoaXMuX3Njcm9sbC5kcmFnZ2luZyA9IHRydWU7XG5cbiAgICAgICAgX3RoaXMuX3Njcm9sbC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKTsgLy8gZ2V0IHRoZSBwb2ludCB0aGUgdXNlciBjbGlja2VkIG9uIHRoZSBiYXJcblxuXG4gICAgICAgIF90aGlzLl9zY3JvbGwuY2xpY2tlZFBvaW50LnggPSBlLmNsaWVudFggLSBfdGhpcy5fc2Nyb2xsLmxpdmVQb3NpdGlvbi54O1xuICAgICAgICBfdGhpcy5fc2Nyb2xsLmNsaWNrZWRQb2ludC55ID0gZS5jbGllbnRZIC0gX3RoaXMuX3Njcm9sbC5saXZlUG9zaXRpb24ueTsgLy8gdHJhY2sgdGhlIG1vdXNlIGV2ZW50c1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIF90aGlzLl9zY3JvbGxEcmFnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGlzLl9zY3JvbGxVcCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9zY3JvbGxEcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKF90aGlzLl9nbG9iYWwubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhbW91bnQgdGhlIHVzZXIgbW92ZWQgZnJvbSB0aGUgY2xpY2tlZCBwb2ludCBvbiB0aGUgc2Nyb2xsYmFyLCBjaGVja2luZyBsaW1pdHNcbiAgICAgICAgICBfdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggPSBNYXRoLm1pbigwLCBNYXRoLm1heChfdGhpcy5fc2Nyb2xsLm1heFNjcm9sbC54LCBlLmNsaWVudFggLSBfdGhpcy5fc2Nyb2xsLmNsaWNrZWRQb2ludC54KSk7IC8vIHVwZGF0ZSBnbG9iYWwgcGVyY2VudGFnZVxuXG4gICAgICAgICAgX3RoaXMuX2dsb2JhbC5wZXJjZW50LnggPSBfdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggLyBfdGhpcy5fc2Nyb2xsLm1heFNjcm9sbC54O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYW1vdW50IHRoZSB1c2VyIG1vdmVkIGZyb20gdGhlIGNsaWNrZWQgcG9pbnQgb24gdGhlIHNjcm9sbGJhciwgY2hlY2tpbmcgbGltaXRzXG4gICAgICAgICAgX3RoaXMuX3Njcm9sbC5wb3NpdGlvbi55ID0gTWF0aC5taW4oMCwgTWF0aC5tYXgoX3RoaXMuX3Njcm9sbC5tYXhTY3JvbGwueSwgZS5jbGllbnRZIC0gX3RoaXMuX3Njcm9sbC5jbGlja2VkUG9pbnQueSkpOyAvLyB1cGRhdGUgZ2xvYmFsIHBlcmNlbnRhZ2VcblxuICAgICAgICAgIF90aGlzLl9nbG9iYWwucGVyY2VudC55ID0gX3RoaXMuX3Njcm9sbC5wb3NpdGlvbi55IC8gX3RoaXMuX3Njcm9sbC5tYXhTY3JvbGwueTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5fc2Nyb2xsVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGdzYXAuZGVsYXllZENhbGwoMC4yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMuX3Njcm9sbC50YXJnZXQucGFyZW50Tm9kZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2FsbCc7XG4gICAgICAgIH0pOyAvLyBzdG9wIHRyYWNraW5nIHRoZSB0d28gbW91c2UgZXZlbnRzXG5cbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXMuX3Njcm9sbERyYWcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgX3RoaXMuX3Njcm9sbFVwKTsgLy8gc2V0IGZsYWdcblxuICAgICAgICBfdGhpcy5fc2Nyb2xsLmRyYWdnaW5nID0gZmFsc2U7XG5cbiAgICAgICAgX3RoaXMuX3Njcm9sbC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKTtcbiAgICAgIH07IC8vIGJpbmQgbW91c2Vkb3duIGV2ZW50XG5cblxuICAgICAgaWYgKHRoaXMuX2dsb2JhbC5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHRoaXMuX3Njcm9sbC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fc2Nyb2xsRG93bik7XG5cbiAgICAgIHRoaXMuX3Njcm9sbE1vdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBfdGhpcy5fb25TY3JvbGwoKTsgLy8gUHJldmVudCBwb2ludGVyZXZlbnRzIG9uIHNjcm9sbFxuXG5cbiAgICAgICAgX3RoaXMuX3Njcm9sbC50YXJnZXQucGFyZW50Tm9kZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuX3Njcm9sbC50aW1lb3V0KTtcbiAgICAgICAgX3RoaXMuX3Njcm9sbC50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMuX3Njcm9sbC50YXJnZXQucGFyZW50Tm9kZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2FsbCc7XG4gICAgICAgIH0sIDIwMCk7IC8vIGNoZWNrIGlmIHNjcm9sbCBpcyBhbGxvd2VkXG5cbiAgICAgICAgaWYgKCFfdGhpcy5fc2Nyb2xsLmVuYWJsZSkgcmV0dXJuOyAvLyB1cGRhdGUgc2Nyb2xsXG5cbiAgICAgICAgaWYgKF90aGlzLl9nbG9iYWwubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgLy8gZ2V0IHNjcm9sbCB2YWx1ZXNcbiAgICAgICAgICBfdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggPSBNYXRoLm1pbigwLCBNYXRoLm1heChfdGhpcy5fc2Nyb2xsLm1heFNjcm9sbC54LCBfdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggKz0gZS5kZWx0YVkpKTtcbiAgICAgICAgICBfdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggPSBNYXRoLm1pbigwLCBNYXRoLm1heChfdGhpcy5fc2Nyb2xsLm1heFNjcm9sbC54LCBfdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggKz0gZS5kZWx0YVgpKTtcbiAgICAgICAgICBfdGhpcy5fZ2xvYmFsLnBlcmNlbnQueCA9IF90aGlzLl9zY3JvbGwucG9zaXRpb24ueCAvIF90aGlzLl9zY3JvbGwubWF4U2Nyb2xsLng7XG4gICAgICAgICAgX3RoaXMuX3Njcm9sbC5sYXN0UG9zaXRpb24ueCA9IF90aGlzLl9zY3JvbGwucG9zaXRpb24ueDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBnZXQgc2Nyb2xsIHZhbHVlc1xuICAgICAgICAgIF90aGlzLl9zY3JvbGwucG9zaXRpb24ueSA9IE1hdGgubWluKDAsIE1hdGgubWF4KF90aGlzLl9zY3JvbGwubWF4U2Nyb2xsLnksIF90aGlzLl9zY3JvbGwucG9zaXRpb24ueSArPSBlLmRlbHRhWSkpO1xuICAgICAgICAgIF90aGlzLl9nbG9iYWwucGVyY2VudC55ID0gX3RoaXMuX3Njcm9sbC5wb3NpdGlvbi55IC8gX3RoaXMuX3Njcm9sbC5tYXhTY3JvbGwueTtcbiAgICAgICAgICBfdGhpcy5fc2Nyb2xsLmxhc3RQb3NpdGlvbi55ID0gX3RoaXMuX3Njcm9sbC5wb3NpdGlvbi55O1xuICAgICAgICB9XG5cbiAgICAgICAgZS5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9zY3JvbGxSYWYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpcy5fZ2xvYmFsLm1vZGUgPT09ICdob3Jpem9udGFsJykgX3RoaXMuX3Njcm9sbC5saXZlUG9zaXRpb24ueCA9IGxlcnAoX3RoaXMuX3Njcm9sbC5saXZlUG9zaXRpb24ueCwgX3RoaXMuX3Njcm9sbC5tYXhTY3JvbGwueCAqIF90aGlzLl9nbG9iYWwucGVyY2VudC54LCAwLjEpO2Vsc2UgX3RoaXMuX3Njcm9sbC5saXZlUG9zaXRpb24ueSA9IGxlcnAoX3RoaXMuX3Njcm9sbC5saXZlUG9zaXRpb24ueSwgX3RoaXMuX3Njcm9sbC5tYXhTY3JvbGwueSAqIF90aGlzLl9nbG9iYWwucGVyY2VudC55LCAwLjEpO1xuICAgICAgICBfdGhpcy5fc2Nyb2xsLnRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoJyArIF90aGlzLl9zY3JvbGwubGl2ZVBvc2l0aW9uLnggKyAncHgsJyArIF90aGlzLl9zY3JvbGwubGl2ZVBvc2l0aW9uLnkgKyAncHgsIDBweCknO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fb25LZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgLy8gUmV0dXJuIGlmIGlucHV0IGlzIGZvY3VzZWRcbiAgICAgICAgdmFyICRpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50Lm5hbWUgPT09ICRpbnB1dHNbaV0ubmFtZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IC8vIGluaXQgc2Nyb2xsIHZhbHVlc1xuXG5cbiAgICAgICAgdmFyIHNjcm9sbFggPSAwO1xuICAgICAgICB2YXIgc2Nyb2xsWSA9IDA7IC8vIGdldCB3aW5kb3cgaGVpZ2h0IGFuZCB3aWR0aFxuXG4gICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSA0MDtcbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGggLSA0MDsgLy8gY2hlY2sgcHJlc3NlZCBrZXlcblxuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICBzY3JvbGxYID0gLTEyMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgIHNjcm9sbFkgPSAtMTIwO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgc2Nyb2xsWCA9IDEyMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgIHNjcm9sbFkgPSAxMjA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzIgJiYgZS5zaGlmdEtleTpcbiAgICAgICAgICAgIHNjcm9sbFggPSAtd2luZG93V2lkdGg7XG4gICAgICAgICAgICBzY3JvbGxZID0gLXdpbmRvd0hlaWdodDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIHNjcm9sbFggPSB3aW5kb3dXaWR0aDtcbiAgICAgICAgICAgIHNjcm9sbFkgPSB3aW5kb3dIZWlnaHQ7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gdXBkYXRlIHNjcm9sbFxuXG5cbiAgICAgICAgX3RoaXMuc2Nyb2xsVXBkYXRlKHNjcm9sbFgsIHNjcm9sbFkpO1xuICAgICAgfTtcbiAgICB9IC8vIGJhciBwcm9wZXJ0aWVzXG5cblxuICAgIGlmIChvcHRpb25zLmJhcikge1xuICAgICAgdGhpcy5fYmFyID0ge1xuICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgIHRhcmdldDogb3B0aW9ucy5iYXJUYXJnZXQsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgICAgcmF0aW86IHtcbiAgICAgICAgICB4OiAwLFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICB4OiAwLFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgfSxcbiAgICAgICAgbGl2ZVBvc2l0aW9uOiB7XG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAwXG4gICAgICAgIH0sXG4gICAgICAgIG1heFNjcm9sbDoge1xuICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgeTogMFxuICAgICAgICB9LFxuICAgICAgICBjbGlja2VkUG9pbnQ6IHtcbiAgICAgICAgICB4OiAwLFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5fYmFyRG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vIHNldCBmbGFnXG4gICAgICAgIF90aGlzLl9iYXIuZHJhZ2dpbmcgPSB0cnVlO1xuXG4gICAgICAgIF90aGlzLl9iYXIudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7IC8vIGdldCB0aGUgcG9pbnQgdGhlIHVzZXIgY2xpY2tlZCBvbiB0aGUgYmFyXG5cblxuICAgICAgICBfdGhpcy5fYmFyLmNsaWNrZWRQb2ludC54ID0gZS5jbGllbnRYIC0gX3RoaXMuX2Jhci5saXZlUG9zaXRpb24ueDtcbiAgICAgICAgX3RoaXMuX2Jhci5jbGlja2VkUG9pbnQueSA9IGUuY2xpZW50WSAtIF90aGlzLl9iYXIubGl2ZVBvc2l0aW9uLnk7IC8vIHRyYWNrIHRoZSBtb3VzZSBldmVudHNcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBfdGhpcy5fYmFyTW92ZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBfdGhpcy5fYmFyVXApO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fYmFyTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChfdGhpcy5fZ2xvYmFsLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYW1vdW50IHRoZSB1c2VyIG1vdmVkIGZyb20gdGhlIGNsaWNrZWQgcG9pbnQgb24gdGhlIHNjcm9sbGJhciwgY2hlY2tpbmcgbGltaXRzXG4gICAgICAgICAgX3RoaXMuX2Jhci5wb3NpdGlvbi54ID0gTWF0aC5taW4oTWF0aC5tYXgoZS5jbGllbnRYIC0gX3RoaXMuX2Jhci5jbGlja2VkUG9pbnQueCwgMCksIF90aGlzLl9iYXIubWF4U2Nyb2xsLngpOyAvLyB1cGRhdGUgZ2xvYmFsIHBlcmNlbnRhZ2VcblxuICAgICAgICAgIF90aGlzLl9nbG9iYWwucGVyY2VudC54ID0gX3RoaXMuX2Jhci5wb3NpdGlvbi54IC8gX3RoaXMuX2Jhci5tYXhTY3JvbGwueDtcbiAgICAgICAgICBfdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggPSBfdGhpcy5fZ2xvYmFsLnBlcmNlbnQueCAqIF90aGlzLl9zY3JvbGwubWF4U2Nyb2xsLng7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhbW91bnQgdGhlIHVzZXIgbW92ZWQgZnJvbSB0aGUgY2xpY2tlZCBwb2ludCBvbiB0aGUgc2Nyb2xsYmFyLCBjaGVja2luZyBsaW1pdHNcbiAgICAgICAgICBfdGhpcy5fYmFyLnBvc2l0aW9uLnkgPSBNYXRoLm1pbihNYXRoLm1heChlLmNsaWVudFkgLSBfdGhpcy5fYmFyLmNsaWNrZWRQb2ludC55LCAwKSwgX3RoaXMuX2Jhci5tYXhTY3JvbGwueSk7IC8vIHVwZGF0ZSBnbG9iYWwgcGVyY2VudGFnZVxuXG4gICAgICAgICAgX3RoaXMuX2dsb2JhbC5wZXJjZW50LnkgPSBfdGhpcy5fYmFyLnBvc2l0aW9uLnkgLyBfdGhpcy5fYmFyLm1heFNjcm9sbC55O1xuICAgICAgICAgIF90aGlzLl9zY3JvbGwucG9zaXRpb24ueSA9IF90aGlzLl9nbG9iYWwucGVyY2VudC55ICogX3RoaXMuX3Njcm9sbC5tYXhTY3JvbGwueTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5fYmFyVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHN0b3AgdHJhY2tpbmcgdGhlIHR3byBtb3VzZSBldmVudHNcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXMuX2Jhck1vdmUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgX3RoaXMuX2JhclVwKTsgLy8gc2V0IGZsYWdcblxuICAgICAgICBfdGhpcy5fYmFyLmRyYWdnaW5nID0gZmFsc2U7XG5cbiAgICAgICAgX3RoaXMuX2Jhci50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX2JhclJhZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLl9nbG9iYWwubW9kZSA9PT0gJ2hvcml6b250YWwnKSBfdGhpcy5fYmFyLmxpdmVQb3NpdGlvbi54ID0gbGVycChfdGhpcy5fYmFyLmxpdmVQb3NpdGlvbi54LCBfdGhpcy5fYmFyLm1heFNjcm9sbC54ICogX3RoaXMuX2dsb2JhbC5wZXJjZW50LngsIDAuMSk7ZWxzZSBfdGhpcy5fYmFyLmxpdmVQb3NpdGlvbi55ID0gbGVycChfdGhpcy5fYmFyLmxpdmVQb3NpdGlvbi55LCBfdGhpcy5fYmFyLm1heFNjcm9sbC55ICogX3RoaXMuX2dsb2JhbC5wZXJjZW50LnksIDAuMSk7XG4gICAgICAgIF90aGlzLl9iYXIudGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgnICsgX3RoaXMuX2Jhci5saXZlUG9zaXRpb24ueCArICdweCwnICsgX3RoaXMuX2Jhci5saXZlUG9zaXRpb24ueSArICdweCwgMHB4KSc7XG4gICAgICB9OyAvLyBiaW5kIG1vdXNlZG93biBldmVudFxuXG5cbiAgICAgIHRoaXMuX2Jhci50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fYmFyRG93bik7XG4gICAgfVxuXG4gICAgdGhpcy5fcmFmID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFfdGhpcy5fc2Nyb2xsLmVuYWJsZSkgcmV0dXJuO1xuICAgICAgaWYgKF90aGlzLl9zY3JvbGwpIF90aGlzLl9zY3JvbGxSYWYoKTtcbiAgICAgIGlmIChfdGhpcy5fYmFyKSBfdGhpcy5fYmFyUmFmKCk7XG5cbiAgICAgIF90aGlzLl9vblJhZihfdGhpcy5fc2Nyb2xsLmxpdmVQb3NpdGlvbiwgX3RoaXMuX2dsb2JhbC5wZXJjZW50KTtcbiAgICB9OyAvLyBiaW5kIHRvIGdzYXAgdGlja2VyXG5cblxuICAgIGdzYXAudGlja2VyLmFkZCh0aGlzLl9yYWYpOyAvLyBiaW5kXG5cbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwiaW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIC8vIHZpcnR1YWxzY3JvbGwgcHJvcGVydGllc1xuICAgICAgaWYgKHRoaXMuX3ZpcnR1YWxTY3JvbGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX3ZpcnR1YWxTY3JvbGwgPSBuZXcgVmlydHVhbFNjcm9sbCh0aGlzLl92aXJ0dWFsU2Nyb2xsT3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5fdmlydHVhbFNjcm9sbC5vbihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIF90aGlzMi5fc2Nyb2xsTW92ZShlKTtcbiAgICAgICAgfSk7IC8vIGJpbmQga2V5ZG93biBldmVudFxuXG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5RG93bik7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNjcm9sbFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxVcGRhdGUoc2Nyb2xsWCwgc2Nyb2xsWSkge1xuICAgICAgLy8gVXBkYXRlIHNjcm9sbCB2YWx1ZXNcbiAgICAgIHRoaXMuX3Njcm9sbC5wb3NpdGlvbi54ID0gTWF0aC5taW4oMCwgTWF0aC5tYXgodGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnggLT0gc2Nyb2xsWCwgdGhpcy5fc2Nyb2xsLm1heFNjcm9sbC55KSk7XG4gICAgICB0aGlzLl9zY3JvbGwucG9zaXRpb24ueSA9IE1hdGgubWluKDAsIE1hdGgubWF4KHRoaXMuX3Njcm9sbC5wb3NpdGlvbi55IC09IHNjcm9sbFksIHRoaXMuX3Njcm9sbC5tYXhTY3JvbGwueSkpO1xuICAgICAgZ3NhcC50byh0aGlzLl9nbG9iYWwucGVyY2VudCwge1xuICAgICAgICB4OiB0aGlzLl9zY3JvbGwucG9zaXRpb24ueCAvIHRoaXMuX3Njcm9sbC5tYXhTY3JvbGwueCxcbiAgICAgICAgeTogdGhpcy5fc2Nyb2xsLnBvc2l0aW9uLnkgLyB0aGlzLl9zY3JvbGwubWF4U2Nyb2xsLnksXG4gICAgICAgIGVhc2U6ICdwb3dlcjQub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNFxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNjcm9sbEFuaW1hdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsQW5pbWF0ZShfcG9zaXRpb24pIHtcbiAgICAgIHZhciBfZHVyYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDI7XG5cbiAgICAgIHZhciBfZWFzZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ3Bvd2VyNC5pbk91dCc7XG5cbiAgICAgIHZhciBfZm9yY2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDtcblxuICAgICAgX2R1cmF0aW9uID0gdGhpcy5hcHBTdG9yZS5jbGllbnQuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnID8gX2R1cmF0aW9uIC8gMiA6IF9kdXJhdGlvbjtcbiAgICAgIGlmICghX2ZvcmNlICYmICF0aGlzLl9zY3JvbGwuZW5hYmxlKSByZXR1cm47XG4gICAgICB0aGlzLl9zY3JvbGwucG9zaXRpb24ueSA9IE1hdGgubWF4KC1fcG9zaXRpb24sIHRoaXMuX3Njcm9sbC5tYXhTY3JvbGwueSk7XG4gICAgICBnc2FwLnRvKHRoaXMuX2dsb2JhbC5wZXJjZW50LCB7XG4gICAgICAgIHk6IHRoaXMuX3Njcm9sbC5wb3NpdGlvbi55IC8gdGhpcy5fc2Nyb2xsLm1heFNjcm9sbC55LFxuICAgICAgICBlYXNlOiBfZWFzZSxcbiAgICAgICAgZHVyYXRpb246IF9kdXJhdGlvblxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNjcm9sbFJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxSZXNpemUoKSB7XG4gICAgICAvL1xuICAgICAgdGhpcy5fc2Nyb2xsLndpZHRoID0gdGhpcy5fc2Nyb2xsLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgIHRoaXMuX3Njcm9sbC5oZWlnaHQgPSB0aGlzLl9zY3JvbGwudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgIHRoaXMuX3Njcm9sbC5tYXhTY3JvbGwueCA9IC0odGhpcy5fc2Nyb2xsLndpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpO1xuICAgICAgdGhpcy5fc2Nyb2xsLm1heFNjcm9sbC55ID0gLSh0aGlzLl9zY3JvbGwuaGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYmFyUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJhclJlc2l6ZSgpIHtcbiAgICAgIC8vIGdldCBjb250YWluZXIgZWwgc2l6ZXNcbiAgICAgIHRoaXMuX2Jhci5wYXJlbnRXaWR0aCA9IHRoaXMuX2Jhci50YXJnZXQucGFyZW50Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgIHRoaXMuX2Jhci5wYXJlbnRIZWlnaHQgPSB0aGlzLl9iYXIudGFyZ2V0LnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0OyAvLyBnZXQgYmFyIHNpemVcblxuICAgICAgaWYgKHRoaXMuX2dsb2JhbC5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgdGhpcy5fYmFyLndpZHRoID0gdGhpcy5fYmFyLnBhcmVudFdpZHRoICogdGhpcy5fYmFyLnBhcmVudFdpZHRoIC8gdGhpcy5fc2Nyb2xsLndpZHRoO1xuICAgICAgICB0aGlzLl9iYXIuaGVpZ2h0ID0gdGhpcy5fYmFyLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuX2Jhci50YXJnZXQuc3R5bGUud2lkdGggPSB0aGlzLl9iYXIud2lkdGggKyAncHgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYmFyLndpZHRoID0gdGhpcy5fYmFyLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgdGhpcy5fYmFyLmhlaWdodCA9IHRoaXMuX2Jhci5wYXJlbnRIZWlnaHQgKiB0aGlzLl9iYXIucGFyZW50SGVpZ2h0IC8gdGhpcy5fc2Nyb2xsLmhlaWdodDtcbiAgICAgICAgdGhpcy5fYmFyLnRhcmdldC5zdHlsZS5oZWlnaHQgPSB0aGlzLl9iYXIuaGVpZ2h0ICsgJ3B4JztcbiAgICAgIH0gLy8gY2FsY3VsYXRlIG1heGltdW0gc2Nyb2xsXG5cblxuICAgICAgdGhpcy5fYmFyLm1heFNjcm9sbC54ID0gdGhpcy5fYmFyLnBhcmVudFdpZHRoIC0gdGhpcy5fYmFyLndpZHRoO1xuICAgICAgdGhpcy5fYmFyLm1heFNjcm9sbC55ID0gdGhpcy5fYmFyLnBhcmVudEhlaWdodCAtIHRoaXMuX2Jhci5oZWlnaHQ7XG4gICAgICB0aGlzLl9iYXIucmF0aW8ueCA9IHRoaXMuX2Jhci53aWR0aCAvIHRoaXMuX2Jhci5wYXJlbnRXaWR0aDtcbiAgICAgIHRoaXMuX2Jhci5yYXRpby55ID0gdGhpcy5fYmFyLmhlaWdodCAvIHRoaXMuX2Jhci5wYXJlbnRIZWlnaHQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUoKSB7XG4gICAgICBpZiAodGhpcy5fc2Nyb2xsKSB0aGlzLnNjcm9sbFJlc2l6ZSgpO1xuICAgICAgaWYgKHRoaXMuX2JhcikgdGhpcy5iYXJSZXNpemUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGVzdHJveVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgZ3NhcC50aWNrZXIucmVtb3ZlKHRoaXMuX3JhZik7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufSgpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiLyohXG4gKiBzdHJpbmdzOiAzLjIuNlxuICogaHR0cHM6Ly9ncmVlbnNvY2suY29tXG4gKlxuICogQ29weXJpZ2h0IDIwMDgtMjAyMCwgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogU3ViamVjdCB0byB0aGUgdGVybXMgYXQgaHR0cHM6Ly9ncmVlbnNvY2suY29tL3N0YW5kYXJkLWxpY2Vuc2Ugb3IgZm9yXG4gKiBDbHViIEdyZWVuU29jayBtZW1iZXJzLCB0aGUgYWdyZWVtZW50IGlzc3VlZCB3aXRoIHRoYXQgbWVtYmVyc2hpcC5cbiAqIEBhdXRob3I6IEphY2sgRG95bGUsIGphY2tAZ3JlZW5zb2NrLmNvbVxuKi9cblxuLyogZXNsaW50LWRpc2FibGUgKi9cbnZhciBfdHJpbUV4cCA9IC8oXlxccyt8XFxzKyQpL2c7XG5leHBvcnQgdmFyIGVtb2ppRXhwID0gLyhbXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdKD86W1xcdTIwMERcXHVGRTBGXVtcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0pezIsfXxcXHVEODNEXFx1REM2OSg/OlxcdTIwMEQoPzooPzpcXHVEODNEXFx1REM2OVxcdTIwMEQpP1xcdUQ4M0RcXHVEQzY3fCg/OlxcdUQ4M0RcXHVEQzY5XFx1MjAwRCk/XFx1RDgzRFxcdURDNjYpfFxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSl8XFx1RDgzRFxcdURDNjlcXHUyMDBEKD86XFx1RDgzRFxcdURDNjlcXHUyMDBEKT9cXHVEODNEXFx1REM2NlxcdTIwMERcXHVEODNEXFx1REM2NnxcXHVEODNEXFx1REM2OVxcdTIwMEQoPzpcXHVEODNEXFx1REM2OVxcdTIwMEQpP1xcdUQ4M0RcXHVEQzY3XFx1MjAwRCg/OlxcdUQ4M0RbXFx1REM2NlxcdURDNjddKXxcXHVEODNDXFx1REZGM1xcdUZFMEZcXHUyMDBEXFx1RDgzQ1xcdURGMDh8KD86XFx1RDgzQ1tcXHVERkMzXFx1REZDNFxcdURGQ0FdfFxcdUQ4M0RbXFx1REM2RVxcdURDNzFcXHVEQzczXFx1REM3N1xcdURDODFcXHVEQzgyXFx1REM4NlxcdURDODdcXHVERTQ1LVxcdURFNDdcXHVERTRCXFx1REU0RFxcdURFNEVcXHVERUEzXFx1REVCNC1cXHVERUI2XXxcXHVEODNFW1xcdUREMjZcXHVERDM3LVxcdUREMzlcXHVERDNEXFx1REQzRVxcdURERDYtXFx1RERERF0pKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKVxcdTIwMERbXFx1MjY0MFxcdTI2NDJdXFx1RkUwRnxcXHVEODNEXFx1REM2OSg/OlxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSlcXHUyMDBEKD86XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGOTNcXHVERkE0XFx1REZBOFxcdURGRUJcXHVERkVEXXxcXHVEODNEW1xcdURDQkJcXHVEQ0JDXFx1REQyN1xcdUREMkNcXHVERTgwXFx1REU5Ml0pfCg/OlxcdUQ4M0NbXFx1REZDM1xcdURGQzRcXHVERkNBXXxcXHVEODNEW1xcdURDNkVcXHVEQzZGXFx1REM3MVxcdURDNzNcXHVEQzc3XFx1REM4MVxcdURDODJcXHVEQzg2XFx1REM4N1xcdURFNDUtXFx1REU0N1xcdURFNEJcXHVERTREXFx1REU0RVxcdURFQTNcXHVERUI0LVxcdURFQjZdfFxcdUQ4M0VbXFx1REQyNlxcdUREMzctXFx1REQzOVxcdUREM0MtXFx1REQzRVxcdURERDYtXFx1RERERl0pXFx1MjAwRFtcXHUyNjQwXFx1MjY0Ml1cXHVGRTBGfFxcdUQ4M0NcXHVEREZEXFx1RDgzQ1xcdURERjB8XFx1RDgzQ1xcdURERjZcXHVEODNDXFx1RERFNnxcXHVEODNDXFx1RERGNFxcdUQ4M0NcXHVEREYyfFxcdUQ4M0NcXHVEREU5KD86XFx1RDgzQ1tcXHVEREVBXFx1RERFQ1xcdURERUZcXHVEREYwXFx1RERGMlxcdURERjRcXHVEREZGXSl8XFx1RDgzQ1xcdURERjcoPzpcXHVEODNDW1xcdURERUFcXHVEREY0XFx1RERGOFxcdURERkFcXHVEREZDXSl8XFx1RDgzQ1xcdURERTgoPzpcXHVEODNDW1xcdURERTZcXHVEREU4XFx1RERFOVxcdURERUItXFx1RERFRVxcdURERjAtXFx1RERGNVxcdURERjdcXHVEREZBLVxcdURERkZdKXwoPzpcXHUyNkY5fFxcdUQ4M0NbXFx1REZDQlxcdURGQ0NdfFxcdUQ4M0RcXHVERDc1KSg/OlxcdUZFMEZcXHUyMDBEW1xcdTI2NDBcXHUyNjQyXXwoPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pXFx1MjAwRFtcXHUyNjQwXFx1MjY0Ml0pXFx1RkUwRnwoPzpcXHVEODNEXFx1REM0MVxcdUZFMEZcXHUyMDBEXFx1RDgzRFxcdURERTh8XFx1RDgzRFxcdURDNjkoPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pXFx1MjAwRFtcXHUyNjk1XFx1MjY5NlxcdTI3MDhdfFxcdUQ4M0RcXHVEQzY5XFx1MjAwRFtcXHUyNjk1XFx1MjY5NlxcdTI3MDhdfFxcdUQ4M0RcXHVEQzY4KD86KD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKVxcdTIwMERbXFx1MjY5NVxcdTI2OTZcXHUyNzA4XXxcXHUyMDBEW1xcdTI2OTVcXHUyNjk2XFx1MjcwOF0pKVxcdUZFMEZ8XFx1RDgzQ1xcdURERjIoPzpcXHVEODNDW1xcdURERTZcXHVEREU4LVxcdURERURcXHVEREYwLVxcdURERkZdKXxcXHVEODNEXFx1REM2OVxcdTIwMEQoPzpcXHVEODNDW1xcdURGM0VcXHVERjczXFx1REY5M1xcdURGQTRcXHVERkE4XFx1REZFQlxcdURGRURdfFxcdUQ4M0RbXFx1RENCQlxcdURDQkNcXHVERDI3XFx1REQyQ1xcdURFODBcXHVERTkyXXxcXHUyNzY0XFx1RkUwRlxcdTIwMEQoPzpcXHVEODNEXFx1REM4QlxcdTIwMEQoPzpcXHVEODNEW1xcdURDNjhcXHVEQzY5XSl8XFx1RDgzRFtcXHVEQzY4XFx1REM2OV0pKXxcXHVEODNDXFx1RERGMSg/OlxcdUQ4M0NbXFx1RERFNi1cXHVEREU4XFx1RERFRVxcdURERjBcXHVEREY3LVxcdURERkJcXHVEREZFXSl8XFx1RDgzQ1xcdURERUYoPzpcXHVEODNDW1xcdURERUFcXHVEREYyXFx1RERGNFxcdURERjVdKXxcXHVEODNDXFx1RERFRCg/OlxcdUQ4M0NbXFx1RERGMFxcdURERjJcXHVEREYzXFx1RERGN1xcdURERjlcXHVEREZBXSl8XFx1RDgzQ1xcdURERUIoPzpcXHVEODNDW1xcdURERUUtXFx1RERGMFxcdURERjJcXHVEREY0XFx1RERGN10pfFsjXFwqMC05XVxcdUZFMEZcXHUyMEUzfFxcdUQ4M0NcXHVEREU3KD86XFx1RDgzQ1tcXHVEREU2XFx1RERFN1xcdURERTktXFx1RERFRlxcdURERjEtXFx1RERGNFxcdURERjYtXFx1RERGOVxcdURERkJcXHVEREZDXFx1RERGRVxcdURERkZdKXxcXHVEODNDXFx1RERFNig/OlxcdUQ4M0NbXFx1RERFOC1cXHVEREVDXFx1RERFRVxcdURERjFcXHVEREYyXFx1RERGNFxcdURERjYtXFx1RERGQVxcdURERkNcXHVEREZEXFx1RERGRl0pfFxcdUQ4M0NcXHVEREZGKD86XFx1RDgzQ1tcXHVEREU2XFx1RERGMlxcdURERkNdKXxcXHVEODNDXFx1RERGNSg/OlxcdUQ4M0NbXFx1RERFNlxcdURERUEtXFx1RERFRFxcdURERjAtXFx1RERGM1xcdURERjctXFx1RERGOVxcdURERkNcXHVEREZFXSl8XFx1RDgzQ1xcdURERkIoPzpcXHVEODNDW1xcdURERTZcXHVEREU4XFx1RERFQVxcdURERUNcXHVEREVFXFx1RERGM1xcdURERkFdKXxcXHVEODNDXFx1RERGMyg/OlxcdUQ4M0NbXFx1RERFNlxcdURERThcXHVEREVBLVxcdURERUNcXHVEREVFXFx1RERGMVxcdURERjRcXHVEREY1XFx1RERGN1xcdURERkFcXHVEREZGXSl8XFx1RDgzQ1xcdURGRjRcXHVEQjQwXFx1REM2N1xcdURCNDBcXHVEQzYyKD86XFx1REI0MFxcdURDNzdcXHVEQjQwXFx1REM2Q1xcdURCNDBcXHVEQzczfFxcdURCNDBcXHVEQzczXFx1REI0MFxcdURDNjNcXHVEQjQwXFx1REM3NHxcXHVEQjQwXFx1REM2NVxcdURCNDBcXHVEQzZFXFx1REI0MFxcdURDNjcpXFx1REI0MFxcdURDN0Z8XFx1RDgzRFxcdURDNjgoPzpcXHUyMDBEKD86XFx1Mjc2NFxcdUZFMEZcXHUyMDBEKD86XFx1RDgzRFxcdURDOEJcXHUyMDBEKT9cXHVEODNEXFx1REM2OHwoPzooPzpcXHVEODNEW1xcdURDNjhcXHVEQzY5XSlcXHUyMDBEKT9cXHVEODNEXFx1REM2NlxcdTIwMERcXHVEODNEXFx1REM2NnwoPzooPzpcXHVEODNEW1xcdURDNjhcXHVEQzY5XSlcXHUyMDBEKT9cXHVEODNEXFx1REM2N1xcdTIwMEQoPzpcXHVEODNEW1xcdURDNjZcXHVEQzY3XSl8XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGOTNcXHVERkE0XFx1REZBOFxcdURGRUJcXHVERkVEXXxcXHVEODNEW1xcdURDQkJcXHVEQ0JDXFx1REQyN1xcdUREMkNcXHVERTgwXFx1REU5Ml0pfCg/OlxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSlcXHUyMDBEKD86XFx1RDgzQ1tcXHVERjNFXFx1REY3M1xcdURGOTNcXHVERkE0XFx1REZBOFxcdURGRUJcXHVERkVEXXxcXHVEODNEW1xcdURDQkJcXHVEQ0JDXFx1REQyN1xcdUREMkNcXHVERTgwXFx1REU5Ml0pKXxcXHVEODNDXFx1RERGOCg/OlxcdUQ4M0NbXFx1RERFNi1cXHVEREVBXFx1RERFQy1cXHVEREY0XFx1RERGNy1cXHVEREY5XFx1RERGQlxcdURERkQtXFx1RERGRl0pfFxcdUQ4M0NcXHVEREYwKD86XFx1RDgzQ1tcXHVEREVBXFx1RERFQy1cXHVEREVFXFx1RERGMlxcdURERjNcXHVEREY1XFx1RERGN1xcdURERkNcXHVEREZFXFx1RERGRl0pfFxcdUQ4M0NcXHVEREZFKD86XFx1RDgzQ1tcXHVEREVBXFx1RERGOV0pfFxcdUQ4M0NcXHVEREVFKD86XFx1RDgzQ1tcXHVEREU4LVxcdURERUFcXHVEREYxLVxcdURERjRcXHVEREY2LVxcdURERjldKXxcXHVEODNDXFx1RERGOSg/OlxcdUQ4M0NbXFx1RERFNlxcdURERThcXHVEREU5XFx1RERFQi1cXHVEREVEXFx1RERFRi1cXHVEREY0XFx1RERGN1xcdURERjlcXHVEREZCXFx1RERGQ1xcdURERkZdKXxcXHVEODNDXFx1RERFQyg/OlxcdUQ4M0NbXFx1RERFNlxcdURERTdcXHVEREU5LVxcdURERUVcXHVEREYxLVxcdURERjNcXHVEREY1LVxcdURERkFcXHVEREZDXFx1RERGRV0pfFxcdUQ4M0NcXHVEREZBKD86XFx1RDgzQ1tcXHVEREU2XFx1RERFQ1xcdURERjJcXHVEREYzXFx1RERGOFxcdURERkVcXHVEREZGXSl8XFx1RDgzQ1xcdURERUEoPzpcXHVEODNDW1xcdURERTZcXHVEREU4XFx1RERFQVxcdURERUNcXHVEREVEXFx1RERGNy1cXHVEREZBXSl8XFx1RDgzQ1xcdURERkMoPzpcXHVEODNDW1xcdURERUJcXHVEREY4XSl8KD86XFx1MjZGOXxcXHVEODNDW1xcdURGQ0JcXHVERkNDXXxcXHVEODNEXFx1REQ3NSkoPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pfCg/OlxcdUQ4M0NbXFx1REZDM1xcdURGQzRcXHVERkNBXXxcXHVEODNEW1xcdURDNkVcXHVEQzcxXFx1REM3M1xcdURDNzdcXHVEQzgxXFx1REM4MlxcdURDODZcXHVEQzg3XFx1REU0NS1cXHVERTQ3XFx1REU0QlxcdURFNERcXHVERTRFXFx1REVBM1xcdURFQjQtXFx1REVCNl18XFx1RDgzRVtcXHVERDI2XFx1REQzNy1cXHVERDM5XFx1REQzRFxcdUREM0VcXHVEREQ2LVxcdURERERdKSg/OlxcdUQ4M0NbXFx1REZGQi1cXHVERkZGXSl8KD86W1xcdTI2MURcXHUyNzBBLVxcdTI3MERdfFxcdUQ4M0NbXFx1REY4NVxcdURGQzJcXHVERkM3XXxcXHVEODNEW1xcdURDNDJcXHVEQzQzXFx1REM0Ni1cXHVEQzUwXFx1REM2NlxcdURDNjdcXHVEQzcwXFx1REM3MlxcdURDNzQtXFx1REM3NlxcdURDNzhcXHVEQzdDXFx1REM4M1xcdURDODVcXHVEQ0FBXFx1REQ3NFxcdUREN0FcXHVERDkwXFx1REQ5NVxcdUREOTZcXHVERTRDXFx1REU0RlxcdURFQzBcXHVERUNDXXxcXHVEODNFW1xcdUREMTgtXFx1REQxQ1xcdUREMUVcXHVERDFGXFx1REQzMC1cXHVERDM2XFx1REREMS1cXHVEREQ1XSkoPzpcXHVEODNDW1xcdURGRkItXFx1REZGRl0pfFxcdUQ4M0RcXHVEQzY4KD86XFx1MjAwRCg/Oig/Oig/OlxcdUQ4M0RbXFx1REM2OFxcdURDNjldKVxcdTIwMEQpP1xcdUQ4M0RcXHVEQzY3fCg/Oig/OlxcdUQ4M0RbXFx1REM2OFxcdURDNjldKVxcdTIwMEQpP1xcdUQ4M0RcXHVEQzY2KXxcXHVEODNDW1xcdURGRkItXFx1REZGRl0pfCg/OltcXHUyNjFEXFx1MjZGOVxcdTI3MEEtXFx1MjcwRF18XFx1RDgzQ1tcXHVERjg1XFx1REZDMi1cXHVERkM0XFx1REZDN1xcdURGQ0EtXFx1REZDQ118XFx1RDgzRFtcXHVEQzQyXFx1REM0M1xcdURDNDYtXFx1REM1MFxcdURDNjYtXFx1REM2OVxcdURDNkVcXHVEQzcwLVxcdURDNzhcXHVEQzdDXFx1REM4MS1cXHVEQzgzXFx1REM4NS1cXHVEQzg3XFx1RENBQVxcdURENzRcXHVERDc1XFx1REQ3QVxcdUREOTBcXHVERDk1XFx1REQ5NlxcdURFNDUtXFx1REU0N1xcdURFNEItXFx1REU0RlxcdURFQTNcXHVERUI0LVxcdURFQjZcXHVERUMwXFx1REVDQ118XFx1RDgzRVtcXHVERDE4LVxcdUREMUNcXHVERDFFXFx1REQxRlxcdUREMjZcXHVERDMwLVxcdUREMzlcXHVERDNEXFx1REQzRVxcdURERDEtXFx1RERERF0pKD86XFx1RDgzQ1tcXHVERkZCLVxcdURGRkZdKT98KD86W1xcdTIzMUFcXHUyMzFCXFx1MjNFOS1cXHUyM0VDXFx1MjNGMFxcdTIzRjNcXHUyNUZEXFx1MjVGRVxcdTI2MTRcXHUyNjE1XFx1MjY0OC1cXHUyNjUzXFx1MjY3RlxcdTI2OTNcXHUyNkExXFx1MjZBQVxcdTI2QUJcXHUyNkJEXFx1MjZCRVxcdTI2QzRcXHUyNkM1XFx1MjZDRVxcdTI2RDRcXHUyNkVBXFx1MjZGMlxcdTI2RjNcXHUyNkY1XFx1MjZGQVxcdTI2RkRcXHUyNzA1XFx1MjcwQVxcdTI3MEJcXHUyNzI4XFx1Mjc0Q1xcdTI3NEVcXHUyNzUzLVxcdTI3NTVcXHUyNzU3XFx1Mjc5NS1cXHUyNzk3XFx1MjdCMFxcdTI3QkZcXHUyQjFCXFx1MkIxQ1xcdTJCNTBcXHUyQjU1XXxcXHVEODNDW1xcdURDMDRcXHVEQ0NGXFx1REQ4RVxcdUREOTEtXFx1REQ5QVxcdURERTYtXFx1RERGRlxcdURFMDFcXHVERTFBXFx1REUyRlxcdURFMzItXFx1REUzNlxcdURFMzgtXFx1REUzQVxcdURFNTBcXHVERTUxXFx1REYwMC1cXHVERjIwXFx1REYyRC1cXHVERjM1XFx1REYzNy1cXHVERjdDXFx1REY3RS1cXHVERjkzXFx1REZBMC1cXHVERkNBXFx1REZDRi1cXHVERkQzXFx1REZFMC1cXHVERkYwXFx1REZGNFxcdURGRjgtXFx1REZGRl18XFx1RDgzRFtcXHVEQzAwLVxcdURDM0VcXHVEQzQwXFx1REM0Mi1cXHVEQ0ZDXFx1RENGRi1cXHVERDNEXFx1REQ0Qi1cXHVERDRFXFx1REQ1MC1cXHVERDY3XFx1REQ3QVxcdUREOTVcXHVERDk2XFx1RERBNFxcdURERkItXFx1REU0RlxcdURFODAtXFx1REVDNVxcdURFQ0NcXHVERUQwLVxcdURFRDJcXHVERUVCXFx1REVFQ1xcdURFRjQtXFx1REVGOF18XFx1RDgzRVtcXHVERDEwLVxcdUREM0FcXHVERDNDLVxcdUREM0VcXHVERDQwLVxcdURENDVcXHVERDQ3LVxcdURENENcXHVERDUwLVxcdURENkJcXHVERDgwLVxcdUREOTdcXHVEREMwXFx1REREMC1cXHVEREU2XSl8KD86WyNcXCowLTlcXHhBOVxceEFFXFx1MjAzQ1xcdTIwNDlcXHUyMTIyXFx1MjEzOVxcdTIxOTQtXFx1MjE5OVxcdTIxQTlcXHUyMUFBXFx1MjMxQVxcdTIzMUJcXHUyMzI4XFx1MjNDRlxcdTIzRTktXFx1MjNGM1xcdTIzRjgtXFx1MjNGQVxcdTI0QzJcXHUyNUFBXFx1MjVBQlxcdTI1QjZcXHUyNUMwXFx1MjVGQi1cXHUyNUZFXFx1MjYwMC1cXHUyNjA0XFx1MjYwRVxcdTI2MTFcXHUyNjE0XFx1MjYxNVxcdTI2MThcXHUyNjFEXFx1MjYyMFxcdTI2MjJcXHUyNjIzXFx1MjYyNlxcdTI2MkFcXHUyNjJFXFx1MjYyRlxcdTI2MzgtXFx1MjYzQVxcdTI2NDBcXHUyNjQyXFx1MjY0OC1cXHUyNjUzXFx1MjY2MFxcdTI2NjNcXHUyNjY1XFx1MjY2NlxcdTI2NjhcXHUyNjdCXFx1MjY3RlxcdTI2OTItXFx1MjY5N1xcdTI2OTlcXHUyNjlCXFx1MjY5Q1xcdTI2QTBcXHUyNkExXFx1MjZBQVxcdTI2QUJcXHUyNkIwXFx1MjZCMVxcdTI2QkRcXHUyNkJFXFx1MjZDNFxcdTI2QzVcXHUyNkM4XFx1MjZDRVxcdTI2Q0ZcXHUyNkQxXFx1MjZEM1xcdTI2RDRcXHUyNkU5XFx1MjZFQVxcdTI2RjAtXFx1MjZGNVxcdTI2RjctXFx1MjZGQVxcdTI2RkRcXHUyNzAyXFx1MjcwNVxcdTI3MDgtXFx1MjcwRFxcdTI3MEZcXHUyNzEyXFx1MjcxNFxcdTI3MTZcXHUyNzFEXFx1MjcyMVxcdTI3MjhcXHUyNzMzXFx1MjczNFxcdTI3NDRcXHUyNzQ3XFx1Mjc0Q1xcdTI3NEVcXHUyNzUzLVxcdTI3NTVcXHUyNzU3XFx1Mjc2M1xcdTI3NjRcXHUyNzk1LVxcdTI3OTdcXHUyN0ExXFx1MjdCMFxcdTI3QkZcXHUyOTM0XFx1MjkzNVxcdTJCMDUtXFx1MkIwN1xcdTJCMUJcXHUyQjFDXFx1MkI1MFxcdTJCNTVcXHUzMDMwXFx1MzAzRFxcdTMyOTdcXHUzMjk5XXxcXHVEODNDW1xcdURDMDRcXHVEQ0NGXFx1REQ3MFxcdURENzFcXHVERDdFXFx1REQ3RlxcdUREOEVcXHVERDkxLVxcdUREOUFcXHVEREU2LVxcdURERkZcXHVERTAxXFx1REUwMlxcdURFMUFcXHVERTJGXFx1REUzMi1cXHVERTNBXFx1REU1MFxcdURFNTFcXHVERjAwLVxcdURGMjFcXHVERjI0LVxcdURGOTNcXHVERjk2XFx1REY5N1xcdURGOTktXFx1REY5QlxcdURGOUUtXFx1REZGMFxcdURGRjMtXFx1REZGNVxcdURGRjctXFx1REZGRl18XFx1RDgzRFtcXHVEQzAwLVxcdURDRkRcXHVEQ0ZGLVxcdUREM0RcXHVERDQ5LVxcdURENEVcXHVERDUwLVxcdURENjdcXHVERDZGXFx1REQ3MFxcdURENzMtXFx1REQ3QVxcdUREODdcXHVERDhBLVxcdUREOERcXHVERDkwXFx1REQ5NVxcdUREOTZcXHVEREE0XFx1RERBNVxcdUREQThcXHVEREIxXFx1RERCMlxcdUREQkNcXHVEREMyLVxcdUREQzRcXHVEREQxLVxcdURERDNcXHVERERDLVxcdUREREVcXHVEREUxXFx1RERFM1xcdURERThcXHVEREVGXFx1RERGM1xcdURERkEtXFx1REU0RlxcdURFODAtXFx1REVDNVxcdURFQ0ItXFx1REVEMlxcdURFRTAtXFx1REVFNVxcdURFRTlcXHVERUVCXFx1REVFQ1xcdURFRjBcXHVERUYzLVxcdURFRjhdfFxcdUQ4M0VbXFx1REQxMC1cXHVERDNBXFx1REQzQy1cXHVERDNFXFx1REQ0MC1cXHVERDQ1XFx1REQ0Ny1cXHVERDRDXFx1REQ1MC1cXHVERDZCXFx1REQ4MC1cXHVERDk3XFx1RERDMFxcdURERDAtXFx1RERFNl0pXFx1RkUwRikvO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHQoZSkge1xuICB2YXIgdHlwZSA9IGUubm9kZVR5cGUsXG4gICAgICByZXN1bHQgPSBcIlwiO1xuXG4gIGlmICh0eXBlID09PSAxIHx8IHR5cGUgPT09IDkgfHwgdHlwZSA9PT0gMTEpIHtcbiAgICBpZiAodHlwZW9mIGUudGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBlLnRleHRDb250ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGUgPSBlLmZpcnN0Q2hpbGQ7IGU7IGUgPSBlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHJlc3VsdCArPSBnZXRUZXh0KGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSAzIHx8IHR5cGUgPT09IDQpIHtcbiAgICByZXR1cm4gZS5ub2RlVmFsdWU7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0SW5uZXJIVE1MKGVsZW1lbnQsIGRlbGltaXRlciwgdHJpbSkge1xuICB2YXIgbm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZCxcbiAgICAgIHJlc3VsdCA9IFtdO1xuXG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIHJlc3VsdC5wdXNoLmFwcGx5KHJlc3VsdCwgZW1vamlTYWZlU3BsaXQoKG5vZGUubm9kZVZhbHVlICsgXCJcIikucmVwbGFjZSgvXlxcbisvZywgXCJcIikucmVwbGFjZSgvXFxzKy9nLCBcIiBcIiksIGRlbGltaXRlciwgdHJpbSkpO1xuICAgIH0gZWxzZSBpZiAoKG5vZGUubm9kZU5hbWUgKyBcIlwiKS50b0xvd2VyQ2FzZSgpID09PSBcImJyXCIpIHtcbiAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gKz0gXCI8YnI+XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKG5vZGUub3V0ZXJIVE1MKTtcbiAgICB9XG5cbiAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4vKlxuLy9zbWFsbGVyIGtiIHZlcnNpb24gdGhhdCBvbmx5IGhhbmRsZXMgdGhlIHNpbXBsZXIgZW1vamkncywgd2hpY2ggaXMgb2Z0ZW4gcGVyZmVjdGx5IGFkZXF1YXRlLlxuXG5sZXQgX2Vtb2ppID0gXCJbXFx1RTAwMC1cXHVGOEZGXXxcXHVEODNDW1xcdURDMDAtXFx1REZGRl18XFx1RDgzRFtcXHVEQzAwLVxcdURGRkZdfFtcXHUyNjk0LVxcdTI2OTddfFxcdUQ4M0VbXFx1REQxMC1cXHVERDVEXXxbXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdXCIsXG5cdF9lbW9qaUV4cCA9IG5ldyBSZWdFeHAoX2Vtb2ppKSxcblx0X2Vtb2ppQW5kQ2hhcnNFeHAgPSBuZXcgUmVnRXhwKF9lbW9qaSArIFwifC5cIiwgXCJnXCIpLFxuXHRfZW1vamlTYWZlU3BsaXQgPSAodGV4dCwgZGVsaW1pdGVyLCB0cmltKSA9PiB7XG5cdFx0aWYgKHRyaW0pIHtcblx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoX3RyaW1FeHAsIFwiXCIpO1xuXHRcdH1cblx0XHRyZXR1cm4gKChkZWxpbWl0ZXIgPT09IFwiXCIgfHwgIWRlbGltaXRlcikgJiYgX2Vtb2ppRXhwLnRlc3QodGV4dCkpID8gdGV4dC5tYXRjaChfZW1vamlBbmRDaGFyc0V4cCkgOiB0ZXh0LnNwbGl0KGRlbGltaXRlciB8fCBcIlwiKTtcblx0fTtcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZW1vamlTYWZlU3BsaXQodGV4dCwgZGVsaW1pdGVyLCB0cmltKSB7XG4gIHRleHQgKz0gXCJcIjsgLy8gbWFrZSBzdXJlIGl0J3MgY2FzdCBhcyBhIHN0cmluZy4gU29tZW9uZSBtYXkgcGFzcyBpbiBhIG51bWJlci5cblxuICBpZiAodHJpbSkge1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoX3RyaW1FeHAsIFwiXCIpO1xuICB9XG5cbiAgaWYgKGRlbGltaXRlciAmJiBkZWxpbWl0ZXIgIT09IFwiXCIpIHtcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKS5yZXBsYWNlKC88L2csIFwiJmx0O1wiKS5zcGxpdChkZWxpbWl0ZXIpO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgbCA9IHRleHQubGVuZ3RoLFxuICAgICAgaSA9IDAsXG4gICAgICBqLFxuICAgICAgY2hhcmFjdGVyO1xuXG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgY2hhcmFjdGVyID0gdGV4dC5jaGFyQXQoaSk7XG5cbiAgICBpZiAoY2hhcmFjdGVyLmNoYXJDb2RlQXQoMCkgPj0gMHhEODAwICYmIGNoYXJhY3Rlci5jaGFyQ29kZUF0KDApIDw9IDB4REJGRiB8fCB0ZXh0LmNoYXJDb2RlQXQoaSArIDEpID49IDB4RkUwMCAmJiB0ZXh0LmNoYXJDb2RlQXQoaSArIDEpIDw9IDB4RkUwRikge1xuICAgICAgLy9zcGVjaWFsIGVtb2ppIGNoYXJhY3RlcnMgdXNlIDIgb3IgNCB1bmljb2RlIGNoYXJhY3RlcnMgdGhhdCB3ZSBtdXN0IGtlZXAgdG9nZXRoZXIuXG4gICAgICBqID0gKCh0ZXh0LnN1YnN0cihpLCAxMikuc3BsaXQoZW1vamlFeHApIHx8IFtdKVsxXSB8fCBcIlwiKS5sZW5ndGggfHwgMjtcbiAgICAgIGNoYXJhY3RlciA9IHRleHQuc3Vic3RyKGksIGopO1xuICAgICAgcmVzdWx0LmVtb2ppID0gMTtcbiAgICAgIGkgKz0gaiAtIDE7XG4gICAgfVxuXG4gICAgcmVzdWx0LnB1c2goY2hhcmFjdGVyID09PSBcIj5cIiA/IFwiJmd0O1wiIDogY2hhcmFjdGVyID09PSBcIjxcIiA/IFwiJmx0O1wiIDogY2hhcmFjdGVyKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG4vKiFcbiAqIFNwbGl0VGV4dDogMy4yLjZcbiAqIGh0dHBzOi8vZ3JlZW5zb2NrLmNvbVxuICpcbiAqIEBsaWNlbnNlIENvcHlyaWdodCAyMDA4LTIwMjAsIEdyZWVuU29jay4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFN1YmplY3QgdG8gdGhlIHRlcm1zIGF0IGh0dHBzOi8vZ3JlZW5zb2NrLmNvbS9zdGFuZGFyZC1saWNlbnNlIG9yIGZvclxuICogQ2x1YiBHcmVlblNvY2sgbWVtYmVycywgdGhlIGFncmVlbWVudCBpc3N1ZWQgd2l0aCB0aGF0IG1lbWJlcnNoaXAuXG4gKiBAYXV0aG9yOiBKYWNrIERveWxlLCBqYWNrQGdyZWVuc29jay5jb21cbiovXG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5pbXBvcnQgeyBlbW9qaUV4cCwgZ2V0VGV4dCB9IGZyb20gXCIuLi91dGlscy9zdHJpbmdzLmpzXCI7XG5cbnZhciBfZG9jLFxuICAgIF93aW4sXG4gICAgX2NvcmVJbml0dGVkLFxuICAgIF9zdHJpcEV4cCA9IC8oPzpcXHJ8XFxufFxcdFxcdCkvZyxcbiAgICAvL2ZpbmQgY2FycmlhZ2UgcmV0dXJucywgbmV3IGxpbmUgZmVlZHMgYW5kIGRvdWJsZS10YWJzLlxuX211bHRpcGxlU3BhY2VzRXhwID0gLyg/Olxcc1xccyspL2csXG4gICAgX2luaXRDb3JlID0gZnVuY3Rpb24gX2luaXRDb3JlKCkge1xuICBfZG9jID0gZG9jdW1lbnQ7XG4gIF93aW4gPSB3aW5kb3c7XG4gIF9jb3JlSW5pdHRlZCA9IDE7XG59LFxuICAgIF9ib251c1ZhbGlkYXRlZCA9IDEsXG4gICAgLy88bmFtZT5TcGxpdFRleHQ8L25hbWU+XG5fZ2V0Q29tcHV0ZWRTdHlsZSA9IGZ1bmN0aW9uIF9nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpIHtcbiAgcmV0dXJuIF93aW4uZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbn0sXG4gICAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5LFxuICAgIF9zbGljZSA9IFtdLnNsaWNlLFxuICAgIF90b0FycmF5ID0gZnVuY3Rpb24gX3RvQXJyYXkodmFsdWUsIGxlYXZlU3RyaW5ncykge1xuICAvL3Rha2VzIGFueSB2YWx1ZSBhbmQgcmV0dXJucyBhbiBhcnJheS4gSWYgaXQncyBhIHN0cmluZyAoYW5kIGxlYXZlU3RyaW5ncyBpc24ndCB0cnVlKSwgaXQnbGwgdXNlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoKSBhbmQgY29udmVydCB0aGF0IHRvIGFuIGFycmF5LiBJdCdsbCBhbHNvIGFjY2VwdCBpdGVyYWJsZXMgbGlrZSBqUXVlcnkgb2JqZWN0cy5cbiAgdmFyIHR5cGU7XG4gIHJldHVybiBfaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6ICh0eXBlID0gX3R5cGVvZih2YWx1ZSkpID09PSBcInN0cmluZ1wiICYmICFsZWF2ZVN0cmluZ3MgJiYgdmFsdWUgPyBfc2xpY2UuY2FsbChfZG9jLnF1ZXJ5U2VsZWN0b3JBbGwodmFsdWUpLCAwKSA6IHZhbHVlICYmIHR5cGUgPT09IFwib2JqZWN0XCIgJiYgXCJsZW5ndGhcIiBpbiB2YWx1ZSA/IF9zbGljZS5jYWxsKHZhbHVlLCAwKSA6IHZhbHVlID8gW3ZhbHVlXSA6IFtdO1xufSxcbiAgICBfaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uIF9pc0Fic29sdXRlKHZhcnMpIHtcbiAgcmV0dXJuIHZhcnMucG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCB2YXJzLmFic29sdXRlID09PSB0cnVlO1xufSxcbiAgICAvL3NvbWUgY2hhcmFjdGVycyBhcmUgY29tYmluaW5nIG1hcmtzICh0aGluayBkaWFjcml0aWNzL2FjY2VudHMgaW4gRXVyb3BlYW4gbGFuZ3VhZ2VzKSB3aGljaCBpbnZvbHZlIDIgb3IgNCBjaGFyYWN0ZXJzIHRoYXQgY29tYmluZSBpbiB0aGUgYnJvd3NlciB0byBmb3JtIGEgc2luZ2xlIGNoYXJhY3Rlci4gUGFzcyBpbiB0aGUgcmVtYWluaW5nIHRleHQgYW5kIGFuIGFycmF5IG9mIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgdG8gc2VhcmNoIGZvciBhbmQgaWYgdGhlIHRleHQgc3RhcnRzIHdpdGggb25lIG9mIHRob3NlIHNwZWNpYWwgY2hhcmFjdGVycywgaXQnbGwgc3BpdCBiYWNrIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyB0byByZXRhaW4gKG9mdGVuIDIgb3IgNCkuIFVzZWQgaW4gdGhlIHNwZWNpYWxDaGFycyBmZWF0dXJlcyB0aGF0IHdhcyBpbnRyb2R1Y2VkIGluIDAuNi4wLlxuX2ZpbmRTcGVjaWFsQ2hhcnMgPSBmdW5jdGlvbiBfZmluZFNwZWNpYWxDaGFycyh0ZXh0LCBjaGFycykge1xuICB2YXIgaSA9IGNoYXJzLmxlbmd0aCxcbiAgICAgIHM7XG5cbiAgd2hpbGUgKC0taSA+IC0xKSB7XG4gICAgcyA9IGNoYXJzW2ldO1xuXG4gICAgaWYgKHRleHQuc3Vic3RyKDAsIHMubGVuZ3RoKSA9PT0gcykge1xuICAgICAgcmV0dXJuIHMubGVuZ3RoO1xuICAgIH1cbiAgfVxufSxcbiAgICBfZGl2U3RhcnQgPSBcIiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7J1wiLFxuICAgIF9jc3NDbGFzc0Z1bmMgPSBmdW5jdGlvbiBfY3NzQ2xhc3NGdW5jKGNzc0NsYXNzLCB0YWcpIHtcbiAgaWYgKGNzc0NsYXNzID09PSB2b2lkIDApIHtcbiAgICBjc3NDbGFzcyA9IFwiXCI7XG4gIH1cblxuICB2YXIgaXRlcmF0ZSA9IH5jc3NDbGFzcy5pbmRleE9mKFwiKytcIiksXG4gICAgICBudW0gPSAxO1xuXG4gIGlmIChpdGVyYXRlKSB7XG4gICAgY3NzQ2xhc3MgPSBjc3NDbGFzcy5zcGxpdChcIisrXCIpLmpvaW4oXCJcIik7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcIjxcIiArIHRhZyArIF9kaXZTdGFydCArIChjc3NDbGFzcyA/IFwiIGNsYXNzPSdcIiArIGNzc0NsYXNzICsgKGl0ZXJhdGUgPyBudW0rKyA6IFwiXCIpICsgXCInPlwiIDogXCI+XCIpO1xuICB9O1xufSxcbiAgICBfc3dhcFRleHQgPSBmdW5jdGlvbiBfc3dhcFRleHQoZWxlbWVudCwgb2xkVGV4dCwgbmV3VGV4dCkge1xuICB2YXIgdHlwZSA9IGVsZW1lbnQubm9kZVR5cGU7XG5cbiAgaWYgKHR5cGUgPT09IDEgfHwgdHlwZSA9PT0gOSB8fCB0eXBlID09PSAxMSkge1xuICAgIGZvciAoZWxlbWVudCA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgIF9zd2FwVGV4dChlbGVtZW50LCBvbGRUZXh0LCBuZXdUZXh0KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gMyB8fCB0eXBlID09PSA0KSB7XG4gICAgZWxlbWVudC5ub2RlVmFsdWUgPSBlbGVtZW50Lm5vZGVWYWx1ZS5zcGxpdChvbGRUZXh0KS5qb2luKG5ld1RleHQpO1xuICB9XG59LFxuICAgIF9wdXNoUmV2ZXJzZWQgPSBmdW5jdGlvbiBfcHVzaFJldmVyc2VkKGEsIG1lcmdlKSB7XG4gIHZhciBpID0gbWVyZ2UubGVuZ3RoO1xuXG4gIHdoaWxlICgtLWkgPiAtMSkge1xuICAgIGEucHVzaChtZXJnZVtpXSk7XG4gIH1cbn0sXG4gICAgX2lzQmVmb3JlV29yZERlbGltaXRlciA9IGZ1bmN0aW9uIF9pc0JlZm9yZVdvcmREZWxpbWl0ZXIoZSwgcm9vdCwgd29yZERlbGltaXRlcikge1xuICB2YXIgbmV4dDtcblxuICB3aGlsZSAoZSAmJiBlICE9PSByb290KSB7XG4gICAgbmV4dCA9IGUuX25leHQgfHwgZS5uZXh0U2libGluZztcblxuICAgIGlmIChuZXh0KSB7XG4gICAgICByZXR1cm4gbmV4dC50ZXh0Q29udGVudC5jaGFyQXQoMCkgPT09IHdvcmREZWxpbWl0ZXI7XG4gICAgfVxuXG4gICAgZSA9IGUucGFyZW50Tm9kZSB8fCBlLl9wYXJlbnQ7XG4gIH1cbn0sXG4gICAgX2RlV29yZGlmeSA9IGZ1bmN0aW9uIF9kZVdvcmRpZnkoZSkge1xuICB2YXIgY2hpbGRyZW4gPSBfdG9BcnJheShlLmNoaWxkTm9kZXMpLFxuICAgICAgbCA9IGNoaWxkcmVuLmxlbmd0aCxcbiAgICAgIGksXG4gICAgICBjaGlsZDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcblxuICAgIGlmIChjaGlsZC5faXNTcGxpdCkge1xuICAgICAgX2RlV29yZGlmeShjaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpICYmIGNoaWxkLnByZXZpb3VzU2libGluZy5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgICBjaGlsZC5wcmV2aW91c1NpYmxpbmcubm9kZVZhbHVlICs9IGNoaWxkLm5vZGVUeXBlID09PSAzID8gY2hpbGQubm9kZVZhbHVlIDogY2hpbGQuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkLm5vZGVUeXBlICE9PSAzKSB7XG4gICAgICAgIGUuaW5zZXJ0QmVmb3JlKGNoaWxkLmZpcnN0Q2hpbGQsIGNoaWxkKTtcbiAgICAgIH1cblxuICAgICAgZS5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG59LFxuICAgIF9nZXRTdHlsZUFzTnVtYmVyID0gZnVuY3Rpb24gX2dldFN0eWxlQXNOdW1iZXIobmFtZSwgY29tcHV0ZWRTdHlsZSkge1xuICByZXR1cm4gcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlW25hbWVdKSB8fCAwO1xufSxcbiAgICBfc2V0UG9zaXRpb25zQWZ0ZXJTcGxpdCA9IGZ1bmN0aW9uIF9zZXRQb3NpdGlvbnNBZnRlclNwbGl0KGVsZW1lbnQsIHZhcnMsIGFsbENoYXJzLCBhbGxXb3JkcywgYWxsTGluZXMsIG9yaWdXaWR0aCwgb3JpZ0hlaWdodCkge1xuICB2YXIgY3MgPSBfZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSxcbiAgICAgIHBhZGRpbmdMZWZ0ID0gX2dldFN0eWxlQXNOdW1iZXIoXCJwYWRkaW5nTGVmdFwiLCBjcyksXG4gICAgICBsaW5lT2Zmc2V0WSA9IC05OTksXG4gICAgICBib3JkZXJUb3BBbmRCb3R0b20gPSBfZ2V0U3R5bGVBc051bWJlcihcImJvcmRlckJvdHRvbVdpZHRoXCIsIGNzKSArIF9nZXRTdHlsZUFzTnVtYmVyKFwiYm9yZGVyVG9wV2lkdGhcIiwgY3MpLFxuICAgICAgYm9yZGVyTGVmdEFuZFJpZ2h0ID0gX2dldFN0eWxlQXNOdW1iZXIoXCJib3JkZXJMZWZ0V2lkdGhcIiwgY3MpICsgX2dldFN0eWxlQXNOdW1iZXIoXCJib3JkZXJSaWdodFdpZHRoXCIsIGNzKSxcbiAgICAgIHBhZFRvcEFuZEJvdHRvbSA9IF9nZXRTdHlsZUFzTnVtYmVyKFwicGFkZGluZ1RvcFwiLCBjcykgKyBfZ2V0U3R5bGVBc051bWJlcihcInBhZGRpbmdCb3R0b21cIiwgY3MpLFxuICAgICAgcGFkTGVmdEFuZFJpZ2h0ID0gX2dldFN0eWxlQXNOdW1iZXIoXCJwYWRkaW5nTGVmdFwiLCBjcykgKyBfZ2V0U3R5bGVBc051bWJlcihcInBhZGRpbmdSaWdodFwiLCBjcyksXG4gICAgICBsaW5lVGhyZXNob2xkID0gX2dldFN0eWxlQXNOdW1iZXIoXCJmb250U2l6ZVwiLCBjcykgKiAwLjIsXG4gICAgICB0ZXh0QWxpZ24gPSBjcy50ZXh0QWxpZ24sXG4gICAgICBjaGFyQXJyYXkgPSBbXSxcbiAgICAgIHdvcmRBcnJheSA9IFtdLFxuICAgICAgbGluZUFycmF5ID0gW10sXG4gICAgICB3b3JkRGVsaW1pdGVyID0gdmFycy53b3JkRGVsaW1pdGVyIHx8IFwiIFwiLFxuICAgICAgdGFnID0gdmFycy50YWcgPyB2YXJzLnRhZyA6IHZhcnMuc3BhbiA/IFwic3BhblwiIDogXCJkaXZcIixcbiAgICAgIHR5cGVzID0gdmFycy50eXBlIHx8IHZhcnMuc3BsaXQgfHwgXCJjaGFycyx3b3JkcyxsaW5lc1wiLFxuICAgICAgbGluZXMgPSBhbGxMaW5lcyAmJiB+dHlwZXMuaW5kZXhPZihcImxpbmVzXCIpID8gW10gOiBudWxsLFxuICAgICAgd29yZHMgPSB+dHlwZXMuaW5kZXhPZihcIndvcmRzXCIpLFxuICAgICAgY2hhcnMgPSB+dHlwZXMuaW5kZXhPZihcImNoYXJzXCIpLFxuICAgICAgYWJzb2x1dGUgPSBfaXNBYnNvbHV0ZSh2YXJzKSxcbiAgICAgIGxpbmVzQ2xhc3MgPSB2YXJzLmxpbmVzQ2xhc3MsXG4gICAgICBpdGVyYXRlTGluZSA9IH4obGluZXNDbGFzcyB8fCBcIlwiKS5pbmRleE9mKFwiKytcIiksXG4gICAgICBzcGFjZU5vZGVzVG9SZW1vdmUgPSBbXSxcbiAgICAgIGksXG4gICAgICBqLFxuICAgICAgbCxcbiAgICAgIG5vZGUsXG4gICAgICBub2RlcyxcbiAgICAgIGlzQ2hpbGQsXG4gICAgICBjdXJMaW5lLFxuICAgICAgYWRkV29yZFNwYWNlcyxcbiAgICAgIHN0eWxlLFxuICAgICAgbGluZU5vZGUsXG4gICAgICBsaW5lV2lkdGgsXG4gICAgICBvZmZzZXQ7XG5cbiAgaWYgKGl0ZXJhdGVMaW5lKSB7XG4gICAgbGluZXNDbGFzcyA9IGxpbmVzQ2xhc3Muc3BsaXQoXCIrK1wiKS5qb2luKFwiXCIpO1xuICB9IC8vY29weSBhbGwgdGhlIGRlc2NlbmRhbnQgbm9kZXMgaW50byBhbiBhcnJheSAod2UgY2FuJ3QgdXNlIGEgcmVndWxhciBub2RlTGlzdCBiZWNhdXNlIGl0J3MgbGl2ZSBhbmQgd2UgbWF5IG5lZWQgdG8gcmVuZXN0IHRoaW5ncylcblxuXG4gIGogPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKTtcbiAgbCA9IGoubGVuZ3RoO1xuICBub2RlcyA9IFtdO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBub2Rlc1tpXSA9IGpbaV07XG4gIH0gLy9mb3IgYWJzb2x1dGUgcG9zaXRpb25pbmcsIHdlIG5lZWQgdG8gcmVjb3JkIHRoZSB4L3kgb2Zmc2V0cyBhbmQgd2lkdGgvaGVpZ2h0IGZvciBldmVyeSA8ZGl2Pi4gQW5kIGV2ZW4gaWYgd2UncmUgbm90IHBvc2l0aW9uaW5nIHRoaW5ncyBhYnNvbHV0ZWx5LCBpbiBvcmRlciB0byBhY2NvbW1vZGF0ZSBsaW5lcywgd2UgbXVzdCBmaWd1cmUgb3V0IHdoZXJlIHRoZSB5IG9mZnNldCBjaGFuZ2VzIHNvIHRoYXQgd2UgY2FuIHNlbnNlIHdoZXJlIHRoZSBsaW5lcyBicmVhaywgYW5kIHdlIHBvcHVsYXRlIHRoZSBsaW5lcyBhcnJheS5cblxuXG4gIGlmIChsaW5lcyB8fCBhYnNvbHV0ZSkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgIGlzQ2hpbGQgPSBub2RlLnBhcmVudE5vZGUgPT09IGVsZW1lbnQ7XG5cbiAgICAgIGlmIChpc0NoaWxkIHx8IGFic29sdXRlIHx8IGNoYXJzICYmICF3b3Jkcykge1xuICAgICAgICBvZmZzZXQgPSBub2RlLm9mZnNldFRvcDtcblxuICAgICAgICBpZiAobGluZXMgJiYgaXNDaGlsZCAmJiBNYXRoLmFicyhvZmZzZXQgLSBsaW5lT2Zmc2V0WSkgPiBsaW5lVGhyZXNob2xkICYmIChub2RlLm5vZGVOYW1lICE9PSBcIkJSXCIgfHwgaSA9PT0gMCkpIHtcbiAgICAgICAgICAvL3dlIGZvdW5kIHNvbWUgcmFyZSBvY2Nhc2lvbnMgd2hlcmUgYSBjZXJ0YWluIGNoYXJhY3RlciBsaWtlICYjODIwOTsgY291bGQgY2F1c2UgdGhlIG9mZnNldFRvcCB0byBiZSBvZmYgYnkgMSBwaXhlbCwgc28gd2UgYnVpbGQgaW4gYSB0aHJlc2hvbGQuXG4gICAgICAgICAgY3VyTGluZSA9IFtdO1xuICAgICAgICAgIGxpbmVzLnB1c2goY3VyTGluZSk7XG4gICAgICAgICAgbGluZU9mZnNldFkgPSBvZmZzZXQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgICAvL3JlY29yZCBvZmZzZXQgeCBhbmQgeSwgYXMgd2VsbCBhcyB3aWR0aCBhbmQgaGVpZ2h0IHNvIHRoYXQgd2UgY2FuIGFjY2VzcyB0aGVtIGxhdGVyIGZvciBwb3NpdGlvbmluZy4gR3JhYmJpbmcgdGhlbSBhdCBvbmNlIGVuc3VyZXMgd2UgZG9uJ3QgdHJpZ2dlciBhIGJyb3dzZXIgcGFpbnQgJiB3ZSBtYXhpbWl6ZSBwZXJmb3JtYW5jZS5cbiAgICAgICAgICBub2RlLl94ID0gbm9kZS5vZmZzZXRMZWZ0O1xuICAgICAgICAgIG5vZGUuX3kgPSBvZmZzZXQ7XG4gICAgICAgICAgbm9kZS5fdyA9IG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgbm9kZS5faCA9IG5vZGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxpbmVzKSB7XG4gICAgICAgICAgaWYgKG5vZGUuX2lzU3BsaXQgJiYgaXNDaGlsZCB8fCAhY2hhcnMgJiYgaXNDaGlsZCB8fCB3b3JkcyAmJiBpc0NoaWxkIHx8ICF3b3JkcyAmJiBub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSA9PT0gZWxlbWVudCAmJiAhbm9kZS5wYXJlbnROb2RlLl9pc1NwbGl0KSB7XG4gICAgICAgICAgICBjdXJMaW5lLnB1c2gobm9kZSk7XG4gICAgICAgICAgICBub2RlLl94IC09IHBhZGRpbmdMZWZ0O1xuXG4gICAgICAgICAgICBpZiAoX2lzQmVmb3JlV29yZERlbGltaXRlcihub2RlLCBlbGVtZW50LCB3b3JkRGVsaW1pdGVyKSkge1xuICAgICAgICAgICAgICBub2RlLl93b3JkRW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PT0gXCJCUlwiICYmIChub2RlLm5leHRTaWJsaW5nICYmIG5vZGUubmV4dFNpYmxpbmcubm9kZU5hbWUgPT09IFwiQlJcIiB8fCBpID09PSAwKSkge1xuICAgICAgICAgICAgLy90d28gY29uc2VjdXRpdmUgPGJyPiB0YWdzIHNpZ25pZnkgYSBuZXcgW2VtcHR5XSBsaW5lLiBBbHNvLCBpZiB0aGUgZW50aXJlIGJsb2NrIG9mIGNvbnRlbnQgU1RBUlRTIHdpdGggYSA8YnI+LCBhZGQgYSBsaW5lLlxuICAgICAgICAgICAgbGluZXMucHVzaChbXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIG5vZGUgPSBub2Rlc1tpXTtcbiAgICBpc0NoaWxkID0gbm9kZS5wYXJlbnROb2RlID09PSBlbGVtZW50O1xuXG4gICAgaWYgKG5vZGUubm9kZU5hbWUgPT09IFwiQlJcIikge1xuICAgICAgaWYgKGxpbmVzIHx8IGFic29sdXRlKSB7XG4gICAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBub2Rlcy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgbC0tO1xuICAgICAgfSBlbHNlIGlmICghd29yZHMpIHtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGFic29sdXRlKSB7XG4gICAgICBzdHlsZSA9IG5vZGUuc3R5bGU7XG5cbiAgICAgIGlmICghd29yZHMgJiYgIWlzQ2hpbGQpIHtcbiAgICAgICAgbm9kZS5feCArPSBub2RlLnBhcmVudE5vZGUuX3g7XG4gICAgICAgIG5vZGUuX3kgKz0gbm9kZS5wYXJlbnROb2RlLl95O1xuICAgICAgfVxuXG4gICAgICBzdHlsZS5sZWZ0ID0gbm9kZS5feCArIFwicHhcIjtcbiAgICAgIHN0eWxlLnRvcCA9IG5vZGUuX3kgKyBcInB4XCI7XG4gICAgICBzdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIHN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7IC8vaWYgd2UgZG9uJ3Qgc2V0IHRoZSB3aWR0aC9oZWlnaHQsIHRoaW5ncyBjb2xsYXBzZSBpbiBvbGRlciB2ZXJzaW9ucyBvZiBJRSBhbmQgdGhlIG9yaWdpbiBmb3IgdHJhbnNmb3JtcyBpcyB0aHJvd24gb2ZmIGluIGFsbCBicm93c2Vycy5cblxuICAgICAgc3R5bGUud2lkdGggPSBub2RlLl93ICsgMSArIFwicHhcIjsgLy9JRSBpcyAxcHggc2hvcnQgc29tZXRpbWVzLiBBdm9pZCB3cmFwcGluZ1xuXG4gICAgICBzdHlsZS5oZWlnaHQgPSBub2RlLl9oICsgXCJweFwiO1xuICAgIH1cblxuICAgIGlmICghd29yZHMgJiYgY2hhcnMpIHtcbiAgICAgIC8vd2UgYWx3YXlzIHN0YXJ0IG91dCB3cmFwcGluZyB3b3JkcyBpbiB0aGVpciBvd24gPGRpdj4gc28gdGhhdCBsaW5lIGJyZWFrcyBoYXBwZW4gY29ycmVjdGx5LCBidXQgaGVyZSB3ZSdsbCByZW1vdmUgdGhvc2UgPGRpdj4gdGFncyBpZiBuZWNlc3NhcnkgYW5kIHJlbmVzdCB0aGUgY2hhcmFjdGVycyBkaXJlY3RseSBpbnRvIHRoZSBlbGVtZW50IHJhdGhlciB0aGFuIGluc2lkZSB0aGUgd29yZCA8ZGl2PlxuICAgICAgaWYgKG5vZGUuX2lzU3BsaXQpIHtcbiAgICAgICAgbm9kZS5fbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChub2RlKTsgLy9wdXQgaXQgYXQgdGhlIGVuZCB0byBrZWVwIHRoZSBvcmRlciBjb3JyZWN0LlxuICAgICAgfSBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUuX2lzU3BsaXQpIHtcbiAgICAgICAgbm9kZS5fcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXG4gICAgICAgIGlmICghbm9kZS5wcmV2aW91c1NpYmxpbmcgJiYgbm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgbm9kZS5maXJzdENoaWxkLl9pc0ZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChub2RlLm5leHRTaWJsaW5nICYmIG5vZGUubmV4dFNpYmxpbmcudGV4dENvbnRlbnQgPT09IFwiIFwiICYmICFub2RlLm5leHRTaWJsaW5nLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgLy9pZiB0aGUgbGFzdCBub2RlIGluc2lkZSBhIG5lc3RlZCBlbGVtZW50IGlzIGp1c3QgYSBzcGFjZSAobGlrZSBUPHNwYW4+bmVzdGVkIDwvc3Bhbj4pLCByZW1vdmUgaXQgb3RoZXJ3aXNlIGl0J2xsIGdldCBwbGFjZWQgaW4gdGhlIHdyb25nIG9yZGVyLiBEb24ndCByZW1vdmUgaXQgcmlnaHQgYXdheSwgdGhvdWdoLCBiZWNhdXNlIHdlIG5lZWQgdG8gc2Vuc2Ugd2hlbiB3b3Jkcy9jaGFyYWN0ZXJzIGFyZSBiZWZvcmUgYSBzcGFjZSBsaWtlIF9pc0JlZm9yZVdvcmREZWxpbWl0ZXIoKS4gUmVtb3ZpbmcgaXQgbm93IHdvdWxkIG1ha2UgdGhhdCBhIGZhbHNlIG5lZ2F0aXZlLlxuICAgICAgICAgIHNwYWNlTm9kZXNUb1JlbW92ZS5wdXNoKG5vZGUubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5fbmV4dCA9IG5vZGUubmV4dFNpYmxpbmcgJiYgbm9kZS5uZXh0U2libGluZy5faXNGaXJzdCA/IG51bGwgOiBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgIG5vZGVzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICBsLS07XG4gICAgICB9IGVsc2UgaWYgKCFpc0NoaWxkKSB7XG4gICAgICAgIG9mZnNldCA9ICFub2RlLm5leHRTaWJsaW5nICYmIF9pc0JlZm9yZVdvcmREZWxpbWl0ZXIobm9kZS5wYXJlbnROb2RlLCBlbGVtZW50LCB3b3JkRGVsaW1pdGVyKTsgLy9pZiB0aGlzIGlzIHRoZSBsYXN0IGxldHRlciBpbiB0aGUgd29yZCAoYW5kIHdlJ3JlIG5vdCBicmVha2luZyBieSBsaW5lcyBhbmQgbm90IHBvc2l0aW9uaW5nIHRoaW5ncyBhYnNvbHV0ZWx5KSwgd2UgbmVlZCB0byBhZGQgYSBzcGFjZSBhZnRlcndhcmRzIHNvIHRoYXQgdGhlIGNoYXJhY3RlcnMgZG9uJ3QganVzdCBtYXNoIHRvZ2V0aGVyXG5cbiAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZS5fcGFyZW50KSB7XG4gICAgICAgICAgbm9kZS5wYXJlbnROb2RlLl9wYXJlbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2Zmc2V0KSB7XG4gICAgICAgICAgbm9kZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKF9kb2MuY3JlYXRlVGV4dE5vZGUoXCIgXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWcgPT09IFwic3BhblwiKSB7XG4gICAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjsgLy9zbyB0aGF0IHdvcmQgYnJlYWtzIGFyZSBob25vcmVkIHByb3Blcmx5LlxuICAgICAgICB9XG5cbiAgICAgICAgY2hhckFycmF5LnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUuX2lzU3BsaXQgJiYgIW5vZGUuX2lzU3BsaXQgJiYgbm9kZS5pbm5lckhUTUwgIT09IFwiXCIpIHtcbiAgICAgIHdvcmRBcnJheS5wdXNoKG5vZGUpO1xuICAgIH0gZWxzZSBpZiAoY2hhcnMgJiYgIW5vZGUuX2lzU3BsaXQpIHtcbiAgICAgIGlmICh0YWcgPT09IFwic3BhblwiKSB7XG4gICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XG4gICAgICB9XG5cbiAgICAgIGNoYXJBcnJheS5wdXNoKG5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGkgPSBzcGFjZU5vZGVzVG9SZW1vdmUubGVuZ3RoO1xuXG4gIHdoaWxlICgtLWkgPiAtMSkge1xuICAgIHNwYWNlTm9kZXNUb1JlbW92ZVtpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNwYWNlTm9kZXNUb1JlbW92ZVtpXSk7XG4gIH1cblxuICBpZiAobGluZXMpIHtcbiAgICAvL3RoZSBuZXh0IDcgbGluZXMganVzdCBnaXZlIHVzIHRoZSBsaW5lIHdpZHRoIGluIHRoZSBtb3N0IHJlbGlhYmxlIHdheSBhbmQgZmlndXJlIG91dCB0aGUgbGVmdCBvZmZzZXQgKGlmIHBvc2l0aW9uIGlzbid0IHJlbGF0aXZlIG9yIGFic29sdXRlKS4gV2UgbXVzdCBzZXQgdGhlIHdpZHRoIGFsb25nIHdpdGggdGV4dC1hbGlnbiB0byBlbnN1cmUgZXZlcnl0aGluZyB3b3JrcyBwcm9wZXJseSBmb3IgdmFyaW91cyBhbGlnbm1lbnRzLlxuICAgIGlmIChhYnNvbHV0ZSkge1xuICAgICAgbGluZU5vZGUgPSBfZG9jLmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobGluZU5vZGUpO1xuICAgICAgbGluZVdpZHRoID0gbGluZU5vZGUub2Zmc2V0V2lkdGggKyBcInB4XCI7XG4gICAgICBvZmZzZXQgPSBsaW5lTm9kZS5vZmZzZXRQYXJlbnQgPT09IGVsZW1lbnQgPyAwIDogZWxlbWVudC5vZmZzZXRMZWZ0O1xuICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChsaW5lTm9kZSk7XG4gICAgfVxuXG4gICAgc3R5bGUgPSBlbGVtZW50LnN0eWxlLmNzc1RleHQ7XG4gICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gXCJkaXNwbGF5Om5vbmU7XCI7IC8vdG8gaW1wcm92ZSBwZXJmb3JtYW5jZSwgc2V0IGRpc3BsYXk6bm9uZSBvbiB0aGUgZWxlbWVudCBzbyB0aGF0IHRoZSBicm93c2VyIGRvZXNuJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCByZWZsb3dpbmcgb3IgcmVuZGVyaW5nIHdoaWxlIHdlJ3JlIHJlbmVzdGluZyB0aGluZ3MuIFdlJ2xsIHJldmVydCB0aGUgY3NzVGV4dCBsYXRlci5cbiAgICAvL3dlIGNhbid0IHVzZSBlbGVtZW50LmlubmVySFRNTCA9IFwiXCIgYmVjYXVzZSB0aGF0IGNhdXNlcyBJRSB0byBsaXRlcmFsbHkgZGVsZXRlIGFsbCB0aGUgbm9kZXMgYW5kIHRoZWlyIGNvbnRlbnQgZXZlbiB0aG91Z2ggd2UndmUgc3RvcmVkIHRoZW0gaW4gYW4gYXJyYXkhIFNvIHdlIG11c3QgbG9vcCB0aHJvdWdoIHRoZSBjaGlsZHJlbiBhbmQgcmVtb3ZlIHRoZW0uXG5cbiAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgYWRkV29yZFNwYWNlcyA9IHdvcmREZWxpbWl0ZXIgPT09IFwiIFwiICYmICghYWJzb2x1dGUgfHwgIXdvcmRzICYmICFjaGFycyk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGN1ckxpbmUgPSBsaW5lc1tpXTtcbiAgICAgIGxpbmVOb2RlID0gX2RvYy5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgICBsaW5lTm9kZS5zdHlsZS5jc3NUZXh0ID0gXCJkaXNwbGF5OmJsb2NrO3RleHQtYWxpZ246XCIgKyB0ZXh0QWxpZ24gKyBcIjtwb3NpdGlvbjpcIiArIChhYnNvbHV0ZSA/IFwiYWJzb2x1dGU7XCIgOiBcInJlbGF0aXZlO1wiKTtcblxuICAgICAgaWYgKGxpbmVzQ2xhc3MpIHtcbiAgICAgICAgbGluZU5vZGUuY2xhc3NOYW1lID0gbGluZXNDbGFzcyArIChpdGVyYXRlTGluZSA/IGkgKyAxIDogXCJcIik7XG4gICAgICB9XG5cbiAgICAgIGxpbmVBcnJheS5wdXNoKGxpbmVOb2RlKTtcbiAgICAgIGwgPSBjdXJMaW5lLmxlbmd0aDtcblxuICAgICAgZm9yIChqID0gMDsgaiA8IGw7IGorKykge1xuICAgICAgICBpZiAoY3VyTGluZVtqXS5ub2RlTmFtZSAhPT0gXCJCUlwiKSB7XG4gICAgICAgICAgbm9kZSA9IGN1ckxpbmVbal07XG4gICAgICAgICAgbGluZU5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICAgICAgICBpZiAoYWRkV29yZFNwYWNlcyAmJiBub2RlLl93b3JkRW5kKSB7XG4gICAgICAgICAgICBsaW5lTm9kZS5hcHBlbmRDaGlsZChfZG9jLmNyZWF0ZVRleHROb2RlKFwiIFwiKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFic29sdXRlKSB7XG4gICAgICAgICAgICBpZiAoaiA9PT0gMCkge1xuICAgICAgICAgICAgICBsaW5lTm9kZS5zdHlsZS50b3AgPSBub2RlLl95ICsgXCJweFwiO1xuICAgICAgICAgICAgICBsaW5lTm9kZS5zdHlsZS5sZWZ0ID0gcGFkZGluZ0xlZnQgKyBvZmZzZXQgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGUuc3R5bGUudG9wID0gXCIwcHhcIjtcblxuICAgICAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgICAgICBub2RlLnN0eWxlLmxlZnQgPSBub2RlLl94IC0gb2Zmc2V0ICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobCA9PT0gMCkge1xuICAgICAgICAvL2lmIHRoZXJlIGFyZSBubyBub2RlcyBpbiB0aGUgbGluZSAodHlwaWNhbGx5IG1lYW5pbmcgdGhlcmUgd2VyZSB0d28gY29uc2VjdXRpdmUgPGJyPiB0YWdzLCBqdXN0IGFkZCBhIG5vbi1icmVha2luZyBzcGFjZSBzbyB0aGF0IHRoaW5ncyBkaXNwbGF5IHByb3Blcmx5LlxuICAgICAgICBsaW5lTm9kZS5pbm5lckhUTUwgPSBcIiZuYnNwO1wiO1xuICAgICAgfSBlbHNlIGlmICghd29yZHMgJiYgIWNoYXJzKSB7XG4gICAgICAgIF9kZVdvcmRpZnkobGluZU5vZGUpO1xuXG4gICAgICAgIF9zd2FwVGV4dChsaW5lTm9kZSwgU3RyaW5nLmZyb21DaGFyQ29kZSgxNjApLCBcIiBcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChhYnNvbHV0ZSkge1xuICAgICAgICBsaW5lTm9kZS5zdHlsZS53aWR0aCA9IGxpbmVXaWR0aDtcbiAgICAgICAgbGluZU5vZGUuc3R5bGUuaGVpZ2h0ID0gbm9kZS5faCArIFwicHhcIjtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChsaW5lTm9kZSk7XG4gICAgfVxuXG4gICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gc3R5bGU7XG4gIH0gLy9pZiBldmVyeXRoaW5nIHNoaWZ0cyB0byBiZWluZyBwb3NpdGlvbjphYnNvbHV0ZSwgdGhlIGNvbnRhaW5lciBjYW4gY29sbGFwc2UgaW4gdGVybXMgb2YgaGVpZ2h0IG9yIHdpZHRoLCBzbyBmaXggdGhhdCBoZXJlLlxuXG5cbiAgaWYgKGFic29sdXRlKSB7XG4gICAgaWYgKG9yaWdIZWlnaHQgPiBlbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBvcmlnSGVpZ2h0IC0gcGFkVG9wQW5kQm90dG9tICsgXCJweFwiO1xuXG4gICAgICBpZiAoZWxlbWVudC5jbGllbnRIZWlnaHQgPCBvcmlnSGVpZ2h0KSB7XG4gICAgICAgIC8vSUU4IGFuZCBlYXJsaWVyIHVzZSBhIGRpZmZlcmVudCBib3ggbW9kZWwgLSB3ZSBtdXN0IGluY2x1ZGUgcGFkZGluZyBhbmQgYm9yZGVyc1xuICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IG9yaWdIZWlnaHQgKyBib3JkZXJUb3BBbmRCb3R0b20gKyBcInB4XCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9yaWdXaWR0aCA+IGVsZW1lbnQuY2xpZW50V2lkdGgpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBvcmlnV2lkdGggLSBwYWRMZWZ0QW5kUmlnaHQgKyBcInB4XCI7XG5cbiAgICAgIGlmIChlbGVtZW50LmNsaWVudFdpZHRoIDwgb3JpZ1dpZHRoKSB7XG4gICAgICAgIC8vSUU4IGFuZCBlYXJsaWVyIHVzZSBhIGRpZmZlcmVudCBib3ggbW9kZWwgLSB3ZSBtdXN0IGluY2x1ZGUgcGFkZGluZyBhbmQgYm9yZGVyc1xuICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gb3JpZ1dpZHRoICsgYm9yZGVyTGVmdEFuZFJpZ2h0ICsgXCJweFwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9wdXNoUmV2ZXJzZWQoYWxsQ2hhcnMsIGNoYXJBcnJheSk7XG5cbiAgaWYgKHdvcmRzKSB7XG4gICAgX3B1c2hSZXZlcnNlZChhbGxXb3Jkcywgd29yZEFycmF5KTtcbiAgfVxuXG4gIF9wdXNoUmV2ZXJzZWQoYWxsTGluZXMsIGxpbmVBcnJheSk7XG59LFxuICAgIF9zcGxpdFJhd1RleHQgPSBmdW5jdGlvbiBfc3BsaXRSYXdUZXh0KGVsZW1lbnQsIHZhcnMsIHdvcmRTdGFydCwgY2hhclN0YXJ0KSB7XG4gIHZhciB0YWcgPSB2YXJzLnRhZyA/IHZhcnMudGFnIDogdmFycy5zcGFuID8gXCJzcGFuXCIgOiBcImRpdlwiLFxuICAgICAgdHlwZXMgPSB2YXJzLnR5cGUgfHwgdmFycy5zcGxpdCB8fCBcImNoYXJzLHdvcmRzLGxpbmVzXCIsXG4gICAgICAvL3dvcmRzID0gKHR5cGVzLmluZGV4T2YoXCJ3b3Jkc1wiKSAhPT0gLTEpLFxuICBjaGFycyA9IH50eXBlcy5pbmRleE9mKFwiY2hhcnNcIiksXG4gICAgICBhYnNvbHV0ZSA9IF9pc0Fic29sdXRlKHZhcnMpLFxuICAgICAgd29yZERlbGltaXRlciA9IHZhcnMud29yZERlbGltaXRlciB8fCBcIiBcIixcbiAgICAgIHNwYWNlID0gd29yZERlbGltaXRlciAhPT0gXCIgXCIgPyBcIlwiIDogYWJzb2x1dGUgPyBcIiYjMTczOyBcIiA6IFwiIFwiLFxuICAgICAgd29yZEVuZCA9IFwiPC9cIiArIHRhZyArIFwiPlwiLFxuICAgICAgd29yZElzT3BlbiA9IDEsXG4gICAgICBzcGVjaWFsQ2hhcnMgPSB2YXJzLnNwZWNpYWxDaGFycyA/IHR5cGVvZiB2YXJzLnNwZWNpYWxDaGFycyA9PT0gXCJmdW5jdGlvblwiID8gdmFycy5zcGVjaWFsQ2hhcnMgOiBfZmluZFNwZWNpYWxDaGFycyA6IG51bGwsXG4gICAgICAvL3NwZWNpYWxDaGFycyBjYW4gYmUgYW4gYXJyYXkgb3IgYSBmdW5jdGlvbi4gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHdlIGFsd2F5cyBzZXQgdGhpcyBsb2NhbCBcInNwZWNpYWxDaGFyc1wiIHRvIGEgZnVuY3Rpb24gdG8gd2hpY2ggd2UgcGFzcyB0aGUgcmVtYWluaW5nIHRleHQgYW5kIHdoYXRldmVyIHRoZSBvcmlnaW5hbCB2YXJzLnNwZWNpYWxDaGFycyB3YXMgc28gdGhhdCBpZiBpdCdzIGFuIGFycmF5LCBpdCB3b3JrcyB3aXRoIHRoZSBfZmluZFNwZWNpYWxDaGFycygpIGZ1bmN0aW9uLlxuICB0ZXh0LFxuICAgICAgc3BsaXRUZXh0LFxuICAgICAgaSxcbiAgICAgIGosXG4gICAgICBsLFxuICAgICAgY2hhcmFjdGVyLFxuICAgICAgaGFzVGFnU3RhcnQsXG4gICAgICB0ZXN0UmVzdWx0LFxuICAgICAgY29udGFpbmVyID0gX2RvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXG4gIHBhcmVudC5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCBlbGVtZW50KTtcbiAgY29udGFpbmVyLnRleHRDb250ZW50ID0gZWxlbWVudC5ub2RlVmFsdWU7XG4gIHBhcmVudC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgZWxlbWVudCA9IGNvbnRhaW5lcjtcbiAgdGV4dCA9IGdldFRleHQoZWxlbWVudCk7XG4gIGhhc1RhZ1N0YXJ0ID0gdGV4dC5pbmRleE9mKFwiPFwiKSAhPT0gLTE7XG5cbiAgaWYgKHZhcnMucmVkdWNlV2hpdGVTcGFjZSAhPT0gZmFsc2UpIHtcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKF9tdWx0aXBsZVNwYWNlc0V4cCwgXCIgXCIpLnJlcGxhY2UoX3N0cmlwRXhwLCBcIlwiKTtcbiAgfVxuXG4gIGlmIChoYXNUYWdTdGFydCkge1xuICAgIHRleHQgPSB0ZXh0LnNwbGl0KFwiPFwiKS5qb2luKFwie3tMVH19XCIpOyAvL3dlIGNhbid0IGxlYXZlIFwiPFwiIGluIHRoZSBzdHJpbmcsIG9yIHdoZW4gd2Ugc2V0IHRoZSBpbm5lckhUTUwsIGl0IGNhbiBiZSBpbnRlcnByZXRlZCBhcyBhIG5vZGVcbiAgfVxuXG4gIGwgPSB0ZXh0Lmxlbmd0aDtcbiAgc3BsaXRUZXh0ID0gKHRleHQuY2hhckF0KDApID09PSBcIiBcIiA/IHNwYWNlIDogXCJcIikgKyB3b3JkU3RhcnQoKTtcblxuICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgY2hhcmFjdGVyID0gdGV4dC5jaGFyQXQoaSk7XG5cbiAgICBpZiAoc3BlY2lhbENoYXJzICYmICh0ZXN0UmVzdWx0ID0gc3BlY2lhbENoYXJzKHRleHQuc3Vic3RyKGkpLCB2YXJzLnNwZWNpYWxDaGFycykpKSB7XG4gICAgICAvLyBsb29rIGZvciBhbnkgc3BlY2lhbENoYXJzIHRoYXQgd2VyZSBkZWNsYXJlZC4gUmVtZW1iZXIsIHRoZXkgY2FuIGJlIHBhc3NlZCBpbiBsaWtlIHtzcGVjaWFsQ2hhcnM6W1wi4KSu4KWAXCIsIFwi4KSq4KS+XCIsIFwi4KS54KWIXCJdfSBvciBhIGZ1bmN0aW9uIGNvdWxkIGJlIGRlZmluZWQgaW5zdGVhZC4gRWl0aGVyIHdheSwgdGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRoYXQgc2hvdWxkIGJlIGdyb3VwZWQgdG9nZXRoZXIgZm9yIHRoaXMgXCJjaGFyYWN0ZXJcIi5cbiAgICAgIGNoYXJhY3RlciA9IHRleHQuc3Vic3RyKGksIHRlc3RSZXN1bHQgfHwgMSk7XG4gICAgICBzcGxpdFRleHQgKz0gY2hhcnMgJiYgY2hhcmFjdGVyICE9PSBcIiBcIiA/IGNoYXJTdGFydCgpICsgY2hhcmFjdGVyICsgXCI8L1wiICsgdGFnICsgXCI+XCIgOiBjaGFyYWN0ZXI7XG4gICAgICBpICs9IHRlc3RSZXN1bHQgLSAxO1xuICAgIH0gZWxzZSBpZiAoY2hhcmFjdGVyID09PSB3b3JkRGVsaW1pdGVyICYmIHRleHQuY2hhckF0KGkgLSAxKSAhPT0gd29yZERlbGltaXRlciAmJiBpKSB7XG4gICAgICBzcGxpdFRleHQgKz0gd29yZElzT3BlbiA/IHdvcmRFbmQgOiBcIlwiO1xuICAgICAgd29yZElzT3BlbiA9IDA7XG5cbiAgICAgIHdoaWxlICh0ZXh0LmNoYXJBdChpICsgMSkgPT09IHdvcmREZWxpbWl0ZXIpIHtcbiAgICAgICAgLy9za2lwIG92ZXIgZW1wdHkgc3BhY2VzICh0byBhdm9pZCBtYWtpbmcgdGhlbSB3b3JkcylcbiAgICAgICAgc3BsaXRUZXh0ICs9IHNwYWNlO1xuICAgICAgICBpKys7XG4gICAgICB9XG5cbiAgICAgIGlmIChpID09PSBsIC0gMSkge1xuICAgICAgICBzcGxpdFRleHQgKz0gc3BhY2U7XG4gICAgICB9IGVsc2UgaWYgKHRleHQuY2hhckF0KGkgKyAxKSAhPT0gXCIpXCIpIHtcbiAgICAgICAgc3BsaXRUZXh0ICs9IHNwYWNlICsgd29yZFN0YXJ0KCk7XG4gICAgICAgIHdvcmRJc09wZW4gPSAxO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2hhcmFjdGVyID09PSBcIntcIiAmJiB0ZXh0LnN1YnN0cihpLCA2KSA9PT0gXCJ7e0xUfX1cIikge1xuICAgICAgc3BsaXRUZXh0ICs9IGNoYXJzID8gY2hhclN0YXJ0KCkgKyBcInt7TFR9fVwiICsgXCI8L1wiICsgdGFnICsgXCI+XCIgOiBcInt7TFR9fVwiO1xuICAgICAgaSArPSA1O1xuICAgIH0gZWxzZSBpZiAoY2hhcmFjdGVyLmNoYXJDb2RlQXQoMCkgPj0gMHhEODAwICYmIGNoYXJhY3Rlci5jaGFyQ29kZUF0KDApIDw9IDB4REJGRiB8fCB0ZXh0LmNoYXJDb2RlQXQoaSArIDEpID49IDB4RkUwMCAmJiB0ZXh0LmNoYXJDb2RlQXQoaSArIDEpIDw9IDB4RkUwRikge1xuICAgICAgLy9zcGVjaWFsIGVtb2ppIGNoYXJhY3RlcnMgdXNlIDIgb3IgNCB1bmljb2RlIGNoYXJhY3RlcnMgdGhhdCB3ZSBtdXN0IGtlZXAgdG9nZXRoZXIuXG4gICAgICBqID0gKCh0ZXh0LnN1YnN0cihpLCAxMikuc3BsaXQoZW1vamlFeHApIHx8IFtdKVsxXSB8fCBcIlwiKS5sZW5ndGggfHwgMjtcbiAgICAgIHNwbGl0VGV4dCArPSBjaGFycyAmJiBjaGFyYWN0ZXIgIT09IFwiIFwiID8gY2hhclN0YXJ0KCkgKyB0ZXh0LnN1YnN0cihpLCBqKSArIFwiPC9cIiArIHRhZyArIFwiPlwiIDogdGV4dC5zdWJzdHIoaSwgaik7XG4gICAgICBpICs9IGogLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGxpdFRleHQgKz0gY2hhcnMgJiYgY2hhcmFjdGVyICE9PSBcIiBcIiA/IGNoYXJTdGFydCgpICsgY2hhcmFjdGVyICsgXCI8L1wiICsgdGFnICsgXCI+XCIgOiBjaGFyYWN0ZXI7XG4gICAgfVxuICB9XG5cbiAgZWxlbWVudC5vdXRlckhUTUwgPSBzcGxpdFRleHQgKyAod29yZElzT3BlbiA/IHdvcmRFbmQgOiBcIlwiKTtcblxuICBpZiAoaGFzVGFnU3RhcnQpIHtcbiAgICBfc3dhcFRleHQocGFyZW50LCBcInt7TFR9fVwiLCBcIjxcIik7IC8vbm90ZTogZG9uJ3QgcGVyZm9ybSB0aGlzIG9uIFwiZWxlbWVudFwiIGJlY2F1c2UgdGhhdCBnZXRzIHJlcGxhY2VkIHdpdGggYWxsIG5ldyBlbGVtZW50cyB3aGVuIHdlIHNldCBlbGVtZW50Lm91dGVySFRNTC5cblxuICB9XG59LFxuICAgIF9zcGxpdCA9IGZ1bmN0aW9uIF9zcGxpdChlbGVtZW50LCB2YXJzLCB3b3JkU3RhcnQsIGNoYXJTdGFydCkge1xuICB2YXIgY2hpbGRyZW4gPSBfdG9BcnJheShlbGVtZW50LmNoaWxkTm9kZXMpLFxuICAgICAgbCA9IGNoaWxkcmVuLmxlbmd0aCxcbiAgICAgIGFic29sdXRlID0gX2lzQWJzb2x1dGUodmFycyksXG4gICAgICBpLFxuICAgICAgY2hpbGQ7XG5cbiAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDMgfHwgbCA+IDEpIHtcbiAgICB2YXJzLmFic29sdXRlID0gZmFsc2U7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXG4gICAgICBpZiAoY2hpbGQubm9kZVR5cGUgIT09IDMgfHwgL1xcUysvLnRlc3QoY2hpbGQubm9kZVZhbHVlKSkge1xuICAgICAgICBpZiAoYWJzb2x1dGUgJiYgY2hpbGQubm9kZVR5cGUgIT09IDMgJiYgX2dldENvbXB1dGVkU3R5bGUoY2hpbGQpLmRpc3BsYXkgPT09IFwiaW5saW5lXCIpIHtcbiAgICAgICAgICAvL2lmIHRoZXJlJ3MgYSBjaGlsZCBub2RlIHRoYXQncyBkaXNwbGF5OmlubGluZSwgc3dpdGNoIGl0IHRvIGlubGluZS1ibG9jayBzbyB0aGF0IGFic29sdXRlIHBvc2l0aW9uaW5nIHdvcmtzIHByb3Blcmx5IChtb3N0IGJyb3dzZXJzIGRvbid0IHJlcG9ydCBvZmZzZXRUb3Avb2Zmc2V0TGVmdCBwcm9wZXJseSBpbnNpZGUgYSA8c3Bhbj4gZm9yIGV4YW1wbGUpXG4gICAgICAgICAgY2hpbGQuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgICAgICAgY2hpbGQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZC5faXNTcGxpdCA9IHRydWU7XG5cbiAgICAgICAgX3NwbGl0KGNoaWxkLCB2YXJzLCB3b3JkU3RhcnQsIGNoYXJTdGFydCk7IC8vZG9uJ3Qgc3BsaXQgbGluZXMgb24gY2hpbGQgZWxlbWVudHNcblxuICAgICAgfVxuICAgIH1cblxuICAgIHZhcnMuYWJzb2x1dGUgPSBhYnNvbHV0ZTtcbiAgICBlbGVtZW50Ll9pc1NwbGl0ID0gdHJ1ZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBfc3BsaXRSYXdUZXh0KGVsZW1lbnQsIHZhcnMsIHdvcmRTdGFydCwgY2hhclN0YXJ0KTtcbn07XG5cbmV4cG9ydCB2YXIgU3BsaXRUZXh0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3BsaXRUZXh0KGVsZW1lbnQsIHZhcnMpIHtcbiAgICBpZiAoIV9jb3JlSW5pdHRlZCkge1xuICAgICAgX2luaXRDb3JlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50cyA9IF90b0FycmF5KGVsZW1lbnQpO1xuICAgIHRoaXMuY2hhcnMgPSBbXTtcbiAgICB0aGlzLndvcmRzID0gW107XG4gICAgdGhpcy5saW5lcyA9IFtdO1xuICAgIHRoaXMuX29yaWdpbmFscyA9IFtdO1xuICAgIHRoaXMudmFycyA9IHZhcnMgfHwge307XG5cbiAgICBpZiAoX2JvbnVzVmFsaWRhdGVkKSB7XG4gICAgICB0aGlzLnNwbGl0KHZhcnMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBTcGxpdFRleHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0KHZhcnMpIHtcbiAgICBpZiAodGhpcy5pc1NwbGl0KSB7XG4gICAgICB0aGlzLnJldmVydCgpO1xuICAgIH1cblxuICAgIHRoaXMudmFycyA9IHZhcnMgPSB2YXJzIHx8IHRoaXMudmFycztcbiAgICB0aGlzLl9vcmlnaW5hbHMubGVuZ3RoID0gdGhpcy5jaGFycy5sZW5ndGggPSB0aGlzLndvcmRzLmxlbmd0aCA9IHRoaXMubGluZXMubGVuZ3RoID0gMDtcblxuICAgIHZhciBpID0gdGhpcy5lbGVtZW50cy5sZW5ndGgsXG4gICAgICAgIHRhZyA9IHZhcnMudGFnID8gdmFycy50YWcgOiB2YXJzLnNwYW4gPyBcInNwYW5cIiA6IFwiZGl2XCIsXG4gICAgICAgIHdvcmRTdGFydCA9IF9jc3NDbGFzc0Z1bmModmFycy53b3Jkc0NsYXNzLCB0YWcpLFxuICAgICAgICBjaGFyU3RhcnQgPSBfY3NzQ2xhc3NGdW5jKHZhcnMuY2hhcnNDbGFzcywgdGFnKSxcbiAgICAgICAgb3JpZ0hlaWdodCxcbiAgICAgICAgb3JpZ1dpZHRoLFxuICAgICAgICBlOyAvL3dlIHNwbGl0IGluIHJldmVyc2VkIG9yZGVyIHNvIHRoYXQgaWYvd2hlbiB3ZSBwb3NpdGlvbjphYnNvbHV0ZSBlbGVtZW50cywgdGhleSBkb24ndCBhZmZlY3QgdGhlIHBvc2l0aW9uIG9mIHRoZSBvbmVzIGFmdGVyIHRoZW0gaW4gdGhlIGRvY3VtZW50IGZsb3cgKHNoaWZ0aW5nIHRoZW0gdXAgYXMgdGhleSdyZSB0YWtlbiBvdXQgb2YgdGhlIGRvY3VtZW50IGZsb3cpLlxuXG5cbiAgICB3aGlsZSAoLS1pID4gLTEpIHtcbiAgICAgIGUgPSB0aGlzLmVsZW1lbnRzW2ldO1xuICAgICAgdGhpcy5fb3JpZ2luYWxzW2ldID0gZS5pbm5lckhUTUw7XG4gICAgICBvcmlnSGVpZ2h0ID0gZS5jbGllbnRIZWlnaHQ7XG4gICAgICBvcmlnV2lkdGggPSBlLmNsaWVudFdpZHRoO1xuXG4gICAgICBfc3BsaXQoZSwgdmFycywgd29yZFN0YXJ0LCBjaGFyU3RhcnQpO1xuXG4gICAgICBfc2V0UG9zaXRpb25zQWZ0ZXJTcGxpdChlLCB2YXJzLCB0aGlzLmNoYXJzLCB0aGlzLndvcmRzLCB0aGlzLmxpbmVzLCBvcmlnV2lkdGgsIG9yaWdIZWlnaHQpO1xuICAgIH1cblxuICAgIHRoaXMuY2hhcnMucmV2ZXJzZSgpO1xuICAgIHRoaXMud29yZHMucmV2ZXJzZSgpO1xuICAgIHRoaXMubGluZXMucmV2ZXJzZSgpO1xuICAgIHRoaXMuaXNTcGxpdCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLnJldmVydCA9IGZ1bmN0aW9uIHJldmVydCgpIHtcbiAgICB2YXIgb3JpZ2luYWxzID0gdGhpcy5fb3JpZ2luYWxzO1xuXG4gICAgaWYgKCFvcmlnaW5hbHMpIHtcbiAgICAgIHRocm93IFwicmV2ZXJ0KCkgY2FsbCB3YXNuJ3Qgc2NvcGVkIHByb3Blcmx5LlwiO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgcmV0dXJuIGUuaW5uZXJIVE1MID0gb3JpZ2luYWxzW2ldO1xuICAgIH0pO1xuICAgIHRoaXMuY2hhcnMgPSBbXTtcbiAgICB0aGlzLndvcmRzID0gW107XG4gICAgdGhpcy5saW5lcyA9IFtdO1xuICAgIHRoaXMuaXNTcGxpdCA9IGZhbHNlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFNwbGl0VGV4dC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoZWxlbWVudCwgdmFycykge1xuICAgIHJldHVybiBuZXcgU3BsaXRUZXh0KGVsZW1lbnQsIHZhcnMpO1xuICB9O1xuXG4gIHJldHVybiBTcGxpdFRleHQ7XG59KCk7XG5TcGxpdFRleHQudmVyc2lvbiA9IFwiMy4yLjZcIjtcbmV4cG9ydCB7IFNwbGl0VGV4dCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuLy8gYXBwXG5pbXBvcnQgYXBwQ29yZSBmcm9tICcuLi9hcHAvYXBwQ29yZSc7XG5pbXBvcnQgYXBwU3RvcmUgZnJvbSAnLi4vYXBwL2FwcFN0b3JlJztcbmltcG9ydCBhcHBVaSBmcm9tICcuLi9hcHAvYXBwVWknOyAvLyBjbGFzc2VzXG5cbmltcG9ydCBkb21FdmVudHMgZnJvbSAnLi4vY2xhc3Nlcy9kb21FdmVudHMnOyAvLyBIaWdod2F5XG5cbmltcG9ydCBIaWdod2F5IGZyb20gJ0Bkb2dzdHVkaW8vaGlnaHdheSc7IC8vIFByZWxvYWRcblxuaW1wb3J0IFByZWxvYWQgZnJvbSAncHJlbG9hZC1pdCc7XG5pbXBvcnQgTGF6eUxvYWQgZnJvbSAnbGF6eWxvYWQnOyAvLyBVdGlsaXRpZXNcblxuaW1wb3J0IFN1cGVyU2Nyb2xsZXIgZnJvbSAnLi4vY2xhc3Nlcy9zdXBlclNjcm9sbGVyJztcbmltcG9ydCBTcGxpdFRleHQgZnJvbSAnLi4vY2xhc3Nlcy9zcGxpdFRleHQnOyAvLyBpbXBvcnQgU3VwZXJPYnNlcnZlciBmcm9tICcuLi9jbGFzc2VzL3N1cGVyT2JzZXJ2ZXInO1xuLy8gR3NhcFxuXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCBTY3JvbGxUcmlnZ2VyIGZyb20gJ2dzYXAvU2Nyb2xsVHJpZ2dlcic7XG5nc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpO1xuXG52YXIgUmVuZGVyZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9IaWdod2F5JFJlbmRlcmVyKSB7XG4gIF9pbmhlcml0cyhSZW5kZXJlciwgX0hpZ2h3YXkkUmVuZGVyZXIpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUmVuZGVyZXIpO1xuXG4gIGZ1bmN0aW9uIFJlbmRlcmVyKHByb3BlcnRpZXMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVuZGVyZXIpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wZXJ0aWVzKTsgLy8gc3RvcmVcblxuICAgIF90aGlzLmFwcFN0b3JlID0gYXBwU3RvcmU7IC8vIGFwcCByZWZlcmVuY2VzXG5cbiAgICBfdGhpcy5hcHBDb3JlID0gbmV3IGFwcENvcmUoKTtcbiAgICBfdGhpcy5hcHBVaSA9IG5ldyBhcHBVaSgpOyAvLyBFdmVudHNcblxuICAgIF90aGlzLmRvbUV2ZW50cyA9IG5ldyBkb21FdmVudHMoKTsgLy8gU2F2ZSBzbHVnXG4gICAgLy8gaWYodGhpcy5hcHBTdG9yZS5mcm9tID09PSAnaG9tZScpXG4gICAgLy8gICAgIHRoaXMuYXBwVWkubmF2aWdhdGlvbi5pc0xvY2tlZCA9IHRydWU7XG5cbiAgICBfdGhpcy5oYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2ggIT09ICcnID8gd2luZG93LmxvY2F0aW9uLmhhc2ggOiBudWxsO1xuICAgIF90aGlzLnBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgX3RoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uID0gX3RoaXMuYXBwU3RvcmUuY3VycmVudFNlY3Rpb24gPT09IG51bGw7XG4gICAgX3RoaXMuYXBwU3RvcmUuY3VycmVudCA9IF90aGlzLnByb3BlcnRpZXMuc2x1ZztcbiAgICBfdGhpcy5hcHBTdG9yZS5jdXJyZW50U3ViID0gX3RoaXMuYXBwU3RvcmUuY3VycmVudCA9PT0gJ3Byb2plY3QnID8gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKVtsb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLmxlbmd0aCAtIDJdIDogbnVsbDtcbiAgICBfdGhpcy5hcHBTdG9yZS5jdXJyZW50U2VjdGlvbiA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpOyAvLyBpZih0aGlzLmFwcFN0b3JlLmZpcnN0TmF2aWdhdGlvbilcbiAgICAvLyAgICAgdGhpcy5hcHBTdG9yZS5maXJzdE5hdmlnYXRpb24oKTtcbiAgICAvLyBQcmVsb2FkZXJcblxuICAgIF90aGlzLnByZWxvYWRNYWluID0gbnVsbDtcbiAgICBfdGhpcy5wcmVsb2FkU2Vjb25kYXJ5ID0gbnVsbDtcbiAgICBfdGhpcy5wcmVsb2FkRGVsYXkgPSBfdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3AgPyAzIDogMS4yOyAvL3RoaXMucHJlbG9hZERlbGF5ID0gMDtcblxuICAgIF90aGlzLnByZWxvYWRJdGVtcyA9IHtcbiAgICAgIG1haW46IFtdLFxuICAgICAgLy8gTWFuZGF0b3J5IGl0ZW1zXG4gICAgICBzZWNvbmRhcnk6IFtdIC8vIFNlY29uZGFyeSBpdGVtc1xuXG4gICAgfTsgLy8gU2Nyb2xsXG5cbiAgICBfdGhpcy5zdXBlclNjcm9sbGVyID0gbnVsbDtcbiAgICBfdGhpcy5zdXBlclRyaWdnZXIgPSBudWxsO1xuICAgIGlmIChoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uKSBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gJ21hbnVhbCc7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlbmRlcmVyLCBbe1xuICAgIGtleTogXCJvbkVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICB0aGlzLmNoZWNrRWxlbWVudHMoKTtcbiAgICAgIHRoaXMucHJlc2VsZWN0b3JzKCk7XG4gICAgICB0aGlzLnNlbGVjdG9ycygpO1xuICAgICAgdGhpcy5ldmVudHMoKTtcbiAgICAgIHRoaXMucHJlbG9hZCgpO1xuICAgICAgdGhpcy5zcGxpdFRleHRzID0gW107XG5cbiAgICAgIGlmICghdGhpcy5wYXJhbXMuaGFzKCd0cnAtZWRpdC10cmFuc2xhdGlvbicpKSB7XG4gICAgICAgIC8vIFNldCBhbmltYXRpb25zXG4gICAgICAgIHRoaXMuc2V0TGFiZWxzKCk7XG4gICAgICAgIHRoaXMuc2V0VGl0bGVzKCk7XG4gICAgICAgIHRoaXMuc2V0RGVzY3JpcHRpb25zKCk7XG4gICAgICAgIHRoaXMuc2V0SW1hZ2VzKCk7XG4gICAgICAgIHRoaXMuc2V0TGlua3MoKTtcbiAgICAgICAgdGhpcy5zZXRNaW5pbGluZXMoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5iZWZvcmVFbnRlcigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjaGVja0VsZW1lbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrRWxlbWVudHMoKSB7XG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudHNNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tb2JpbGVdJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRlbGVtZW50c01vYmlsZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnRzTW9iaWxlW2ldLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRlbGVtZW50c0Rlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1kZXNrdG9wXScpO1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0aGlzLiRlbGVtZW50c0Rlc2t0b3AubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgdGhpcy4kZWxlbWVudHNEZXNrdG9wW19pXS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwcmVzZWxlY3RvcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlc2VsZWN0b3JzKCkge1xuICAgICAgLy8gU2V0IHJlZmVyZW5jZSB0byBjdXJyZW50IHNlY3Rpb25cbiAgICAgIHRoaXMuJGVsID0gdGhpcy53cmFwLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICB0aGlzLiRpbm5lciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNjcm9sbC13cmFwcGVyXSAuaW5uZXInKTtcbiAgICAgIHRoaXMuJHNjcm9sbGJhciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNjcm9sbC13cmFwcGVyXSAuc2Nyb2xsYmFyJyk7XG4gICAgICB0aGlzLiRvdmVybGF5ID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2VsZWN0b3JzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdG9ycygpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9LCB7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJwcmVsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVFbnRlcigpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9LCB7XG4gICAga2V5OiBcIm9uRW50ZXJDb21wbGV0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAvLyBMYXp5IGxvYWRcbiAgICAgIHRoaXMubGF6eUxvYWQgPSBuZXcgTGF6eUxvYWQodGhpcy5sYXp5TG9hZCwge1xuICAgICAgICByb290OiBudWxsLFxuICAgICAgICByb290TWFyZ2luOiB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjI1ICsgJ3B4JyxcbiAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICB9KTsgLy8gdGhpcy5sYXp5TG9hZC5sb2FkSW1hZ2VzKCk7XG4gICAgICAvLyBJZiBmaXJzdCBuYXZpZ2F0aW9uIGFuZCBuZWVkIHByZWxvYWRcblxuICAgICAgaWYgKHRoaXMucHJlbG9hZEl0ZW1zLm1haW4ubGVuZ3RoID4gMCAmJiB0aGlzLmFwcFN0b3JlLmZpcnN0TmF2aWdhdGlvbikge1xuICAgICAgICB2YXIgX2luZGV4ID0gMDtcblxuICAgICAgICB2YXIgX3ByZWxvYWRPbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgIHRoaXMucHJlbG9hZE1haW4gPSBQcmVsb2FkKCk7XG4gICAgICAgIHRoaXMucHJlbG9hZE1haW4uZmV0Y2godGhpcy5wcmVsb2FkSXRlbXMubWFpbik7IC8vIHRoaXMucHJlbG9hZE1haW4ub25wcm9ncmVzcyA9IChldmVudCkgPT4geyB0aGlzLmFwcFVpLiRsb2FkZXJQcm9ncmVzcy5pbm5lckhUTUwgPSBldmVudC5wcm9ncmVzcyArICclJzsgfTtcblxuICAgICAgICB0aGlzLnByZWxvYWRNYWluLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICB2YXIgX2Ftb3VudCA9IGV2ZW50LnByb2dyZXNzIC8gMTAwO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coX2Ftb3VudCk7XG4gICAgICAgICAgZ3NhcC50byhfdGhpczIuYXBwVWkuJGxvYWRlclByb2dyZXNzLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBzY2FsZVg6IE1hdGgubWluKF9hbW91bnQsIDAuOTUpLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IF90aGlzMi5wcmVsb2FkRGVsYXkgLyAoX3RoaXMyLnByZWxvYWRJdGVtcy5tYWluLmxlbmd0aCArIDEpLFxuICAgICAgICAgICAgZGVsYXk6IF90aGlzMi5wcmVsb2FkRGVsYXkgLyAoX3RoaXMyLnByZWxvYWRJdGVtcy5tYWluLmxlbmd0aCArIDEpICogX2luZGV4XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX2luZGV4Kys7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wcmVsb2FkTWFpbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgdmFyIF9wcmVsb2FkT2ZmID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgICB2YXIgX3ByZWxvYWREaWZmZXJlbmNlID0gKF9wcmVsb2FkT2ZmIC0gX3ByZWxvYWRPbikgLyAxMDAwO1xuXG4gICAgICAgICAgdmFyIF9wcmVsb2FkRGVsYXkgPSBNYXRoLm1heCgwLCBfdGhpczIucHJlbG9hZERlbGF5IC0gX3ByZWxvYWREaWZmZXJlbmNlKTtcblxuICAgICAgICAgIGdzYXAuZGVsYXllZENhbGwoX3ByZWxvYWREZWxheSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZ3NhcC50byhfdGhpczIuYXBwVWkuJGxvYWRlclByb2dyZXNzLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICAgIHNjYWxlWDogMSxcbiAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDAuMixcbiAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczIuc3RhcnQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9IC8vIGlmIGZpcnN0IG5hdmlnYXRpb24gYnV0IGRvbnQgbmVlZCBwcmVsb2Fkc1xuICAgICAgZWxzZSBpZiAodGhpcy5wcmVsb2FkSXRlbXMubWFpbi5sZW5ndGggPT09IDAgJiYgdGhpcy5hcHBTdG9yZS5maXJzdE5hdmlnYXRpb24pIHtcbiAgICAgICAgLy8gRmFrZSBwcm9ncmVzc1xuICAgICAgICB2YXIgc3BsaXRQcm9ncmVzcyA9IHRoaXMuYXBwVWkuc3BsaXRJblBhcnRzKDEsIDUpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BsaXRQcm9ncmVzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBfZHVyYXRpb24gPSBpID09PSAwID8gdGhpcy5wcmVsb2FkRGVsYXkgKiBzcGxpdFByb2dyZXNzWzBdIDogdGhpcy5wcmVsb2FkRGVsYXkgKiBzcGxpdFByb2dyZXNzW2ldIC0gdGhpcy5wcmVsb2FkRGVsYXkgKiBzcGxpdFByb2dyZXNzW2kgLSAxXTtcblxuICAgICAgICAgIHZhciBfZGVsYXkgPSBpID09PSAwID8gMCA6IHRoaXMucHJlbG9hZERlbGF5ICogc3BsaXRQcm9ncmVzc1tpIC0gMV07XG5cbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGxvYWRlclByb2dyZXNzLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBzY2FsZVg6IHNwbGl0UHJvZ3Jlc3NbaV0sXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogX2R1cmF0aW9uLFxuICAgICAgICAgICAgZGVsYXk6IF9kZWxheVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3NhcC5kZWxheWVkQ2FsbCh0aGlzLnByZWxvYWREZWxheSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5zdGFydCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uKSB7XG4gICAgICAgIC8vIFJlbW92ZSBsb2FkZXJcbiAgICAgICAgdGhpcy5hcHBVaS5oaWRlTG9hZGVyKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2Nyb2xsKCk7XG5cbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICBpZiAodGhpcy5hcHBTdG9yZS5maXJzdE5hdmlnYXRpb24pIGdzYXAuZnJvbVRvKHRoaXMuYXBwU3RvcmUuY3VycmVudFNlY3Rpb24uJGVsLCB7XG4gICAgICAgICAgeTogJy01dncnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICB5OiAnMHZ3JyxcbiAgICAgICAgICBkdXJhdGlvbjogMS44LFxuICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0J1xuICAgICAgICB9KTtlbHNlIGdzYXAuZnJvbVRvKHRoaXMuYXBwU3RvcmUuY3VycmVudFNlY3Rpb24uJGVsLCB7XG4gICAgICAgICAgeTogJy01dncnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICB5OiAnMHZ3JyxcbiAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uKSBnc2FwLnRvKHRoaXMuYXBwU3RvcmUuY3VycmVudFNlY3Rpb24uJGVsLCB7XG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgIGRlbGF5OiAxLjhcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmZpcnN0TmF2aWdhdGlvbikgdGhpcy5hcHBDb3JlLm5hdmlnYXRlU3RhcnQoKTtcblxuICAgICAgaWYgKCF0aGlzLnBhcmFtcy5oYXMoJ3RycC1lZGl0LXRyYW5zbGF0aW9uJykpIHtcbiAgICAgICAgLy8gSW5pdCBhbmltYXRpb25zXG4gICAgICAgIHRoaXMuaW5pdExhYmVscygpO1xuICAgICAgICB0aGlzLmluaXRUaXRsZXMoKTtcbiAgICAgICAgdGhpcy5pbml0RGVzY3JpcHRpb25zKCk7XG4gICAgICAgIHRoaXMuaW5pdEltYWdlcygpO1xuICAgICAgICB0aGlzLmluaXRMaW5rcygpO1xuICAgICAgICB0aGlzLmluaXRNaW5pbGluZXMoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pbml0SW5mbygpO1xuICAgICAgdGhpcy5wcmVlbnRlcigpO1xuICAgICAgZ3NhcC5kZWxheWVkQ2FsbCh0aGlzLmFwcFN0b3JlLmZpcnN0TmF2aWdhdGlvbiA/IDEuOCA6IDEsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLmVudGVyKCk7XG5cbiAgICAgICAgaWYgKF90aGlzMy5zdXBlclNjcm9sbGVyKSBfdGhpczMuc3VwZXJTY3JvbGxlci5fc2Nyb2xsLmVuYWJsZSA9IHRydWU7XG4gICAgICAgIGlmIChfdGhpczMuaGFzaCkgX3RoaXMzLnNjcm9sbFRvKF90aGlzMy5oYXNoKTtcblxuICAgICAgICBfdGhpczMuYmVmb3JlUmVzaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLnByZWxvYWRJdGVtcy5zZWNvbmRhcnkubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnByZWxvYWRTZWNvbmRhcnkgPSBQcmVsb2FkKCk7XG4gICAgICAgIHRoaXMucHJlbG9hZFNlY29uZGFyeS5mZXRjaCh0aGlzLnByZWxvYWRJdGVtcy5zZWNvbmRhcnkpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzY3JvbGxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLiRpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAvLyBTdXBlcnNjcm9sbGVyXG4gICAgICAgICAgdGhpcy5zdXBlclNjcm9sbGVyID0gbmV3IFN1cGVyU2Nyb2xsZXIoe1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHNjcm9sbDogdHJ1ZSxcbiAgICAgICAgICAgIHNjcm9sbFRhcmdldDogdGhpcy4kaW5uZXIsXG4gICAgICAgICAgICBiYXI6IHRydWUsXG4gICAgICAgICAgICBiYXJUYXJnZXQ6IHRoaXMuJHNjcm9sbGJhci5jaGlsZHJlblswXSxcbiAgICAgICAgICAgIG9uUmFmOiBmdW5jdGlvbiBvblJhZihzY3JvbGwsIHBlcmNlbnQpIHtcbiAgICAgICAgICAgICAgX3RoaXM0LnJlcXVlc3RBbmltYXRpb25GcmFtZSgpO1xuXG4gICAgICAgICAgICAgIGlmIChfdGhpczQuYXBwU3RvcmUuY3VycmVudCA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzNC5hcHBVaS4kaGVhZGVyU3VibWVudSkgZ3NhcC50byhfdGhpczQuYXBwVWkuJGhlYWRlclN1Ym1lbnUsIHtcbiAgICAgICAgICAgICAgICAgIHk6IHNjcm9sbC55ICogMixcbiAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LmFwcFVpLiRsb2dvKSBnc2FwLnRvKF90aGlzNC5hcHBVaS4kbG9nbywge1xuICAgICAgICAgICAgICAgICAgeTogc2Nyb2xsLnkgKiAyLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKF90aGlzNC5hcHBVaS4kaGVhZGVyVHJpZ2dlciAmJiBfdGhpczQuYXBwU3RvcmUuY3VycmVudCA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbC55IDw9IC13aW5kb3cuaW5uZXJIZWlnaHQpIGdzYXAudG8oX3RoaXM0LmFwcFVpLiRoZWFkZXJUcmlnZ2VyLCB7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICAgIH0pO2Vsc2UgZ3NhcC50byhfdGhpczQuYXBwVWkuJGhlYWRlclRyaWdnZXIsIHtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdpbml0aWFsJyxcbiAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChfdGhpczQuc3VwZXJUcmlnZ2VyKSBfdGhpczQuc3VwZXJUcmlnZ2VyLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pOyAvLyBTY3JvbGwgVHJpZ2dlclxuXG4gICAgICAgICAgdGhpcy5zdXBlclRyaWdnZXIgPSBTY3JvbGxUcmlnZ2VyO1xuICAgICAgICAgIHRoaXMuc3VwZXJUcmlnZ2VyLmRlZmF1bHRzKHtcbiAgICAgICAgICAgIHNjcm9sbGVyOiB0aGlzLiRpbm5lclxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuc3VwZXJUcmlnZ2VyLnNjcm9sbGVyUHJveHkodGhpcy4kaW5uZXIsIHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogZnVuY3Rpb24gc2Nyb2xsVG9wKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHJldHVybiAtX3RoaXM0LnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5saXZlUG9zaXRpb24ueTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRCb3VuZGluZ0NsaWVudFJlY3Q6IGZ1bmN0aW9uIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnN1cGVyVHJpZ2dlci5yZWZyZXNoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdXBlclRyaWdnZXIgPSBTY3JvbGxUcmlnZ2VyO1xuICAgICAgICAgIHRoaXMuc3VwZXJUcmlnZ2VyLmNvbmZpZyh7XG4gICAgICAgICAgICBhdXRvUmVmcmVzaEV2ZW50czogJ0RPTUNvbnRlbnRMb2FkZWQsbG9hZCcsXG4gICAgICAgICAgICBzeW5jSW50ZXJ2YWw6IDk5OTk5OTk5OVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuc3VwZXJUcmlnZ2VyLnJlZnJlc2goKTtcbiAgICAgICAgICBnc2FwLnRpY2tlci5hZGQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXM0LnJlcXVlc3RBbmltYXRpb25GcmFtZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuc3VwZXJUcmlnZ2VyVGwgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgIGVhc2U6ICdub25lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgICAgdHJpZ2dlcjogdGhpcy4kYXBwLFxuICAgICAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICAgICAgc3RhcnQ6ICd0b3AgdG9wJyxcbiAgICAgICAgICAgICAgZW5kOiAnYm90dG9tIGJvdHRvbScsXG4gICAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbiBvblVwZGF0ZShzZWxmKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM0LnN1cGVyU2Nyb2xsZXJNb2JpbGUgPSBzZWxmLnByb2dyZXNzICogc2VsZi5lbmQ7IC8vIGlmKHRoaXMuYXBwVWkuJGhlYWRlcilcbiAgICAgICAgICAgICAgICAvLyAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRoZWFkZXIsIHsgeTogLShzZWxmLnByb2dyZXNzICogdGhpcy4kaW5uZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KSB9KTtcbiAgICAgICAgICAgICAgICAvLyBpZih0aGlzLmFwcFVpLiRsb2dvKVxuICAgICAgICAgICAgICAgIC8vICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGxvZ28sIHsgeTogLShzZWxmLnByb2dyZXNzICogdGhpcy4kaW5uZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KSAvIDIgfSk7XG4gICAgICAgICAgICAgICAgLy8gaWYodGhpcy5hcHBVaS4kaGVhZGVyVHJpZ2dlclRleHQgJiYgIXRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKVxuICAgICAgICAgICAgICAgIC8vICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGhlYWRlclRyaWdnZXJUZXh0LCB7IHk6IC0oc2VsZi5wcm9ncmVzcyAqIHRoaXMuJGlubmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCkgLyAyIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicHJlZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlZW50ZXIoKSB7fVxuICB9LCB7XG4gICAga2V5OiBcInNjcm9sbFRvXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbFRvKGhhc2gpIHtcbiAgICAgIHZhciAkdGFyZ2V0ID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcihoYXNoKTtcblxuICAgICAgaWYgKCR0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgICAgdmFyIG9mZnNldCA9ICR0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueSArIHRoaXMuc3VwZXJTY3JvbGxlci5fc2Nyb2xsLmxpdmVQb3NpdGlvbi55O1xuXG4gICAgICAgICAgdGhpcy5zdXBlclNjcm9sbGVyLnNjcm9sbEFuaW1hdGUob2Zmc2V0LCAyLCAncG93ZXI0LmluT3V0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIF9vZmZzZXQgPSAkdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnkgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgICAgICAgZ3NhcC50byhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogX29mZnNldCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgICAgZWFzZTogJ3Bvd2VyNC5pbk91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCkge1xuICAgICAgaWYgKHRoaXMuc3VwZXJUcmlnZ2VyKSB0aGlzLnN1cGVyVHJpZ2dlci51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0TGFiZWxzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldExhYmVscygpIHtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy4kbGFiZWxzID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgnLmxhYmVsOm5vdCgucHJvbW90aW9uIC5sYWJlbCknKTtlbHNlIHRoaXMuJGxhYmVscyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5sYWJlbCcpO1xuXG4gICAgICBpZiAodGhpcy4kbGFiZWxzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kbGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNwbGl0ID0gbmV3IFNwbGl0VGV4dCh0aGlzLiRsYWJlbHNbaV0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdsaW5lcywgd29yZHMnLFxuICAgICAgICAgICAgbGluZXNDbGFzczogJ2xpbmUgbGluZS0tKysnLFxuICAgICAgICAgICAgd29yZHNDbGFzczogJ3dvcmQgd29yZC0tKysnLFxuICAgICAgICAgICAgY2hhcnNDbGFzczogJ2NoYXIgY2hhci0tKysnXG4gICAgICAgICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgICAgICAgIHRoaXMuc3BsaXRUZXh0cy5wdXNoKHNwbGl0KTtcbiAgICAgICAgICB0aGlzLiRsYWJlbHNbaV0uY2xhc3NMaXN0LmFkZCgnc3BsaXQnKTtcbiAgICAgICAgICB2YXIgbGluZXMgPSB0aGlzLiRsYWJlbHNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmxpbmUnKTtcblxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGluZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciB3b3JkcyA9IGxpbmVzW2pdLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC53b3JkLDpzY29wZSA+IHN0cm9uZycpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHdvcmRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgIGdzYXAuc2V0KHdvcmRzW2tdLCB7XG4gICAgICAgICAgICAgICAgeTogJzEwMCUnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRUaXRsZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGl0bGVzKCkge1xuICAgICAgdGhpcy4kdGl0bGVzID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgnLnRpdGxlOm5vdCgucG9zdCAudGl0bGUpJyk7XG5cbiAgICAgIGlmICh0aGlzLiR0aXRsZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiR0aXRsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgc3BsaXQgPSBuZXcgU3BsaXRUZXh0KHRoaXMuJHRpdGxlc1tpXSwge1xuICAgICAgICAgICAgdHlwZTogJ2xpbmVzLCB3b3JkcycsXG4gICAgICAgICAgICBsaW5lc0NsYXNzOiAnbGluZSBsaW5lLS0rKycsXG4gICAgICAgICAgICB3b3Jkc0NsYXNzOiAnd29yZCB3b3JkLS0rKycsXG4gICAgICAgICAgICBjaGFyc0NsYXNzOiAnY2hhciBjaGFyLS0rKydcbiAgICAgICAgICB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgICAgICAgdGhpcy5zcGxpdFRleHRzLnB1c2goc3BsaXQpO1xuICAgICAgICAgIHRoaXMuJHRpdGxlc1tpXS5jbGFzc0xpc3QuYWRkKCdzcGxpdCcpO1xuICAgICAgICAgIHZhciBsaW5lcyA9IHRoaXMuJHRpdGxlc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcubGluZScpO1xuXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHdvcmRzID0gbGluZXNbal0ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLndvcmQsOnNjb3BlID4gc3Ryb25nJyk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgd29yZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgLy8gaWYod29yZHNba10udGFnTmFtZSA9PT0gJ0RJVicpXG4gICAgICAgICAgICAgIC8vICAgICAvL2dzYXAuc2V0KHdvcmRzW2tdLCB7IG9wYWNpdHk6IDAuMDAwMSB9KTtcbiAgICAgICAgICAgICAgLy8gZWxzZVxuICAgICAgICAgICAgICBpZiAod29yZHNba10udGFnTmFtZSA9PT0gJ1NUUk9ORycpIHdvcmRzW2tdLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJzxzcGFuIGNsYXNzPVwibWFza1wiPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy4kdGl0bGVzSW5mbyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbmZvIC50aXRsZScpO1xuXG4gICAgICBpZiAodGhpcy4kdGl0bGVzSW5mbykge1xuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLiR0aXRsZXNJbmZvLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICB2YXIgX3NwbGl0ID0gbmV3IFNwbGl0VGV4dCh0aGlzLiR0aXRsZXNJbmZvW19pMl0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdsaW5lcywgd29yZHMnLFxuICAgICAgICAgICAgbGluZXNDbGFzczogJ2xpbmUgbGluZS0tKysnLFxuICAgICAgICAgICAgd29yZHNDbGFzczogJ3dvcmQgd29yZC0tKysnLFxuICAgICAgICAgICAgY2hhcnNDbGFzczogJ2NoYXIgY2hhci0tKysnXG4gICAgICAgICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuXG4gICAgICAgICAgdGhpcy5zcGxpdFRleHRzLnB1c2goX3NwbGl0KTtcblxuICAgICAgICAgIHRoaXMuJHRpdGxlc0luZm9bX2kyXS5jbGFzc0xpc3QuYWRkKCdzcGxpdCcpO1xuXG4gICAgICAgICAgdmFyIF9saW5lcyA9IHRoaXMuJHRpdGxlc0luZm9bX2kyXS5xdWVyeVNlbGVjdG9yQWxsKCcubGluZScpO1xuXG4gICAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IF9saW5lcy5sZW5ndGg7IF9qKyspIHtcbiAgICAgICAgICAgIHZhciBfd29yZHMgPSBfbGluZXNbX2pdLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC53b3JkLDpzY29wZSA+IHN0cm9uZycpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgX3dvcmRzLmxlbmd0aDsgX2srKykge1xuICAgICAgICAgICAgICBnc2FwLnNldChfd29yZHNbX2tdLCB7XG4gICAgICAgICAgICAgICAgeTogJzEwMCUnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXREZXNjcmlwdGlvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVzY3JpcHRpb25zKCkge1xuICAgICAgdGhpcy4kZGVzY3JpcHRpb25zID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgnLnd5c2l3eWc6bm90KC5wcmluY2lwbGVzIC5wcmluY2lwbGVzX19pdGVtIC5pbmZvIC53eXNpd3lnLCAuZmVhdHVyZXMgLmZlYXR1cmVzX19pdGVtIC5pbmZvIC53eXNpd3lnKScpO1xuXG4gICAgICBpZiAodGhpcy4kZGVzY3JpcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kZGVzY3JpcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZ3NhcC5zZXQodGhpcy4kZGVzY3JpcHRpb25zW2ldLCB7XG4gICAgICAgICAgICB5OiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCA/ICc1dncnIDogJzIwcHgnLFxuICAgICAgICAgICAgc2NhbGVZOiAxLjEsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICB3aWxsQ2hhbmdlOiAndHJhbnNpdGlvbiwgb3BhY2l0eSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRJbWFnZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SW1hZ2VzKCkge1xuICAgICAgdGhpcy4kaW1hZ2VzTWFzayA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbWFnZS0tbWFzaycpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGltYWdlc01hc2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kaW1hZ2VzTWFza1tpXSwge1xuICAgICAgICAgIHk6ICctMTAyJSdcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGltYWdlc01hc2tbaV0uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICB5OiAnMTAyJSdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuJGltYWdlc0FwcGVhciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbWFnZS0tYXBwZWFyJyk7XG5cbiAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHRoaXMuJGltYWdlc0FwcGVhci5sZW5ndGg7IF9pMysrKSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGltYWdlc0FwcGVhcltfaTNdLCB7XG4gICAgICAgICAgeTogJzV2dydcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGltYWdlc0FwcGVhcltfaTNdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgc2NhbGU6IDEuMixcbiAgICAgICAgICBvcGFjaXR5OiAwLjAwMDFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldExpbmtzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldExpbmtzKCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHRoaXMuJGxpbmtzID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgnLmxpbms6bm90KC5wb3N0IC5saW5rKScpO1xuXG4gICAgICBpZiAodGhpcy4kbGlua3MpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRsaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGdzYXAuc2V0KHRoaXMuJGxpbmtzW2ldLCB7XG4gICAgICAgICAgICB5OiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCA/ICcxMHZ3JyA6ICc0MHB4JyxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAuc2V0KHRoaXMuJGxpbmtzW2ldLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDFcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnNldCh0aGlzLiRsaW5rc1tpXS5xdWVyeVNlbGVjdG9yKCdzdmcnKSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgcm90YXRpb246ICc0NTBkZWcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC5zZXQodGhpcy4kbGlua3NbaV0ucXVlcnlTZWxlY3Rvcignc3ZnIGNpcmNsZScpLCB7XG4gICAgICAgICAgICBzdHJva2VEYXNob2Zmc2V0OiAnMTE4MS4yNHB4J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRsaW5rc1tpXSwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzNS5lbnRlckxpbmsoZSwgYSwgZWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRsaW5rc1tpXSwgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzNS5sZWF2ZUxpbmsoZSwgYSwgZWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldE1pbmlsaW5lc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRNaW5pbGluZXMoKSB7XG4gICAgICB0aGlzLiRtaW5pbGluZXMgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCcubWluaWxpbmUnKTtcblxuICAgICAgaWYgKHRoaXMuJG1pbmlsaW5lcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJG1pbmlsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGdzYXAuc2V0KHRoaXMuJG1pbmlsaW5lc1tpXSwge1xuICAgICAgICAgICAgc2NhbGVYOiAwXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJMaW5rXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyTGluayhlLCBhLCBlbCkge1xuICAgICAgLy8gZ3NhcC50byhlbC5jaGlsZHJlblsxXSwgeyB4OiAnLTFyZW0nLCBlYXNlOiAnZXhwby5vdXQnLCBkdXJhdGlvbjogMC44IH0pO1xuICAgICAgZ3NhcC5raWxsVHdlZW5zT2YoW2VsLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpLCBlbC5xdWVyeVNlbGVjdG9yKCdzdmcgY2lyY2xlJyldKTtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3Rvcignc3ZnJyksIHtcbiAgICAgICAgcm90YXRpb246ICc0NTBkZWcnLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC44XG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3Rvcignc3ZnIGNpcmNsZScpLCB7XG4gICAgICAgIHN0cm9rZURhc2hvZmZzZXQ6ICcxMTgxLjI0cHgnLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC44XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGVhdmVMaW5rXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxlYXZlTGluayhlLCBhLCBlbCkge1xuICAgICAgLy8gZ3NhcC50byhlbC5jaGlsZHJlblsxXSwgeyB4OiAnMCcsIGVhc2U6ICdleHBvLm91dCcsIGR1cmF0aW9uOiAwLjggfSk7XG4gICAgICBnc2FwLmtpbGxUd2VlbnNPZihbZWwucXVlcnlTZWxlY3Rvcignc3ZnJyksIGVsLnF1ZXJ5U2VsZWN0b3IoJ3N2ZyBjaXJjbGUnKV0pO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCdzdmcnKSwge1xuICAgICAgICByb3RhdGlvbjogJzBkZWcnLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC44XG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3Rvcignc3ZnIGNpcmNsZScpLCB7XG4gICAgICAgIHN0cm9rZURhc2hvZmZzZXQ6ICcwcHgnLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC44XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdExhYmVsc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0TGFiZWxzKCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLiRsYWJlbHMpIHtcbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICAgIHRyaWdnZXI6IF90aGlzNi4kbGFiZWxzW2ldLFxuICAgICAgICAgICAgLy8gc3RhcnQ6ICd0b3AgODAlJyxcbiAgICAgICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgICAgIHZhciBsaW5lcyA9IF90aGlzNi4kbGFiZWxzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5lJyk7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciB3b3JkcyA9IGxpbmVzW2pdLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC53b3JkLCA6c2NvcGUgPiBzdHJvbmcnKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgd29yZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgIGdzYXAudG8od29yZHNba10sIHtcbiAgICAgICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDEuNCxcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDAuMSArIGsgKiAwLjA1XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIF9sb29wKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRUaXRsZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFRpdGxlcygpIHtcbiAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy4kdGl0bGVzKSB7XG4gICAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoaSkge1xuICAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICAgIHRyaWdnZXI6IF90aGlzNy4kdGl0bGVzW2ldLFxuICAgICAgICAgICAgLy8gc3RhcnQ6ICd0b3AgODAlJyxcbiAgICAgICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgICAgIHZhciBsaW5lcyA9IF90aGlzNy4kdGl0bGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5lJyk7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciB3b3JkcyA9IGxpbmVzW2pdLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC53b3JkLCA6c2NvcGUgPiBzdHJvbmcnKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgd29yZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmKHdvcmRzW2tdLnRhZ05hbWUgPT09ICdESVYnKVxuICAgICAgICAgICAgICAgICAgLy8gICAgIGdzYXAudG8od29yZHNba10sIHsgb3BhY2l0eTogMSwgZWFzZTogJ3Bvd2VyMi5vdXQnLCBkZWxheTogKGogKiAwLjEpICsgKGsgKiAwLjA1KSB9KTtcbiAgICAgICAgICAgICAgICAgIC8vIGVsc2VcbiAgICAgICAgICAgICAgICAgIGlmICh3b3Jkc1trXS50YWdOYW1lID09PSAnU1RST05HJyAmJiB3b3Jkc1trXS5xdWVyeVNlbGVjdG9yKCcubWFzaycpKSBnc2FwLnRvKHdvcmRzW2tdLnF1ZXJ5U2VsZWN0b3IoJy5tYXNrJyksIHtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiAwLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxLjIsXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiBqICogMC4xICsgayAqIDAuMDVcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kdGl0bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgX2xvb3AyKGkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLiR0aXRsZXNJbmZvKSB7XG4gICAgICAgIHZhciBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoX2k0KSB7XG4gICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgICAgdHJpZ2dlcjogX3RoaXM3LiR0aXRsZXNJbmZvW19pNF0sXG4gICAgICAgICAgICAvLyBzdGFydDogJ3RvcCA4MCUnLFxuICAgICAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICAgICAgICAgdmFyIGxpbmVzID0gX3RoaXM3LiR0aXRsZXNJbmZvW19pNF0ucXVlcnlTZWxlY3RvckFsbCgnLmxpbmUnKTtcblxuICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdvcmRzID0gbGluZXNbal0ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLndvcmQsIDpzY29wZSA+IHN0cm9uZycpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB3b3Jkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgZ3NhcC50byh3b3Jkc1trXSwge1xuICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMS40LFxuICAgICAgICAgICAgICAgICAgICBkZWxheTogaiAqIDAuMSArIGsgKiAwLjA1XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCB0aGlzLiR0aXRsZXNJbmZvLmxlbmd0aDsgX2k0KyspIHtcbiAgICAgICAgICBfbG9vcDMoX2k0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0RGVzY3JpcHRpb25zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXREZXNjcmlwdGlvbnMoKSB7XG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuJGRlc2NyaXB0aW9ucykge1xuICAgICAgICB2YXIgX2xvb3A0ID0gZnVuY3Rpb24gX2xvb3A0KGkpIHtcbiAgICAgICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICB0cmlnZ2VyOiBfdGhpczguJGRlc2NyaXB0aW9uc1tpXSxcbiAgICAgICAgICAgIHN0YXJ0OiBfdGhpczguYXBwU3RvcmUuaXNEZXNrdG9wID8gJ3RvcCBib3R0b20nIDogJ3RvcCA4MCUnLFxuICAgICAgICAgICAgb25jZTogdHJ1ZSxcbiAgICAgICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgICAgIGdzYXAudG8oX3RoaXM4LiRkZXNjcmlwdGlvbnNbaV0sIHtcbiAgICAgICAgICAgICAgICB5OiAnMCcsXG4gICAgICAgICAgICAgICAgc2NhbGVZOiAxLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICBjbGVhclByb3BzOiAnYWxsJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGRlc2NyaXB0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIF9sb29wNChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0SW1hZ2VzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRJbWFnZXMoKSB7XG4gICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgdmFyIF9sb29wNSA9IGZ1bmN0aW9uIF9sb29wNShpKSB7XG4gICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICB0cmlnZ2VyOiBfdGhpczkuJGltYWdlc01hc2tbaV0sXG4gICAgICAgICAgc3RhcnQ6ICd0b3AgODAlJyxcbiAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgICBnc2FwLnRvKF90aGlzOS4kaW1hZ2VzTWFza1tpXSwge1xuICAgICAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMS44LFxuICAgICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICAgIGRlbGF5OiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdzYXAudG8oX3RoaXM5LiRpbWFnZXNNYXNrW2ldLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICAgIHk6ICcwJScsXG4gICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMS44LFxuICAgICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICAgIGRlbGF5OiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRpbWFnZXNNYXNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIF9sb29wNShpKTtcbiAgICAgIH1cblxuICAgICAgdmFyIF9sb29wNiA9IGZ1bmN0aW9uIF9sb29wNihfaTUpIHtcbiAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgIHRyaWdnZXI6IF90aGlzOS4kaW1hZ2VzQXBwZWFyW19pNV0sXG4gICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgICBnc2FwLnRvKF90aGlzOS4kaW1hZ2VzQXBwZWFyW19pNV0sIHtcbiAgICAgICAgICAgICAgeTogJzAlJyxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgIGRlbGF5OiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdzYXAudG8oX3RoaXM5LiRpbWFnZXNBcHBlYXJbX2k1XS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDEuMixcbiAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgZGVsYXk6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCB0aGlzLiRpbWFnZXNBcHBlYXIubGVuZ3RoOyBfaTUrKykge1xuICAgICAgICBfbG9vcDYoX2k1KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdExpbmtzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRMaW5rcygpIHtcbiAgICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuJGxpbmtzKSB7XG4gICAgICAgIHZhciBfbG9vcDcgPSBmdW5jdGlvbiBfbG9vcDcoaSkge1xuICAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICAgIHRyaWdnZXI6IF90aGlzMTAuJGxpbmtzW2ldLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzMTAuJGxpbmtzW2ldLCB7XG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMxMC4kbGlua3NbaV0uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMxMC4kbGlua3NbaV0ucXVlcnlTZWxlY3Rvcignc3ZnJyksIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAnMCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczEwLiRsaW5rc1tpXS5xdWVyeVNlbGVjdG9yKCdzdmcgY2lyY2xlJyksIHtcbiAgICAgICAgICAgICAgICBzdHJva2VEYXNob2Zmc2V0OiAnMHB4JyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMixcbiAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBfbG9vcDcoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdE1pbmlsaW5lc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0TWluaWxpbmVzKCkge1xuICAgICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy4kbWluaWxpbmVzKSB7XG4gICAgICAgIHZhciBfbG9vcDggPSBmdW5jdGlvbiBfbG9vcDgoaSkge1xuICAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICAgIHRyaWdnZXI6IF90aGlzMTEuJG1pbmlsaW5lc1tpXSxcbiAgICAgICAgICAgIHN0YXJ0OiAndG9wIDgwJScsXG4gICAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczExLiRtaW5pbGluZXNbaV0sIHtcbiAgICAgICAgICAgICAgICBzY2FsZVg6IDEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJG1pbmlsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIF9sb29wOChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0SW5mb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0SW5mbygpIHtcbiAgICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgICAgLy8gQ2hlY2sgaW5mb3RyaWdnZXIgc2lkZWJhciBlbGVtZW50XG4gICAgICB0aGlzLiRpbmZvdHJpZ2dlciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5pbmZvdHJpZ2dlcicpO1xuXG4gICAgICBpZiAodGhpcy4kaW5mb3RyaWdnZXIpIHtcbiAgICAgICAgZ3NhcC50byh0aGlzLiRpbmZvdHJpZ2dlciwge1xuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgICAgZGVsYXk6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRpbmZvdHJpZ2dlciwgJ2NsaWNrJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgX3RoaXMxMi5hcHBVaS5vcGVuSW5mbyhlKTtcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIENoZWNrIGluZm90cmlnZ2VyIGJ1dHRvbiBlbGVtZW50c1xuXG5cbiAgICAgIHRoaXMuJGJ1dHRvbnRyaWdnZXJzID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgnLmJ1dHRvbi0taW5mb3RyaWdnZXInKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRidXR0b250cmlnZ2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kYnV0dG9udHJpZ2dlcnNbaV0sICdjbGljaycsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIF90aGlzMTIuYXBwVWkub3BlbkluZm8oZSwgYSwgZWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hcHBVaS5pbmZvLmlzT3BlbiA9IGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVSZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIGlmICh0aGlzLnN1cGVyU2Nyb2xsZXIpIHRoaXMuc3VwZXJTY3JvbGxlci5yZXNpemUoKTtcbiAgICAgIHRoaXMucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplKHdpZHRoLCBoZWlnaHQpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9LCB7XG4gICAga2V5OiBcInJlc2l6ZU9yaWVudGF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZU9yaWVudGF0aW9uKHdpZHRoLCBoZWlnaHQsIG9yaWVudGF0aW9uKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3BsaXRUZXh0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnNwbGl0VGV4dHNbaV0ucmV2ZXJ0KCk7XG4gICAgICB9IC8vdGhpcy5zZXRJbWFnZXMoKTtcblxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbnRlcigpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9LCB7XG4gICAga2V5OiBcIm9uTGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICAgIHRoaXMubGVhdmUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhdmUoKSB7XG4gICAgICBpZiAodGhpcy5kb21FdmVudHMpIHRoaXMuZG9tRXZlbnRzLmRlc3Ryb3koKTtcbiAgICAgIGlmICh0aGlzLnN1cGVyU2Nyb2xsZXIpIHRoaXMuc3VwZXJTY3JvbGxlci5kZXN0cm95KCk7XG4gICAgICBpZiAodGhpcy5zdXBlckRyYWdnZXIpIHRoaXMuc3VwZXJEcmFnZ2VyLmRlc3Ryb3koKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25MZWF2ZUNvbXBsZXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkxlYXZlQ29tcGxldGVkKCkge1xuICAgICAgdGhpcy5hZnRlckxlYXZlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFmdGVyTGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWZ0ZXJMZWF2ZSgpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9XSk7XG5cbiAgcmV0dXJuIFJlbmRlcmVyO1xufShIaWdod2F5LlJlbmRlcmVyKTsgLy8gRG9uYHQgZm9yZ2V0IHRvIGV4cG9ydCB5b3VyIHJlbmRlcmVyXG5cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyZXI7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuLy8gR3NhcFxuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCc7XG5pbXBvcnQgU2Nyb2xsVHJpZ2dlciBmcm9tICdnc2FwL1Njcm9sbFRyaWdnZXInO1xuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTsgLy8gSW1wb3J0IFJlbmRlcmVyXG5cbmltcG9ydCBSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyLmpzJzsgLy8gaW1wb3J0IHN0eWxlc0RlZmF1bHQgZnJvbSAnLi9zdHlsZXNEZWZhdWx0LmNzcyc7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuLy8gVXRpbGl0aWVzXG5cbmltcG9ydCBEb21FdmVudHMgZnJvbSAnLi4vY2xhc3Nlcy9kb21FdmVudHMnO1xuaW1wb3J0IFN1cGVyU2Nyb2xsZXIgZnJvbSAnLi4vY2xhc3Nlcy9zdXBlclNjcm9sbGVyJzsgLy8gT3RoZXJcbi8vIGltcG9ydCBTbGlkZXIgZnJvbSAnLi4vY2xhc3Nlcy9zbGlkZXInO1xuLy8gaW1wb3J0IFNwbGl0VGV4dCBmcm9tICcuLi9jbGFzc2VzL3NwbGl0VGV4dCc7XG5cbnZhciBSZW5kZXJlckRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZW5kZXJlcikge1xuICBfaW5oZXJpdHMoUmVuZGVyZXJEZWZhdWx0LCBfUmVuZGVyZXIpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUmVuZGVyZXJEZWZhdWx0KTtcblxuICBmdW5jdGlvbiBSZW5kZXJlckRlZmF1bHQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlbmRlcmVyRGVmYXVsdCk7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVuZGVyZXJEZWZhdWx0LCBbe1xuICAgIGtleTogXCJzZWxlY3RvcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0b3JzKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH0sIHtcbiAgICBrZXk6IFwiZXZlbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV2ZW50cygpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9LCB7XG4gICAga2V5OiBcImJlZm9yZUVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJlZm9yZUVudGVyKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXIoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJyYWZcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmFmKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH1dKTtcblxuICByZXR1cm4gUmVuZGVyZXJEZWZhdWx0O1xufShSZW5kZXJlcik7IC8vIERvbmB0IGZvcmdldCB0byBleHBvcnQgeW91ciByZW5kZXJlclxuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyRGVmYXVsdDsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwJzsgLy9lbXB0eSBmdW5jdGlvblxuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG5cblxudmFyIGxlcnAgPSBmdW5jdGlvbiBsZXJwKGEsIGIsIG4pIHtcbiAgcmV0dXJuICgxIC0gbikgKiBhICsgbiAqIGI7XG59O1xuXG52YXIgX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7XG5cbiAgICAvL2hvb2sgZnVuY3Rpb25zXG4gICAgdGhpcy5fb25SYWYgPSBvcHRpb25zLm9uUmFmIHx8IG5vb3A7XG4gICAgdGhpcy5fb25Nb3VzZUVudGVyID0gb3B0aW9ucy5vbk1vdXNlRW50ZXIgfHwgbm9vcDtcbiAgICB0aGlzLl9vbk1vdXNlTGVhdmUgPSBvcHRpb25zLm9uTW91c2VMZWF2ZSB8fCBub29wO1xuICAgIHRoaXMuX29uRHJhZ1N0YXJ0ID0gb3B0aW9ucy5vbkRyYWdTdGFydCB8fCBub29wO1xuICAgIHRoaXMuX29uRHJhZ01vdmUgPSBvcHRpb25zLm9uRHJhZ01vdmUgfHwgbm9vcDtcbiAgICB0aGlzLl9vbkRyYWdFbmQgPSBvcHRpb25zLm9uRHJhZ0VuZCB8fCBub29wO1xuICAgIHRoaXMuX29uU25hcCA9IG9wdGlvbnMub25TbmFwIHx8IG5vb3A7XG4gICAgdGhpcy5fb25TbmFwTGltaXRzID0gb3B0aW9ucy5fb25TbmFwTGltaXRzIHx8IG5vb3A7XG4gICAgdGhpcy5yQUYgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZHJhZyA9IHtcbiAgICAgIGVuYWJsZTogdHlwZW9mIG9wdGlvbnMuZW5hYmxlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZW5hYmxlIDogdHJ1ZSxcbiAgICAgIGVsOiBvcHRpb25zLmVsLFxuICAgICAgZWxDbGlja2FibGVzOiBvcHRpb25zLmVsQ2xpY2thYmxlcyB8fCBbXSxcbiAgICAgIGlubmVyOiBvcHRpb25zLmlubmVyIHx8IG9wdGlvbnMuZWwuY2hpbGRyZW5bMF0sXG4gICAgICBlYXNlOiBvcHRpb25zLmVhc2UgfHwgMC4xLFxuICAgICAgc3BlZWQ6IG9wdGlvbnMuc3BlZWQgfHwgMixcbiAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwLFxuICAgICAgdmVsb2NpdHk6IDAsXG4gICAgICBkaXJlY3Rpb246IDAsXG4gICAgICBvbjoge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgICB9LFxuICAgICAgb2ZmOiB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDBcbiAgICAgIH0sXG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMFxuICAgICAgfSxcbiAgICAgIG1vdmVtZW50OiB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDBcbiAgICAgIH0sXG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgICB9LFxuICAgICAgbGFzdFBvc2l0aW9uOiB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDBcbiAgICAgIH0sXG4gICAgICBsaXZlUG9zaXRpb246IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMFxuICAgICAgfSxcbiAgICAgIG1pbjoge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgICB9LFxuICAgICAgbWF4OiB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDBcbiAgICAgIH0sXG4gICAgICB0b3RhbDogMCxcbiAgICAgIHNuYXA6IHR5cGVvZiBvcHRpb25zLnNuYXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbmFwIDogZmFsc2UsXG4gICAgICBzbmFwUG9zaXRpb25zOiBbXSxcbiAgICAgIHNuYXBMaW1pdHM6IFtdLFxuICAgICAgc25hcEFuaW1hdGluZzogZmFsc2UsXG4gICAgICBpbmVydGlhOiB0eXBlb2Ygb3B0aW9ucy5pbmVydGlhICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5lcnRpYSA6IDAuNCxcbiAgICAgIGVsYXN0aWNpdHk6IHR5cGVvZiBvcHRpb25zLmVsYXN0aWNpdHkgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5lbGFzdGljaXR5IDogZmFsc2UsXG4gICAgICBlbGFzdGljaXR5VHlwZTogdHlwZW9mIG9wdGlvbnMuZWxhc3RpY2l0eVR5cGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5lbGFzdGljaXR5VHlwZSA6IDFcbiAgICB9O1xuICAgIGlmICh0aGlzLl9kcmFnLnNuYXAgJiYgdGhpcy5fZHJhZy5pbmVydGlhID09PSAwKSB0aHJvdyBFcnJvcignSWYgc25hcCBpcyB0cnVlLCBpbmVydGlhIHNob3VsZCBiZSBncmVhdCB0aGFuIDAnKTtcblxuICAgIHRoaXMucmFmID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuX29uUmFmKF90aGlzLl9kcmFnKTsgLy9Nb3ZlIGlubmVyXG5cblxuICAgICAgX3RoaXMuX2RyYWcubGl2ZVBvc2l0aW9uLnggPSBsZXJwKF90aGlzLl9kcmFnLmxpdmVQb3NpdGlvbi54LCBfdGhpcy5fZHJhZy5wb3NpdGlvbi54LCBfdGhpcy5fZHJhZy5lYXNlKTtcbiAgICAgIF90aGlzLiRkcmFnSW5uZXIuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQoX3RoaXMuX2RyYWcubGl2ZVBvc2l0aW9uLngsIFwicHgsIDAsIDApXCIpO1xuXG4gICAgICBpZiAoX3RoaXMuX2RyYWcuZWxhc3RpY2l0eSkge1xuICAgICAgICAvL0NoZWNrIHZlbG9jaXR5XG4gICAgICAgIHZhciBtb3ZlbWVudFggPSBNYXRoLmFicyhfdGhpcy5fZHJhZy5saXZlUG9zaXRpb24ueCAtIF90aGlzLl9kcmFnLnBvc2l0aW9uLngpO1xuICAgICAgICB2YXIgbW92ZW1lbnQgPSBNYXRoLnNxcnQobW92ZW1lbnRYICogbW92ZW1lbnRYICsgbW92ZW1lbnRYICogbW92ZW1lbnRYKTtcbiAgICAgICAgdmFyIHZlbG9jaXR5ID0gbW92ZW1lbnQgLyAxMDtcbiAgICAgICAgX3RoaXMuX2RyYWcudmVsb2NpdHkgPSBsZXJwKF90aGlzLl9kcmFnLnZlbG9jaXR5LCB2ZWxvY2l0eSwgX3RoaXMuX2RyYWcuZWFzZSAqIDIpOyAvL0RvIGVsYXN0aWNpdHlcblxuICAgICAgICB2YXIgZWxhc3RpY2l0eSA9IF90aGlzLl9kcmFnLnZlbG9jaXR5ICogLV90aGlzLl9kcmFnLmRpcmVjdGlvbjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLiRkcmFnSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoX3RoaXMuX2RyYWcuZWxhc3RpY2l0eVR5cGUgPT09IDEgPyBfdGhpcy5fZHJhZy5kaXJlY3Rpb24gPCAwIDogX3RoaXMuX2RyYWcuZGlyZWN0aW9uID4gMCkgX3RoaXMuJGRyYWdJdGVtc1tpXS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChpICogZWxhc3RpY2l0eSwgXCJweCwgMCwgMClcIik7ZWxzZSBfdGhpcy4kZHJhZ0l0ZW1zW2ldLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoXCIuY29uY2F0KChfdGhpcy4kZHJhZ0l0ZW1zLmxlbmd0aCAtIGkpICogZWxhc3RpY2l0eSwgXCJweCwgMCwgMClcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zZWxlY3RvcnMoKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwic2VsZWN0b3JzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdG9ycygpIHtcbiAgICAgIHRoaXMuJGRyYWcgPSB0aGlzLl9kcmFnLmVsO1xuICAgICAgdGhpcy4kZHJhZ0lubmVyID0gdGhpcy5fZHJhZy5pbm5lcjtcbiAgICAgIHRoaXMuJGRyYWdJdGVtcyA9IHRoaXMuX2RyYWcuaW5uZXIuY2hpbGRyZW47XG4gICAgICB0aGlzLiRkcmFnQ2xpY2thYmxlcyA9IHRoaXMuX2RyYWcuZWxDbGlja2FibGVzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5zZXRCb3VuZHMoKTsgLy9hZGQgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG5cbiAgICAgIGdzYXAudGlja2VyLmFkZCh0aGlzLnJhZik7IC8vYWRkIGV2ZW50c1xuICAgICAgLy90aGlzLiRkcmFnSW5uZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyB0aGlzLmNsaWNrKGUpOyB9KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRkcmFnQ2xpY2thYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLiRkcmFnQ2xpY2thYmxlc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgX3RoaXMyLmNsaWNrKGUpO1xuICAgICAgICB9LCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kZHJhZ0lubmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzMi5vbihlKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy4kZHJhZy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgX3RoaXMyLmVudGVyKGUpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLiRkcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBfdGhpczIubGVhdmUoZSk7XG4gICAgICB9KTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzMi5tb3ZlKGUpO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgX3RoaXMyLm9mZihlKTtcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgX3RoaXMyLnJlc2l6ZShlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRCb3VuZHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Qm91bmRzKCkge1xuICAgICAgdmFyIGRyYWdCb3VuZGluZyA9IHRoaXMuJGRyYWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB2YXIgZHJhZ0lubmVyQm91bmRpbmcgPSB0aGlzLiRkcmFnSW5uZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB0aGlzLl9kcmFnLndpZHRoID0gZHJhZ0JvdW5kaW5nLndpZHRoO1xuICAgICAgdGhpcy5fZHJhZy5oZWlnaHQgPSBkcmFnQm91bmRpbmcuaGVpZ2h0O1xuICAgICAgdGhpcy5fZHJhZy5taW4ueCA9IGRyYWdCb3VuZGluZy53aWR0aCAtIGRyYWdJbm5lckJvdW5kaW5nLndpZHRoO1xuICAgICAgdGhpcy5fZHJhZy5tYXgueCA9IDA7XG4gICAgICB0aGlzLl9kcmFnLm9mZnNldC54ID0gZHJhZ0JvdW5kaW5nLng7IC8vQ2hlY2sgbGltaXRzIGZvciBpbmVydGlhXG5cbiAgICAgIHRoaXMuX2RyYWcuc25hcExpbWl0cy5wdXNoKDApO1xuXG4gICAgICB0aGlzLl9kcmFnLnNuYXBMaW1pdHMucHVzaChkcmFnQm91bmRpbmcud2lkdGggLSBkcmFnSW5uZXJCb3VuZGluZy53aWR0aCk7XG5cbiAgICAgIGlmICh0aGlzLl9kcmFnLnNuYXApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRkcmFnSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgYm91bmRzID0gdGhpcy4kZHJhZ0l0ZW1zW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgIHZhciBzbmFwID0gYm91bmRzLnggLSB0aGlzLl9kcmFnLm9mZnNldC54O1xuXG4gICAgICAgICAgdGhpcy5fZHJhZy5zbmFwUG9zaXRpb25zLnB1c2goLXNuYXApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsaWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsaWNrKGUpIHtcbiAgICAgIGlmIChNYXRoLmFicyh0aGlzLl9kcmFnLm9uLnggLSB0aGlzLl9kcmFnLm9mZi54KSA+IDEwKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXIoKSB7XG4gICAgICB0aGlzLl9vbk1vdXNlRW50ZXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb24oZSkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX2RyYWcuZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5fZHJhZy5vbi54ID0gZS5jbGllbnRYO1xuICAgICAgdGhpcy5vblRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLl9vbkRyYWdTdGFydCgpO1xuXG4gICAgICAgIF90aGlzMy4kZHJhZy5jbGFzc0xpc3QuYWRkKCdpcy0tZHJhZ2dpbmcnKTtcbiAgICAgIH0sIDEyMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm1vdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZShlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIXRoaXMuX2RyYWcuZHJhZ2dpbmcgfHwgIXRoaXMuX2RyYWcuZW5hYmxlKSByZXR1cm47XG5cbiAgICAgIHRoaXMuX29uRHJhZ01vdmUoKTtcblxuICAgICAgdGhpcy5fZHJhZy5tb3ZlbWVudCA9IGUuY2xpZW50WCAtIHRoaXMuX2RyYWcub24ueDtcbiAgICAgIHRoaXMuX2RyYWcuZGlyZWN0aW9uID0gTWF0aC5zaWduKGUuY2xpZW50WCAtIHRoaXMuX2RyYWcub24ueCk7XG4gICAgICB0aGlzLl9kcmFnLnBvc2l0aW9uLnggPSB0aGlzLl9kcmFnLmxhc3RQb3NpdGlvbi54ICsgZS5jbGllbnRYIC0gdGhpcy5fZHJhZy5vbi54O1xuICAgICAgdGhpcy5fZHJhZy5wb3NpdGlvbi54ID0gTWF0aC5taW4odGhpcy5fZHJhZy5tYXgueCArIHRoaXMuX2RyYWcud2lkdGggLyA0ICogdGhpcy5fZHJhZy5pbmVydGlhLCBNYXRoLm1heCh0aGlzLl9kcmFnLnBvc2l0aW9uLngsIHRoaXMuX2RyYWcubWluLnggLSB0aGlzLl9kcmFnLndpZHRoIC8gNCAqIHRoaXMuX2RyYWcuaW5lcnRpYSkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvZmZcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGUpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLm9uVGltZW91dCk7XG4gICAgICBpZiAoIXRoaXMuX2RyYWcuZHJhZ2dpbmcpIHJldHVybjtcbiAgICAgIHRoaXMuX2RyYWcuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2RyYWcub2ZmLnggPSBlLmNsaWVudFg7XG4gICAgICB0aGlzLl9kcmFnLmxhc3RQb3NpdGlvbi54ID0gdGhpcy5fZHJhZy5wb3NpdGlvbi54O1xuXG4gICAgICB0aGlzLl9vbkRyYWdFbmQoKTtcblxuICAgICAgdGhpcy4kZHJhZy5jbGFzc0xpc3QucmVtb3ZlKCdpcy0tZHJhZ2dpbmcnKTtcblxuICAgICAgaWYgKHRoaXMuX2RyYWcucG9zaXRpb24ueCA+IDAgfHwgdGhpcy5fZHJhZy5wb3NpdGlvbi54IDwgdGhpcy5fZHJhZy5taW4ueCkge1xuICAgICAgICB0aGlzLnNuYXBMaW1pdHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLl9kcmFnLnNuYXApIHRoaXMuc25hcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsZWF2ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsZWF2ZSgpIHtcbiAgICAgIHRoaXMuX29uTW91c2VMZWF2ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzbmFwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNuYXAoKSB7XG4gICAgICAvL3RoaXMuX2RyYWcuc25hcEFuaW1hdGluZyA9IHRydWU7XG4gICAgICB2YXIgZ29hbCA9IHRoaXMuX2RyYWcucG9zaXRpb24ueDtcblxuICAgICAgdmFyIGNsb3Nlc3QgPSB0aGlzLl9kcmFnLnNuYXBQb3NpdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyhjdXJyIC0gZ29hbCkgPCBNYXRoLmFicyhwcmV2IC0gZ29hbCkgPyBjdXJyIDogcHJldjtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9kcmFnLnBvc2l0aW9uLnggPSBjbG9zZXN0O1xuICAgICAgdGhpcy5fZHJhZy5sYXN0UG9zaXRpb24ueCA9IGNsb3Nlc3Q7XG5cbiAgICAgIHRoaXMuX29uU25hcCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzbmFwTGltaXRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNuYXBMaW1pdHMoKSB7XG4gICAgICAvL3RoaXMuX2RyYWcuc25hcEFuaW1hdGluZyA9IHRydWU7XG4gICAgICB2YXIgZ29hbCA9IHRoaXMuX2RyYWcucG9zaXRpb24ueDtcblxuICAgICAgdmFyIGNsb3Nlc3QgPSB0aGlzLl9kcmFnLnNuYXBMaW1pdHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyhjdXJyIC0gZ29hbCkgPCBNYXRoLmFicyhwcmV2IC0gZ29hbCkgPyBjdXJyIDogcHJldjtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9kcmFnLnBvc2l0aW9uLnggPSBjbG9zZXN0O1xuICAgICAgdGhpcy5fZHJhZy5sYXN0UG9zaXRpb24ueCA9IGNsb3Nlc3Q7XG5cbiAgICAgIHRoaXMuX29uU25hcExpbWl0cygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsZXJwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxlcnAodmFsdWUxLCB2YWx1ZTIsIGFtb3VudCkge1xuICAgICAgYW1vdW50ID0gYW1vdW50IDwgMCA/IDAgOiBhbW91bnQ7XG4gICAgICBhbW91bnQgPSBhbW91bnQgPiAxID8gMSA6IGFtb3VudDtcbiAgICAgIHJldHVybiB2YWx1ZTEgKyAodmFsdWUyIC0gdmFsdWUxKSAqIGFtb3VudDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHtcbiAgICAgIHRoaXMuc2V0Qm91bmRzKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRlc3Ryb3lcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIC8vZW1wdHkgb3B0aW9uc1xuICAgICAgdGhpcy5fZHJhZyA9IHt9OyAvL3JlbW92ZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcblxuICAgICAgZ3NhcC50aWNrZXIucmVtb3ZlKHRoaXMucmFmKTsgLy9SZW1vdmUgZXZlbnRzXG5cbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub24pO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemUpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0oKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyohXG4gKiBWZWxvY2l0eVRyYWNrZXI6IDMuNi4xXG4gKiBodHRwczovL2dyZWVuc29jay5jb21cbiAqXG4gKiBDb3B5cmlnaHQgMjAwOC0yMDIxLCBHcmVlblNvY2suIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dyZWVuc29jay5jb20vc3RhbmRhcmQtbGljZW5zZSBvciBmb3JcbiAqIENsdWIgR3JlZW5Tb2NrIG1lbWJlcnMsIHRoZSBhZ3JlZW1lbnQgaXNzdWVkIHdpdGggdGhhdCBtZW1iZXJzaGlwLlxuICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG4qL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xudmFyIGdzYXAsXG4gICAgX2NvcmVJbml0dGVkLFxuICAgIF90b0FycmF5LFxuICAgIF9nZXRVbml0LFxuICAgIF9maXJzdCxcbiAgICBfdGlja2VyLFxuICAgIF90aW1lMSxcbiAgICBfdGltZTIsXG4gICAgX2dldENhY2hlLFxuICAgIF9nZXRHU0FQID0gZnVuY3Rpb24gX2dldEdTQVAoKSB7XG4gIHJldHVybiBnc2FwIHx8IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgKGdzYXAgPSB3aW5kb3cuZ3NhcCk7XG59LFxuICAgIF9sb29rdXAgPSB7fSxcbiAgICBfcm91bmQgPSBmdW5jdGlvbiBfcm91bmQodmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiAxMDAwMCkgLyAxMDAwMDtcbn0sXG4gICAgX2dldElEID0gZnVuY3Rpb24gX2dldElEKHRhcmdldCkge1xuICByZXR1cm4gX2dldENhY2hlKHRhcmdldCkuaWQ7XG59LFxuICAgIF9nZXRCeVRhcmdldCA9IGZ1bmN0aW9uIF9nZXRCeVRhcmdldCh0YXJnZXQpIHtcbiAgcmV0dXJuIF9sb29rdXBbX2dldElEKHR5cGVvZiB0YXJnZXQgPT09IFwic3RyaW5nXCIgPyBfdG9BcnJheSh0YXJnZXQpWzBdIDogdGFyZ2V0KV07XG59LFxuICAgIF9vblRpY2sgPSBmdW5jdGlvbiBfb25UaWNrKHRpbWUpIHtcbiAgdmFyIHB0ID0gX2ZpcnN0LFxuICAgICAgdmFsOyAvL2lmIHRoZSBmcmFtZSByYXRlIGlzIHRvbyBoaWdoLCB3ZSB3b24ndCBiZSBhYmxlIHRvIHRyYWNrIHRoZSB2ZWxvY2l0eSBhcyB3ZWxsLCBzbyBvbmx5IHVwZGF0ZSB0aGUgdmFsdWVzIGFib3V0IDIwIHRpbWVzIHBlciBzZWNvbmRcblxuICBpZiAodGltZSAtIF90aW1lMSA+PSAwLjA1KSB7XG4gICAgX3RpbWUyID0gX3RpbWUxO1xuICAgIF90aW1lMSA9IHRpbWU7XG5cbiAgICB3aGlsZSAocHQpIHtcbiAgICAgIHZhbCA9IHB0LmcocHQudCwgcHQucCk7XG5cbiAgICAgIGlmICh2YWwgIT09IHB0LnYxIHx8IHRpbWUgLSBwdC50MSA+IDAuMikge1xuICAgICAgICAvL3VzZSBhIHRocmVzaG9sZCBvZiAwLjIgc2Vjb25kcyBmb3IgemVyb2luZy1vdXQgdmVsb2NpdHkuIElmIHdlIG9ubHkgdXNlIDAuMDUgYW5kIHRoaW5ncyB1cGRhdGUgc2xpZ2h0bHkgc2xvd2VyLCBsaWtlIHNvbWUgQW5kcm9pZCBkZXZpY2VzIGRpc3BhdGNoIFwidG91Y2htb3ZlXCIgZXZlbnRzIHNsdWdnaXNobHkgc28gMiBvciAzIHRpY2tzIG9mIHRoZSBnc2FwLnRpY2tlciBtYXkgZWxhcHNlIGluYmV0d2VlbiwgdGh1cyBpdCBtYXkgYXBwZWFyIGxpa2UgdGhlIG9iamVjdCBpcyBub3QgbW92aW5nIGJ1dCBpdCBhY3R1YWxseSBpcyBidXQgaXQncyBub3QgdXBkYXRpbmcgYXMgZnJlcXVlbnRseS4gQSB0aHJlc2hvbGQgb2YgMC4yIHNlY29uZHMgc2VlbXMgdG8gYmUgYSBnb29kIGJhbGFuY2UuIFdlIHdhbnQgdG8gdXBkYXRlIHRoaW5ncyBmcmVxdWVudGx5ICgwLjA1IHNlY29uZHMpIHdoZW4gdGhleSdyZSBtb3Zpbmcgc28gdGhhdCB3ZSBjYW4gcmVzcG9uZCB0byBmYXN0IG1vdGlvbnMgYWNjdXJhdGVseSwgYnV0IHdlIHdhbnQgdG8gYmUgbW9yZSByZXNpc3RhbnQgdG8gZ28gYmFjayB0byBhIHplcm8gdmVsb2NpdHkuXG4gICAgICAgIHB0LnYyID0gcHQudjE7XG4gICAgICAgIHB0LnYxID0gdmFsO1xuICAgICAgICBwdC50MiA9IHB0LnQxO1xuICAgICAgICBwdC50MSA9IHRpbWU7XG4gICAgICB9XG5cbiAgICAgIHB0ID0gcHQuX25leHQ7XG4gICAgfVxuICB9XG59LFxuICAgIF90eXBlcyA9IHtcbiAgZGVnOiAzNjAsXG4gIHJhZDogTWF0aC5QSSAqIDJcbn0sXG4gICAgX2luaXRDb3JlID0gZnVuY3Rpb24gX2luaXRDb3JlKCkge1xuICBnc2FwID0gX2dldEdTQVAoKTtcblxuICBpZiAoZ3NhcCkge1xuICAgIF90b0FycmF5ID0gZ3NhcC51dGlscy50b0FycmF5O1xuICAgIF9nZXRVbml0ID0gZ3NhcC51dGlscy5nZXRVbml0O1xuICAgIF9nZXRDYWNoZSA9IGdzYXAuY29yZS5nZXRDYWNoZTtcbiAgICBfdGlja2VyID0gZ3NhcC50aWNrZXI7XG4gICAgX2NvcmVJbml0dGVkID0gMTtcbiAgfVxufTtcblxudmFyIFByb3BUcmFja2VyID0gZnVuY3Rpb24gUHJvcFRyYWNrZXIodGFyZ2V0LCBwcm9wZXJ0eSwgdHlwZSwgbmV4dCkge1xuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvcFRyYWNrZXIpO1xuXG4gIHRoaXMudCA9IHRhcmdldDtcbiAgdGhpcy5wID0gcHJvcGVydHk7XG4gIHRoaXMuZyA9IHRhcmdldC5fZ3NhcC5nZXQ7XG4gIHRoaXMuckNhcCA9IF90eXBlc1t0eXBlIHx8IF9nZXRVbml0KHRoaXMuZyh0YXJnZXQsIHByb3BlcnR5KSldOyAvL3JvdGF0aW9uYWwgY2FwIChmb3IgZGVncmVlcywgXCJkZWdcIiwgaXQncyAzNjAgYW5kIGZvciByYWRpYW5zLCBcInJhZFwiLCBpdCdzIE1hdGguUEkgKiAyKVxuXG4gIHRoaXMudjEgPSB0aGlzLnYyID0gMDtcbiAgdGhpcy50MSA9IHRoaXMudDIgPSBfdGlja2VyLnRpbWU7XG5cbiAgaWYgKG5leHQpIHtcbiAgICB0aGlzLl9uZXh0ID0gbmV4dDtcbiAgICBuZXh0Ll9wcmV2ID0gdGhpcztcbiAgfVxufTtcblxuZXhwb3J0IHZhciBWZWxvY2l0eVRyYWNrZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBWZWxvY2l0eVRyYWNrZXIodGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZWxvY2l0eVRyYWNrZXIpO1xuXG4gICAgaWYgKCFfY29yZUluaXR0ZWQpIHtcbiAgICAgIF9pbml0Q29yZSgpO1xuICAgIH1cblxuICAgIHRoaXMudGFyZ2V0ID0gX3RvQXJyYXkodGFyZ2V0KVswXTtcbiAgICBfbG9va3VwW19nZXRJRCh0aGlzLnRhcmdldCldID0gdGhpcztcbiAgICB0aGlzLl9wcm9wcyA9IHt9O1xuICAgIHByb3BlcnR5ICYmIHRoaXMuYWRkKHByb3BlcnR5KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhWZWxvY2l0eVRyYWNrZXIsIFt7XG4gICAga2V5OiBcImdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQocHJvcGVydHksIHNraXBSZWNlbnRUaWNrKSB7XG4gICAgICB2YXIgcHQgPSB0aGlzLl9wcm9wc1twcm9wZXJ0eV0gfHwgY29uc29sZS53YXJuKFwiTm90IHRyYWNraW5nIFwiICsgcHJvcGVydHkgKyBcIiB2ZWxvY2l0eS5cIiksXG4gICAgICAgICAgdmFsLFxuICAgICAgICAgIGRpZixcbiAgICAgICAgICByb3RhdGlvbkNhcDtcbiAgICAgIHZhbCA9IHBhcnNlRmxvYXQoc2tpcFJlY2VudFRpY2sgPyBwdC52MSA6IHB0LmcocHQudCwgcHQucCkpO1xuICAgICAgZGlmID0gdmFsIC0gcGFyc2VGbG9hdChwdC52Mik7XG4gICAgICByb3RhdGlvbkNhcCA9IHB0LnJDYXA7XG5cbiAgICAgIGlmIChyb3RhdGlvbkNhcCkge1xuICAgICAgICAvL3JvdGF0aW9uYWwgdmFsdWVzIG5lZWQgc3BlY2lhbCBpbnRlcnByZXRhdGlvbiBzbyB0aGF0IGlmLCBmb3IgZXhhbXBsZSwgdGhleSBnbyBmcm9tIDE3OSB0byAtMTc4IGRlZ3JlZXMgaXQgaXMgaW50ZXJwcmV0ZWQgYXMgYSBjaGFuZ2Ugb2YgMyBpbnN0ZWFkIG9mIC0zNTcuXG4gICAgICAgIGRpZiA9IGRpZiAlIHJvdGF0aW9uQ2FwO1xuXG4gICAgICAgIGlmIChkaWYgIT09IGRpZiAlIChyb3RhdGlvbkNhcCAvIDIpKSB7XG4gICAgICAgICAgZGlmID0gZGlmIDwgMCA/IGRpZiArIHJvdGF0aW9uQ2FwIDogZGlmIC0gcm90YXRpb25DYXA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9yb3VuZChkaWYgLyAoKHNraXBSZWNlbnRUaWNrID8gcHQudDEgOiBfdGlja2VyLnRpbWUpIC0gcHQudDIpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QWxsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fSxcbiAgICAgICAgICBwcm9wcyA9IHRoaXMuX3Byb3BzLFxuICAgICAgICAgIHA7XG5cbiAgICAgIGZvciAocCBpbiBwcm9wcykge1xuICAgICAgICByZXN1bHRbcF0gPSB0aGlzLmdldChwKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNUcmFja2luZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RyYWNraW5nKHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gcHJvcGVydHkgaW4gdGhpcy5fcHJvcHM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQocHJvcGVydHksIHR5cGUpIHtcbiAgICAgIGlmICghKHByb3BlcnR5IGluIHRoaXMuX3Byb3BzKSkge1xuICAgICAgICBpZiAoIV9maXJzdCkge1xuICAgICAgICAgIF90aWNrZXIuYWRkKF9vblRpY2spO1xuXG4gICAgICAgICAgX3RpbWUxID0gX3RpbWUyID0gX3RpY2tlci50aW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgX2ZpcnN0ID0gdGhpcy5fcHJvcHNbcHJvcGVydHldID0gbmV3IFByb3BUcmFja2VyKHRoaXMudGFyZ2V0LCBwcm9wZXJ0eSwgdHlwZSwgX2ZpcnN0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShwcm9wZXJ0eSkge1xuICAgICAgdmFyIHB0ID0gdGhpcy5fcHJvcHNbcHJvcGVydHldLFxuICAgICAgICAgIHByZXYsXG4gICAgICAgICAgbmV4dDtcblxuICAgICAgaWYgKHB0KSB7XG4gICAgICAgIHByZXYgPSBwdC5fcHJldjtcbiAgICAgICAgbmV4dCA9IHB0Ll9uZXh0O1xuXG4gICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgcHJldi5fbmV4dCA9IG5leHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgIG5leHQuX3ByZXYgPSBwcmV2O1xuICAgICAgICB9IGVsc2UgaWYgKF9maXJzdCA9PT0gcHQpIHtcbiAgICAgICAgICBfdGlja2VyLnJlbW92ZShfb25UaWNrKTtcblxuICAgICAgICAgIF9maXJzdCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgdGhpcy5fcHJvcHNbcHJvcGVydHldO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJraWxsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGtpbGwoc2hhbGxvdykge1xuICAgICAgZm9yICh2YXIgcCBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICB0aGlzLnJlbW92ZShwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGFsbG93KSB7XG4gICAgICAgIGRlbGV0ZSBfbG9va3VwW19nZXRJRCh0aGlzLnRhcmdldCldO1xuICAgICAgfVxuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcInJlZ2lzdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyKGNvcmUpIHtcbiAgICAgIGdzYXAgPSBjb3JlO1xuXG4gICAgICBfaW5pdENvcmUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidHJhY2tcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhY2sodGFyZ2V0cywgcHJvcGVydGllcywgdHlwZXMpIHtcbiAgICAgIGlmICghX2NvcmVJbml0dGVkKSB7XG4gICAgICAgIF9pbml0Q29yZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVzdWx0ID0gW10sXG4gICAgICAgICAgdGFyZ3MgPSBfdG9BcnJheSh0YXJnZXRzKSxcbiAgICAgICAgICBhID0gcHJvcGVydGllcy5zcGxpdChcIixcIiksXG4gICAgICAgICAgdCA9ICh0eXBlcyB8fCBcIlwiKS5zcGxpdChcIixcIiksXG4gICAgICAgICAgaSA9IHRhcmdzLmxlbmd0aCxcbiAgICAgICAgICB0cmFja2VyLFxuICAgICAgICAgIGo7XG5cbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdHJhY2tlciA9IF9nZXRCeVRhcmdldCh0YXJnc1tpXSkgfHwgbmV3IFZlbG9jaXR5VHJhY2tlcih0YXJnc1tpXSk7XG4gICAgICAgIGogPSBhLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgICAgdHJhY2tlci5hZGQoYVtqXSwgdFtqXSB8fCB0WzBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdC5wdXNoKHRyYWNrZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1bnRyYWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVudHJhY2sodGFyZ2V0cywgcHJvcGVydGllcykge1xuICAgICAgdmFyIHByb3BzID0gKHByb3BlcnRpZXMgfHwgXCJcIikuc3BsaXQoXCIsXCIpO1xuXG4gICAgICBfdG9BcnJheSh0YXJnZXRzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdmFyIHRyYWNrZXIgPSBfZ2V0QnlUYXJnZXQodGFyZ2V0KTtcblxuICAgICAgICBpZiAodHJhY2tlcikge1xuICAgICAgICAgIGlmICghcHJvcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cmFja2VyLmtpbGwoMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrZXIucmVtb3ZlKHApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNUcmFja2luZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RyYWNraW5nKHRhcmdldCwgcHJvcGVydHkpIHtcbiAgICAgIHZhciB0cmFja2VyID0gX2dldEJ5VGFyZ2V0KHRhcmdldCk7XG5cbiAgICAgIHJldHVybiB0cmFja2VyICYmIHRyYWNrZXIuaXNUcmFja2luZyhwcm9wZXJ0eSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFZlbG9jaXR5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZlbG9jaXR5KHRhcmdldCwgcHJvcGVydHkpIHtcbiAgICAgIHZhciB0cmFja2VyID0gX2dldEJ5VGFyZ2V0KHRhcmdldCk7XG5cbiAgICAgIHJldHVybiAhdHJhY2tlciB8fCAhdHJhY2tlci5pc1RyYWNraW5nKHByb3BlcnR5KSA/IGNvbnNvbGUud2FybihcIk5vdCB0cmFja2luZyB2ZWxvY2l0eSBvZiBcIiArIHByb3BlcnR5KSA6IHRyYWNrZXIuZ2V0KHByb3BlcnR5KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVmVsb2NpdHlUcmFja2VyO1xufSgpO1xuVmVsb2NpdHlUcmFja2VyLmdldEJ5VGFyZ2V0ID0gX2dldEJ5VGFyZ2V0O1xuX2dldEdTQVAoKSAmJiBnc2FwLnJlZ2lzdGVyUGx1Z2luKFZlbG9jaXR5VHJhY2tlcik7XG5leHBvcnQgeyBWZWxvY2l0eVRyYWNrZXIgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuLyohXG4gKiBJbmVydGlhUGx1Z2luIDMuNi4xXG4gKiBodHRwczovL2dyZWVuc29jay5jb21cbiAqXG4gKiBAbGljZW5zZSBDb3B5cmlnaHQgMjAwOC0yMDIxLCBHcmVlblNvY2suIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dyZWVuc29jay5jb20vc3RhbmRhcmQtbGljZW5zZSBvciBmb3JcbiAqIENsdWIgR3JlZW5Tb2NrIG1lbWJlcnMsIHRoZSBhZ3JlZW1lbnQgaXNzdWVkIHdpdGggdGhhdCBtZW1iZXJzaGlwLlxuICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG4qL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IHsgVmVsb2NpdHlUcmFja2VyIH0gZnJvbSBcIi4uL3V0aWxzL1ZlbG9jaXR5VHJhY2tlci5qc1wiO1xuXG52YXIgZ3NhcCxcbiAgICBfY29yZUluaXR0ZWQsXG4gICAgX3BhcnNlRWFzZSxcbiAgICBfdG9BcnJheSxcbiAgICBfcG93ZXIzLFxuICAgIF9jb25maWcsXG4gICAgX2dldFVuaXQsXG4gICAgUHJvcFR3ZWVuLFxuICAgIF9nZXRDYWNoZSxcbiAgICBfY2hlY2tQb2ludFJhdGlvLFxuICAgIF9jbGFtcCxcbiAgICBfcHJvY2Vzc2luZ1ZhcnMsXG4gICAgX2dldFRyYWNrZXIgPSBWZWxvY2l0eVRyYWNrZXIuZ2V0QnlUYXJnZXQsXG4gICAgX2dldEdTQVAgPSBmdW5jdGlvbiBfZ2V0R1NBUCgpIHtcbiAgcmV0dXJuIGdzYXAgfHwgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoZ3NhcCA9IHdpbmRvdy5nc2FwKSAmJiBnc2FwLnJlZ2lzdGVyUGx1Z2luICYmIGdzYXA7XG59LFxuICAgIF9pc1N0cmluZyA9IGZ1bmN0aW9uIF9pc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xufSxcbiAgICBfaXNOdW1iZXIgPSBmdW5jdGlvbiBfaXNOdW1iZXIodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIjtcbn0sXG4gICAgX2lzT2JqZWN0ID0gZnVuY3Rpb24gX2lzT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBfdHlwZW9mKHZhbHVlKSA9PT0gXCJvYmplY3RcIjtcbn0sXG4gICAgX2lzRnVuY3Rpb24gPSBmdW5jdGlvbiBfaXNGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCI7XG59LFxuICAgIF9ib251c1ZhbGlkYXRlZCA9IDEsXG4gICAgLy88bmFtZT5JbmVydGlhUGx1Z2luPC9uYW1lPlxuX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5LFxuICAgIF9lbXB0eUZ1bmMgPSBmdW5jdGlvbiBfZW1wdHlGdW5jKHApIHtcbiAgcmV0dXJuIHA7XG59LFxuICAgIF9iaWdOdW0gPSAxZTEwLFxuICAgIF90aW55TnVtID0gMSAvIF9iaWdOdW0sXG4gICAgX2NoZWNrUG9pbnQgPSAwLjA1LFxuICAgIF9yb3VuZCA9IGZ1bmN0aW9uIF9yb3VuZCh2YWx1ZSkge1xuICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIDEwMDAwKSAvIDEwMDAwO1xufSxcbiAgICBfZXh0ZW5kID0gZnVuY3Rpb24gX2V4dGVuZChvYmosIGRlZmF1bHRzLCBleGNsdWRlKSB7XG4gIGZvciAodmFyIHAgaW4gZGVmYXVsdHMpIHtcbiAgICBpZiAoIShwIGluIG9iaikgJiYgcCAhPT0gZXhjbHVkZSkge1xuICAgICAgb2JqW3BdID0gZGVmYXVsdHNbcF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn0sXG4gICAgX2RlZXBDbG9uZSA9IGZ1bmN0aW9uIF9kZWVwQ2xvbmUob2JqKSB7XG4gIHZhciBjb3B5ID0ge30sXG4gICAgICBwLFxuICAgICAgdjtcblxuICBmb3IgKHAgaW4gb2JqKSB7XG4gICAgY29weVtwXSA9IF9pc09iamVjdCh2ID0gb2JqW3BdKSA/IF9kZWVwQ2xvbmUodikgOiB2O1xuICB9XG5cbiAgcmV0dXJuIGNvcHk7XG59LFxuICAgIF9nZXRDbG9zZXN0ID0gZnVuY3Rpb24gX2dldENsb3Nlc3QobiwgdmFsdWVzLCBtYXgsIG1pbiwgcmFkaXVzKSB7XG4gIHZhciBpID0gdmFsdWVzLmxlbmd0aCxcbiAgICAgIGNsb3Nlc3QgPSAwLFxuICAgICAgYWJzRGlmID0gX2JpZ051bSxcbiAgICAgIHZhbCxcbiAgICAgIGRpZixcbiAgICAgIHAsXG4gICAgICBkaXN0O1xuXG4gIGlmIChfaXNPYmplY3QobikpIHtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSB2YWx1ZXNbaV07XG4gICAgICBkaWYgPSAwO1xuXG4gICAgICBmb3IgKHAgaW4gbikge1xuICAgICAgICBkaXN0ID0gdmFsW3BdIC0gbltwXTtcbiAgICAgICAgZGlmICs9IGRpc3QgKiBkaXN0O1xuICAgICAgfVxuXG4gICAgICBpZiAoZGlmIDwgYWJzRGlmKSB7XG4gICAgICAgIGNsb3Nlc3QgPSBpO1xuICAgICAgICBhYnNEaWYgPSBkaWY7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKChyYWRpdXMgfHwgX2JpZ051bSkgPCBfYmlnTnVtICYmIHJhZGl1cyA8IE1hdGguc3FydChhYnNEaWYpKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gdmFsdWVzW2ldO1xuICAgICAgZGlmID0gdmFsIC0gbjtcblxuICAgICAgaWYgKGRpZiA8IDApIHtcbiAgICAgICAgZGlmID0gLWRpZjtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpZiA8IGFic0RpZiAmJiB2YWwgPj0gbWluICYmIHZhbCA8PSBtYXgpIHtcbiAgICAgICAgY2xvc2VzdCA9IGk7XG4gICAgICAgIGFic0RpZiA9IGRpZjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdmFsdWVzW2Nsb3Nlc3RdO1xufSxcbiAgICBfcGFyc2VFbmQgPSBmdW5jdGlvbiBfcGFyc2VFbmQoY3VyUHJvcCwgZW5kLCBtYXgsIG1pbiwgbmFtZSwgcmFkaXVzKSB7XG4gIGlmIChjdXJQcm9wLmVuZCA9PT0gXCJhdXRvXCIpIHtcbiAgICByZXR1cm4gY3VyUHJvcDtcbiAgfVxuXG4gIHZhciBlbmRWYXIgPSBjdXJQcm9wLmVuZCxcbiAgICAgIGFkanVzdGVkRW5kLFxuICAgICAgcDtcbiAgbWF4ID0gaXNOYU4obWF4KSA/IF9iaWdOdW0gOiBtYXg7XG4gIG1pbiA9IGlzTmFOKG1pbikgPyAtX2JpZ051bSA6IG1pbjtcblxuICBpZiAoX2lzT2JqZWN0KGVuZCkpIHtcbiAgICAvL2ZvciBvYmplY3RzLCBsaWtlIHt4LCB5fSB3aGVyZSB0aGV5J3JlIGxpbmtlZCBhbmQgd2UgbXVzdCBwYXNzIGFuIG9iamVjdCB0byB0aGUgZnVuY3Rpb24gb3IgZmluZCB0aGUgY2xvc2VzdCB2YWx1ZSBpbiBhbiBhcnJheS5cbiAgICBhZGp1c3RlZEVuZCA9IGVuZC5jYWxjdWxhdGVkID8gZW5kIDogKF9pc0Z1bmN0aW9uKGVuZFZhcikgPyBlbmRWYXIoZW5kKSA6IF9nZXRDbG9zZXN0KGVuZCwgZW5kVmFyLCBtYXgsIG1pbiwgcmFkaXVzKSkgfHwgZW5kO1xuXG4gICAgaWYgKCFlbmQuY2FsY3VsYXRlZCkge1xuICAgICAgZm9yIChwIGluIGFkanVzdGVkRW5kKSB7XG4gICAgICAgIGVuZFtwXSA9IGFkanVzdGVkRW5kW3BdO1xuICAgICAgfVxuXG4gICAgICBlbmQuY2FsY3VsYXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgYWRqdXN0ZWRFbmQgPSBhZGp1c3RlZEVuZFtuYW1lXTtcbiAgfSBlbHNlIHtcbiAgICBhZGp1c3RlZEVuZCA9IF9pc0Z1bmN0aW9uKGVuZFZhcikgPyBlbmRWYXIoZW5kKSA6IF9pc0FycmF5KGVuZFZhcikgPyBfZ2V0Q2xvc2VzdChlbmQsIGVuZFZhciwgbWF4LCBtaW4sIHJhZGl1cykgOiBwYXJzZUZsb2F0KGVuZFZhcik7XG4gIH1cblxuICBpZiAoYWRqdXN0ZWRFbmQgPiBtYXgpIHtcbiAgICBhZGp1c3RlZEVuZCA9IG1heDtcbiAgfSBlbHNlIGlmIChhZGp1c3RlZEVuZCA8IG1pbikge1xuICAgIGFkanVzdGVkRW5kID0gbWluO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtYXg6IGFkanVzdGVkRW5kLFxuICAgIG1pbjogYWRqdXN0ZWRFbmQsXG4gICAgdW5pdEZhY3RvcjogY3VyUHJvcC51bml0RmFjdG9yXG4gIH07XG59LFxuICAgIF9nZXROdW1PckRlZmF1bHQgPSBmdW5jdGlvbiBfZ2V0TnVtT3JEZWZhdWx0KHZhcnMsIHByb3BlcnR5LCBkZWZhdWx0VmFsdWUpIHtcbiAgcmV0dXJuIGlzTmFOKHZhcnNbcHJvcGVydHldKSA/IGRlZmF1bHRWYWx1ZSA6ICt2YXJzW3Byb3BlcnR5XTtcbn0sXG4gICAgX2NhbGN1bGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIF9jYWxjdWxhdGVDaGFuZ2UodmVsb2NpdHksIGR1cmF0aW9uKSB7XG4gIHJldHVybiBkdXJhdGlvbiAqIF9jaGVja1BvaW50ICogdmVsb2NpdHkgLyBfY2hlY2tQb2ludFJhdGlvO1xufSxcbiAgICBfY2FsY3VsYXRlRHVyYXRpb24gPSBmdW5jdGlvbiBfY2FsY3VsYXRlRHVyYXRpb24oc3RhcnQsIGVuZCwgdmVsb2NpdHkpIHtcbiAgcmV0dXJuIE1hdGguYWJzKChlbmQgLSBzdGFydCkgKiBfY2hlY2tQb2ludFJhdGlvIC8gdmVsb2NpdHkgLyBfY2hlY2tQb2ludCk7XG59LFxuICAgIF9yZXNlcnZlZFByb3BzID0ge1xuICByZXNpc3RhbmNlOiAxLFxuICBjaGVja3BvaW50OiAxLFxuICBwcmV2ZW50T3ZlcnNob290OiAxLFxuICBsaW5rZWRQcm9wczogMSxcbiAgcmFkaXVzOiAxLFxuICBkdXJhdGlvbjogMVxufSxcbiAgICBfcHJvY2Vzc0xpbmtlZFByb3BzID0gZnVuY3Rpb24gX3Byb2Nlc3NMaW5rZWRQcm9wcyh0YXJnZXQsIHZhcnMsIGdldFZhbCwgcmVzaXN0YW5jZSkge1xuICBpZiAodmFycy5saW5rZWRQcm9wcykge1xuICAgIC8vd2hlbiB0aGVyZSBhcmUgbGlua2VkUHJvcHMgKHR5cGljYWxseSBcIngseVwiIHdoZXJlIHNuYXBwaW5nIGhhcyB0byBmYWN0b3IgaW4gbXVsdGlwbGUgcHJvcGVydGllcywgd2UgbXVzdCBmaXJzdCBwb3B1bGF0ZSBhbiBvYmplY3Qgd2l0aCBhbGwgb2YgdGhvc2UgZW5kIHZhbHVlcywgdGhlbiBmZWVkIGl0IHRvIHRoZSBmdW5jdGlvbiB0aGF0IG1ha2UgYW55IG5lY2Vzc2FyeSBhbHRlcmF0aW9ucy4gU28gdGhlIHBvaW50IG9mIHRoaXMgZmlyc3QgbG9vcCBpcyB0byBzaW1wbHkgYnVpbGQgYW4gb2JqZWN0IChsaWtlIHt4OjEwMCwgeToyMDQuNX0pIGZvciBmZWVkaW5nIGludG8gdGhhdCBmdW5jdGlvbiB3aGljaCB3ZSdsbCBkbyBsYXRlciBpbiB0aGUgXCJyZWFsXCIgbG9vcC5cbiAgICB2YXIgbGlua2VkUHJvcE5hbWVzID0gdmFycy5saW5rZWRQcm9wcy5zcGxpdChcIixcIiksXG4gICAgICAgIGxpbmtlZFByb3BzID0ge30sXG4gICAgICAgIGksXG4gICAgICAgIHAsXG4gICAgICAgIGN1clByb3AsXG4gICAgICAgIGN1clZlbG9jaXR5LFxuICAgICAgICB0cmFja2VyLFxuICAgICAgICBjdXJEdXJhdGlvbjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsaW5rZWRQcm9wTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHAgPSBsaW5rZWRQcm9wTmFtZXNbaV07XG4gICAgICBjdXJQcm9wID0gdmFyc1twXTtcblxuICAgICAgaWYgKGN1clByb3ApIHtcbiAgICAgICAgaWYgKF9pc051bWJlcihjdXJQcm9wLnZlbG9jaXR5KSkge1xuICAgICAgICAgIGN1clZlbG9jaXR5ID0gY3VyUHJvcC52ZWxvY2l0eTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cmFja2VyID0gdHJhY2tlciB8fCBfZ2V0VHJhY2tlcih0YXJnZXQpO1xuICAgICAgICAgIGN1clZlbG9jaXR5ID0gdHJhY2tlciAmJiB0cmFja2VyLmlzVHJhY2tpbmcocCkgPyB0cmFja2VyLmdldChwKSA6IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJEdXJhdGlvbiA9IE1hdGguYWJzKGN1clZlbG9jaXR5IC8gX2dldE51bU9yRGVmYXVsdChjdXJQcm9wLCBcInJlc2lzdGFuY2VcIiwgcmVzaXN0YW5jZSkpO1xuICAgICAgICBsaW5rZWRQcm9wc1twXSA9IHBhcnNlRmxvYXQoZ2V0VmFsKHRhcmdldCwgcCkpICsgX2NhbGN1bGF0ZUNoYW5nZShjdXJWZWxvY2l0eSwgY3VyRHVyYXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsaW5rZWRQcm9wcztcbiAgfVxufSxcbiAgICBfY2FsY3VsYXRlVHdlZW5EdXJhdGlvbiA9IGZ1bmN0aW9uIF9jYWxjdWxhdGVUd2VlbkR1cmF0aW9uKHRhcmdldCwgdmFycykge1xuICB2YXIgbWF4RHVyYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDEwO1xuICB2YXIgbWluRHVyYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDAuMjtcbiAgdmFyIG92ZXJzaG9vdFRvbGVyYW5jZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogMTtcbiAgdmFyIHJlY29yZEVuZCA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDogMDtcbiAgX2lzU3RyaW5nKHRhcmdldCkgJiYgKHRhcmdldCA9IF90b0FycmF5KHRhcmdldClbMF0pO1xuXG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICB2YXIgZHVyYXRpb24gPSAwLFxuICAgICAgY2xpcHBlZER1cmF0aW9uID0gX2JpZ051bSxcbiAgICAgIGluZXJ0aWFWYXJzID0gdmFycy5pbmVydGlhIHx8IHZhcnMsXG4gICAgICBnZXRWYWwgPSBfZ2V0Q2FjaGUodGFyZ2V0KS5nZXQsXG4gICAgICByZXNpc3RhbmNlID0gX2dldE51bU9yRGVmYXVsdChpbmVydGlhVmFycywgXCJyZXNpc3RhbmNlXCIsIF9jb25maWcucmVzaXN0YW5jZSksXG4gICAgICBwLFxuICAgICAgY3VyUHJvcCxcbiAgICAgIGN1ckR1cmF0aW9uLFxuICAgICAgY3VyVmVsb2NpdHksXG4gICAgICBjdXJWYWwsXG4gICAgICBlbmQsXG4gICAgICBjdXJDbGlwcGVkRHVyYXRpb24sXG4gICAgICB0cmFja2VyLFxuICAgICAgdW5pdEZhY3RvcixcbiAgICAgIGxpbmtlZFByb3BzOyAvL3doZW4gdGhlcmUgYXJlIGxpbmtlZFByb3BzICh0eXBpY2FsbHkgXCJ4LHlcIiB3aGVyZSBzbmFwcGluZyBoYXMgdG8gZmFjdG9yIGluIG11bHRpcGxlIHByb3BlcnRpZXMsIHdlIG11c3QgZmlyc3QgcG9wdWxhdGUgYW4gb2JqZWN0IHdpdGggYWxsIG9mIHRob3NlIGVuZCB2YWx1ZXMsIHRoZW4gZmVlZCBpdCB0byB0aGUgZnVuY3Rpb24gdGhhdCBtYWtlIGFueSBuZWNlc3NhcnkgYWx0ZXJhdGlvbnMuIFNvIHRoZSBwb2ludCBvZiB0aGlzIGZpcnN0IGxvb3AgaXMgdG8gc2ltcGx5IGJ1aWxkIGFuIG9iamVjdCAobGlrZSB7eDoxMDAsIHk6MjA0LjV9KSBmb3IgZmVlZGluZyBpbnRvIHRoYXQgZnVuY3Rpb24gd2hpY2ggd2UnbGwgZG8gbGF0ZXIgaW4gdGhlIFwicmVhbFwiIGxvb3AuXG5cblxuICBsaW5rZWRQcm9wcyA9IF9wcm9jZXNzTGlua2VkUHJvcHModGFyZ2V0LCBpbmVydGlhVmFycywgZ2V0VmFsLCByZXNpc3RhbmNlKTtcblxuICBmb3IgKHAgaW4gaW5lcnRpYVZhcnMpIHtcbiAgICBpZiAoIV9yZXNlcnZlZFByb3BzW3BdKSB7XG4gICAgICBjdXJQcm9wID0gaW5lcnRpYVZhcnNbcF07XG5cbiAgICAgIGlmICghX2lzT2JqZWN0KGN1clByb3ApKSB7XG4gICAgICAgIHRyYWNrZXIgPSB0cmFja2VyIHx8IF9nZXRUcmFja2VyKHRhcmdldCk7XG5cbiAgICAgICAgaWYgKHRyYWNrZXIgJiYgdHJhY2tlci5pc1RyYWNraW5nKHApKSB7XG4gICAgICAgICAgY3VyUHJvcCA9IF9pc051bWJlcihjdXJQcm9wKSA/IHtcbiAgICAgICAgICAgIHZlbG9jaXR5OiBjdXJQcm9wXG4gICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIHZlbG9jaXR5OiB0cmFja2VyLmdldChwKVxuICAgICAgICAgIH07IC8vaWYgd2UncmUgdHJhY2tpbmcgdGhpcyBwcm9wZXJ0eSwgd2Ugc2hvdWxkIHVzZSB0aGUgdHJhY2tpbmcgdmVsb2NpdHkgYW5kIHRoZW4gdXNlIHRoZSBudW1lcmljIHZhbHVlIHRoYXQgd2FzIHBhc3NlZCBpbiBhcyB0aGUgbWluIGFuZCBtYXggc28gdGhhdCBpdCB0d2VlbnMgZXhhY3RseSB0aGVyZS5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJWZWxvY2l0eSA9ICtjdXJQcm9wIHx8IDA7XG4gICAgICAgICAgY3VyRHVyYXRpb24gPSBNYXRoLmFicyhjdXJWZWxvY2l0eSAvIHJlc2lzdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChfaXNPYmplY3QoY3VyUHJvcCkpIHtcbiAgICAgICAgaWYgKF9pc051bWJlcihjdXJQcm9wLnZlbG9jaXR5KSkge1xuICAgICAgICAgIGN1clZlbG9jaXR5ID0gY3VyUHJvcC52ZWxvY2l0eTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cmFja2VyID0gdHJhY2tlciB8fCBfZ2V0VHJhY2tlcih0YXJnZXQpO1xuICAgICAgICAgIGN1clZlbG9jaXR5ID0gdHJhY2tlciAmJiB0cmFja2VyLmlzVHJhY2tpbmcocCkgPyB0cmFja2VyLmdldChwKSA6IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJEdXJhdGlvbiA9IF9jbGFtcChtaW5EdXJhdGlvbiwgbWF4RHVyYXRpb24sIE1hdGguYWJzKGN1clZlbG9jaXR5IC8gX2dldE51bU9yRGVmYXVsdChjdXJQcm9wLCBcInJlc2lzdGFuY2VcIiwgcmVzaXN0YW5jZSkpKTtcbiAgICAgICAgY3VyVmFsID0gcGFyc2VGbG9hdChnZXRWYWwodGFyZ2V0LCBwKSkgfHwgMDtcbiAgICAgICAgZW5kID0gY3VyVmFsICsgX2NhbGN1bGF0ZUNoYW5nZShjdXJWZWxvY2l0eSwgY3VyRHVyYXRpb24pO1xuXG4gICAgICAgIGlmIChcImVuZFwiIGluIGN1clByb3ApIHtcbiAgICAgICAgICBjdXJQcm9wID0gX3BhcnNlRW5kKGN1clByb3AsIGxpbmtlZFByb3BzICYmIHAgaW4gbGlua2VkUHJvcHMgPyBsaW5rZWRQcm9wcyA6IGVuZCwgY3VyUHJvcC5tYXgsIGN1clByb3AubWluLCBwLCBpbmVydGlhVmFycy5yYWRpdXMpO1xuXG4gICAgICAgICAgaWYgKHJlY29yZEVuZCkge1xuICAgICAgICAgICAgX3Byb2Nlc3NpbmdWYXJzID09PSB2YXJzICYmIChfcHJvY2Vzc2luZ1ZhcnMgPSBpbmVydGlhVmFycyA9IF9kZWVwQ2xvbmUodmFycykpO1xuICAgICAgICAgICAgaW5lcnRpYVZhcnNbcF0gPSBfZXh0ZW5kKGN1clByb3AsIGluZXJ0aWFWYXJzW3BdLCBcImVuZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXCJtYXhcIiBpbiBjdXJQcm9wICYmIGVuZCA+ICtjdXJQcm9wLm1heCArIF90aW55TnVtKSB7XG4gICAgICAgICAgdW5pdEZhY3RvciA9IGN1clByb3AudW5pdEZhY3RvciB8fCBfY29uZmlnLnVuaXRGYWN0b3JzW3BdIHx8IDE7IC8vc29tZSB2YWx1ZXMgYXJlIG1lYXN1cmVkIGluIHNwZWNpYWwgdW5pdHMgbGlrZSByYWRpYW5zIGluIHdoaWNoIGNhc2Ugb3VyIHRocmVzaG9sZHMgbmVlZCB0byBiZSBhZGp1c3RlZCBhY2NvcmRpbmdseS5cbiAgICAgICAgICAvL2lmIHRoZSB2YWx1ZSBpcyBhbHJlYWR5IGV4Y2VlZGluZyB0aGUgbWF4IG9yIHRoZSB2ZWxvY2l0eSBpcyB0b28gbG93LCB0aGUgZHVyYXRpb24gY2FuIGVuZCB1cCBiZWluZyB1bmNvbWZvcnRhYmx5IGxvbmcgYnV0IGluIG1vc3Qgc2l0dWF0aW9ucywgdXNlcnMgd2FudCB0aGUgc25hcHBpbmcgdG8gb2NjdXIgcmVsYXRpdmVseSBxdWlja2x5ICgwLjc1IHNlY29uZHMpLCBzbyB3ZSBpbXBsZW1lbnQgYSBjYXAgaGVyZSB0byBtYWtlIHRoaW5ncyBtb3JlIGludHVpdGl2ZS4gSWYgdGhlIG1heCBhbmQgbWluIG1hdGNoLCBpdCBtZWFucyB3ZSdyZSBhbmltYXRpbmcgdG8gYSBwYXJ0aWN1bGFyIHZhbHVlIGFuZCB3ZSBkb24ndCB3YW50IHRvIHNob3J0ZW4gdGhlIHRpbWUgdW5sZXNzIHRoZSB2ZWxvY2l0eSBpcyByZWFsbHkgc2xvdy4gRXhhbXBsZTogYSByb3RhdGlvbiB3aGVyZSB0aGUgc3RhcnQgYW5kIG5hdHVyYWwgZW5kIHZhbHVlIGFyZSBsZXNzIHRoYW4gdGhlIHNuYXBwaW5nIHNwb3QsIGJ1dCB0aGUgbmF0dXJhbCBlbmQgaXMgcHJldHR5IGNsb3NlIHRvIHRoZSBzbmFwLlxuXG4gICAgICAgICAgY3VyQ2xpcHBlZER1cmF0aW9uID0gY3VyVmFsID4gY3VyUHJvcC5tYXggJiYgY3VyUHJvcC5taW4gIT09IGN1clByb3AubWF4IHx8IGN1clZlbG9jaXR5ICogdW5pdEZhY3RvciA+IC0xNSAmJiBjdXJWZWxvY2l0eSAqIHVuaXRGYWN0b3IgPCA0NSA/IG1pbkR1cmF0aW9uICsgKG1heER1cmF0aW9uIC0gbWluRHVyYXRpb24pICogMC4xIDogX2NhbGN1bGF0ZUR1cmF0aW9uKGN1clZhbCwgY3VyUHJvcC5tYXgsIGN1clZlbG9jaXR5KTtcblxuICAgICAgICAgIGlmIChjdXJDbGlwcGVkRHVyYXRpb24gKyBvdmVyc2hvb3RUb2xlcmFuY2UgPCBjbGlwcGVkRHVyYXRpb24pIHtcbiAgICAgICAgICAgIGNsaXBwZWREdXJhdGlvbiA9IGN1ckNsaXBwZWREdXJhdGlvbiArIG92ZXJzaG9vdFRvbGVyYW5jZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXCJtaW5cIiBpbiBjdXJQcm9wICYmIGVuZCA8ICtjdXJQcm9wLm1pbiAtIF90aW55TnVtKSB7XG4gICAgICAgICAgdW5pdEZhY3RvciA9IGN1clByb3AudW5pdEZhY3RvciB8fCBfY29uZmlnLnVuaXRGYWN0b3JzW3BdIHx8IDE7IC8vc29tZSB2YWx1ZXMgYXJlIG1lYXN1cmVkIGluIHNwZWNpYWwgdW5pdHMgbGlrZSByYWRpYW5zIGluIHdoaWNoIGNhc2Ugb3VyIHRocmVzaG9sZHMgbmVlZCB0byBiZSBhZGp1c3RlZCBhY2NvcmRpbmdseS5cbiAgICAgICAgICAvL2lmIHRoZSB2YWx1ZSBpcyBhbHJlYWR5IGV4Y2VlZGluZyB0aGUgbWluIG9yIGlmIHRoZSB2ZWxvY2l0eSBpcyB0b28gbG93LCB0aGUgZHVyYXRpb24gY2FuIGVuZCB1cCBiZWluZyB1bmNvbWZvcnRhYmx5IGxvbmcgYnV0IGluIG1vc3Qgc2l0dWF0aW9ucywgdXNlcnMgd2FudCB0aGUgc25hcHBpbmcgdG8gb2NjdXIgcmVsYXRpdmVseSBxdWlja2x5ICgwLjc1IHNlY29uZHMpLCBzbyB3ZSBpbXBsZW1lbnQgYSBjYXAgaGVyZSB0byBtYWtlIHRoaW5ncyBtb3JlIGludHVpdGl2ZS5cblxuICAgICAgICAgIGN1ckNsaXBwZWREdXJhdGlvbiA9IGN1clZhbCA8IGN1clByb3AubWluICYmIGN1clByb3AubWluICE9PSBjdXJQcm9wLm1heCB8fCBjdXJWZWxvY2l0eSAqIHVuaXRGYWN0b3IgPiAtNDUgJiYgY3VyVmVsb2NpdHkgKiB1bml0RmFjdG9yIDwgMTUgPyBtaW5EdXJhdGlvbiArIChtYXhEdXJhdGlvbiAtIG1pbkR1cmF0aW9uKSAqIDAuMSA6IF9jYWxjdWxhdGVEdXJhdGlvbihjdXJWYWwsIGN1clByb3AubWluLCBjdXJWZWxvY2l0eSk7XG5cbiAgICAgICAgICBpZiAoY3VyQ2xpcHBlZER1cmF0aW9uICsgb3ZlcnNob290VG9sZXJhbmNlIDwgY2xpcHBlZER1cmF0aW9uKSB7XG4gICAgICAgICAgICBjbGlwcGVkRHVyYXRpb24gPSBjdXJDbGlwcGVkRHVyYXRpb24gKyBvdmVyc2hvb3RUb2xlcmFuY2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3VyQ2xpcHBlZER1cmF0aW9uID4gZHVyYXRpb24gJiYgKGR1cmF0aW9uID0gY3VyQ2xpcHBlZER1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgY3VyRHVyYXRpb24gPiBkdXJhdGlvbiAmJiAoZHVyYXRpb24gPSBjdXJEdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgZHVyYXRpb24gPiBjbGlwcGVkRHVyYXRpb24gJiYgKGR1cmF0aW9uID0gY2xpcHBlZER1cmF0aW9uKTtcbiAgcmV0dXJuIGR1cmF0aW9uID4gbWF4RHVyYXRpb24gPyBtYXhEdXJhdGlvbiA6IGR1cmF0aW9uIDwgbWluRHVyYXRpb24gPyBtaW5EdXJhdGlvbiA6IGR1cmF0aW9uO1xufSxcbiAgICBfaW5pdENvcmUgPSBmdW5jdGlvbiBfaW5pdENvcmUoKSB7XG4gIGdzYXAgPSBfZ2V0R1NBUCgpO1xuXG4gIGlmIChnc2FwKSB7XG4gICAgX3BhcnNlRWFzZSA9IGdzYXAucGFyc2VFYXNlO1xuICAgIF90b0FycmF5ID0gZ3NhcC51dGlscy50b0FycmF5O1xuICAgIF9nZXRVbml0ID0gZ3NhcC51dGlscy5nZXRVbml0O1xuICAgIF9nZXRDYWNoZSA9IGdzYXAuY29yZS5nZXRDYWNoZTtcbiAgICBfY2xhbXAgPSBnc2FwLnV0aWxzLmNsYW1wO1xuICAgIF9wb3dlcjMgPSBfcGFyc2VFYXNlKFwicG93ZXIzXCIpO1xuICAgIF9jaGVja1BvaW50UmF0aW8gPSBfcG93ZXIzKDAuMDUpO1xuICAgIFByb3BUd2VlbiA9IGdzYXAuY29yZS5Qcm9wVHdlZW47XG4gICAgZ3NhcC5jb25maWcoe1xuICAgICAgcmVzaXN0YW5jZTogMTAwLFxuICAgICAgdW5pdEZhY3RvcnM6IHtcbiAgICAgICAgdGltZTogMTAwMCxcbiAgICAgICAgdG90YWxUaW1lOiAxMDAwLFxuICAgICAgICBwcm9ncmVzczogMTAwMCxcbiAgICAgICAgdG90YWxQcm9ncmVzczogMTAwMFxuICAgICAgfVxuICAgIH0pO1xuICAgIF9jb25maWcgPSBnc2FwLmNvbmZpZygpO1xuICAgIGdzYXAucmVnaXN0ZXJQbHVnaW4oVmVsb2NpdHlUcmFja2VyKTtcbiAgICBfY29yZUluaXR0ZWQgPSAxO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIEluZXJ0aWFQbHVnaW4gPSB7XG4gIHZlcnNpb246IFwiMy42LjFcIixcbiAgbmFtZTogXCJpbmVydGlhXCIsXG4gIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3Rlcihjb3JlKSB7XG4gICAgZ3NhcCA9IGNvcmU7XG5cbiAgICBfaW5pdENvcmUoKTtcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCh0YXJnZXQsIHZhcnMsIHR3ZWVuLCBpbmRleCwgdGFyZ2V0cykge1xuICAgIF9jb3JlSW5pdHRlZCB8fCBfaW5pdENvcmUoKTtcblxuICAgIHZhciB0cmFja2VyID0gX2dldFRyYWNrZXIodGFyZ2V0KTtcblxuICAgIGlmICh2YXJzID09PSBcImF1dG9cIikge1xuICAgICAgaWYgKCF0cmFja2VyKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIk5vIGluZXJ0aWEgdHJhY2tpbmcgb24gXCIgKyB0YXJnZXQgKyBcIi4gSW5lcnRpYVBsdWdpbi50cmFjayh0YXJnZXQpIGZpcnN0LlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXJzID0gdHJhY2tlci5nZXRBbGwoKTtcbiAgICB9XG5cbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICB0aGlzLnR3ZWVuID0gdHdlZW47XG4gICAgX3Byb2Nlc3NpbmdWYXJzID0gdmFyczsgLy8gZ2V0cyBzd2FwcGVkIGluc2lkZSBfY2FsY3VsYXRlVHdlZW5EdXJhdGlvbigpIGlmIHRoZXJlJ3MgYSBmdW5jdGlvbi1iYXNlZCB2YWx1ZSBlbmNvdW50ZXJlZCAodG8gYXZvaWQgZG91YmxlLWNhbGxpbmcgaXQpXG5cbiAgICB2YXIgY2FjaGUgPSB0YXJnZXQuX2dzYXAsXG4gICAgICAgIGdldFZhbCA9IGNhY2hlLmdldCxcbiAgICAgICAgZHVyID0gdmFycy5kdXJhdGlvbixcbiAgICAgICAgZHVySXNPYmogPSBfaXNPYmplY3QoZHVyKSxcbiAgICAgICAgcHJldmVudE92ZXJzaG9vdCA9IHZhcnMucHJldmVudE92ZXJzaG9vdCB8fCBkdXJJc09iaiAmJiBkdXIub3ZlcnNob290ID09PSAwLFxuICAgICAgICByZXNpc3RhbmNlID0gX2dldE51bU9yRGVmYXVsdCh2YXJzLCBcInJlc2lzdGFuY2VcIiwgX2NvbmZpZy5yZXNpc3RhbmNlKSxcbiAgICAgICAgZHVyYXRpb24gPSBfaXNOdW1iZXIoZHVyKSA/IGR1ciA6IF9jYWxjdWxhdGVUd2VlbkR1cmF0aW9uKHRhcmdldCwgdmFycywgZHVySXNPYmogJiYgZHVyLm1heCB8fCAxMCwgZHVySXNPYmogJiYgZHVyLm1pbiB8fCAwLjIsIGR1cklzT2JqICYmIFwib3ZlcnNob290XCIgaW4gZHVyID8gK2R1ci5vdmVyc2hvb3QgOiBwcmV2ZW50T3ZlcnNob290ID8gMCA6IDEsIHRydWUpLFxuICAgICAgICBwLFxuICAgICAgICBjdXJQcm9wLFxuICAgICAgICBjdXJWYWwsXG4gICAgICAgIHVuaXQsXG4gICAgICAgIHZlbG9jaXR5LFxuICAgICAgICBjaGFuZ2UxLFxuICAgICAgICBlbmQsXG4gICAgICAgIGNoYW5nZTIsXG4gICAgICAgIGxpbmtlZFByb3BzO1xuXG4gICAgdmFycyA9IF9wcm9jZXNzaW5nVmFycztcbiAgICBfcHJvY2Vzc2luZ1ZhcnMgPSAwOyAvL3doZW4gdGhlcmUgYXJlIGxpbmtlZFByb3BzICh0eXBpY2FsbHkgXCJ4LHlcIiB3aGVyZSBzbmFwcGluZyBoYXMgdG8gZmFjdG9yIGluIG11bHRpcGxlIHByb3BlcnRpZXMsIHdlIG11c3QgZmlyc3QgcG9wdWxhdGUgYW4gb2JqZWN0IHdpdGggYWxsIG9mIHRob3NlIGVuZCB2YWx1ZXMsIHRoZW4gZmVlZCBpdCB0byB0aGUgZnVuY3Rpb24gdGhhdCBtYWtlIGFueSBuZWNlc3NhcnkgYWx0ZXJhdGlvbnMuIFNvIHRoZSBwb2ludCBvZiB0aGlzIGZpcnN0IGxvb3AgaXMgdG8gc2ltcGx5IGJ1aWxkIGFuIG9iamVjdCAobGlrZSB7eDoxMDAsIHk6MjA0LjV9KSBmb3IgZmVlZGluZyBpbnRvIHRoYXQgZnVuY3Rpb24gd2hpY2ggd2UnbGwgZG8gbGF0ZXIgaW4gdGhlIFwicmVhbFwiIGxvb3AuXG5cbiAgICBsaW5rZWRQcm9wcyA9IF9wcm9jZXNzTGlua2VkUHJvcHModGFyZ2V0LCB2YXJzLCBnZXRWYWwsIHJlc2lzdGFuY2UpO1xuXG4gICAgZm9yIChwIGluIHZhcnMpIHtcbiAgICAgIGlmICghX3Jlc2VydmVkUHJvcHNbcF0pIHtcbiAgICAgICAgY3VyUHJvcCA9IHZhcnNbcF07XG4gICAgICAgIF9pc0Z1bmN0aW9uKGN1clByb3ApICYmIChjdXJQcm9wID0gY3VyUHJvcChpbmRleCwgdGFyZ2V0LCB0YXJnZXRzKSk7XG5cbiAgICAgICAgaWYgKF9pc051bWJlcihjdXJQcm9wKSkge1xuICAgICAgICAgIHZlbG9jaXR5ID0gY3VyUHJvcDtcbiAgICAgICAgfSBlbHNlIGlmIChfaXNPYmplY3QoY3VyUHJvcCkgJiYgIWlzTmFOKGN1clByb3AudmVsb2NpdHkpKSB7XG4gICAgICAgICAgdmVsb2NpdHkgPSArY3VyUHJvcC52ZWxvY2l0eTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodHJhY2tlciAmJiB0cmFja2VyLmlzVHJhY2tpbmcocCkpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gdHJhY2tlci5nZXQocCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVSUk9SOiBObyB2ZWxvY2l0eSB3YXMgZGVmaW5lZCBmb3IgXCIgKyB0YXJnZXQgKyBcIiBwcm9wZXJ0eTogXCIgKyBwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGFuZ2UxID0gX2NhbGN1bGF0ZUNoYW5nZSh2ZWxvY2l0eSwgZHVyYXRpb24pO1xuICAgICAgICBjaGFuZ2UyID0gMDtcbiAgICAgICAgY3VyVmFsID0gZ2V0VmFsKHRhcmdldCwgcCk7XG4gICAgICAgIHVuaXQgPSBfZ2V0VW5pdChjdXJWYWwpO1xuICAgICAgICBjdXJWYWwgPSBwYXJzZUZsb2F0KGN1clZhbCk7XG5cbiAgICAgICAgaWYgKF9pc09iamVjdChjdXJQcm9wKSkge1xuICAgICAgICAgIGVuZCA9IGN1clZhbCArIGNoYW5nZTE7XG5cbiAgICAgICAgICBpZiAoXCJlbmRcIiBpbiBjdXJQcm9wKSB7XG4gICAgICAgICAgICBjdXJQcm9wID0gX3BhcnNlRW5kKGN1clByb3AsIGxpbmtlZFByb3BzICYmIHAgaW4gbGlua2VkUHJvcHMgPyBsaW5rZWRQcm9wcyA6IGVuZCwgY3VyUHJvcC5tYXgsIGN1clByb3AubWluLCBwLCB2YXJzLnJhZGl1cyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFwibWF4XCIgaW4gY3VyUHJvcCAmJiArY3VyUHJvcC5tYXggPCBlbmQpIHtcbiAgICAgICAgICAgIGlmIChwcmV2ZW50T3ZlcnNob290IHx8IGN1clByb3AucHJldmVudE92ZXJzaG9vdCkge1xuICAgICAgICAgICAgICBjaGFuZ2UxID0gY3VyUHJvcC5tYXggLSBjdXJWYWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGFuZ2UyID0gY3VyUHJvcC5tYXggLSBjdXJWYWwgLSBjaGFuZ2UxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoXCJtaW5cIiBpbiBjdXJQcm9wICYmICtjdXJQcm9wLm1pbiA+IGVuZCkge1xuICAgICAgICAgICAgaWYgKHByZXZlbnRPdmVyc2hvb3QgfHwgY3VyUHJvcC5wcmV2ZW50T3ZlcnNob290KSB7XG4gICAgICAgICAgICAgIGNoYW5nZTEgPSBjdXJQcm9wLm1pbiAtIGN1clZhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoYW5nZTIgPSBjdXJQcm9wLm1pbiAtIGN1clZhbCAtIGNoYW5nZTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcHJvcHMucHVzaChwKTtcblxuICAgICAgICB0aGlzLl9wdCA9IG5ldyBQcm9wVHdlZW4odGhpcy5fcHQsIHRhcmdldCwgcCwgY3VyVmFsLCAwLCBfZW1wdHlGdW5jLCAwLCBjYWNoZS5zZXQodGFyZ2V0LCBwLCB0aGlzKSk7XG4gICAgICAgIHRoaXMuX3B0LnUgPSB1bml0IHx8IDA7XG4gICAgICAgIHRoaXMuX3B0LmMxID0gY2hhbmdlMTtcbiAgICAgICAgdGhpcy5fcHQuYzIgPSBjaGFuZ2UyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHR3ZWVuLmR1cmF0aW9uKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gX2JvbnVzVmFsaWRhdGVkO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyYXRpbywgZGF0YSkge1xuICAgIHZhciBwdCA9IGRhdGEuX3B0O1xuICAgIHJhdGlvID0gX3Bvd2VyMyhkYXRhLnR3ZWVuLl90aW1lIC8gZGF0YS50d2Vlbi5fZHVyKTtcblxuICAgIHdoaWxlIChwdCkge1xuICAgICAgcHQuc2V0KHB0LnQsIHB0LnAsIF9yb3VuZChwdC5zICsgcHQuYzEgKiByYXRpbyArIHB0LmMyICogcmF0aW8gKiByYXRpbykgKyBwdC51LCBwdC5kLCByYXRpbyk7XG4gICAgICBwdCA9IHB0Ll9uZXh0O1xuICAgIH1cbiAgfVxufTtcblwidHJhY2ssdW50cmFjayxpc1RyYWNraW5nLGdldFZlbG9jaXR5LGdldEJ5VGFyZ2V0XCIuc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIEluZXJ0aWFQbHVnaW5bbmFtZV0gPSBWZWxvY2l0eVRyYWNrZXJbbmFtZV07XG59KTtcbl9nZXRHU0FQKCkgJiYgZ3NhcC5yZWdpc3RlclBsdWdpbihJbmVydGlhUGx1Z2luKTtcbmV4cG9ydCB7IEluZXJ0aWFQbHVnaW4gYXMgZGVmYXVsdCwgVmVsb2NpdHlUcmFja2VyIH07IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vLyBHc2FwXG5pbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcCc7XG5pbXBvcnQgeyBEcmFnZ2FibGUgfSBmcm9tICdnc2FwL0RyYWdnYWJsZSc7XG5pbXBvcnQgSW5lcnRpYVBsdWdpbiBmcm9tICcuL0luZXJ0aWFQbHVnaW4nO1xuZ3NhcC5yZWdpc3RlclBsdWdpbihEcmFnZ2FibGUpO1xuZ3NhcC5yZWdpc3RlclBsdWdpbihJbmVydGlhUGx1Z2luKTsgLy9lbXB0eSBmdW5jdGlvblxuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG5cblxudmFyIGxlcnAgPSBmdW5jdGlvbiBsZXJwKGEsIGIsIG4pIHtcbiAgcmV0dXJuICgxIC0gbikgKiBhICsgbiAqIGI7XG59OyAvLyBVdGlsaXRpZXNcblxuXG5pbXBvcnQgRG9tRXZlbnRzIGZyb20gJy4vZG9tRXZlbnRzJztcblxudmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7XG5cbiAgICAvL2hvb2sgZnVuY3Rpb25zXG4gICAgdGhpcy5fb25EcmFnU3RhcnQgPSBvcHRpb25zLm9uRHJhZ1N0YXJ0IHx8IG5vb3A7XG4gICAgdGhpcy5fb25EcmFnID0gb3B0aW9ucy5vbkRyYWcgfHwgbm9vcDtcbiAgICB0aGlzLl9vbkRyYWdFbmQgPSBvcHRpb25zLm9uRHJhZ0VuZCB8fCBub29wO1xuICAgIHRoaXMuX29uUHJvZ3Jlc3MgPSBvcHRpb25zLm9uUHJvZ3Jlc3MgfHwgbm9vcDtcbiAgICB0aGlzLl9vblByZXNzID0gb3B0aW9ucy5vblByZXNzIHx8IG5vb3A7XG4gICAgdGhpcy5fb25SZWxlYXNlID0gb3B0aW9ucy5vblJlbGVhc2UgfHwgbm9vcDsgLy8gdGhpcy5fb25TbmFwID0gb3B0aW9ucy5vblNuYXAgfHwgbm9vcDtcbiAgICAvLyB0aGlzLl9vblNuYXBMaW1pdHMgPSBvcHRpb25zLl9vblNuYXBMaW1pdHMgfHwgbm9vcDtcblxuICAgIHRoaXMuc2xpZGVyID0gb3B0aW9ucy50YXJnZXQ7XG4gICAgdGhpcy5zbGlkZXJDb250ZW50ID0gb3B0aW9ucy50YXJnZXRJbm5lcjtcbiAgICB0aGlzLnNuYXAgPSB0eXBlb2Ygb3B0aW9ucy5zbmFwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc25hcCA6IGZhbHNlO1xuICAgIHRoaXMuaXRlbSA9IHRoaXMuc2xpZGVyQ29udGVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pdGVtJyk7XG4gICAgdGhpcy5kcmFnZ2FibGUgPSBudWxsO1xuICAgIHRoaXMuZGl2Tm9kZSA9IG51bGw7XG4gICAgdGhpcy5jdXJyZW50ID0gMDtcbiAgICB0aGlzLmxhc3QgPSAwOyAvLyB0aGlzLkJvdW5kSXRlbVdpZHRoID0gdGhpcy5pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIC8vIHRoaXMuc3R5bGVSaWdodEl0ZW0gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnNsaWRlckNvbnRlbnQucXVlcnlTZWxlY3RvcignYScpLCBudWxsKTtcbiAgICAvLyB0aGlzLlNuYXBJdGVtID0gdGhpcy5Cb3VuZEl0ZW1XaWR0aCArIChwYXJzZUludCh0aGlzLnN0eWxlUmlnaHRJdGVtLm1hcmdpblJpZ2h0LCAxMCkpO1xuXG4gICAgdGhpcy5pbml0KCk7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5LWZ1bmN0aW9uXG5cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7fVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZURyYWdnYWJsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEcmFnZ2FibGUoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB0aGlzLmRyYWdnYWJsZSA9IERyYWdnYWJsZS5jcmVhdGUodGhpcy5zbGlkZXJDb250ZW50LCB7XG4gICAgICAgIHR5cGU6ICd4JyxcbiAgICAgICAgbG9ja0F4aXM6IHRydWUsXG4gICAgICAgIGF1dG9TY3JvbGw6IHRydWUsXG4gICAgICAgIGRyYWdSZXNpc3RhbmNlOiAwLjEsXG4gICAgICAgIGVkZ2VSZXNpc3RhbmNlOiAwLjgsXG4gICAgICAgIGJvdW5kczogdGhpcy5zbGlkZXIsXG4gICAgICAgIGluZXJ0aWE6IHRydWUsXG4gICAgICAgIHRocm93UHJvcHM6IHRydWUsXG4gICAgICAgIHNuYXA6IGZ1bmN0aW9uIHNuYXAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuc25hcCA/IE1hdGgucm91bmQodmFsdWUgLyAtX3RoaXMuaXRlbS5vZmZzZXRXaWR0aCkgKiAtX3RoaXMuaXRlbS5vZmZzZXRXaWR0aCA6IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uIG9uRHJhZygpIHtcbiAgICAgICAgICBfdGhpcy5fb25EcmFnKF90aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25UaHJvd1VwZGF0ZTogZnVuY3Rpb24gb25UaHJvd1VwZGF0ZSgpIHtcbiAgICAgICAgICBfdGhpcy5fb25EcmFnKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiBvbkRyYWdTdGFydCgpIHtcbiAgICAgICAgICBfdGhpcy5fb25EcmFnU3RhcnQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25EcmFnRW5kOiBmdW5jdGlvbiBvbkRyYWdFbmQoKSB7XG4gICAgICAgICAgX3RoaXMuX29uRHJhZ0VuZCgpO1xuICAgICAgICB9LFxuICAgICAgICBvblByb2dyZXNzOiBmdW5jdGlvbiBvblByb2dyZXNzKGUpIHtcbiAgICAgICAgICBfdGhpcy5fb25Qcm9ncmVzcyhlKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25QcmVzczogZnVuY3Rpb24gb25QcmVzcyhlKSB7XG4gICAgICAgICAgX3RoaXMuX29uUHJlc3MoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVsZWFzZTogZnVuY3Rpb24gb25SZWxlYXNlKGUpIHtcbiAgICAgICAgICBfdGhpcy5fb25SZWxlYXNlKGUpO1xuICAgICAgICB9IC8vIHNuYXA6IHtcbiAgICAgICAgLy8gICAgIHg6IChlbmRWYWx1ZSkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGVuZFZhbHVlIC8gdGhpcy5TbmFwSXRlbSkgKiB0aGlzLlNuYXBJdGVtO1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gfSxcbiAgICAgICAgLy8gb25QcmVzczogKGUpID0+XG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgIGdzYXAudG8odGhpcy5zbGlkZXJDb250ZW50LCB7IHNjYWxlOiAwLjksIGVhc2U6ICdwb3dlcjEub3V0JywgZHVyYXRpb246IDEgfSk7XG4gICAgICAgIC8vICAgICAvLyBnc2FwLnRvKHRoaXMuJGNpcmNsZSwgeyBzY2FsZTogLjgsIGVhc2U6ICdwb3dlcjEub3V0JywgZHVyYXRpb246IC41IH0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy4kY2lyY2xlLnF1ZXJ5U2VsZWN0b3IoJy5sYWJlbCcpLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLiRjaXJjbGUucXVlcnlTZWxlY3RvcignLmxhYmVsJykuYXBwZW5kQ2hpbGQoXG4gICAgICAgIC8vICAgICAvLyAgICAgdGhpcy4kY2lyY2xlLnF1ZXJ5U2VsZWN0b3IoJy5sYWJlbCcpLm93bmVyRG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLmRvYy5kb2N1bWVudEVsZW1lbnQsIHRydWUpKTtcbiAgICAgICAgLy8gfSxcbiAgICAgICAgLy8gb25SZWxlYXNlOiAoKSA9PlxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICBnc2FwLnRvKHRoaXMuc2xpZGVyQ29udGVudCwgeyBzY2FsZTogMSwgZWFzZTogJ3Bvd2VyMS5vdXQnLCBkdXJhdGlvbjogMSB9KTtcbiAgICAgICAgLy8gICAgIC8vIGdzYXAudG8odGhpcy4kY2lyY2xlLCB7IHNjYWxlOiAxLCBlYXNlOiAncG93ZXIxLm91dCcsIGR1cmF0aW9uOiAuNSB9KTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuJGNpcmNsZS5xdWVyeVNlbGVjdG9yKCcubGFiZWwnKS5pbm5lckhUTUwgPSBcIkRSQUdcIjtcbiAgICAgICAgLy8gfVxuXG4gICAgICB9KTtcbiAgICB9IC8vIHNldCB1cCBkb3RzXG5cbiAgfSwge1xuICAgIGtleTogXCJzZXR1cERvdHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBEb3RzKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNsaWRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmRpdk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5kaXZOb2RlLmNsYXNzTGlzdC5hZGQoJ25hdl9kb3QnKTtcbiAgICAgICAgdGhpcy5kaXZOb2RlLmlkID0gJ2RvdF8nICsgaSArICcnO1xuICAgICAgICB0aGlzLiRuYXZEb3RzLmFwcGVuZENoaWxkKHRoaXMuZGl2Tm9kZSk7IC8vIHRoaXMuZGl2Tm9kZSA9IDtcbiAgICAgICAgLy8gdGhpcy4kbmF2RG90cy5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwibmF2X2RvdFwiIGlkPVwiZG90XycgKyBpICsgJ1wiPjwvZGl2PicpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplKCkgey8vIHRoaXMuQm91bmRJdGVtV2lkdGggPSB0aGlzLml0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAvLyB0aGlzLnN0eWxlUmlnaHRJdGVtID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5zbGlkZXJDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2EnKSwgbnVsbCk7XG4gICAgICAvLyB0aGlzLlNuYXBJdGVtID0gdGhpcy5Cb3VuZEl0ZW1XaWR0aCArIChwYXJzZUludCh0aGlzLnN0eWxlUmlnaHRJdGVtLm1hcmdpblJpZ2h0LCAxMCkpO1xuICAgICAgLy9nc2FwLnRvKHRoaXMuc2xpZGVyLCB7IHg6IDAsIGVhc2U6ICdwb3dlcjQuaW5PdXQnLCBkdXJhdGlvbjogMSB9KTtcbiAgICAgIC8vIHRoaXMuQm91bmRJdGVtV2lkdGggPSB0aGlzLml0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAvLyB0aGlzLnN0eWxlUmlnaHRJdGVtID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5zbGlkZXJDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2EnKSwgbnVsbCk7XG4gICAgICAvLyB0aGlzLlNuYXBJdGVtID0gdGhpcy5Cb3VuZEl0ZW1XaWR0aCArIChwYXJzZUludCh0aGlzLnN0eWxlUmlnaHRJdGVtLm1hcmdpblJpZ2h0LCAxMCkpO1xuICAgICAgLy8gaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDEwMjUpIHtcbiAgICAgIC8vICAgICB0aGlzLmRyYWdnYWJsZVswXS5kaXNhYmxlKCk7XG4gICAgICAvLyAgICAgZ3NhcC50byh0aGlzLnNsaWRlciwgeyB4OiAwLCBlYXNlOiAncG93ZXI0LmluT3V0JywgZHVyYXRpb246IDEgfSk7XG4gICAgICAvLyB9XG4gICAgICAvLyBlbHNlXG4gICAgICAvLyAgICAgdGhpcy5kcmFnZ2FibGVbMF0uZW5hYmxlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRlc3Ryb3lcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIHRoaXMuZHJhZ2dhYmxlLmtpbGwoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdGhpcy5jcmVhdGVEcmFnZ2FibGUoKTsgLy8gdGhpcy5zZXR1cERvdHMoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KCk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG4vLyBHc2FwXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCBTY3JvbGxUcmlnZ2VyIGZyb20gJ2dzYXAvU2Nyb2xsVHJpZ2dlcic7XG5nc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpOyAvLyBJbXBvcnQgUmVuZGVyZXJcblxuaW1wb3J0IFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIuanMnOyAvLyBpbXBvcnQgc3R5bGVzRGVmYXVsdCBmcm9tICcuL3N0eWxlc0RlZmF1bHQuY3NzJzsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4vLyBVdGlsaXRpZXNcblxuaW1wb3J0IFN1cGVyRHJhZ2dlciBmcm9tICcuLi9jbGFzc2VzL3N1cGVyRHJhZ2dlcic7XG5pbXBvcnQgRHJhZ2dhYmxlIGZyb20gJy4uL2NsYXNzZXMvRHJhZ2dhYmxlJzsgLy8gT3RoZXJcbi8vIGltcG9ydCBTbGlkZXIgZnJvbSAnLi4vY2xhc3Nlcy9zbGlkZXInO1xuLy8gaW1wb3J0IFNwbGl0VGV4dCBmcm9tICcuLi9jbGFzc2VzL3NwbGl0VGV4dCc7XG5cbnZhciBSZW5kZXJlckhvbWUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZW5kZXJlcikge1xuICBfaW5oZXJpdHMoUmVuZGVyZXJIb21lLCBfUmVuZGVyZXIpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUmVuZGVyZXJIb21lKTtcblxuICBmdW5jdGlvbiBSZW5kZXJlckhvbWUoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlbmRlcmVySG9tZSk7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVuZGVyZXJIb21lLCBbe1xuICAgIGtleTogXCJzZWxlY3RvcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0b3JzKCkge1xuICAgICAgdGhpcy4kaGVybyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19oZXJvJyk7XG4gICAgICB0aGlzLiRwb3N0ZXIgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fcG9zdGVyJyk7XG4gICAgICB0aGlzLiRtYXN0ZXJ3b3JrcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19tYXN0ZXJ3b3JrcycpO1xuICAgICAgdGhpcy4kcmVsYXRlZCA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19yZWxhdGVkJyk7IC8vIFZpZGVvXG5cbiAgICAgIHRoaXMuJHZpZGVvID0gdGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcudmlkZW8nKTtcblxuICAgICAgaWYgKHRoaXMuJHZpZGVvKSB7XG4gICAgICAgIHRoaXMuJHZpZGVvTG9vcCA9IHRoaXMuJHZpZGVvLnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fbG9vcCcpO1xuICAgICAgICB0aGlzLiR2aWRlb0xvb3BJdGVtID0gdGhpcy4kdmlkZW8ucXVlcnlTZWxlY3RvcignLnZpZGVvX19sb29wIHZpZGVvJyk7XG4gICAgICAgIHRoaXMuJHZpZGVvUG9zdGVyID0gdGhpcy4kdmlkZW8ucXVlcnlTZWxlY3RvcignLnZpZGVvX19wb3N0ZXInKTtcbiAgICAgICAgdGhpcy4kdmlkZW9UcmlnZ2VyID0gdGhpcy4kdmlkZW8ucXVlcnlTZWxlY3RvcignLnZpZGVvX190cmlnZ2VyJyk7XG4gICAgICAgIHRoaXMuJHZpZGVvTW9kYWwgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcudmlkZW8tLW1vZGFsJyk7XG4gICAgICAgIHRoaXMuJHZpZGVvTWFzayA9IHRoaXMuJHZpZGVvTW9kYWwucXVlcnlTZWxlY3RvcignLnZpZGVvX19tYXNrJyk7XG4gICAgICAgIHRoaXMuJHZpZGVvUGxheWVyID0gdGhpcy4kdmlkZW9Nb2RhbC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3BsYXllcicpO1xuICAgICAgICB0aGlzLiR2aWRlb1BsYXllckl0ZW0gPSB0aGlzLiR2aWRlb01vZGFsLnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fcGxheWVyIHZpZGVvJyk7XG4gICAgICAgIHRoaXMuJHZpZGVvQ2xvc2VyID0gdGhpcy4kdmlkZW9Nb2RhbC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX2Nsb3NlcicpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVFbnRlcigpIHsvLyBpZih0aGlzLmFwcFN0b3JlLmlzRGVza3RvcClcbiAgICAgIC8vICAgICBnc2FwLnNldCh0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5sb2dvJyksIHsgb3BhY2l0eTogMC4wMDAxIH0pO1xuICAgICAgLy8gZ3NhcC5zZXQodGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcudGl0bGUnKSwgeyBvcGFjaXR5OiAwLjAwMDEgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy4kdmlkZW9QbGF5ZXIgJiYgdGhpcy4kdmlkZW9UcmlnZ2VyKSB7XG4gICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiR2aWRlb1RyaWdnZXIsICdjbGljaycsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIGlmIChfdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAgIF90aGlzLmxhc3RTY3JvbGwgPSBfdGhpcy5zdXBlclNjcm9sbGVyLl9zY3JvbGwubGl2ZVBvc2l0aW9uLnk7XG5cbiAgICAgICAgICAgIHZhciBfb2Zmc2V0ID0gX3RoaXMuJHZpZGVvTG9vcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSB3aW5kb3cuaW5uZXJXaWR0aCAqIDAuMDU7XG5cbiAgICAgICAgICAgIF90aGlzLnN1cGVyU2Nyb2xsZXIuc2Nyb2xsQW5pbWF0ZShfb2Zmc2V0IC0gX3RoaXMubGFzdFNjcm9sbCwgMSwgJ2V4cG8uaW5PdXQnLCB0cnVlKTtcblxuICAgICAgICAgICAgZ3NhcC5kZWxheWVkQ2FsbCgxLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzLnZpZGVvT3BlbihlLCBhLCBlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMudmlkZW9PcGVuKGUsIGEsIGVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kdmlkZW9DbG9zZXIsICdjbGljaycsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIF90aGlzLnZpZGVvQ2xvc2UoZSwgYSwgZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHZpZGVvTWFzaywgJ2NsaWNrJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgX3RoaXMudmlkZW9DbG9zZShlLCBhLCBlbCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kdmlkZW9QbGF5ZXJJdGVtLCAnZW5kZWQnLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICBfdGhpcy52aWRlb0Nsb3NlKGUsIGEsIGVsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHZpZGVvVHJpZ2dlciwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzLmVudGVySWNvbihlLCBhLCBlbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHZpZGVvVHJpZ2dlciwgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzLmxlYXZlSWNvbihlLCBhLCBlbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHZpZGVvQ2xvc2VyLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgX3RoaXMuZW50ZXJJY29uKGUsIGEsIGVsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kdmlkZW9DbG9zZXIsICdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgICBfdGhpcy5sZWF2ZUljb24oZSwgYSwgZWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyKCkge1xuICAgICAgLy8gaWYodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApXG4gICAgICAvLyAgICAgZ3NhcC50byh0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5sb2dvJyksIHsgb3BhY2l0eTogMSwgZHVyYXRpb246IDEsIGVhc2U6ICdwb3dlcjIub3V0JyB9KTtcbiAgICAgIC8vIGdzYXAudG8odGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcudGl0bGUnKSwgeyBvcGFjaXR5OiAxLCBkdXJhdGlvbjogMSwgZWFzZTogJ3Bvd2VyMi5vdXQnIH0pO1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSBnc2FwLnRvKHRoaXMuYXBwVWkuJGhlYWRlclN1Ym1lbnUsIHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgIGVhc2U6ICdwb3dlcjIub3V0J1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHRoaXMuaW5pdEhlcm8oKTtcbiAgICAgIHRoaXMuaW5pdFNjcm9sbHRpdGxlKCk7XG4gICAgICB0aGlzLmluaXRQYXJhbGxheFBvc3RlcigpO1xuICAgICAgdGhpcy5pbml0TWFzdGVyd29ya3MoKTtcbiAgICAgIHRoaXMuaW5pdFJlbGF0ZWQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdEhlcm9cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEhlcm8oKSB7XG4gICAgICBpZiAodGhpcy4kaGVybykge1xuICAgICAgICB0aGlzLiRoZXJvT3V0ZXJzID0gdGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yQWxsKCcub3V0ZXInKTtcbiAgICAgICAgdmFyIGhlcm9UaW1lbGluZSA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBlYXNlOiAnbm9uZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJGhlcm8sXG4gICAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICAgIHN0YXJ0OiAndG9wIHRvcCcsXG4gICAgICAgICAgICBlbmQ6IHdpbmRvdy5pbm5lckhlaWdodCAqIDIgKyAncHggdG9wJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRoZXJvT3V0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaGVyb1RpbWVsaW5lLnRvKHRoaXMuJGhlcm9PdXRlcnNbaV0sIHtcbiAgICAgICAgICAgIHk6IGkgKiAxNSArICd2dydcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ2aWRlb09wZW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdmlkZW9PcGVuKCkge1xuICAgICAgdGhpcy4kdmlkZW9Mb29wSXRlbS5wYXVzZSgpO1xuICAgICAgZ3NhcC5zZXQodGhpcy4kdmlkZW9Nb2RhbCwge1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICB6SW5kZXg6IDEwMDBcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB0aGlzLnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSBmYWxzZTtlbHNlIHRoaXMuJHZpZGVvTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9wZW5lZCA9IHRydWU7XG4gICAgICB0aGlzLiR2aWRlb1BsYXllckl0ZW0ucGxheSgpO1xuICAgICAgdGhpcy4kdmlkZW9QbGF5ZXJJdGVtLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICBnc2FwLnRvKHRoaXMuJHZpZGVvTWFzaywge1xuICAgICAgICBvcGFjaXR5OiAwLjgsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjVcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiR2aWRlb1BsYXllciwge1xuICAgICAgICB5OiAnLTUwJScsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgIGRlbGF5OiAwLjVcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiR2aWRlb0Nsb3Nlciwge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICBkZWxheTogMS4zXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidmlkZW9DbG9zZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB2aWRlb0Nsb3NlKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMub3BlbmVkID0gZmFsc2U7XG4gICAgICBnc2FwLnRvKHRoaXMuJHZpZGVvQ2xvc2VyLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuOFxuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuJHZpZGVvUGxheWVyLCB7XG4gICAgICAgIHk6IHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wID8gJy0yMDAlJyA6ICctMzAwJScsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgIGRlbGF5OiAwLjVcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiR2aWRlb01hc2ssIHtcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICBkZWxheTogMS4zLFxuICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiBvbkNvbXBsZXRlKCkge1xuICAgICAgICAgIF90aGlzMi4kdmlkZW9Mb29wSXRlbS5wbGF5KCk7XG5cbiAgICAgICAgICBfdGhpczIuJHZpZGVvUGxheWVySXRlbS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cbiAgICAgICAgICBfdGhpczIuJHZpZGVvUGxheWVySXRlbS5wYXVzZSgpO1xuXG4gICAgICAgICAgX3RoaXMyLiR2aWRlb1BsYXllckl0ZW0uY3VycmVudFRpbWUgPSAwO1xuICAgICAgICAgIGdzYXAuc2V0KF90aGlzMi4kdmlkZW9Nb2RhbCwge1xuICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnLFxuICAgICAgICAgICAgekluZGV4OiAnaW5pdGlhbCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoX3RoaXMyLmFwcFN0b3JlLmlzRGVza3RvcCkgX3RoaXMyLnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJJY29uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVySWNvbihlLCBhLCBlbCkge1xuICAgICAgZ3NhcC50byhlbCwge1xuICAgICAgICBzY2FsZTogMC45LFxuICAgICAgICBkdXJhdGlvbjogMS41LFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGVhdmVJY29uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxlYXZlSWNvbihlLCBhLCBlbCkge1xuICAgICAgZ3NhcC50byhlbCwge1xuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgZHVyYXRpb246IDEuNSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRTY3JvbGx0aXRsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0U2Nyb2xsdGl0bGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdGhpcy5zY3JvbGx0aXRsZXMgPSBbXTtcbiAgICAgIHRoaXMuJHNjcm9sbHRpdGxlcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3JvbGx0aXRsZScpO1xuXG4gICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7XG4gICAgICAgIHZhciBzcGVlZCA9IF90aGlzMy4kc2Nyb2xsdGl0bGVzW2ldLmRhdGFzZXQuc3BlZWQ7XG4gICAgICAgIHZhciBzY3JvbGx0aXRsZSA9IHt9O1xuICAgICAgICBzY3JvbGx0aXRsZS4kc2Nyb2xsdGl0bGVzSXRlbXMgPSBfdGhpczMuJHNjcm9sbHRpdGxlc1tpXS5jaGlsZHJlbjtcbiAgICAgICAgX3RoaXMzLiRzY3JvbGx0aXRsZXNbaV0uc3R5bGUud2lkdGggPSBzY3JvbGx0aXRsZS4kc2Nyb2xsdGl0bGVzSXRlbXNbMF0ub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICBzY3JvbGx0aXRsZS5zY3JvbGxUaXRsZUlubmVyTGVmdCA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIHBhdXNlZDogZmFsc2UsXG4gICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGVhc2U6ICdub25lJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBfdGhpczMuYXBwU3RvcmUuaXNEZXNrdG9wID8gc2Nyb2xsdGl0bGUuJHNjcm9sbHRpdGxlc0l0ZW1zWzBdLm9mZnNldFdpZHRoIC8gMzAwIDogc2Nyb2xsdGl0bGUuJHNjcm9sbHRpdGxlc0l0ZW1zWzBdLm9mZnNldFdpZHRoIC8gMTAwLFxuICAgICAgICAgICAgcmVwZWF0OiAnLTEnLFxuICAgICAgICAgICAgb25SZXZlcnNlQ29tcGxldGU6IGZ1bmN0aW9uIG9uUmV2ZXJzZUNvbXBsZXRlKCkge1xuICAgICAgICAgICAgICBzY3JvbGx0aXRsZS5zY3JvbGxUaXRsZUlubmVyTGVmdC5wYXVzZSgpO1xuICAgICAgICAgICAgICBzY3JvbGx0aXRsZS5zY3JvbGxUaXRsZUlubmVyUmlnaHQucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzY3JvbGx0aXRsZS4kc2Nyb2xsdGl0bGVzSXRlbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBzY3JvbGx0aXRsZS5zY3JvbGxUaXRsZUlubmVyTGVmdC50byhzY3JvbGx0aXRsZS4kc2Nyb2xsdGl0bGVzSXRlbXNbal0sIHtcbiAgICAgICAgICAgIHg6IC0xMDAgKiBzcGVlZCArICclJ1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgc2Nyb2xsdGl0bGUuc2Nyb2xsVGl0bGVJbm5lclJpZ2h0ID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgICAgcGF1c2VkOiB0cnVlLFxuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBlYXNlOiAnbm9uZScsXG4gICAgICAgICAgICBkdXJhdGlvbjogX3RoaXMzLmFwcFN0b3JlLmlzRGVza3RvcCA/IHNjcm9sbHRpdGxlLiRzY3JvbGx0aXRsZXNJdGVtc1swXS5vZmZzZXRXaWR0aCAvIDMwMCA6IHNjcm9sbHRpdGxlLiRzY3JvbGx0aXRsZXNJdGVtc1swXS5vZmZzZXRXaWR0aCAvIDEwMCxcbiAgICAgICAgICAgIHJlcGVhdDogJy0xJyxcbiAgICAgICAgICAgIG9uUmV2ZXJzZUNvbXBsZXRlOiBmdW5jdGlvbiBvblJldmVyc2VDb21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgc2Nyb2xsdGl0bGUuc2Nyb2xsVGl0bGVJbm5lclJpZ2h0LnBhdXNlKCk7XG4gICAgICAgICAgICAgIHNjcm9sbHRpdGxlLnNjcm9sbFRpdGxlSW5uZXJMZWZ0LnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCBzY3JvbGx0aXRsZS4kc2Nyb2xsdGl0bGVzSXRlbXMubGVuZ3RoOyBfaisrKSB7XG4gICAgICAgICAgc2Nyb2xsdGl0bGUuc2Nyb2xsVGl0bGVJbm5lclJpZ2h0LnRvKHNjcm9sbHRpdGxlLiRzY3JvbGx0aXRsZXNJdGVtc1tfal0sIHtcbiAgICAgICAgICAgIHg6IDEwMCAqIHNwZWVkICsgJyUnXG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3RoaXMzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAgIHNjcm9sbHRpdGxlLnNjcm9sbFRpdGxlT3V0ZXIgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgIGVhc2U6ICdub25lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgICAgdHJpZ2dlcjogX3RoaXMzLiRzY3JvbGx0aXRsZXNbaV0sXG4gICAgICAgICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgICAgICBlbmQ6ICdib3R0b20gdG9wJyxcbiAgICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uIG9uVXBkYXRlKHNlbGYpIHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNjcm9sbFRpdGxlSW5uZXIudGltZVNjYWxlKHNlbGYuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbHRpdGxlLnNjcm9sbFRpdGxlSW5uZXJMZWZ0LnBhdXNlZCgpKSBzY3JvbGx0aXRsZS5zY3JvbGxUaXRsZUlubmVyTGVmdC5yZXZlcnNlZChzZWxmLmRpcmVjdGlvbiAhPT0gMSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzY3JvbGx0aXRsZS5zY3JvbGxUaXRsZUlubmVyUmlnaHQucGF1c2VkKCkpIHNjcm9sbHRpdGxlLnNjcm9sbFRpdGxlSW5uZXJSaWdodC5yZXZlcnNlZChzZWxmLmRpcmVjdGlvbiA9PT0gMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzY3JvbGx0aXRsZS5zY3JvbGxUaXRsZU91dGVyLmZyb21UbyhfdGhpczMuJHNjcm9sbHRpdGxlc1tpXSwge1xuICAgICAgICAgICAgeDogd2luZG93LmlubmVyV2lkdGggKiAwLjIgKiBzcGVlZFxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IC13aW5kb3cuaW5uZXJXaWR0aCAqIDAuMiAqIHNwZWVkXG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczMuc2Nyb2xsdGl0bGVzLnB1c2goc2Nyb2xsdGl0bGUpO1xuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRzY3JvbGx0aXRsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgX2xvb3AoaSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2l6ZVNjcm9sbHRpdGxlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemVTY3JvbGx0aXRsZXMoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJHNjcm9sbHRpdGxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLiRzY3JvbGx0aXRsZXNbaV0uc3R5bGUud2lkdGggPSAnJztcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMuc2Nyb2xsdGl0bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBpZiAodGhpcy5zY3JvbGx0aXRsZXNbX2ldLnNjcm9sbFRpdGxlSW5uZXJMZWZ0KSB0aGlzLnNjcm9sbHRpdGxlc1tfaV0uc2Nyb2xsVGl0bGVJbm5lckxlZnQucGF1c2UoMCkua2lsbCh0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsdGl0bGVzW19pXS5zY3JvbGxUaXRsZUlubmVyUmlnaHQpIHRoaXMuc2Nyb2xsdGl0bGVzW19pXS5zY3JvbGxUaXRsZUlubmVyUmlnaHQucGF1c2UoMCkua2lsbCh0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsdGl0bGVzW19pXS5zY3JvbGxUaXRsZU91dGVyKSB0aGlzLnNjcm9sbHRpdGxlc1tfaV0uc2Nyb2xsVGl0bGVPdXRlci5wYXVzZSgwKS5raWxsKHRydWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmluaXRTY3JvbGx0aXRsZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0UGFyYWxsYXhQb3N0ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFBhcmFsbGF4UG9zdGVyKCkge1xuICAgICAgaWYgKHRoaXMuJHBvc3Rlcikge1xuICAgICAgICB0aGlzLiRwb3N0ZXJJbWFnZSA9IHRoaXMuJHBvc3Rlci5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UnKTtcbiAgICAgICAgdGhpcy4kcG9zdGVyVGl0bGUgPSB0aGlzLiRwb3N0ZXIucXVlcnlTZWxlY3RvcignLnN1cGVydGl0bGUnKTtcbiAgICAgICAgdGhpcy50aW1lbGluZVBhcmFsbGF4UG9zdGVyID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGVhc2U6ICdub25lJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgICAgdHJpZ2dlcjogdGhpcy4kcG9zdGVySW1hZ2UsXG4gICAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICAgIHN0YXJ0OiAnLT0nICsgd2luZG93LmlubmVyV2lkdGggKiAwLjA1ICsgJyBib3R0b20nLFxuICAgICAgICAgICAgZW5kOiB0aGlzLiRwb3N0ZXJJbWFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSB3aW5kb3cuaW5uZXJXaWR0aCAqIDAuMDUgKyAnIHRvcCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdG9wID0gdGhpcy4kcG9zdGVySW1hZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC8gMiAtIHRoaXMuJHBvc3RlclRpdGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAvIDI7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLiRwb3N0ZXJJbWFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAyIC0gdGhpcy4kcG9zdGVyVGl0bGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC8gMiAtIHdpbmRvdy5pbm5lcldpZHRoICogMC4wNTtcbiAgICAgICAgdGhpcy4kcG9zdGVyVGl0bGUuc3R5bGUudG9wID0gdG9wICsgJ3B4JztcbiAgICAgICAgdGhpcy50aW1lbGluZVBhcmFsbGF4UG9zdGVyLnNldCh0aGlzLiRwb3N0ZXJUaXRsZSwge1xuICAgICAgICAgIHk6IC1vZmZzZXRcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHRoaXMudGltZWxpbmVQYXJhbGxheFBvc3Rlci50byh0aGlzLiRwb3N0ZXJUaXRsZSwge1xuICAgICAgICAgIHk6IG9mZnNldFxuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdE1hc3RlcndvcmtzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRNYXN0ZXJ3b3JrcygpIHtcbiAgICAgIGlmICh0aGlzLiRtYXN0ZXJ3b3Jrcykge1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRtYXN0ZXJ3b3Jrcy5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgIHk6ICctMTB2dycsXG4gICAgICAgICAgc2NhbGU6IDEuMlxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGJhY2tncm91bmRUaW1lbGluZSA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJG1hc3RlcndvcmtzLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZ3JvdW5kJyksXG4gICAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgICAgZW5kOiAnYm90dG9tIHRvcCcsXG4gICAgICAgICAgICBzY3J1YjogdHJ1ZSAvLyBvblRvZ2dsZTogKGlzQWN0aXZlKSA9PlxuICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgLy8gICAgIGlzQWN0aXZlID8gdGhpcy4kdmlkZW9Db3Zlci5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3BsYXllciB2aWRlbycpLnBsYXkoKSA6IHRoaXMuJHZpZGVvQ292ZXIucXVlcnlTZWxlY3RvcignLnZpZGVvX19wbGF5ZXIgdmlkZW8nKS5wYXVzZSgpO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgICBlYXNlOiAnbm9uZSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBiYWNrZ3JvdW5kVGltZWxpbmUudG8odGhpcy4kbWFzdGVyd29ya3MucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgICB5OiAnMTB2dycsXG4gICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgZHVyYXRpb246IDFcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRSZWxhdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRSZWxhdGVkKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIC8vIFNlbGVjdG9yc1xuICAgICAgdGhpcy4kcmVsYXRlZFNsaWRlciA9IHRoaXMuJHJlbGF0ZWQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpO1xuICAgICAgdGhpcy4kcmVsYXRlZFNsaWRlcklubmVyID0gdGhpcy4kcmVsYXRlZC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbm5lcicpO1xuICAgICAgdGhpcy4kcmVsYXRlZFNsaWRlckl0ZW1zID0gdGhpcy4kcmVsYXRlZC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19pdGVtJyk7XG4gICAgICB0aGlzLiRyZWxhdGVkUHJvbW90aW9ucyA9IHRoaXMuJHJlbGF0ZWQucXVlcnlTZWxlY3RvckFsbCgnLnByb21vdGlvbicpO1xuXG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRyZWxhdGVkUHJvbW90aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRyZWxhdGVkUHJvbW90aW9uc1tpXSwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzNC5wcm9tb3Rpb25FbnRlcihlbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHJlbGF0ZWRQcm9tb3Rpb25zW2ldLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgX3RoaXM0LnByb21vdGlvbkxlYXZlKGVsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLiRyZWxhdGVkU2xpZGVySXRlbXMubGVuZ3RoID4gNCkge1xuICAgICAgICAgIHRoaXMuJHJlbGF0ZWRTbGlkZXJJbm5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LXN0YXJ0JztcbiAgICAgICAgICB0aGlzLiRyZWxhdGVkU2xpZGVySW5uZXIuc3R5bGUubWluV2lkdGggPSAnYXV0byc7XG4gICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHJlbGF0ZWRTbGlkZXJJbm5lciwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzNC5hcHBVaS5lbnRlckRyYWdDdXJzb3IoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kcmVsYXRlZFNsaWRlcklubmVyLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgX3RoaXM0LmFwcFVpLmxlYXZlRHJhZ0N1cnNvcigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMucmVsYXRlZERyYWdnYWJsZSA9IG5ldyBTdXBlckRyYWdnZXIoe1xuICAgICAgICAgICAgZWw6IHRoaXMuJHJlbGF0ZWRTbGlkZXIsXG4gICAgICAgICAgICBlbENsaWNrYWJsZXM6IHRoaXMuJHJlbGF0ZWRQcm9tb3Rpb25zLFxuICAgICAgICAgICAgaW5uZXI6IHRoaXMuJHJlbGF0ZWRTbGlkZXJJbm5lcixcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiBvbkRyYWdTdGFydCgpIHtcbiAgICAgICAgICAgICAgX3RoaXM0LnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBfdGhpczQuJHJlbGF0ZWRQcm9tb3Rpb25zLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzNC4kcmVsYXRlZFByb21vdGlvbnNbX2kyXSwge1xuICAgICAgICAgICAgICAgICAgc2NhbGU6IDAuOTQsXG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzNC4kcmVsYXRlZFByb21vdGlvbnNbX2kyXS5xdWVyeVNlbGVjdG9yKCcuaW5uZXIgLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkRyYWdFbmQ6IGZ1bmN0aW9uIG9uRHJhZ0VuZCgpIHtcbiAgICAgICAgICAgICAgX3RoaXM0LnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IF90aGlzNC4kcmVsYXRlZFByb21vdGlvbnMubGVuZ3RoOyBfaTMrKykge1xuICAgICAgICAgICAgICAgIGdzYXAudG8oX3RoaXM0LiRyZWxhdGVkUHJvbW90aW9uc1tfaTNdLCB7XG4gICAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdzYXAudG8oX3RoaXM0LiRyZWxhdGVkUHJvbW90aW9uc1tfaTNdLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lciAuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgICAgICAgICAgc2NhbGU6IDEuMSxcbiAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kcmVsYXRlZFNsaWRlcklubmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtc3RhcnQnO1xuICAgICAgICB0aGlzLiRyZWxhdGVkU2xpZGVySW5uZXIuc3R5bGUubWluV2lkdGggPSAnYXV0byc7XG4gICAgICAgIHRoaXMucmVsYXRlZERyYWdnYWJsZSA9IG5ldyBEcmFnZ2FibGUoe1xuICAgICAgICAgIHRhcmdldDogdGhpcy4kcmVsYXRlZFNsaWRlcixcbiAgICAgICAgICB0YXJnZXRJbm5lcjogdGhpcy4kcmVsYXRlZFNsaWRlcklubmVyLFxuICAgICAgICAgIHNuYXA6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb21vdGlvbkVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByb21vdGlvbkVudGVyKGVsKSB7XG4gICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lciAuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb21vdGlvbkxlYXZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByb21vdGlvbkxlYXZlKGVsKSB7XG4gICAgICBpZiAodGhpcy5yZWxhdGVkRHJhZ2dhYmxlICYmIHRoaXMucmVsYXRlZERyYWdnYWJsZS5fZHJhZy5kcmFnZ2luZykgcmV0dXJuO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcuaW5uZXIgLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgc2NhbGU6IDEuMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJhZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByYWYoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJyZXNpemVPcmllbnRhdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemVPcmllbnRhdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zcGxpdFRleHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3BsaXRUZXh0c1tpXS5yZXZlcnQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXNpemVTY3JvbGx0aXRsZXMoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVuZGVyZXJIb21lO1xufShSZW5kZXJlcik7IC8vIERvbmB0IGZvcmdldCB0byBleHBvcnQgeW91ciByZW5kZXJlclxuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVySG9tZTsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG4vLyBHc2FwXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCBTY3JvbGxUcmlnZ2VyIGZyb20gJ2dzYXAvU2Nyb2xsVHJpZ2dlcic7XG5nc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpOyAvLyBJbXBvcnQgUmVuZGVyZXJcblxuaW1wb3J0IFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIuanMnOyAvLyBpbXBvcnQgc3R5bGVzRGVmYXVsdCBmcm9tICcuL3N0eWxlc0RlZmF1bHQuY3NzJzsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4vLyBVdGlsaXRpZXNcblxuaW1wb3J0IERvbUV2ZW50cyBmcm9tICcuLi9jbGFzc2VzL2RvbUV2ZW50cyc7XG5pbXBvcnQgU3VwZXJTY3JvbGxlciBmcm9tICcuLi9jbGFzc2VzL3N1cGVyU2Nyb2xsZXInO1xuaW1wb3J0IFN1cGVyT2JzZXJ2ZXIgZnJvbSAnLi4vY2xhc3Nlcy9zdXBlck9ic2VydmVyJzsgLy8gT3RoZXJcbi8vIGltcG9ydCBTbGlkZXIgZnJvbSAnLi4vY2xhc3Nlcy9zbGlkZXInO1xuXG5pbXBvcnQgU3BsaXRUZXh0IGZyb20gJy4uL2NsYXNzZXMvc3BsaXRUZXh0JztcblxudmFyIFJlbmRlcmVyQWJvdXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZW5kZXJlcikge1xuICBfaW5oZXJpdHMoUmVuZGVyZXJBYm91dCwgX1JlbmRlcmVyKTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJlbmRlcmVyQWJvdXQpO1xuXG4gIGZ1bmN0aW9uIFJlbmRlcmVyQWJvdXQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlbmRlcmVyQWJvdXQpO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlbmRlcmVyQWJvdXQsIFt7XG4gICAga2V5OiBcInNlbGVjdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RvcnMoKSB7XG4gICAgICB0aGlzLiRoZXJvID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLmFib3V0X19oZXJvJyk7XG4gICAgICBpZiAodGhpcy4kaGVybykgdGhpcy4kaGVyb0ltYWdlcyA9IHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvckFsbCgnLmltYWdlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVFbnRlcigpIHtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy5zZXRDdGEoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXIoKSB7XG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHRoaXMuaW5pdEN0YSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRDdGFcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q3RhKCkge1xuICAgICAgdGhpcy4kY3RhID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLmN0YScpO1xuXG4gICAgICBpZiAodGhpcy4kY3RhKSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGN0YS5xdWVyeVNlbGVjdG9yKCcubWFzaycpLCB7XG4gICAgICAgICAgc2NhbGVZOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRjdGEucXVlcnlTZWxlY3RvcignLmJ1dHRvbicpLCB7XG4gICAgICAgICAgeTogJzV2dydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRDdGFcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEN0YSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLiRjdGEpIHtcbiAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJGN0YSxcbiAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGN0YS5xdWVyeVNlbGVjdG9yKCcubWFzaycpLCB7XG4gICAgICAgICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBnc2FwLnRvKF90aGlzLiRjdGEucXVlcnlTZWxlY3RvcignLmJ1dHRvbicpLCB7XG4gICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJhZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByYWYoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfV0pO1xuXG4gIHJldHVybiBSZW5kZXJlckFib3V0O1xufShSZW5kZXJlcik7IC8vIERvbmB0IGZvcmdldCB0byBleHBvcnQgeW91ciByZW5kZXJlclxuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyQWJvdXQ7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuLy8gR3NhcFxuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCc7XG5pbXBvcnQgU2Nyb2xsVHJpZ2dlciBmcm9tICdnc2FwL1Njcm9sbFRyaWdnZXInO1xuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTsgLy8gSW1wb3J0IFJlbmRlcmVyXG5cbmltcG9ydCBSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyLmpzJzsgLy8gaW1wb3J0IHN0eWxlc0RlZmF1bHQgZnJvbSAnLi9zdHlsZXNEZWZhdWx0LmNzcyc7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuLy8gVXRpbGl0aWVzXG5cbmltcG9ydCBEb21FdmVudHMgZnJvbSAnLi4vY2xhc3Nlcy9kb21FdmVudHMnO1xuaW1wb3J0IFN1cGVyU2Nyb2xsZXIgZnJvbSAnLi4vY2xhc3Nlcy9zdXBlclNjcm9sbGVyJztcbmltcG9ydCBTdXBlck9ic2VydmVyIGZyb20gJy4uL2NsYXNzZXMvc3VwZXJPYnNlcnZlcic7IC8vIE90aGVyXG4vLyBpbXBvcnQgU2xpZGVyIGZyb20gJy4uL2NsYXNzZXMvc2xpZGVyJztcblxuaW1wb3J0IFNwbGl0VGV4dCBmcm9tICcuLi9jbGFzc2VzL3NwbGl0VGV4dCc7XG5cbnZhciBSZW5kZXJlclBoaWxvc29waHkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZW5kZXJlcikge1xuICBfaW5oZXJpdHMoUmVuZGVyZXJQaGlsb3NvcGh5LCBfUmVuZGVyZXIpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUmVuZGVyZXJQaGlsb3NvcGh5KTtcblxuICBmdW5jdGlvbiBSZW5kZXJlclBoaWxvc29waHkoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlbmRlcmVyUGhpbG9zb3BoeSk7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVuZGVyZXJQaGlsb3NvcGh5LCBbe1xuICAgIGtleTogXCJzZWxlY3RvcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0b3JzKCkge1xuICAgICAgdGhpcy4kbWlzaW9uID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnBoaWxvc29waHlfX21pc2lvbicpO1xuXG4gICAgICBpZiAodGhpcy4kbWlzaW9uKSB7XG4gICAgICAgIHRoaXMuJG1pc2lvblRpdGxlcyA9IHRoaXMuJG1pc2lvbi5xdWVyeVNlbGVjdG9yQWxsKCcuc3VwZXJ0aXRsZScpO1xuICAgICAgICB0aGlzLiRtaXNpb25JbWFnZSA9IHRoaXMuJG1pc2lvbi5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kdmlzaW9uID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnBoaWxvc29waHlfX3Zpc2lvbicpO1xuXG4gICAgICBpZiAodGhpcy4kdmlzaW9uKSB7XG4gICAgICAgIHRoaXMuJHZpc2lvblRpdGxlcyA9IHRoaXMuJHZpc2lvbi5xdWVyeVNlbGVjdG9yQWxsKCcuc3VwZXJ0aXRsZScpO1xuICAgICAgICB0aGlzLiR2aXNpb25JbWFnZSA9IHRoaXMuJHZpc2lvbi5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kcXVvdGUgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucGhpbG9zb3BoeV9fcXVvdGUnKTtcblxuICAgICAgaWYgKHRoaXMuJHF1b3RlKSB7XG4gICAgICAgIHRoaXMuJHF1b3RlSWNvbiA9IHRoaXMuJHF1b3RlLnF1ZXJ5U2VsZWN0b3IoJy5xdW90ZV9faWNvbicpO1xuICAgICAgICB0aGlzLiRxdW90ZVRleHQgPSB0aGlzLiRxdW90ZS5xdWVyeVNlbGVjdG9yKCdxdW90ZV9fdGV4dCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLiRhc3NldHMgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucGhpbG9zb3BoeV9fYXNzZXRzJyk7XG5cbiAgICAgIGlmICh0aGlzLiRhc3NldHMpIHtcbiAgICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB0aGlzLiRhc3NldHNUaXRsZXMgPSB0aGlzLiRhc3NldHMucXVlcnlTZWxlY3RvckFsbCgnLnN1cGVydGl0bGUnKTtlbHNlIHRoaXMuJGFzc2V0c1RpdGxlID0gdGhpcy4kYXNzZXRzLnF1ZXJ5U2VsZWN0b3IoJy5zdXBlcnRpdGxlJyk7XG4gICAgICAgIHRoaXMuJGFzc2V0c0ltYWdlcyA9IHRoaXMuJGFzc2V0cy5xdWVyeVNlbGVjdG9yQWxsKCcuaW1hZ2UnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kcHJpbmNpcGxlcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5waGlsb3NvcGh5X19wcmluY2lwbGVzJyk7XG5cbiAgICAgIGlmICh0aGlzLiRwcmluY2lwbGVzKSB7XG4gICAgICAgIHRoaXMuJHByaW5jaXBsZXNUaXRsZSA9IHRoaXMuJHByaW5jaXBsZXMucXVlcnlTZWxlY3RvcignLnN1cGVydGl0bGUnKTtcbiAgICAgICAgdGhpcy4kcHJpbmNpcGxlc0l0ZW1zID0gdGhpcy4kcHJpbmNpcGxlcy5xdWVyeVNlbGVjdG9yQWxsKCcucHJpbmNpcGxlc19faXRlbScpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJldmVudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH0sIHtcbiAgICBrZXk6IFwiYmVmb3JlRW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlRW50ZXIoKSB7XG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHRoaXMuc2V0U3VwZXJ0aXRsZXMoKTtlbHNlIHRoaXMuc2V0U3VwZXJ0aXRsZXNNb2JpbGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXIoKSB7XG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHRoaXMuaW5pdFN1cGVydGl0bGVzKCk7ZWxzZSB0aGlzLmluaXRTdXBlcnRpdGxlc01vYmlsZSgpO1xuICAgICAgdGhpcy5pbml0UXVvdGUoKTtcbiAgICAgIHRoaXMuaW5pdFByaW5jaXBsZXMoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0U3VwZXJ0aXRsZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3VwZXJ0aXRsZXMoKSB7XG4gICAgICBnc2FwLnNldCh0aGlzLiRtaXNpb25JbWFnZS5jaGlsZHJlblswXSwge1xuICAgICAgICBzY2FsZTogMS4yXG4gICAgICB9LCAwKTtcbiAgICAgIHRoaXMuJHN1cGVydGl0bGVzID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgnLnN1cGVydGl0bGUnKTtcblxuICAgICAgaWYgKHRoaXMuJHN1cGVydGl0bGVzKSB7XG4gICAgICAgIGZvciAodmFyICRpID0gMDsgJGkgPCB0aGlzLiRzdXBlcnRpdGxlcy5sZW5ndGg7ICRpKyspIHtcbiAgICAgICAgICBuZXcgU3BsaXRUZXh0KHRoaXMuJHN1cGVydGl0bGVzWyRpXSwge1xuICAgICAgICAgICAgdHlwZTogJ2NoYXJzJyxcbiAgICAgICAgICAgIGxpbmVzQ2xhc3M6ICdsaW5lIGxpbmUtLSsrJyxcbiAgICAgICAgICAgIHdvcmRzQ2xhc3M6ICd3b3JkIHdvcmQtLSsrJyxcbiAgICAgICAgICAgIGNoYXJzQ2xhc3M6ICdjaGFyIGNoYXItLSsrJ1xuICAgICAgICAgIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICAgICAgICB0aGlzLiRzdXBlcnRpdGxlc1skaV0uY2xhc3NMaXN0LmFkZCgnc3BsaXQnLCAnc3BsaXQtLWNoYXJzJyk7IC8vIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLiRzdXBlcnRpdGxlc1skaV0ucXVlcnlTZWxlY3RvckFsbCgnLnN1cGVydGl0bGUgLmxpbmUnKS5sZW5ndGg7IGorKylcbiAgICAgICAgICAvLyB7XG4gICAgICAgICAgLy8gICAgIHRoaXMuJHN1cGVydGl0bGVzWyRpXS5xdWVyeVNlbGVjdG9yQWxsKCcuc3VwZXJ0aXRsZSAubGluZScpW2pdLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJzxzcGFuIGNsYXNzPVwidW5kZXJsaW5lXCI+PC9zcGFuPicpO1xuICAgICAgICAgIC8vICAgICB0aGlzLiRzdXBlcnRpdGxlc1skaV0ucXVlcnlTZWxlY3RvckFsbCgnLnN1cGVydGl0bGUgLmxpbmUnKVtqXS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgJzxzcGFuIGNsYXNzPVwiYnJlYWtcIj48L3NwYW4+Jyk7XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuJG1pc2lvbi5zdHlsZS5wYWRkaW5nVG9wID0gd2luZG93LmlubmVySGVpZ2h0IC8gMiAtIHRoaXMuJG1pc2lvblRpdGxlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAyICsgJ3B4JztcbiAgICAgIHRoaXMuJGFzc2V0cy5xdWVyeVNlbGVjdG9yKCcuY29sdW1ucy0taW5uZXItMicpLnN0eWxlLnBhZGRpbmdUb3AgPSB0aGlzLiRhc3NldHNJbWFnZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgJ3B4JztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFF1b3RlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRRdW90ZSgpIHtcbiAgICAgIGlmICh0aGlzLiRxdW90ZSkge1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRxdW90ZUljb24sIHtcbiAgICAgICAgICB5OiAnMi41dncnXG4gICAgICAgIH0sIDApO1xuICAgICAgICB2YXIgcXVvdGVUaW1lbGluZSA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBlYXNlOiAnbm9uZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJHF1b3RlLFxuICAgICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgICAgZW5kOiAnYm90dG9tIHRvcCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBxdW90ZVRpbWVsaW5lLnRvKHRoaXMuJHF1b3RlSWNvbiwge1xuICAgICAgICAgIHk6ICctMi41dncnXG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0U3VwZXJ0aXRsZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFN1cGVydGl0bGVzKCkge1xuICAgICAgLy8gTWlzaW9uXG4gICAgICB2YXIgbWlzaW9uU3RhcnQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyIC0gdGhpcy4kbWlzaW9uVGl0bGVzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAvIDI7XG4gICAgICB2YXIgbWlzaW9uRW5kID0gd2luZG93LmlubmVySGVpZ2h0IC8gMiArIHRoaXMuJG1pc2lvblRpdGxlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAyO1xuICAgICAgdmFyIG1pc2lvbk9mZnNldCA9IHRoaXMuJG1pc2lvbkltYWdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnkgKyB0aGlzLiRtaXNpb25JbWFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSB0aGlzLiRtaXNpb25UaXRsZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgdmFyIG1pc2lvblRpbWVsaW5lID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgZWFzZTogJ25vbmUnXG4gICAgICAgIH0sXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICB0cmlnZ2VyOiB0aGlzLiRtaXNpb25UaXRsZXNbMF0sXG4gICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgc3RhcnQ6ICd0b3AgJyArIG1pc2lvblN0YXJ0ICsgJ3B4JyxcbiAgICAgICAgICBlbmQ6IG1pc2lvbk9mZnNldCArICdweCAnICsgbWlzaW9uRW5kICsgJ3B4J1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG1pc2lvblRpbWVsaW5lLnRvKHRoaXMuJG1pc2lvblRpdGxlc1swXSwge1xuICAgICAgICB5OiAobWlzaW9uT2Zmc2V0IC0gdGhpcy4kbWlzaW9uVGl0bGVzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCkgLyAyLFxuICAgICAgICBkdXJhdGlvbjogMC41XG4gICAgICB9LCAwKTtcbiAgICAgIG1pc2lvblRpbWVsaW5lLnRvKHRoaXMuJG1pc2lvblRpdGxlc1sxXSwge1xuICAgICAgICB5OiBtaXNpb25PZmZzZXQgLSB0aGlzLiRtaXNpb25UaXRsZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxuICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgfSwgMCk7XG4gICAgICBtaXNpb25UaW1lbGluZS50byh0aGlzLiRtaXNpb25JbWFnZS5jaGlsZHJlblswXSwge1xuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgZHVyYXRpb246IDFcbiAgICAgIH0sIDApOyAvLyBWaXNpb25cblxuICAgICAgdmFyIHZpc2lvblN0YXJ0ID0gd2luZG93LmlubmVySGVpZ2h0IC8gMiAtIHRoaXMuJHZpc2lvblRpdGxlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAyO1xuICAgICAgdmFyIHZpc2lvbkVuZCA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDIgKyB0aGlzLiR2aXNpb25UaXRsZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC8gMjtcbiAgICAgIHZhciB2aXNpb25PZmZzZXQgPSB0aGlzLiR2aXNpb25JbWFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB0aGlzLiR2aXNpb25JbWFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSB0aGlzLiR2aXNpb25UaXRsZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgZ3NhcC5zZXQodGhpcy4kdmlzaW9uSW1hZ2UuY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgc2NhbGU6IDEuMlxuICAgICAgfSwgMCk7XG4gICAgICB2YXIgdmlzaW9uVGltZWxpbmUgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICBlYXNlOiAnbm9uZSdcbiAgICAgICAgfSxcbiAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJHZpc2lvblRpdGxlc1swXSxcbiAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICBzdGFydDogJ3RvcCAnICsgdmlzaW9uU3RhcnQgKyAncHgnLFxuICAgICAgICAgIGVuZDogdmlzaW9uT2Zmc2V0ICsgJ3B4ICcgKyB2aXNpb25FbmQgKyAncHgnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmlzaW9uVGltZWxpbmUudG8odGhpcy4kdmlzaW9uVGl0bGVzWzBdLCB7XG4gICAgICAgIHk6ICh2aXNpb25PZmZzZXQgLSB0aGlzLiR2aXNpb25UaXRsZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KSAvIDIsXG4gICAgICAgIGR1cmF0aW9uOiAwLjVcbiAgICAgIH0sIDApO1xuICAgICAgdmlzaW9uVGltZWxpbmUudG8odGhpcy4kdmlzaW9uVGl0bGVzWzFdLCB7XG4gICAgICAgIHk6IHZpc2lvbk9mZnNldCAtIHRoaXMuJHZpc2lvblRpdGxlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsXG4gICAgICAgIGR1cmF0aW9uOiAxXG4gICAgICB9LCAwKTtcbiAgICAgIHZpc2lvblRpbWVsaW5lLnRvKHRoaXMuJHZpc2lvbkltYWdlLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgIHNjYWxlOiAxLFxuICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgfSwgMCk7IC8vIGdzYXAuc2V0KHRoaXMuJHZpc2lvbkltYWdlLmNoaWxkcmVuWzBdLCB7IHNjYWxlOiAxLjIgfSwgMCk7XG4gICAgICAvLyBjb25zdCB2aXNpb25UaW1lbGluZTIgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgIC8vICAgICBkZWZhdWx0czogeyBlYXNlOiAnbm9uZScgfSxcbiAgICAgIC8vICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAvLyAgICAgICAgIHRyaWdnZXI6IHRoaXMuJHZpc2lvblRpdGxlc1swXSxcbiAgICAgIC8vICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAvLyAgICAgICAgIHN0YXJ0OiAndG9wIGJvdHRvbScsXG4gICAgICAvLyAgICAgICAgIGVuZDogdmlzaW9uT2Zmc2V0ICsgJ3B4ICcgKyB2aXNpb25FbmQgKyAncHgnLFxuICAgICAgLy8gICAgIH1cbiAgICAgIC8vIH0pO1xuICAgICAgLy8gdmlzaW9uVGltZWxpbmUyLnRvKHRoaXMuJHZpc2lvbkltYWdlLmNoaWxkcmVuWzBdLCB7IHNjYWxlOiAxLCBkdXJhdGlvbjogMSB9LCAwKTtcbiAgICAgIC8vIEFzc2V0c1xuXG4gICAgICB2YXIgYXNzZXRzU3RhcnQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyIC0gdGhpcy4kYXNzZXRzVGl0bGVzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAvIDI7XG4gICAgICB2YXIgYXNzZXRzRW5kID0gd2luZG93LmlubmVySGVpZ2h0IC8gMiArIHRoaXMuJGFzc2V0c1RpdGxlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAyO1xuICAgICAgdmFyIGFzc2V0c0FjdGlPZmZzZXQgPSB0aGlzLiRhc3NldHNUaXRsZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgd2luZG93LmlubmVyV2lkdGggKiAwLjEyNTtcbiAgICAgIHZhciBhc3NldHNWb3NPZmZzZXQgPSB0aGlzLiRhc3NldHNUaXRsZXNbMV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgdGhpcy4kYXNzZXRzSW1hZ2VzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArIHdpbmRvdy5pbm5lcldpZHRoICogMC4xMjU7XG4gICAgICB2YXIgYXNzZXRzQWN0aVRpbWVsaW5lID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgZWFzZTogJ25vbmUnXG4gICAgICAgIH0sXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICB0cmlnZ2VyOiB0aGlzLiRhc3NldHNUaXRsZXNbMF0sXG4gICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgc3RhcnQ6ICd0b3AgJyArIGFzc2V0c1N0YXJ0ICsgJ3B4JyxcbiAgICAgICAgICBlbmQ6IGFzc2V0c0FjdGlPZmZzZXQgKyAncHggJyArIGFzc2V0c0VuZCArICdweCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBhc3NldHNBY3RpVGltZWxpbmUudG8odGhpcy4kYXNzZXRzVGl0bGVzWzBdLCB7XG4gICAgICAgIHk6IGFzc2V0c0FjdGlPZmZzZXQgLSB0aGlzLiRhc3NldHNUaXRsZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxuICAgICAgICBkdXJhdGlvbjogMC41XG4gICAgICB9LCAwKTtcbiAgICAgIHZhciBhc3NldHNWb3NUaW1lbGluZSA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgIGVhc2U6ICdub25lJ1xuICAgICAgICB9LFxuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgdHJpZ2dlcjogdGhpcy4kYXNzZXRzVGl0bGVzWzFdLFxuICAgICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICAgIHN0YXJ0OiAndG9wICcgKyBhc3NldHNTdGFydCArICdweCcsXG4gICAgICAgICAgZW5kOiBhc3NldHNWb3NPZmZzZXQgKyAncHggJyArIGFzc2V0c0VuZCArICdweCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBhc3NldHNWb3NUaW1lbGluZS50byh0aGlzLiRhc3NldHNUaXRsZXNbMV0sIHtcbiAgICAgICAgeTogYXNzZXRzVm9zT2Zmc2V0IC0gdGhpcy4kYXNzZXRzVGl0bGVzWzFdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxcbiAgICAgICAgZHVyYXRpb246IDAuNVxuICAgICAgfSwgMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldFN1cGVydGl0bGVzTW9iaWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFN1cGVydGl0bGVzTW9iaWxlKCkge1xuICAgICAgdGhpcy4kZml4ZWRUaXRsZXMgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCcuZml4ZWQgLnN1cGVydGl0bGUnKTtcbiAgICAgIG5ldyBTcGxpdFRleHQodGhpcy4kZml4ZWRUaXRsZXNbMF0sIHtcbiAgICAgICAgdHlwZTogJ3dvcmRzJyxcbiAgICAgICAgd29yZHNDbGFzczogJ3dvcmQgd29yZC0tKysnXG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KHRoaXMuJGZpeGVkVGl0bGVzWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMVxuICAgICAgfSk7XG4gICAgICBuZXcgU3BsaXRUZXh0KHRoaXMuJGZpeGVkVGl0bGVzWzFdLCB7XG4gICAgICAgIHR5cGU6ICd3b3JkcycsXG4gICAgICAgIHdvcmRzQ2xhc3M6ICd3b3JkIHdvcmQtLSsrJ1xuICAgICAgfSk7XG4gICAgICBnc2FwLnNldCh0aGlzLiRmaXhlZFRpdGxlc1sxXS5jaGlsZHJlblswXSwge1xuICAgICAgICBvcGFjaXR5OiAwLjAwMDFcbiAgICAgIH0pO1xuICAgICAgbmV3IFNwbGl0VGV4dCh0aGlzLiRmaXhlZFRpdGxlc1syXSwge1xuICAgICAgICB0eXBlOiAnd29yZHMnLFxuICAgICAgICB3b3Jkc0NsYXNzOiAnd29yZCB3b3JkLS0rKydcbiAgICAgIH0pO1xuICAgICAgZ3NhcC5zZXQodGhpcy4kZml4ZWRUaXRsZXNbMl0uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxXG4gICAgICB9KTtcbiAgICAgIG5ldyBTcGxpdFRleHQodGhpcy4kZml4ZWRUaXRsZXNbM10sIHtcbiAgICAgICAgdHlwZTogJ3dvcmRzJyxcbiAgICAgICAgd29yZHNDbGFzczogJ3dvcmQgd29yZC0tKysnXG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KHRoaXMuJGZpeGVkVGl0bGVzWzNdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMVxuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuJGZpeGVkVGl0bGVzWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuMVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRTdXBlcnRpdGxlc01vYmlsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0U3VwZXJ0aXRsZXNNb2JpbGUoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAvLyBNaXNpb25cbiAgICAgIHRoaXMuc3VwZXJUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgIHRyaWdnZXI6IHRoaXMuJG1pc2lvbixcbiAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgIHN0YXJ0OiAndG9wIHRvcCs9MTAwJyxcbiAgICAgICAgZW5kOiAnYm90dG9tIDExMCUnLFxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXJCYWNrOiBmdW5jdGlvbiBvbkVudGVyQmFjaygpIHtcbiAgICAgICAgICBnc2FwLnRvKF90aGlzLiRmaXhlZFRpdGxlc1swXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25MZWF2ZUJhY2s6IGZ1bmN0aW9uIG9uTGVhdmVCYWNrKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBWaXNpb25cblxuICAgICAgdGhpcy5zdXBlclRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgdHJpZ2dlcjogdGhpcy4kdmlzaW9uLFxuICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgc3RhcnQ6ICd0b3AgNTAlJyxcbiAgICAgICAgZW5kOiAnYm90dG9tIDExMCUnLFxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzFdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzFdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXJCYWNrOiBmdW5jdGlvbiBvbkVudGVyQmFjaygpIHtcbiAgICAgICAgICBnc2FwLnRvKF90aGlzLiRmaXhlZFRpdGxlc1sxXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25MZWF2ZUJhY2s6IGZ1bmN0aW9uIG9uTGVhdmVCYWNrKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzFdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBBc3NldHNcblxuICAgICAgdGhpcy5zdXBlclRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgdHJpZ2dlcjogdGhpcy4kYXNzZXRzLFxuICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgc3RhcnQ6ICd0b3AgNTAlJyxcbiAgICAgICAgZW5kOiAnYm90dG9tIDExMCUnLFxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzJdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzJdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXJCYWNrOiBmdW5jdGlvbiBvbkVudGVyQmFjaygpIHtcbiAgICAgICAgICBnc2FwLnRvKF90aGlzLiRmaXhlZFRpdGxlc1syXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25MZWF2ZUJhY2s6IGZ1bmN0aW9uIG9uTGVhdmVCYWNrKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzJdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBQcmluY2lwbGVzXG5cbiAgICAgIHRoaXMuc3VwZXJUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgIHRyaWdnZXI6IHRoaXMuJHByaW5jaXBsZXMsXG4gICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICBzdGFydDogJ3RvcCAzNSUnLFxuICAgICAgICBlbmQ6ICdib3R0b20gMTEwJScsXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgZ3NhcC50byhfdGhpcy4kZml4ZWRUaXRsZXNbM10uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTGVhdmU6IGZ1bmN0aW9uIG9uTGVhdmUoKSB7XG4gICAgICAgICAgZ3NhcC50byhfdGhpcy4kZml4ZWRUaXRsZXNbM10uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25FbnRlckJhY2s6IGZ1bmN0aW9uIG9uRW50ZXJCYWNrKCkge1xuICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGZpeGVkVGl0bGVzWzNdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkxlYXZlQmFjazogZnVuY3Rpb24gb25MZWF2ZUJhY2soKSB7XG4gICAgICAgICAgZ3NhcC50byhfdGhpcy4kZml4ZWRUaXRsZXNbM10uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRQcmluY2lwbGVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRQcmluY2lwbGVzKCkge1xuICAgICAgdGhpcy5wcmluY2lwbGVzVGltZWxpbmVzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kcHJpbmNpcGxlc0l0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJHByaW5jaXBsZXNJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgIHk6IHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wID8gLXdpbmRvdy5pbm5lckhlaWdodCArIDIwMCA6IC0od2luZG93LmlubmVySGVpZ2h0ICogMC41KSArIDIwMCxcbiAgICAgICAgICBzY2FsZTogMS4yXG4gICAgICAgIH0sIDApO1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRwcmluY2lwbGVzSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmRfX21hc2snKSwge1xuICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHZhciBwcmluY2lwbGVUaW1lbGluZSA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBlYXNlOiAnbm9uZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJHByaW5jaXBsZXNJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCcpLFxuICAgICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgICAgZW5kOiAnYm90dG9tIGJvdHRvbScgLy9lbmQ6ICd0b3ArPScgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyAnIGJvdHRvbSdcblxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHByaW5jaXBsZVRpbWVsaW5lLnRvKHRoaXMuJHByaW5jaXBsZXNJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHByaW5jaXBsZVRpbWVsaW5lLnRvKHRoaXMuJHByaW5jaXBsZXNJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fbWFzaycpLCB7XG4gICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLjVcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHRoaXMucHJpbmNpcGxlc1RpbWVsaW5lcy5wdXNoKHByaW5jaXBsZVRpbWVsaW5lKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmFmXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJhZigpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9XSk7XG5cbiAgcmV0dXJuIFJlbmRlcmVyUGhpbG9zb3BoeTtcbn0oUmVuZGVyZXIpOyAvLyBEb25gdCBmb3JnZXQgdG8gZXhwb3J0IHlvdXIgcmVuZGVyZXJcblxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlclBoaWxvc29waHk7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuLy8gR3NhcFxuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCc7XG5pbXBvcnQgU2Nyb2xsVHJpZ2dlciBmcm9tICdnc2FwL1Njcm9sbFRyaWdnZXInO1xuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTsgLy8gSW1wb3J0IFJlbmRlcmVyXG5cbmltcG9ydCBSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyLmpzJzsgLy8gaW1wb3J0IHN0eWxlc0RlZmF1bHQgZnJvbSAnLi9zdHlsZXNEZWZhdWx0LmNzcyc7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuLy8gVXRpbGl0aWVzXG5cbmltcG9ydCBEb21FdmVudHMgZnJvbSAnLi4vY2xhc3Nlcy9kb21FdmVudHMnO1xuaW1wb3J0IFN1cGVyU2Nyb2xsZXIgZnJvbSAnLi4vY2xhc3Nlcy9zdXBlclNjcm9sbGVyJztcbmltcG9ydCBTdXBlck9ic2VydmVyIGZyb20gJy4uL2NsYXNzZXMvc3VwZXJPYnNlcnZlcic7XG5pbXBvcnQgRHJhZ2dhYmxlIGZyb20gJy4uL2NsYXNzZXMvRHJhZ2dhYmxlJzsgLy8gT3RoZXJcbi8vIGltcG9ydCBTbGlkZXIgZnJvbSAnLi4vY2xhc3Nlcy9zbGlkZXInO1xuXG5pbXBvcnQgU3BsaXRUZXh0IGZyb20gJy4uL2NsYXNzZXMvc3BsaXRUZXh0JztcblxudmFyIFJlbmRlcmVyUHJvbW90aW9ucyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlbmRlcmVyKSB7XG4gIF9pbmhlcml0cyhSZW5kZXJlclByb21vdGlvbnMsIF9SZW5kZXJlcik7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihSZW5kZXJlclByb21vdGlvbnMpO1xuXG4gIGZ1bmN0aW9uIFJlbmRlcmVyUHJvbW90aW9ucygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVuZGVyZXJQcm9tb3Rpb25zKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSZW5kZXJlclByb21vdGlvbnMsIFt7XG4gICAga2V5OiBcInNlbGVjdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RvcnMoKSB7XG4gICAgICB0aGlzLiRwcm9tb3Rpb25zID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgnLnByb21vdGlvbicpO1xuICAgICAgdGhpcy4kc2xpZGVyID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnNsaWRlcicpO1xuICAgICAgdGhpcy4kc2xpZGVySW5uZXIgPSB0aGlzLiRzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5uZXInKTtcbiAgICAgIHRoaXMuJHNsaWRlclNjcm9sbGJhciA9IHRoaXMuJHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19zY3JvbGxiYXInKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZXZlbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV2ZW50cygpIHtcbiAgICAgIHRoaXMuc3BsaXRUZXh0cyA9IFtdO1xuICAgICAgdGhpcy5zY3JvbGxUcmlnZ2VycyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJHByb21vdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5wcm9tb3Rpb25Jbml0KHRoaXMuJHByb21vdGlvbnNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzY3JvbGxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuJHNsaWRlcklubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAgIC8vIFN1cGVyc2Nyb2xsZXJcbiAgICAgICAgICB0aGlzLnNsaWRlclNjcm9sbGVyID0gbmV3IFN1cGVyU2Nyb2xsZXIoe1xuICAgICAgICAgICAgbW9kZTogJ2hvcml6b250YWwnLFxuICAgICAgICAgICAgc2Nyb2xsOiB0cnVlLFxuICAgICAgICAgICAgc2Nyb2xsVGFyZ2V0OiB0aGlzLiRzbGlkZXJJbm5lcixcbiAgICAgICAgICAgIGJhcjogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAodGhpcy5hcHBVaS4kaGVhZGVyTG9nbykgZ3NhcC50byh0aGlzLmFwcFVpLiRoZWFkZXJMb2dvLCB7XG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHRoaXMuc3VwZXJUcmlnZ2VyID0gU2Nyb2xsVHJpZ2dlcjtcbiAgICAgICAgICB0aGlzLnN1cGVyVHJpZ2dlciA9IFNjcm9sbFRyaWdnZXI7XG4gICAgICAgICAgdGhpcy5zdXBlclRyaWdnZXIucmVmcmVzaCgpO1xuICAgICAgICAgIGdzYXAudGlja2VyLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnN1cGVyVHJpZ2dlclRsID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICBlYXNlOiAnbm9uZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJGFwcCxcbiAgICAgICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgICAgIHN0YXJ0OiAndG9wIHRvcCcsXG4gICAgICAgICAgICAgIGVuZDogJ2JvdHRvbSBib3R0b20nLFxuICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24gb25VcGRhdGUoc2VsZikge1xuICAgICAgICAgICAgICAgIF90aGlzLnN1cGVyU2Nyb2xsZXJNb2JpbGUgPSBzZWxmLnByb2dyZXNzICogc2VsZi5lbmQ7IC8vIGlmKHRoaXMuYXBwVWkuJGhlYWRlcilcbiAgICAgICAgICAgICAgICAvLyAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRoZWFkZXIsIHsgeTogLShzZWxmLnByb2dyZXNzICogdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KSB9KTtcbiAgICAgICAgICAgICAgICAvLyBpZih0aGlzLmFwcFVpLiRsb2dvKVxuICAgICAgICAgICAgICAgIC8vICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGxvZ28sIHsgeTogLShzZWxmLnByb2dyZXNzICogdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KSAvIDIgfSk7XG4gICAgICAgICAgICAgICAgLy8gaWYodGhpcy5hcHBVaS4kaGVhZGVyVHJpZ2dlclRleHQgJiYgIXRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKVxuICAgICAgICAgICAgICAgIC8vICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGhlYWRlclRyaWdnZXJUZXh0LCB7IHk6IC0oc2VsZi5wcm9ncmVzcyAqIHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCkgLyAyIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIGJlZm9yZUVudGVyKClcbiAgICAvLyB7XG4gICAgLy8gICAgIGlmKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKVxuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy4kcHJvbW90aW9ucy5sZW5ndGg7IGkrKylcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnNldCh0aGlzLiRwcm9tb3Rpb25zW2ldLCB7IHg6ICcyMHZ3Jywgb3BhY2l0eTogMC4wMDAxIH0pO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuICAgIC8vIGVudGVyKClcbiAgICAvLyB7XG4gICAgLy8gICAgIGlmKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKVxuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy4kcHJvbW90aW9ucy5sZW5ndGg7IGkrKylcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJHByb21vdGlvbnNbaV0sIHsgeDogJzB2dycsIG9wYWNpdHk6IDEsIGR1cmF0aW9uOiAyLCBlYXNlOiAnZXhwby5vdXQnLCBkZWxheTogaSAqIDAuMiB9KTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBlbHNlXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAgIC8vIEFuaW1hdGUgZmlyc3QgcHJvbW90aW9uIG51bWJlcnMgaW4gbW9iaWxlXG4gICAgLy8gICAgICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy4kcHJvbW90aW9uc1swXS5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLmRhdGFzZXQudmFsdWU7XG4gICAgLy8gICAgICAgICBjb25zdCBwZW5kaW5nU3BsaXQgPSBwZW5kaW5nLnNwbGl0KCcnKTtcbiAgICAvLyAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwZW5kaW5nU3BsaXQubGVuZ3RoOyBpKyspXG4gICAgLy8gICAgICAgICAgICAgZ3NhcC50byh0aGlzLiRwcm9tb3Rpb25zWzBdLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJykucXVlcnlTZWxlY3RvckFsbCgnLm51bWJlcicpW2ldLCB7IHk6IC0oKHBlbmRpbmdTcGxpdFtpXSAqIDEwMCkpICsgJyUnLCBvcGFjaXR5OiAxLCBlYXNlOiAnZXhwby5vdXQnLCBkdXJhdGlvbjogMiwgZGVsYXk6IDEgKyAoaSAqIDAuMDEpIH0pO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGlmKCF0aGlzLmFwcFN0b3JlLmlzRGVza3RvcClcbiAgICAvLyAgICAgICAgIHRoaXMuaW5pdFByb21vdGlvbk1vYmlsZSgpO1xuICAgIC8vIH1cblxuICB9LCB7XG4gICAga2V5OiBcImJlZm9yZUVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJlZm9yZUVudGVyKCkge1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgIC8vIFNldCBwcm9tb3Rpb25zXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kcHJvbW90aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGdzYXAuc2V0KHRoaXMuJHByb21vdGlvbnNbaV0sIHtcbiAgICAgICAgICAgIHk6ICctMi41dncnLFxuICAgICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwcmVlbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVlbnRlcigpIHtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAvLyBJbml0IHByb21vdGlvbnNcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRwcm9tb3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLiRwcm9tb3Rpb25zW2ldLCB7XG4gICAgICAgICAgICB5OiAnMHZ3JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAgICAgZGVsYXk6IGkgKiAwLjA1LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgIGNsZWFyUHJvcHM6ICd3aWxsQ2hhbmdlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgZ3NhcC50byh0aGlzLiRwcm9tb3Rpb25zWzBdLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJyksIHtcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgZHVyYXRpb246IDJcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBwZW5kaW5nID0gdGhpcy4kcHJvbW90aW9uc1swXS5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLmRhdGFzZXQudmFsdWU7XG4gICAgICAgIHZhciBwZW5kaW5nU3BsaXQgPSBwZW5kaW5nLnNwbGl0KCcnKTtcblxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBlbmRpbmdTcGxpdC5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGdzYXAudG8odGhpcy4kcHJvbW90aW9uc1swXS5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5udW1iZXInKVtqXSwge1xuICAgICAgICAgICAgeTogKDkgLSBwZW5kaW5nU3BsaXRbal0pICogMTAwICsgMTAwICsgJyUnLFxuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMixcbiAgICAgICAgICAgIGRlbGF5OiBqICogMC4xXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kcHJvbW90aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRwcm9tb3Rpb25zW2ldLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgX3RoaXMyLnByb21vdGlvbkVudGVyKGVsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kcHJvbW90aW9uc1tpXSwgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzMi5wcm9tb3Rpb25MZWF2ZShlbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicHJvbW90aW9uSW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9tb3Rpb25Jbml0KGVsKSB7XG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgdmFyIGZpcnN0TGFiZWwgPSBlbC5xdWVyeVNlbGVjdG9yKCcubGFiZWwtLTEnKTtcbiAgICAgICAgdmFyIGZpcnN0TGFiZWxTcGxpdCA9IG5ldyBTcGxpdFRleHQoZmlyc3RMYWJlbCwge1xuICAgICAgICAgIHR5cGU6ICdsaW5lcywgd29yZHMnLFxuICAgICAgICAgIGxpbmVzQ2xhc3M6ICdsaW5lIGxpbmUtLSsrJyxcbiAgICAgICAgICB3b3Jkc0NsYXNzOiAnd29yZCB3b3JkLS0rKycsXG4gICAgICAgICAgY2hhcnNDbGFzczogJ2NoYXIgY2hhci0tKysnXG4gICAgICAgIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICAgICAgdGhpcy5zcGxpdFRleHRzLnB1c2goZmlyc3RMYWJlbFNwbGl0KTtcbiAgICAgICAgZmlyc3RMYWJlbC5jbGFzc0xpc3QuYWRkKCdzcGxpdCcpO1xuICAgICAgICB2YXIgZmlyc3RMYWJlbFdvcmRzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmxhYmVsLS0xIC53b3JkJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmaXJzdExhYmVsV29yZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBnc2FwLnNldChmaXJzdExhYmVsV29yZHNbal0sIHtcbiAgICAgICAgICAgIHk6ICcwJSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWNvbmRMYWJlbCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5sYWJlbC0tMicpO1xuICAgICAgICB2YXIgc2Vjb25kTGFiZWxTcGxpdCA9IG5ldyBTcGxpdFRleHQoc2Vjb25kTGFiZWwsIHtcbiAgICAgICAgICB0eXBlOiAnbGluZXMsIHdvcmRzJyxcbiAgICAgICAgICBsaW5lc0NsYXNzOiAnbGluZSBsaW5lLS0rKycsXG4gICAgICAgICAgd29yZHNDbGFzczogJ3dvcmQgd29yZC0tKysnLFxuICAgICAgICAgIGNoYXJzQ2xhc3M6ICdjaGFyIGNoYXItLSsrJ1xuICAgICAgICB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgICAgIHRoaXMuc3BsaXRUZXh0cy5wdXNoKHNlY29uZExhYmVsU3BsaXQpO1xuICAgICAgICBzZWNvbmRMYWJlbC5jbGFzc0xpc3QuYWRkKCdzcGxpdCcpO1xuICAgICAgICB2YXIgc2Vjb25kTGFiZWxXb3JkcyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5sYWJlbC0tMiAud29yZCcpO1xuXG4gICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCBzZWNvbmRMYWJlbFdvcmRzLmxlbmd0aDsgX2orKykge1xuICAgICAgICAgIGdzYXAuc2V0KHNlY29uZExhYmVsV29yZHNbX2pdLCB7XG4gICAgICAgICAgICB5OiAnMTAwJSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb21vdGlvblRyaWdnZXIgPSBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGVhc2U6ICdub25lJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJpZ2dlcjogZWwucXVlcnlTZWxlY3RvcignLnBlbmRpbmcnKSxcbiAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICAgICAgIGdzYXAuc2V0KGVsLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJyksIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBwZW5kaW5nID0gZWwucXVlcnlTZWxlY3RvcignLnBlbmRpbmcnKS5kYXRhc2V0LnZhbHVlO1xuICAgICAgICAgICAgdmFyIHBlbmRpbmdTcGxpdCA9IHBlbmRpbmcuc3BsaXQoJycpO1xuICAgICAgICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLCB7XG4gICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZW5kaW5nU3BsaXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5udW1iZXInKVtpXSwge1xuICAgICAgICAgICAgICAgIHk6ICg5IC0gcGVuZGluZ1NwbGl0W2ldKSAqIDEwMCArIDEwMCArICclJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgICAgICAgZGVsYXk6IGkgKiAwLjFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IC8vIGdzYXAudG8oZWwucXVlcnlTZWxlY3RvcignLnBlbmRpbmcnKSwgeyBvcGFjaXR5OiAxLCBlYXNlOiAnZXhwby5vdXQnLCBkdXJhdGlvbjogMiB9KTtcbiAgICAgICAgICAgIC8vIGNvbnN0IHBlbmRpbmcgPSBlbC5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLmRhdGFzZXQudmFsdWU7XG4gICAgICAgICAgICAvLyBjb25zdCBwZW5kaW5nU3BsaXQgPSBwZW5kaW5nLnNwbGl0KCcnKTtcbiAgICAgICAgICAgIC8vIGZvcihsZXQgaiA9IDA7IGogPCBwZW5kaW5nU3BsaXQubGVuZ3RoOyBqKyspXG4gICAgICAgICAgICAvLyAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5udW1iZXInKVtqXSwgeyB5OiAoKCg5IC0gcGVuZGluZ1NwbGl0W2pdKSAqIDEwMCkgKyAxMDApICsgJyUnLCBvcGFjaXR5OiAxLCBlYXNlOiAnZXhwby5vdXQnLCBkdXJhdGlvbjogMiwgZGVsYXk6IGogKiAwLjEgfSk7XG5cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNjcm9sbFRyaWdnZXJzLnB1c2gocHJvbW90aW9uVHJpZ2dlcik7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb21vdGlvbkVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByb21vdGlvbkVudGVyKGVsKSB7XG4gICAgICBnc2FwLmtpbGxUd2VlbnNPZihbZWwucXVlcnlTZWxlY3RvcignLm91dGVyJyksIGVsLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJyldKTtcbiAgICAgIGdzYXAuc2V0KGVsLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJyksIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnXG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KGVsLnF1ZXJ5U2VsZWN0b3IoJy5vdXRlcicpLCB7XG4gICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgIH0pO1xuICAgICAgdmFyIHBlbmRpbmcgPSBlbC5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLmRhdGFzZXQudmFsdWU7XG4gICAgICB2YXIgcGVuZGluZ1NwbGl0ID0gcGVuZGluZy5zcGxpdCgnJyk7XG4gICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJyksIHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDJcbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBlbmRpbmdTcGxpdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJykucXVlcnlTZWxlY3RvckFsbCgnLm51bWJlcicpW2ldLCB7XG4gICAgICAgICAgeTogKDkgLSBwZW5kaW5nU3BsaXRbaV0pICogMTAwICsgMTAwICsgJyUnLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICBkdXJhdGlvbjogMixcbiAgICAgICAgICBkZWxheTogaSAqIDAuMVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcub3V0ZXIgLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcub3V0ZXIgLmJhY2tncm91bmRfX292ZXJsYXknKSwge1xuICAgICAgICBvcGFjaXR5OiAwLjUsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcuaW5uZXIgLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcuaW5uZXIgLm1hc2snKSwge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3RvcignLmlubmVyIC5pbmZvJyksIHtcbiAgICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICB2YXIgZmlyc3RMYWJlbFdvcmRzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmxhYmVsLS0xIC53b3JkJyk7XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGZpcnN0TGFiZWxXb3Jkcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICBnc2FwLnRvKGZpcnN0TGFiZWxXb3Jkc1tfaV0sIHtcbiAgICAgICAgICAgIHk6ICctMTAwJScsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNlY29uZExhYmVsV29yZHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcubGFiZWwtLTIgLndvcmQnKTtcblxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBzZWNvbmRMYWJlbFdvcmRzLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICBnc2FwLnRvKHNlY29uZExhYmVsV29yZHNbX2kyXSwge1xuICAgICAgICAgICAgeTogJzAlJyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicHJvbW90aW9uTGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvbW90aW9uTGVhdmUoZWwpIHtcbiAgICAgIHZhciBwZW5kaW5nID0gZWwucXVlcnlTZWxlY3RvcignLnBlbmRpbmcnKS5kYXRhc2V0LnZhbHVlO1xuICAgICAgdmFyIHBlbmRpbmdTcGxpdCA9IHBlbmRpbmcuc3BsaXQoJycpO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcucGVuZGluZycpLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBlbmRpbmdTcGxpdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZ3NhcC5raWxsVHdlZW5zT2YoZWwucXVlcnlTZWxlY3RvcignLnBlbmRpbmcnKS5xdWVyeVNlbGVjdG9yQWxsKCcubnVtYmVyJylbaV0pO1xuICAgICAgICAgICAgZ3NhcC5zZXQoZWwucXVlcnlTZWxlY3RvcignLnBlbmRpbmcnKS5xdWVyeVNlbGVjdG9yQWxsKCcubnVtYmVyJylbaV0sIHtcbiAgICAgICAgICAgICAgeTogJzAlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3RvcignLm91dGVyIC5iYWNrZ3JvdW5kX19iZycpLCB7XG4gICAgICAgIHNjYWxlOiAxLjEsXG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJy5vdXRlciAuYmFja2dyb3VuZF9fb3ZlcmxheScpLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lciAuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICBzY2FsZTogMS4xLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3RvcignLmlubmVyIC5tYXNrJyksIHtcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3RvcignLmlubmVyIC5pbmZvJyksIHtcbiAgICAgICAgY29sb3I6ICcjMDAwJyxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgfSk7XG4gICAgICBnc2FwLnNldChlbC5xdWVyeVNlbGVjdG9yKCcub3V0ZXInKSwge1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBkZWxheTogMC42XG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KGVsLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nJyksIHtcbiAgICAgICAgZGlzcGxheTogJ25vbmUnLFxuICAgICAgICBkZWxheTogMC42XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgIHZhciBmaXJzdExhYmVsV29yZHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcubGFiZWwtLTEgLndvcmQnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0TGFiZWxXb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGdzYXAudG8oZmlyc3RMYWJlbFdvcmRzW2ldLCB7XG4gICAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWNvbmRMYWJlbFdvcmRzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmxhYmVsLS0yIC53b3JkJyk7XG5cbiAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgc2Vjb25kTGFiZWxXb3Jkcy5sZW5ndGg7IF9pMysrKSB7XG4gICAgICAgICAgZ3NhcC50byhzZWNvbmRMYWJlbFdvcmRzW19pM10sIHtcbiAgICAgICAgICAgIHk6ICcxMDAlJyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIHByb21vdGlvbkNsaWNrKGUsIGVsLCBjbGlja2VkKVxuICAgIC8vIHtcbiAgICAvLyAgICAgaWYoZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KVxuICAgIC8vICAgICAgICAgcmV0dXJuO1xuICAgIC8vICAgICB0aGlzLmNsaWNrZWREb25lID0gdHJ1ZTtcbiAgICAvLyAgICAgdGhpcy5jbGlja2VkID0gY2xpY2tlZDtcbiAgICAvLyAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuJHByb21vdGlvbnMubGVuZ3RoOyBpKyspXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAgIC8vIGlmKGkgIT09IGNsaWNrZWQpXG4gICAgLy8gICAgICAgICAvLyB7XG4gICAgLy8gICAgICAgICAgICAgZ3NhcC50byh0aGlzLiRwcm9tb3Rpb25zW2ldLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lciAubWFzaycpLCB7IG9wYWNpdHk6IDAuMDAwMSwgZHVyYXRpb246IDAuMiB9KTtcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJHByb21vdGlvbnNbaV0ucXVlcnlTZWxlY3RvcignLmlubmVyIC5pbmZvJyksIHsgb3BhY2l0eTogMC4wMDAxLCBlYXNlOiAnZXhwby5vdXQnLCBkdXJhdGlvbjogMSB9KTtcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJHByb21vdGlvbnNbaV0ucXVlcnlTZWxlY3RvcignLm91dGVyIC5iYWNrZ3JvdW5kJyksIHsgeTogJzEwMCUnLCBlYXNlOiAnZXhwby5pbk91dCcsIGR1cmF0aW9uOiAxIH0pO1xuICAgIC8vICAgICAgICAgICAgIGdzYXAudG8odGhpcy4kcHJvbW90aW9uc1tpXS5xdWVyeVNlbGVjdG9yKCcub3V0ZXIgLmJhY2tncm91bmQgLmJhY2tncm91bmRfX2JnJyksIHsgeTogJy0xMDAlJywgc2NhbGU6IDEsIGVhc2U6ICdleHBvLmluT3V0JywgZHVyYXRpb246IDEgfSk7XG4gICAgLy8gICAgICAgICAgICAgZ3NhcC50byh0aGlzLiRwcm9tb3Rpb25zW2ldLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lciAuYmFja2dyb3VuZCcpLCB7IHk6ICcxMDAlJywgZWFzZTogJ2V4cG8uaW5PdXQnLCBkdXJhdGlvbjogMSB9KTtcbiAgICAvLyAgICAgICAgICAgICBnc2FwLnRvKHRoaXMuJHByb21vdGlvbnNbaV0ucXVlcnlTZWxlY3RvcignLmlubmVyIC5iYWNrZ3JvdW5kIC5iYWNrZ3JvdW5kX19iZycpLCB7IHk6ICctMTAwJScsIHNjYWxlOiAxLCBlYXNlOiAnZXhwby5pbk91dCcsIGR1cmF0aW9uOiAxIH0pO1xuICAgIC8vICAgICAgICAgICAgIGdzYXAuZGVsYXllZENhbGwoMSwgKCkgPT5cbiAgICAvLyAgICAgICAgICAgICB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGdzYXAudG8odGhpcy4kcHJvbW90aW9uc1tpXSwgeyBvcGFjaXR5OiAwLjAwMDEgfSk7XG4gICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICAvLyB9XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgfSwge1xuICAgIGtleTogXCJyZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplKCkge1xuICAgICAgaWYgKHRoaXMuc2xpZGVyU2Nyb2xsZXIpIHRoaXMuc2xpZGVyU2Nyb2xsZXIucmVzaXplKCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlbmRlcmVyUHJvbW90aW9ucztcbn0oUmVuZGVyZXIpOyAvLyBEb25gdCBmb3JnZXQgdG8gZXhwb3J0IHlvdXIgcmVuZGVyZXJcblxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlclByb21vdGlvbnM7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vL3V0aWxpdGllc1xuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCc7XG5pbXBvcnQgU3BsaXRUZXh0IGZyb20gJy4uL2NsYXNzZXMvc3BsaXRUZXh0JzsgLy9pbXBvcnQgV2hlZWxJbmRpY2F0b3IgZnJvbSAnd2hlZWwtaW5kaWNhdG9yJztcbi8vdXRpbGl0aWVzXG5cbmltcG9ydCBEb21FdmVudHMgZnJvbSAnLi4vY2xhc3Nlcy9kb21FdmVudHMnO1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG5cbnZhciBfZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpO1xuXG4gICAgLy8gaG9vayBmdW5jdGlvbnNcbiAgICB0aGlzLl9vblNldCA9IG9wdGlvbnMub25TZXQgfHwgbm9vcDtcbiAgICB0aGlzLl9vblVuc2V0ID0gb3B0aW9ucy5vblVuc2V0IHx8IG5vb3A7XG4gICAgdGhpcy5fb25DaGFuZ2UgPSBvcHRpb25zLm9uQ2hhbmdlIHx8IG5vb3A7XG4gICAgdGhpcy5kb21FdmVudHMgPSBuZXcgRG9tRXZlbnRzKCk7XG4gICAgdGhpcy5saWdodGJveCA9IHtcbiAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgdG90YWw6IDAsXG4gICAgICBkaXJlY3Rpb246ICduZXh0JyxcbiAgICAgIGRpcmVjdGlvblZhbHVlOiAxMDAsXG4gICAgICBkaXJlY3Rpb25WYWx1ZTI6IDcwLFxuICAgICAgZGlyZWN0aW9uVGV4dDogMTAwLFxuICAgICAgZGlyOiAxLFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICBwcmV2OiAwLFxuICAgICAgbmV4dDogMCxcbiAgICAgIGR1cmF0aW9uOiB0eXBlb2Ygb3B0aW9ucy5kdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmR1cmF0aW9uIDogMSxcbiAgICAgIHRvdGFsRHVyYXRpb246IDEsXG4gICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICBhbmltYXRpbmc6IGZhbHNlLFxuICAgICAgdGxBbmltYXRpb246IG51bGxcbiAgICB9OyAvL2FzaWduYW1vcyBlbCBzZWxlY3RvclxuXG4gICAgdGhpcy4kZWwgPSBvcHRpb25zLmVsO1xuICAgIHRoaXMuJG15U3BsaXRUZXh0ID0gbnVsbDtcbiAgICB0aGlzLnNlbGVjdG9ycygpO1xuICAgIHRoaXMuZXZlbnRzKCk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcInNlbGVjdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RvcnMoKSB7XG4gICAgICB0aGlzLiRsaWdodGJveCA9IHRoaXMubGlnaHRib3gudGFyZ2V0O1xuICAgICAgdGhpcy4kbGlnaHRib3hNYXNrID0gdGhpcy4kbGlnaHRib3gucXVlcnlTZWxlY3RvcignLmxpZ2h0Ym94X19tYXNrJyk7XG4gICAgICB0aGlzLiRsaWdodGJveElubmVyID0gdGhpcy4kbGlnaHRib3gucXVlcnlTZWxlY3RvcignLmxpZ2h0Ym94X19pbm5lcicpO1xuICAgICAgdGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zID0gdGhpcy4kbGlnaHRib3hJbm5lci5xdWVyeVNlbGVjdG9yQWxsKCcubGlnaHRib3hfX2l0ZW0nKTtcbiAgICAgIHRoaXMuJGxpZ2h0Ym94UHJldiA9IHRoaXMuJGxpZ2h0Ym94LnF1ZXJ5U2VsZWN0b3IoJy5saWdodGJveF9fcHJldicpO1xuICAgICAgdGhpcy4kbGlnaHRib3hOZXh0ID0gdGhpcy4kbGlnaHRib3gucXVlcnlTZWxlY3RvcignLmxpZ2h0Ym94X19uZXh0Jyk7XG4gICAgICB0aGlzLiRsaWdodGJveENsb3NlID0gdGhpcy4kbGlnaHRib3gucXVlcnlTZWxlY3RvcignLmxpZ2h0Ym94X19jbG9zZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJldmVudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJGxpZ2h0Ym94UHJldiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5jaGFuZ2UoJ3ByZXYnKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJGxpZ2h0Ym94TmV4dCwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5jaGFuZ2UoJ25leHQnKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJGxpZ2h0Ym94Q2xvc2UsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMudW5zZXQoKTtcbiAgICAgIH0pOyAvLyBOYXZpZ2F0ZSB3aXRoIGtleWJvYXJkIGN1cnNvcnNcblxuICAgICAgdGhpcy5fb25LZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgLy8gY2hlY2sgcHJlc3NlZCBrZXlcbiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgX3RoaXMuY2hhbmdlKCduZXh0Jyk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgIF90aGlzLmNoYW5nZSgncHJldicpO1xuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIHRvdWNoc3RhcnRYID0gMDtcbiAgICAgIHZhciB0b3VjaGVuZFggPSAwO1xuXG4gICAgICB0aGlzLl9jaGVja0RpcmVjdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh0b3VjaGVuZFggPCB0b3VjaHN0YXJ0WCkgX3RoaXMuY2hhbmdlKCduZXh0Jyk7XG4gICAgICAgIGlmICh0b3VjaGVuZFggPiB0b3VjaHN0YXJ0WCkgX3RoaXMuY2hhbmdlKCdwcmV2Jyk7XG4gICAgICB9O1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdG91Y2hzdGFydFggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblg7XG4gICAgICB9KTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdG91Y2hlbmRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YO1xuXG4gICAgICAgIF90aGlzLl9jaGVja0RpcmVjdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIC8vIFNldCB0b3RhbCBjb3VudFxuICAgICAgdGhpcy5saWdodGJveC50b3RhbCA9IHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtc1tpXSwge1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ3NhcC5zZXQodGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zWzBdLCB7XG4gICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgIH0pOyAvLyBCaW5kIGtleWRvd24gZXZlbnRcblxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5RG93bik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoaW5kZXgpIHtcbiAgICAgIHRoaXMuX29uU2V0KGluZGV4KTtcblxuICAgICAgZ3NhcC5zZXQodGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zW3RoaXMubGlnaHRib3gucHJldl0sIHtcbiAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KHRoaXMuJGxpZ2h0Ym94LCB7XG4gICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRsaWdodGJveE1hc2ssIHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDFcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRsaWdodGJveElubmVyLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICBkZWxheTogMC41XG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtc1tpbmRleF0sIHtcbiAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgfSk7IC8vIGdzYXAuc2V0KHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtc1tpbmRleF0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQnKSwgeyB4OiAnMCUnLCB5OiAnLTEwMCUnIH0pO1xuICAgICAgLy8gZ3NhcC5zZXQodGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zW2luZGV4XS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCAuYmFja2dyb3VuZF9fYmcnKSwgeyB5OiAnMTAwJScgfSk7XG4gICAgICAvLyBnc2FwLnRvKHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtc1tpbmRleF0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQnKSwgeyB5OiAnMCUnLCBkdXJhdGlvbjogMSwgZWFzZTogJ2V4cG8ub3V0JywgZGVsYXk6IDAuNSB9KTtcbiAgICAgIC8vIGdzYXAudG8odGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zW2luZGV4XS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCAuYmFja2dyb3VuZF9fYmcnKSwgeyB5OiAnMCUnLCBkdXJhdGlvbjogMSwgZWFzZTogJ2V4cG8ub3V0JywgZGVsYXk6IDAuNSB9KTtcblxuICAgICAgZ3NhcC50byhbdGhpcy4kbGlnaHRib3hQcmV2LCB0aGlzLiRsaWdodGJveE5leHQsIHRoaXMuJGxpZ2h0Ym94Q2xvc2VdLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkZWxheTogMC41XG4gICAgICB9KTtcbiAgICAgIHRoaXMubGlnaHRib3guY3VycmVudCA9IGluZGV4O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1bnNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1bnNldCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9vblVuc2V0KHRoaXMubGlnaHRib3guY3VycmVudCk7IC8vIGdzYXAudG8odGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zW3RoaXMubGlnaHRib3guY3VycmVudF0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQnKSwgeyB5OiAnMTAwJScsIGR1cmF0aW9uOiAxLCBlYXNlOiAnZXhwby5vdXQnLCBkZWxheTogMCB9KTtcbiAgICAgIC8vIGdzYXAudG8odGhpcy4kbGlnaHRib3hJbm5lckl0ZW1zW3RoaXMubGlnaHRib3guY3VycmVudF0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQgLmJhY2tncm91bmRfX2JnJyksIHsgeTogJy0xMDAlJywgZHVyYXRpb246IDEsIGVhc2U6ICdleHBvLm91dCcsIGRlbGF5OiAwIH0pO1xuXG5cbiAgICAgIGdzYXAudG8oW3RoaXMuJGxpZ2h0Ym94UHJldiwgdGhpcy4kbGlnaHRib3hOZXh0LCB0aGlzLiRsaWdodGJveENsb3NlXSwge1xuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkZWxheTogMFxuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuJGxpZ2h0Ym94TWFzaywge1xuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICBkZWxheTogMC41XG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8odGhpcy4kbGlnaHRib3hJbm5lciwge1xuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAxXG4gICAgICB9KTtcbiAgICAgIGdzYXAuZGVsYXllZENhbGwoMS41LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGdzYXAuc2V0KF90aGlzMi4kbGlnaHRib3gsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAuc2V0KF90aGlzMi4kbGlnaHRib3hJbm5lckl0ZW1zW190aGlzMi5saWdodGJveC5jdXJyZW50XSwge1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC5zZXQoX3RoaXMyLiRsaWdodGJveElubmVySXRlbXNbX3RoaXMyLmxpZ2h0Ym94LmN1cnJlbnRdLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZ3JvdW5kJyksIHtcbiAgICAgICAgICB5OiAnMCUnXG4gICAgICAgIH0pO1xuICAgICAgICBnc2FwLnNldChfdGhpczIuJGxpZ2h0Ym94SW5uZXJJdGVtc1tfdGhpczIubGlnaHRib3guY3VycmVudF0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQgLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgICB5OiAnMCUnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2UoZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMubGlnaHRib3guYW5pbWF0aW5nKSByZXR1cm47XG5cbiAgICAgIHRoaXMuX29uQ2hhbmdlKCk7XG5cbiAgICAgIHRoaXMubGlnaHRib3guYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMubGlnaHRib3guZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgdGhpcy5saWdodGJveC5uZXh0ID0gKHRoaXMubGlnaHRib3guY3VycmVudCArIDEpICUgdGhpcy5saWdodGJveC50b3RhbDtcbiAgICAgICAgdGhpcy5saWdodGJveC5wcmV2ID0gdGhpcy5saWdodGJveC5jdXJyZW50ID09PSAtMSA/IHRoaXMubGlnaHRib3gudG90YWwgLSAxIDogdGhpcy5saWdodGJveC5jdXJyZW50O1xuICAgICAgICB0aGlzLmxpZ2h0Ym94LmRpciA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxpZ2h0Ym94Lm5leHQgPSB0aGlzLmxpZ2h0Ym94LmN1cnJlbnQgPT09IDAgPyB0aGlzLmxpZ2h0Ym94LnRvdGFsIC0gMSA6IHRoaXMubGlnaHRib3guY3VycmVudCAtIDE7XG4gICAgICAgIHRoaXMubGlnaHRib3gucHJldiA9IHRoaXMubGlnaHRib3guY3VycmVudCA9PT0gLTEgPyB0aGlzLmxpZ2h0Ym94LnRvdGFsIC0gMSA6IHRoaXMubGlnaHRib3guY3VycmVudDtcbiAgICAgICAgdGhpcy5saWdodGJveC5kaXIgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5saWdodGJveC5jdXJyZW50ID0gdGhpcy5saWdodGJveC5uZXh0OyAvL1NldCBuZXh0IHNsaWRlXG5cbiAgICAgIGdzYXAuc2V0KHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtc1t0aGlzLmxpZ2h0Ym94Lm5leHRdLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZ3JvdW5kJyksIHtcbiAgICAgICAgeDogdGhpcy5saWdodGJveC5kaXIgPyAnMTAwJScgOiAnLTEwMCUnXG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtc1t0aGlzLmxpZ2h0Ym94Lm5leHRdLCB7XG4gICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgIH0pOyAvL0FuaW1hdGUgb3V0IGN1cnJlbnQgc2xpZGVcblxuICAgICAgZ3NhcC50byh0aGlzLiRsaWdodGJveElubmVySXRlbXNbdGhpcy5saWdodGJveC5wcmV2XS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCcpLCB7XG4gICAgICAgIHg6IHRoaXMubGlnaHRib3guZGlyID8gJy0xMDAlJyA6ICcxMDAlJyxcbiAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuJGxpZ2h0Ym94SW5uZXJJdGVtc1t0aGlzLmxpZ2h0Ym94Lm5leHRdLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZ3JvdW5kJyksIHtcbiAgICAgICAgeDogJzAlJyxcbiAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgfSk7XG4gICAgICBnc2FwLmRlbGF5ZWRDYWxsKHRoaXMubGlnaHRib3guZHVyYXRpb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZ3NhcC5zZXQoX3RoaXMzLiRsaWdodGJveElubmVySXRlbXNbX3RoaXMzLmxpZ2h0Ym94LnByZXZdLCB7XG4gICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgIH0pO1xuICAgICAgICBfdGhpczMubGlnaHRib3guYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KCk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG4vLyBHc2FwXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCBTY3JvbGxUcmlnZ2VyIGZyb20gJ2dzYXAvU2Nyb2xsVHJpZ2dlcic7IC8vIGltcG9ydCBNYXNvbnJ5IGZyb20gJ21hc29ucnktbGF5b3V0JztcblxuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTsgLy8gSW1wb3J0IFJlbmRlcmVyXG5cbmltcG9ydCBSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyLmpzJzsgLy8gaW1wb3J0IHN0eWxlc0RlZmF1bHQgZnJvbSAnLi9zdHlsZXNEZWZhdWx0LmNzcyc7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuLy8gVXRpbGl0aWVzXG5cbmltcG9ydCBTdXBlckRyYWdnZXIgZnJvbSAnLi4vY2xhc3Nlcy9zdXBlckRyYWdnZXInO1xuaW1wb3J0IERyYWdnYWJsZSBmcm9tICcuLi9jbGFzc2VzL0RyYWdnYWJsZSc7XG5pbXBvcnQgU2xpZGVyIGZyb20gJy4uL2NvbXBvbmVudHMvc2xpZGVyJzsgLy8gT3RoZXJcbi8vIGltcG9ydCBTbGlkZXIgZnJvbSAnLi4vY2xhc3Nlcy9zbGlkZXInO1xuLy8gaW1wb3J0IFNwbGl0VGV4dCBmcm9tICcuLi9jbGFzc2VzL3NwbGl0VGV4dCc7XG5cbnZhciBSZW5kZXJlclByb21vdGlvbnNTaW5nbGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZW5kZXJlcikge1xuICBfaW5oZXJpdHMoUmVuZGVyZXJQcm9tb3Rpb25zU2luZ2xlLCBfUmVuZGVyZXIpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUmVuZGVyZXJQcm9tb3Rpb25zU2luZ2xlKTtcblxuICBmdW5jdGlvbiBSZW5kZXJlclByb21vdGlvbnNTaW5nbGUoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlbmRlcmVyUHJvbW90aW9uc1NpbmdsZSk7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVuZGVyZXJQcm9tb3Rpb25zU2luZ2xlLCBbe1xuICAgIGtleTogXCJzZWxlY3RvcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0b3JzKCkge1xuICAgICAgdGhpcy4kaGVybyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9tb3Rpb25zc2luZ2xlX19oZXJvJyk7XG4gICAgICB0aGlzLiRiYWNrZ3JvdW5kID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnByb21vdGlvbnNzaW5nbGVfX2JhY2tncm91bmQnKTtcbiAgICAgIHRoaXMuJGNvbnRlbnQgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucHJvbW90aW9uc3NpbmdsZV9fY29udGVudCcpO1xuICAgICAgdGhpcy4kZmVhdHVyZWQgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucHJvbW90aW9uc3NpbmdsZV9fZmVhdHVyZWQnKTtcbiAgICAgIHRoaXMuJGdhbGxlcnkgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucHJvbW90aW9uc3NpbmdsZV9fZ2FsbGVyeScpO1xuICAgICAgdGhpcy4kZnJvbSA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm9tb3Rpb25zc2luZ2xlX19mcm9tJyk7XG4gICAgICB0aGlzLiRyZWxhdGVkID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnByb21vdGlvbnNzaW5nbGVfX3JlbGF0ZWQnKTtcbiAgICAgIHRoaXMuJGZvcm0gPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucHJvbW90aW9uc3NpbmdsZV9fZm9ybScpO1xuICAgICAgdGhpcy4kZm9vdGVyID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnByb21vdGlvbnNzaW5nbGVfX2Zvb3RlcicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwcmVsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7XG4gICAgICAvLyBQcmVsb2FkZXJcbiAgICAgIHZhciBfbWFpbiA9IFtdO1xuICAgICAgaWYgKHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLmltYWdlIGltZycpKSBfbWFpbi5wdXNoKHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLmltYWdlIGltZycpLnNyYyk7XG4gICAgICB2YXIgX3NlY29uZGFyeSA9IFtdO1xuICAgICAgaWYgKHRoaXMuJGJhY2tncm91bmQucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmRfX2JnJykpIF9tYWluLnB1c2godGhpcy4kYmFja2dyb3VuZC5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fYmcnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2Uuc3Vic3RyaW5nKDUsIHRoaXMuJGJhY2tncm91bmQucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmRfX2JnJykuc3R5bGUuYmFja2dyb3VuZEltYWdlLmxlbmd0aCAtIDIpKTtcbiAgICAgIGlmICh0aGlzLiRmZWF0dXJlZC5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fYmcnKSkgX21haW4ucHVzaCh0aGlzLiRmZWF0dXJlZC5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fYmcnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2Uuc3Vic3RyaW5nKDUsIHRoaXMuJGZlYXR1cmVkLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZ3JvdW5kX19iZycpLnN0eWxlLmJhY2tncm91bmRJbWFnZS5sZW5ndGggLSAyKSk7XG4gICAgICB0aGlzLnByZWxvYWRJdGVtcyA9IHtcbiAgICAgICAgbWFpbjogX21haW4sXG4gICAgICAgIHNlY29uZGFyeTogX3NlY29uZGFyeVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYmVmb3JlRW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlRW50ZXIoKSB7XG4gICAgICAvLyBIaWRlIGRyYWcgYWZ0ZXIgY2xpY2tcbiAgICAgIHRoaXMuYXBwVWkubGVhdmVEcmFnQ3Vyc29yKCk7XG5cbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZScpLCB7XG4gICAgICAgICAgeTogJy0xMDAlJ1xuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UgaW1nJyksIHtcbiAgICAgICAgICB5OiAnMTAwJSdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGdzYXAuc2V0KHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmJnJyksIHtcbiAgICAgICAgc2NhbGVZOiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCA/IDAgOiAxXG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmNlbnRlcicpLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByZWVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByZWVudGVyKCkge1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgIGdzYXAudG8odGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UnKSwge1xuICAgICAgICAgIHk6ICcwJScsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uID8gMS44IDogMS44LFxuICAgICAgICAgIGVhc2U6IHRoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uID8gJ2V4cG8uaW5PdXQnIDogJ2V4cG8ub3V0JyxcbiAgICAgICAgICBkZWxheTogMFxuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC50byh0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZSBpbWcnKSwge1xuICAgICAgICAgIHk6ICcwJScsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uID8gMS44IDogMS44LFxuICAgICAgICAgIGVhc2U6IHRoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uID8gJ2V4cG8uaW5PdXQnIDogJ2V4cG8ub3V0JyxcbiAgICAgICAgICBkZWxheTogMFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ3NhcC50byh0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5tYXNrIC5iZycpLCB7XG4gICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgZHVyYXRpb246IHRoaXMuYXBwU3RvcmUuZmlyc3ROYXZpZ2F0aW9uID8gMS42IDogMS42LFxuICAgICAgICBlYXNlOiB0aGlzLmFwcFN0b3JlLmZpcnN0TmF2aWdhdGlvbiA/ICdleHBvLmluT3V0JyA6ICdleHBvLm91dCcsXG4gICAgICAgIGRlbGF5OiB0aGlzLmFwcFN0b3JlLmZpcnN0TmF2aWdhdGlvbiA/IDAuMiA6IDAuMlxuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmNlbnRlcicpLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgZGVsYXk6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbnRlcigpIHtcbiAgICAgIHRoaXMuYXBwVWkuJGluZm9Db250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJpbmZvLXN1YmplY3RcIl0nKS52YWx1ZSA9ICdJbmZvcm1hY2nDs24gc29icmUgJyArIHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmNlbnRlciAudGl0bGUnKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKTtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy5pbml0U2Nyb2xsdGl0bGUoKTtlbHNlIHRoaXMuaW5pdFNjcm9sbHRpdGxlTW9iaWxlKCk7XG4gICAgICB0aGlzLmluaXRCYWNrZ3JvdW5kKCk7XG4gICAgICB0aGlzLmluaXRQYXJhbGxheCgpO1xuICAgICAgdGhpcy5pbml0TGlnaHRib3goKTtcbiAgICAgIHRoaXMuaW5pdEdhbGxlcnkoKTtcbiAgICAgIHRoaXMuaW5pdFJlbGF0ZWQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFNjcm9sbHRpdGxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRTY3JvbGx0aXRsZSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuJHNjcm9sbHRpdGxlID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnNjcm9sbHRpdGxlJyk7XG5cbiAgICAgIGlmICh0aGlzLiRzY3JvbGx0aXRsZSkge1xuICAgICAgICB0aGlzLiRzY3JvbGx0aXRsZUl0ZW1zID0gdGhpcy4kc2Nyb2xsdGl0bGUuY2hpbGRyZW47XG4gICAgICAgIHRoaXMuJHNjcm9sbHRpdGxlLnN0eWxlLndpZHRoID0gdGhpcy4kc2Nyb2xsdGl0bGVJdGVtc1swXS5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgIHRoaXMuc2Nyb2xsVGl0bGVJbm5lckxlZnQgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICBwYXVzZWQ6IGZhbHNlLFxuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBlYXNlOiAnbm9uZScsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy4kc2Nyb2xsdGl0bGVJdGVtc1swXS5vZmZzZXRXaWR0aCAvIDMwMCxcbiAgICAgICAgICAgIHJlcGVhdDogJy0xJyxcbiAgICAgICAgICAgIG9uUmV2ZXJzZUNvbXBsZXRlOiBmdW5jdGlvbiBvblJldmVyc2VDb21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsVGl0bGVJbm5lckxlZnQucGF1c2UoKTtcblxuICAgICAgICAgICAgICBfdGhpcy5zY3JvbGxUaXRsZUlubmVyUmlnaHQucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRzY3JvbGx0aXRsZUl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxUaXRsZUlubmVyTGVmdC50byh0aGlzLiRzY3JvbGx0aXRsZUl0ZW1zW2ldLCB7XG4gICAgICAgICAgICB4OiAnLTEwMCUnXG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNjcm9sbFRpdGxlSW5uZXJSaWdodCA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgZWFzZTogJ25vbmUnLFxuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuJHNjcm9sbHRpdGxlSXRlbXNbMF0ub2Zmc2V0V2lkdGggLyAzMDAsXG4gICAgICAgICAgICByZXBlYXQ6ICctMScsXG4gICAgICAgICAgICBvblJldmVyc2VDb21wbGV0ZTogZnVuY3Rpb24gb25SZXZlcnNlQ29tcGxldGUoKSB7XG4gICAgICAgICAgICAgIF90aGlzLnNjcm9sbFRpdGxlSW5uZXJSaWdodC5wYXVzZSgpO1xuXG4gICAgICAgICAgICAgIF90aGlzLnNjcm9sbFRpdGxlSW5uZXJMZWZ0LnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0aGlzLiRzY3JvbGx0aXRsZUl0ZW1zLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIHRoaXMuc2Nyb2xsVGl0bGVJbm5lclJpZ2h0LnRvKHRoaXMuJHNjcm9sbHRpdGxlSXRlbXNbX2ldLCB7XG4gICAgICAgICAgICB4OiAnMTAwJSdcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2Nyb2xsVGl0bGVPdXRlciA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBlYXNlOiAnbm9uZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJHNjcm9sbHRpdGxlLFxuICAgICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgICBzdGFydDogJ3RvcCBib3R0b20nLFxuICAgICAgICAgICAgZW5kOiAnYm90dG9tIHRvcCcsXG4gICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24gb25VcGRhdGUoc2VsZikge1xuICAgICAgICAgICAgICAvLyB0aGlzLnNjcm9sbFRpdGxlSW5uZXIudGltZVNjYWxlKHNlbGYuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zY3JvbGxUaXRsZUlubmVyTGVmdC5wYXVzZWQoKSkgX3RoaXMuc2Nyb2xsVGl0bGVJbm5lckxlZnQucmV2ZXJzZWQoc2VsZi5kaXJlY3Rpb24gIT09IDEpO1xuICAgICAgICAgICAgICBpZiAoIV90aGlzLnNjcm9sbFRpdGxlSW5uZXJSaWdodC5wYXVzZWQoKSkgX3RoaXMuc2Nyb2xsVGl0bGVJbm5lclJpZ2h0LnJldmVyc2VkKHNlbGYuZGlyZWN0aW9uID09PSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNjcm9sbFRpdGxlT3V0ZXIuZnJvbVRvKHRoaXMuJHNjcm9sbHRpdGxlLCB7XG4gICAgICAgICAgeDogd2luZG93LmlubmVyV2lkdGggKiAwLjJcbiAgICAgICAgfSwge1xuICAgICAgICAgIHg6IC13aW5kb3cuaW5uZXJXaWR0aCAqIDAuMlxuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFNjcm9sbHRpdGxlTW9iaWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRTY3JvbGx0aXRsZU1vYmlsZSgpIHtcbiAgICAgIHRoaXMuJHNjcm9sbHRpdGxlcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3JvbGx0aXRsZScpO1xuXG4gICAgICBpZiAodGhpcy4kc2Nyb2xsdGl0bGVzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kc2Nyb2xsdGl0bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy4kc2Nyb2xsdGl0bGVzSXRlbXMgPSB0aGlzLiRzY3JvbGx0aXRsZXNbaV0uY2hpbGRyZW5bMF0uY2hpbGRyZW47XG4gICAgICAgICAgdGhpcy5zY3JvbGxUaXRsZVRpbWVsaW5lID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgICAgICBwYXVzZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgZWFzZTogJ25vbmUnLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy4kc2Nyb2xsdGl0bGVzSXRlbXMubGVuZ3RoICogOCArIGkgKiAxMCxcbiAgICAgICAgICAgICAgcmVwZWF0OiAnLTEnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5zY3JvbGxUaXRsZVRpbWVsaW5lLnRvKHRoaXMuJHNjcm9sbHRpdGxlc1tpXS5jaGlsZHJlbiwge1xuICAgICAgICAgICAgeDogLTEwMCArICclJ1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRCYWNrZ3JvdW5kXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRCYWNrZ3JvdW5kKCkge1xuICAgICAgaWYgKHRoaXMuJGJhY2tncm91bmQpIHtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kYmFja2dyb3VuZC5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCAuYmFja2dyb3VuZF9fb3ZlcmxheScpLCB7XG4gICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kYmFja2dyb3VuZC5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCAuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgIHk6ICctODAlJyxcbiAgICAgICAgICBzY2FsZTogMS4yXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYmFja2dyb3VuZFRpbWVsaW5lID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgICAgdHJpZ2dlcjogdGhpcy4kYmFja2dyb3VuZCxcbiAgICAgICAgICAgIHN0YXJ0OiAndG9wIGJvdHRvbScsXG4gICAgICAgICAgICBlbmQ6ICdib3R0b20gdG9wJyxcbiAgICAgICAgICAgIHNjcnViOiB0cnVlIC8vIG9uVG9nZ2xlOiAoaXNBY3RpdmUpID0+XG4gICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAvLyAgICAgaXNBY3RpdmUgPyB0aGlzLiR2aWRlb0NvdmVyLnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fcGxheWVyIHZpZGVvJykucGxheSgpIDogdGhpcy4kdmlkZW9Db3Zlci5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3BsYXllciB2aWRlbycpLnBhdXNlKCk7XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICAgIGVhc2U6ICdub25lJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJhY2tncm91bmRUaW1lbGluZS50byh0aGlzLiRiYWNrZ3JvdW5kLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZ3JvdW5kIC5iYWNrZ3JvdW5kX19vdmVybGF5JyksIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjUsXG4gICAgICAgICAgZHVyYXRpb246IDAuNVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgYmFja2dyb3VuZFRpbWVsaW5lLnRvKHRoaXMuJGJhY2tncm91bmQucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQgLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgICB5OiAnODAlJyxcbiAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFBhcmFsbGF4XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRQYXJhbGxheCgpIHtcbiAgICAgIGlmICh0aGlzLiRjb250ZW50KSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmltYWdlLS0yJyksIHtcbiAgICAgICAgICB5OiAnLTV2dydcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBjb250ZW50VGltZWxpbmUgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICB0cmlnZ2VyOiB0aGlzLiRjb250ZW50LFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGVuZDogJ2JvdHRvbSB0b3AnLFxuICAgICAgICAgICAgc2NydWI6IHRydWUgLy8gb25Ub2dnbGU6IChpc0FjdGl2ZSkgPT5cbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICAgICBpc0FjdGl2ZSA/IHRoaXMuJHZpZGVvQ292ZXIucXVlcnlTZWxlY3RvcignLnZpZGVvX19wbGF5ZXIgdmlkZW8nKS5wbGF5KCkgOiB0aGlzLiR2aWRlb0NvdmVyLnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fcGxheWVyIHZpZGVvJykucGF1c2UoKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAgICAgZWFzZTogJ25vbmUnXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29udGVudFRpbWVsaW5lLnRvKHRoaXMuJGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmltYWdlLS0yJyksIHtcbiAgICAgICAgICB5OiAnNXZ3JyxcbiAgICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgICB9LCAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuJGZlYXR1cmVkKSB7XG4gICAgICAgIGdzYXAuc2V0KHRoaXMuJGZlYXR1cmVkLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZScpLCB7XG4gICAgICAgICAgeTogJzEwdncnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgZmVhdHVyZWRUaW1lbGluZSA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJGZlYXR1cmVkLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGVuZDogJ2JvdHRvbSB0b3AnLFxuICAgICAgICAgICAgc2NydWI6IHRydWUgLy8gb25Ub2dnbGU6IChpc0FjdGl2ZSkgPT5cbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICAgICBpc0FjdGl2ZSA/IHRoaXMuJHZpZGVvQ292ZXIucXVlcnlTZWxlY3RvcignLnZpZGVvX19wbGF5ZXIgdmlkZW8nKS5wbGF5KCkgOiB0aGlzLiR2aWRlb0NvdmVyLnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fcGxheWVyIHZpZGVvJykucGF1c2UoKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAgICAgZWFzZTogJ25vbmUnXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZmVhdHVyZWRUaW1lbGluZS50byh0aGlzLiRmZWF0dXJlZC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UnKSwge1xuICAgICAgICAgIHk6ICctMTB2dycsXG4gICAgICAgICAgZHVyYXRpb246IDFcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRMaWdodGJveFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0TGlnaHRib3goKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy4kbGlnaHRib3ggPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcubGlnaHRib3gnKTtcbiAgICAgIHRoaXMubGlnaHRib3ggPSBuZXcgU2xpZGVyKHtcbiAgICAgICAgdGFyZ2V0OiB0aGlzLiRsaWdodGJveCxcbiAgICAgICAgb25VbnNldDogZnVuY3Rpb24gb25VbnNldChpbmRleCkge1xuICAgICAgICAgIF90aGlzMi5jbG9zZUxpZ2h0Ym94KGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRHYWxsZXJ5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRHYWxsZXJ5KCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLiRnYWxsZXJ5KSB7XG4gICAgICAgIC8vIFNlbGVjdG9yc1xuICAgICAgICB0aGlzLiRnYWxsZXJ5R3JpZCA9IHRoaXMuJGdhbGxlcnkucXVlcnlTZWxlY3RvcignLmdyaWQnKTtcbiAgICAgICAgdGhpcy4kZ2FsbGVyeUdyaWRJbm5lciA9IHRoaXMuJGdhbGxlcnkucXVlcnlTZWxlY3RvcignLmdyaWRfX2lubmVyJyk7XG4gICAgICAgIHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMgPSB0aGlzLiRnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ncmlkX19pdGVtJyk7XG4gICAgICAgIHRoaXMuJGdhbGxlcnlCdXR0b24gPSB0aGlzLiRnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24nKTtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kZ2FsbGVyeUdyaWQsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kZ2FsbGVyeUdyaWQsICdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgX3RoaXMzLmFwcFVpLmVudGVyRHJhZ0N1cnNvcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJGdhbGxlcnlHcmlkLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIF90aGlzMy5hcHBVaS5sZWF2ZURyYWdDdXJzb3IoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2FsbGVyeSA9IHtcbiAgICAgICAgICBpc1pvb21lZDogZmFsc2UsXG4gICAgICAgICAgaXNFeHBhbmRlZDogZmFsc2UsXG4gICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIG1hcmdpbjogd2luZG93LmlubmVyV2lkdGggKiAwLjA1LFxuICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIDA6IFsxNSwgMTUsIDAsIDVdLFxuICAgICAgICAgICAgMTogWzIwLCAxNSwgMCwgMjVdLFxuICAgICAgICAgICAgMjogWzIwLCAxNSwgMjAsIDVdLFxuICAgICAgICAgICAgMzogWzE1LCAxMCwgMjUsIDI1XSxcbiAgICAgICAgICAgIDQ6IFszMCwgMjAsIDQ1LCA1XSxcbiAgICAgICAgICAgIDU6IFsxMCwgMTUsIDQ1LCAzMF0sXG4gICAgICAgICAgICA2OiBbMTUsIDEwLCA2MCwgMzBdLFxuICAgICAgICAgICAgNzogWzE1LCAxMCwgODAsIDVdLFxuICAgICAgICAgICAgODogWzIwLCAxNSwgODAsIDIwXSxcbiAgICAgICAgICAgIDk6IFsyNSwgNDAsIDEwNSwgNV0sXG4gICAgICAgICAgICAxMDogWzE1LCAxNSwgMTM1LCA1XSxcbiAgICAgICAgICAgIDExOiBbMjAsIDE1LCAxMzUsIDI1XSxcbiAgICAgICAgICAgIDEyOiBbMjAsIDE1LCAxNTUsIDVdLFxuICAgICAgICAgICAgMTM6IFsxNSwgMTAsIDE2MCwgMjVdLFxuICAgICAgICAgICAgMTQ6IFszMCwgMjAsIDE4MCwgNV0sXG4gICAgICAgICAgICAxNTogWzEwLCAxNSwgMTgwLCAzMF0sXG4gICAgICAgICAgICAxNjogWzE1LCAxMCwgMTk1LCAzMF0sXG4gICAgICAgICAgICAxNzogWzE1LCAxMCwgMjE1LCA1XSxcbiAgICAgICAgICAgIDE4OiBbMjAsIDE1LCAyMTUsIDIwXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVsYXRpdmVXaWR0aDogMCxcbiAgICAgICAgICByZWxhdGl2ZVBvc2l0aW9uczoge30sXG4gICAgICAgICAgYWJzb2x1dGVXaWR0aDogMCxcbiAgICAgICAgICBhYnNvbHV0ZVBvc2l0aW9uczoge31cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nYWxsZXJ5LmNvdW50ID0gdGhpcy4kZ2FsbGVyeUdyaWRJdGVtcy5sZW5ndGg7IC8vIEdldCBhYnNvbHV0ZSBwb3NpdGlvbnNcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGggKiB0aGlzLmdhbGxlcnkucmVmZXJlbmNlc1tpXVswXSAvICh0aGlzLmFwcFN0b3JlLmlzRGVza29wIHx8IHRoaXMuYXBwU3RvcmUuY2xpZW50Lm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgPyAxMDAgOiA1MCk7XG5cbiAgICAgICAgICB2YXIgX2hlaWdodCA9IHdpbmRvdy5pbm5lcldpZHRoICogdGhpcy5nYWxsZXJ5LnJlZmVyZW5jZXNbaV1bMV0gLyAodGhpcy5hcHBTdG9yZS5pc0Rlc2tvcCB8fCB0aGlzLmFwcFN0b3JlLmNsaWVudC5vcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnID8gMTAwIDogNTApO1xuXG4gICAgICAgICAgdmFyIF9sZWZ0ID0gd2luZG93LmlubmVyV2lkdGggKiB0aGlzLmdhbGxlcnkucmVmZXJlbmNlc1tpXVsyXSAvICh0aGlzLmFwcFN0b3JlLmlzRGVza29wIHx8IHRoaXMuYXBwU3RvcmUuY2xpZW50Lm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgPyAxMDAgOiA1MCk7XG5cbiAgICAgICAgICB2YXIgX3RvcCA9IHdpbmRvdy5pbm5lcldpZHRoICogdGhpcy5nYWxsZXJ5LnJlZmVyZW5jZXNbaV1bM10gLyAodGhpcy5hcHBTdG9yZS5pc0Rlc2tvcCB8fCB0aGlzLmFwcFN0b3JlLmNsaWVudC5vcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnID8gMTAwIDogNTApO1xuXG4gICAgICAgICAgdmFyIF9yYXRpbyA9IDEgLyAoKHdpbmRvdy5pbm5lckhlaWdodCAtIHdpbmRvdy5pbm5lcldpZHRoICogMC4xKSAvIF9oZWlnaHQpO1xuXG4gICAgICAgICAgdmFyIF9tdWx0aXBsaWVyID0gKHdpbmRvdy5pbm5lckhlaWdodCAtIHdpbmRvdy5pbm5lcldpZHRoICogMC4xKSAvIF9oZWlnaHQ7XG5cbiAgICAgICAgICB0aGlzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbaV0gPSBbX3dpZHRoLCBfaGVpZ2h0LCBfbGVmdCwgX3RvcCwgX3JhdGlvLCBfbXVsdGlwbGllcl07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdhbGxlcnkuYWJzb2x1dGVXaWR0aCA9IHRoaXMuZ2FsbGVyeS5hYnNvbHV0ZVBvc2l0aW9uc1t0aGlzLmdhbGxlcnkuY291bnQgLSAxXVswXSArIHRoaXMuZ2FsbGVyeS5hYnNvbHV0ZVBvc2l0aW9uc1t0aGlzLmdhbGxlcnkuY291bnQgLSAxXVsyXTsgLy8gR2V0IHJlbGF0aXZlIHBvc2l0aW9uc1xuXG4gICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICAgIHZhciBfbXVsdGlwbGllcjIgPSB0aGlzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbX2kyXVs1XTtcblxuICAgICAgICAgIHZhciBfd2lkdGgyID0gX211bHRpcGxpZXIyICogdGhpcy5nYWxsZXJ5LmFic29sdXRlUG9zaXRpb25zW19pMl1bMF07XG5cbiAgICAgICAgICB2YXIgX2hlaWdodDIgPSBfbXVsdGlwbGllcjIgKiB0aGlzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbX2kyXVsxXTtcblxuICAgICAgICAgIHZhciBfbGVmdDIgPSBfaTIgPT09IDAgPyAwIDogdGhpcy5nYWxsZXJ5LnJlbGF0aXZlUG9zaXRpb25zW19pMiAtIDFdWzJdICsgdGhpcy5nYWxsZXJ5LnJlbGF0aXZlUG9zaXRpb25zW19pMiAtIDFdWzBdICsgdGhpcy5nYWxsZXJ5Lm1hcmdpbjtcblxuICAgICAgICAgIHZhciBfdG9wMiA9IHdpbmRvdy5pbm5lcldpZHRoICogMC4wNTtcblxuICAgICAgICAgIHRoaXMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tfaTJdID0gW193aWR0aDIsIF9oZWlnaHQyLCBfbGVmdDIsIF90b3AyXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2FsbGVyeS5yZWxhdGl2ZVdpZHRoID0gdGhpcy5nYWxsZXJ5LnJlbGF0aXZlUG9zaXRpb25zW3RoaXMuZ2FsbGVyeS5jb3VudCAtIDFdWzBdICsgdGhpcy5nYWxsZXJ5LnJlbGF0aXZlUG9zaXRpb25zW3RoaXMuZ2FsbGVyeS5jb3VudCAtIDFdWzJdOyAvLyBTZXQgaW5pdGlhbCBwb3NpdGlvbnNcblxuICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaTMpIHtcbiAgICAgICAgICBpZiAoX3RoaXMzLmdhbGxlcnkuaXNab29tZWQpIHtcbiAgICAgICAgICAgIF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtc1tfaTNdLnN0eWxlLndpZHRoID0gX3RoaXMzLmdhbGxlcnkucmVsYXRpdmVQb3NpdGlvbnNbX2kzXVswXSArICdweCc7XG4gICAgICAgICAgICBfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXS5zdHlsZS5oZWlnaHQgPSBfdGhpczMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tfaTNdWzFdICsgJ3B4JztcbiAgICAgICAgICAgIF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtc1tfaTNdLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKCcgKyBfdGhpczMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tfaTNdWzJdICsgJ3B4KSB0cmFuc2xhdGVZKCcgKyBfdGhpczMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tfaTNdWzNdICsgJ3B4KSc7XG4gICAgICAgICAgICBfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXS5jaGlsZHJlblswXS5jaGlsZHJlblswXS5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMSknO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXS5zdHlsZS53aWR0aCA9IF90aGlzMy5nYWxsZXJ5LnJlbGF0aXZlUG9zaXRpb25zW19pM11bMF0gKyAncHgnO1xuICAgICAgICAgICAgX3RoaXMzLiRnYWxsZXJ5R3JpZEl0ZW1zW19pM10uc3R5bGUuaGVpZ2h0ID0gX3RoaXMzLmdhbGxlcnkucmVsYXRpdmVQb3NpdGlvbnNbX2kzXVsxXSArICdweCc7XG4gICAgICAgICAgICBfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnICsgX3RoaXMzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbX2kzXVsyXSArICdweCkgdHJhbnNsYXRlWSgnICsgX3RoaXMzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbX2kzXVszXSArICdweCkgc2NhbGUoJyArIF90aGlzMy5nYWxsZXJ5LmFic29sdXRlUG9zaXRpb25zW19pM11bNF0gKyAnKSc7XG4gICAgICAgICAgICBfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXS5jaGlsZHJlblswXS5jaGlsZHJlblswXS5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMS4xKSc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF90aGlzMy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAgIF90aGlzMy5kb21FdmVudHMuYWRkKF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtc1tfaTNdLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgICBfdGhpczMuZW50ZXJJbWFnZShlbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgX3RoaXMzLmRvbUV2ZW50cy5hZGQoX3RoaXMzLiRnYWxsZXJ5R3JpZEl0ZW1zW19pM10sICdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgICAgIF90aGlzMy5sZWF2ZUltYWdlKGVsKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfdGhpczMuZG9tRXZlbnRzLmFkZChfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXS5xdWVyeVNlbGVjdG9yKCcuZXhwYW5kJyksICdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgICAgIF90aGlzMy5lbnRlckV4cGFuZChlbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgX3RoaXMzLmRvbUV2ZW50cy5hZGQoX3RoaXMzLiRnYWxsZXJ5R3JpZEl0ZW1zW19pM10ucXVlcnlTZWxlY3RvcignLmV4cGFuZCcpLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgICBfdGhpczMubGVhdmVFeHBhbmQoZWwpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF90aGlzMy5kb21FdmVudHMuYWRkKF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtc1tfaTNdLnF1ZXJ5U2VsZWN0b3IoJy5leHBhbmQnKSwgJ2NsaWNrJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgICAgIF90aGlzMy5jbGlja0V4cGFuZChlLCBhLCBlbCwgX2kzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfdGhpczMuZG9tRXZlbnRzLmFkZChfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXSwgJ2NsaWNrJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgICAgIGlmIChfdGhpczMuZ2FsbGVyeS5pc1pvb21lZCkgX3RoaXMzLmNvbXByZXNzR2FsbGVyeShfaTMpO2Vsc2UgX3RoaXMzLmV4cGFuZEdhbGxlcnkoX2kzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpczMuZG9tRXZlbnRzLmFkZChfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2kzXSwgJ2NsaWNrJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgICAgIF90aGlzMy5jbGlja0V4cGFuZChlLCBhLCBlbCwgX2kzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCB0aGlzLiRnYWxsZXJ5R3JpZEl0ZW1zLmxlbmd0aDsgX2kzKyspIHtcbiAgICAgICAgICBfbG9vcChfaTMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJGdhbGxlcnlCdXR0b24sICdjbGljaycsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgIF90aGlzMy5vcGVuTGlnaHRib3goMCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5nYWxsZXJ5LmlzWm9vbWVkKSB0aGlzLiRnYWxsZXJ5R3JpZElubmVyLnN0eWxlLm1pbldpZHRoID0gdGhpcy5nYWxsZXJ5LnJlbGF0aXZlV2lkdGggKyAncHgnO2Vsc2UgdGhpcy4kZ2FsbGVyeUdyaWRJbm5lci5zdHlsZS5taW5XaWR0aCA9IHRoaXMuZ2FsbGVyeS5hYnNvbHV0ZVdpZHRoICsgJ3B4JztcblxuICAgICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICB0aGlzLmdhbGxlcnlEcmFnZ2FibGUgPSBuZXcgU3VwZXJEcmFnZ2VyKHtcbiAgICAgICAgICAgIGVsOiB0aGlzLiRnYWxsZXJ5R3JpZCxcbiAgICAgICAgICAgIGVsQ2xpY2thYmxlczogdGhpcy4kZ2FsbGVyeUdyaWRJdGVtcyxcbiAgICAgICAgICAgIGlubmVyOiB0aGlzLiRnYWxsZXJ5R3JpZElubmVyLFxuICAgICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KCkge1xuICAgICAgICAgICAgICBpZiAoIV90aGlzMy5nYWxsZXJ5LmlzWm9vbWVkICYmIF90aGlzMy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBfaTQrKykge1xuICAgICAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2k0XS5jaGlsZHJlblswXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDFcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChfdGhpczMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczMuYXBwVWkuJGN1cnNvckRvdCwge1xuICAgICAgICAgICAgICAgICAgc2NhbGU6IDAuNixcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczMuYXBwVWkuJGN1cnNvckRyYWcsIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlOiAwLjYsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMzLmFwcFVpLiRjdXJzb3JEcmFnLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3RoaXMzLmdhbGxlcnkuZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gb25EcmFnRW5kKCkge1xuICAgICAgICAgICAgICBpZiAoIV90aGlzMy5nYWxsZXJ5LmlzWm9vbWVkICYmIF90aGlzMy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCBfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBfaTUrKykge1xuICAgICAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczMuJGdhbGxlcnlHcmlkSXRlbXNbX2k1XS5jaGlsZHJlblswXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZTogMS4xLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKF90aGlzMy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzMy5hcHBVaS4kY3Vyc29yRG90LCB7XG4gICAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczMuYXBwVWkuJGN1cnNvckRyYWcsIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzMy5hcHBVaS4kY3Vyc29yRHJhZy5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgICAgZGVsYXk6IDAuMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3RoaXMzLmdhbGxlcnkuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmdhbGxlcnlEcmFnZ2FibGUgPSBuZXcgRHJhZ2dhYmxlKHtcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy4kZ2FsbGVyeUdyaWQsXG4gICAgICAgICAgICB0YXJnZXRJbm5lcjogdGhpcy4kZ2FsbGVyeUdyaWRJbm5lcixcbiAgICAgICAgICAgIG9uUHJlc3M6IGZ1bmN0aW9uIG9uUHJlc3MoKSB7XG4gICAgICAgICAgICAgIGlmIChfdGhpczMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczMuYXBwVWkuJGN1cnNvckRvdCwge1xuICAgICAgICAgICAgICAgICAgc2NhbGU6IDAuNixcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczMuYXBwVWkuJGN1cnNvckRyYWcsIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlOiAwLjYsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMzLmFwcFVpLiRjdXJzb3JEcmFnLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3RoaXMzLmdhbGxlcnkuZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVsZWFzZTogZnVuY3Rpb24gb25SZWxlYXNlKCkge1xuICAgICAgICAgICAgICBpZiAoX3RoaXMzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMzLmFwcFVpLiRjdXJzb3JEb3QsIHtcbiAgICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzMy5hcHBVaS4kY3Vyc29yRHJhZywge1xuICAgICAgICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMzLmFwcFVpLiRjdXJzb3JEcmFnLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgICAgICBkZWxheTogMC4xXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfdGhpczMuZ2FsbGVyeS5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiBvbkRyYWdTdGFydChkcmFnKSB7XG4gICAgICAgICAgICAgIGlmICghX3RoaXMzLmdhbGxlcnkuaXNab29tZWQgJiYgX3RoaXMzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pNiA9IDA7IF9pNiA8IF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtcy5sZW5ndGg7IF9pNisrKSB7XG4gICAgICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtc1tfaTZdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25EcmFnRW5kOiBmdW5jdGlvbiBvbkRyYWdFbmQoKSB7XG4gICAgICAgICAgICAgIGlmICghX3RoaXMzLmdhbGxlcnkuaXNab29tZWQgJiYgX3RoaXMzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pNyA9IDA7IF9pNyA8IF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtcy5sZW5ndGg7IF9pNysrKSB7XG4gICAgICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzMy4kZ2FsbGVyeUdyaWRJdGVtc1tfaTddLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiAxLjEsXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2FsbGVyeVRpbWVsaW5lID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGVhc2U6ICdub25lJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgICAgdHJpZ2dlcjogdGhpcy4kZ2FsbGVyeSxcbiAgICAgICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGVuZDogJ2JvdHRvbSB0b3AnXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nYWxsZXJ5VGltZWxpbmUuZnJvbVRvKHRoaXMuJGdhbGxlcnlHcmlkLCB7XG4gICAgICAgICAgeDogd2luZG93LmlubmVyV2lkdGggKiAwLjFcbiAgICAgICAgfSwge1xuICAgICAgICAgIHg6IC13aW5kb3cuaW5uZXJXaWR0aCAqIDAuMVxuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcHJlc3NHYWxsZXJ5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXByZXNzR2FsbGVyeShpbmRleCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLmdhbGxlcnkuaXNFeHBhbmRlZCkgcmV0dXJuO1xuICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRjdXJzb3JQbHVzLCB7XG4gICAgICAgIHNjYWxlOiAwLjcsXG4gICAgICAgIHJvdGF0aW9uOiAnMGRlZycsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRjdXJzb3JNaW51cywge1xuICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICByb3RhdGlvbjogJzBkZWcnLFxuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ3NhcC5raWxsVHdlZW5zT2YodGhpcy4kZ2FsbGVyeUdyaWRJdGVtc1tpXSwgdGhpcy4kZ2FsbGVyeUdyaWRJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCAuZXhwYW5kJykpO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gdGhpcy5nYWxsZXJ5LmFic29sdXRlUG9zaXRpb25zW2ldO1xuICAgICAgICB2YXIgcmVsYXRpdmVQb3NpdGlvbnMgPSB0aGlzLmdhbGxlcnkucmVsYXRpdmVQb3NpdGlvbnNbaV07XG4gICAgICAgIGdzYXAudG8odGhpcy4kZ2FsbGVyeUdyaWRJdGVtc1tpXSwge1xuICAgICAgICAgIHg6IHBvc2l0aW9uc1syXSxcbiAgICAgICAgICB5OiBwb3NpdGlvbnNbM10sXG4gICAgICAgICAgc2NhbGU6IHBvc2l0aW9uc1s0XSxcbiAgICAgICAgICBkdXJhdGlvbjogMS40LFxuICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0J1xuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC50byh0aGlzLiRnYWxsZXJ5R3JpZEl0ZW1zW2ldLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgc2NhbGU6IDEuMSxcbiAgICAgICAgICBkdXJhdGlvbjogMS40LFxuICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0J1xuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC50byh0aGlzLiRnYWxsZXJ5R3JpZEl0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZ3JvdW5kIC5leHBhbmQnKSwge1xuICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0J1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kZ2FsbGVyeUdyaWRJbm5lci5zdHlsZS5taW5XaWR0aCA9IHRoaXMuZ2FsbGVyeS5hYnNvbHV0ZVdpZHRoICsgJ3B4JztcbiAgICAgIHZhciAkZWwgPSB0aGlzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbaW5kZXhdO1xuICAgICAgdmFyIGNlbnRlciA9ICRlbFsyXSAtIHdpbmRvdy5pbm5lcldpZHRoIC8gMiArICRlbFswXSAvIDI7XG4gICAgICB2YXIgX21heFggPSAwO1xuXG4gICAgICB2YXIgX21pblggPSAtKHRoaXMuZ2FsbGVyeS5hYnNvbHV0ZVdpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpO1xuXG4gICAgICB2YXIgX2NlbnRlciA9IE1hdGgubWluKF9tYXhYLCBNYXRoLm1heChfbWluWCwgLWNlbnRlcikpO1xuXG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIGdzYXAudG8oW3RoaXMuZ2FsbGVyeURyYWdnYWJsZS5fZHJhZy5saXZlUG9zaXRpb24sIHRoaXMuZ2FsbGVyeURyYWdnYWJsZS5fZHJhZy5wb3NpdGlvbiwgdGhpcy5nYWxsZXJ5RHJhZ2dhYmxlLl9kcmFnLmxhc3RQb3NpdGlvbl0sIHtcbiAgICAgICAgeDogX2NlbnRlcixcbiAgICAgICAgZHVyYXRpb246IDEuNCxcbiAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnXG4gICAgICB9KTtcbiAgICAgIGdzYXAudG8odGhpcy4kZ2FsbGVyeUdyaWRJbm5lciwge1xuICAgICAgICB4OiBfY2VudGVyLFxuICAgICAgICBkdXJhdGlvbjogMS40LFxuICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uIG9uQ29tcGxldGUoKSB7XG4gICAgICAgICAgaWYgKF90aGlzNC5hcHBTdG9yZS5pc0Rlc2t0b3ApIF90aGlzNC5nYWxsZXJ5RHJhZ2dhYmxlLnJlc2l6ZSgpO2Vsc2UgX3RoaXM0LmdhbGxlcnlEcmFnZ2FibGUuZHJhZ2dhYmxlWzBdLmFwcGx5Qm91bmRzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5nYWxsZXJ5LmlzWm9vbWVkID0gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV4cGFuZEdhbGxlcnlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXhwYW5kR2FsbGVyeShpbmRleCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yTWludXMsIHtcbiAgICAgICAgc2NhbGU6IDAuNyxcbiAgICAgICAgcm90YXRpb246ICc5MGRlZycsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRjdXJzb3JQbHVzLCB7XG4gICAgICAgIHNjYWxlOiAwLjcsXG4gICAgICAgIHJvdGF0aW9uOiAnOTBkZWcnLFxuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ3NhcC5raWxsVHdlZW5zT2YodGhpcy4kZ2FsbGVyeUdyaWRJdGVtc1tpXSk7XG4gICAgICAgIHZhciBwb3NpdGlvbnMgPSB0aGlzLmdhbGxlcnkucmVsYXRpdmVQb3NpdGlvbnNbaV07XG4gICAgICAgIGdzYXAudG8odGhpcy4kZ2FsbGVyeUdyaWRJdGVtc1tpXSwge1xuICAgICAgICAgIHg6IHBvc2l0aW9uc1syXSxcbiAgICAgICAgICB5OiBwb3NpdGlvbnNbM10sXG4gICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgZHVyYXRpb246IDEuNCxcbiAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCdcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAudG8odGhpcy4kZ2FsbGVyeUdyaWRJdGVtc1tpXS5jaGlsZHJlblswXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgIGR1cmF0aW9uOiAxLjQsXG4gICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnXG4gICAgICAgIH0pO1xuICAgICAgICBnc2FwLnRvKHRoaXMuJGdhbGxlcnlHcmlkSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQgLmJhY2tncm91bmRfX292ZXJsYXkyJyksIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgZHVyYXRpb246IDAuMixcbiAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCdcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAudG8odGhpcy4kZ2FsbGVyeUdyaWRJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCAuZXhwYW5kJyksIHtcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLjIsXG4gICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICAgIGRlbGF5OiAxLjRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuJGdhbGxlcnlHcmlkSW5uZXIuc3R5bGUubWluV2lkdGggPSB0aGlzLmdhbGxlcnkucmVsYXRpdmVXaWR0aCArICdweCc7XG4gICAgICB2YXIgJGVsID0gdGhpcy5nYWxsZXJ5LnJlbGF0aXZlUG9zaXRpb25zW2luZGV4XTtcbiAgICAgIHZhciBjZW50ZXIgPSAkZWxbMl0gLSB3aW5kb3cuaW5uZXJXaWR0aCAvIDIgKyAkZWxbMF0gLyAyOyAvLyBDZW50ZXIgZ2FsbGVyeVxuXG4gICAgICB2YXIgb2Zmc2V0ID0gdGhpcy4kZ2FsbGVyeS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICBpZiAodGhpcy5zdXBlclNjcm9sbGVyKSB0aGlzLnN1cGVyU2Nyb2xsZXIuc2Nyb2xsQW5pbWF0ZSgtdGhpcy5zdXBlclNjcm9sbGVyLl9zY3JvbGwubGl2ZVBvc2l0aW9uLnkgKyBvZmZzZXQsIDEuNCwgJ2V4cG8uaW5PdXQnKTtcbiAgICAgIHZhciBfbWF4WCA9IDA7XG5cbiAgICAgIHZhciBfbWluWCA9IC0odGhpcy5nYWxsZXJ5LnJlbGF0aXZlV2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aCk7XG5cbiAgICAgIHZhciBfY2VudGVyID0gTWF0aC5taW4oX21heFgsIE1hdGgubWF4KF9taW5YLCAtY2VudGVyKSk7XG5cbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgZ3NhcC50byhbdGhpcy5nYWxsZXJ5RHJhZ2dhYmxlLl9kcmFnLmxpdmVQb3NpdGlvbiwgdGhpcy5nYWxsZXJ5RHJhZ2dhYmxlLl9kcmFnLnBvc2l0aW9uLCB0aGlzLmdhbGxlcnlEcmFnZ2FibGUuX2RyYWcubGFzdFBvc2l0aW9uXSwge1xuICAgICAgICB4OiBfY2VudGVyLFxuICAgICAgICBkdXJhdGlvbjogMS40LFxuICAgICAgICBlYXNlOiAnZXhwby5pbk91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRnYWxsZXJ5R3JpZElubmVyLCB7XG4gICAgICAgIHg6IF9jZW50ZXIsXG4gICAgICAgIGR1cmF0aW9uOiAxLjQsXG4gICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICBpZiAoX3RoaXM1LmFwcFN0b3JlLmlzRGVza3RvcCkgX3RoaXM1LmdhbGxlcnlEcmFnZ2FibGUucmVzaXplKCk7ZWxzZSBfdGhpczUuZ2FsbGVyeURyYWdnYWJsZS5kcmFnZ2FibGVbMF0uYXBwbHlCb3VuZHMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmdhbGxlcnkuaXNab29tZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvcGVuTGlnaHRib3hcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbkxpZ2h0Ym94KGluZGV4KSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRoZWFkZXJUcmlnZ2VyLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICBlYXNlOiAncG93ZXIyLm91dCdcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMuJGluZm9UcmlnZ2VyKSBnc2FwLnRvKHRoaXMuJGluZm9UcmlnZ2VyLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICBlYXNlOiAncG93ZXIyLm91dCdcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5zdXBlclNjcm9sbGVyKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLiRnYWxsZXJ5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICAgICAgdGhpcy5zdXBlclNjcm9sbGVyLnNjcm9sbEFuaW1hdGUoLXRoaXMuc3VwZXJTY3JvbGxlci5fc2Nyb2xsLmxpdmVQb3NpdGlvbi55ICsgb2Zmc2V0LCAxLjQsICdleHBvLmluT3V0Jyk7XG4gICAgICAgIGdzYXAuZGVsYXllZENhbGwoMS40LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXM2LnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kZ2FsbGVyeUdyaWRJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBnc2FwLnRvKHRoaXMuJGdhbGxlcnlHcmlkSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmV4cGFuZCcpLCB7XG4gICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLjIsXG4gICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxpZ2h0Ym94LnNldChpbmRleCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsb3NlTGlnaHRib3hcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VMaWdodGJveChpbmRleCkge1xuICAgICAgdmFyICRlbCA9IHRoaXMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tpbmRleF07XG4gICAgICB2YXIgY2VudGVyID0gJGVsWzJdIC0gd2luZG93LmlubmVyV2lkdGggLyAyICsgJGVsWzBdIC8gMjsgLy8gQ2VudGVyIGdhbGxlcnlcblxuICAgICAgaWYgKHRoaXMuc3VwZXJTY3JvbGxlcikge1xuICAgICAgICB0aGlzLnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSB0cnVlO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy4kZ2FsbGVyeS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgIGlmICh0aGlzLnN1cGVyU2Nyb2xsZXIpIHRoaXMuc3VwZXJTY3JvbGxlci5zY3JvbGxBbmltYXRlKC10aGlzLnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5saXZlUG9zaXRpb24ueSArIG9mZnNldCwgMS40LCAnZXhwby5pbk91dCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgX21heFggPSAwO1xuXG4gICAgICB2YXIgX21pblggPSAtKHRoaXMuZ2FsbGVyeS5yZWxhdGl2ZVdpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpO1xuXG4gICAgICB2YXIgX2NlbnRlciA9IE1hdGgubWluKF9tYXhYLCBNYXRoLm1heChfbWluWCwgLWNlbnRlcikpO1xuXG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIGdzYXAuc2V0KFt0aGlzLmdhbGxlcnlEcmFnZ2FibGUuX2RyYWcubGl2ZVBvc2l0aW9uLCB0aGlzLmdhbGxlcnlEcmFnZ2FibGUuX2RyYWcucG9zaXRpb24sIHRoaXMuZ2FsbGVyeURyYWdnYWJsZS5fZHJhZy5sYXN0UG9zaXRpb25dLCB7XG4gICAgICAgIHg6IF9jZW50ZXJcbiAgICAgIH0pO1xuICAgICAgZ3NhcC5zZXQodGhpcy4kZ2FsbGVyeUdyaWRJbm5lciwge1xuICAgICAgICB4OiBfY2VudGVyXG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy5nYWxsZXJ5RHJhZ2dhYmxlLnJlc2l6ZSgpO2Vsc2UgdGhpcy5nYWxsZXJ5RHJhZ2dhYmxlLmRyYWdnYWJsZVswXS5hcHBseUJvdW5kcygpO1xuICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRoZWFkZXJUcmlnZ2VyLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6ICdhbGwnLFxuICAgICAgICBkdXJhdGlvbjogMC44LFxuICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgIGRlbGF5OiAxXG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLiRpbmZvVHJpZ2dlcikgZ3NhcC50byh0aGlzLiRpbmZvVHJpZ2dlciwge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcbiAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnLFxuICAgICAgICBkZWxheTogMVxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuJGdhbGxlcnlHcmlkSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmV4cGFuZCcpLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMixcbiAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgIGRlbGF5OiAwXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5nYWxsZXJ5LmlzRXhwYW5kZWQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJJbWFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbnRlckltYWdlKGVsKSB7XG4gICAgICBpZiAoIXRoaXMuZ2FsbGVyeS5kcmFnZ2luZykge1xuICAgICAgICBpZiAoIXRoaXMuZ2FsbGVyeS5pc1pvb21lZCkge1xuICAgICAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQgLmJhY2tncm91bmRfX292ZXJsYXkyJyksIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgICAgICAgZWFzZTogJ3Bvd2VyMi5vdXQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC50byhlbC5jaGlsZHJlblswXS5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDFcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLmtpbGxUd2VlbnNPZihbdGhpcy5hcHBVaS4kY3Vyc29yRHJhZywgdGhpcy5hcHBVaS4kY3Vyc29yRHJhZy5jaGlsZHJlblswXSwgdGhpcy5hcHBVaS4kY3Vyc29yUGx1cywgdGhpcy5hcHBVaS4kY3Vyc29yUGx1cy5jaGlsZHJlblswXV0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yRG90LCB7XG4gICAgICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvck1pbnVzLCB7XG4gICAgICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvclBsdXMsIHtcbiAgICAgICAgICAgIHNjYWxlOiAwLjcsXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTsgLy9nc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvclBsdXMuY2hpbGRyZW5bMF0sIHsgb3BhY2l0eTogMSwgZHVyYXRpb246IDAuMywgZWFzZTogJ2V4cG8ub3V0JyB9KTtcblxuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yRHJhZywge1xuICAgICAgICAgICAgc2NhbGU6IDAuNyxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRjdXJzb3JEcmFnLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yRG90LCB7XG4gICAgICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvck1pbnVzLCB7XG4gICAgICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRjdXJzb3JQbHVzLCB7XG4gICAgICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTsgLy9nc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvck1pbnVzLmNoaWxkcmVuWzBdLCB7IG9wYWNpdHk6IDEsIGR1cmF0aW9uOiAwLjMsIGVhc2U6ICdleHBvLm91dCcgfSk7XG5cbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvckRyYWcsIHtcbiAgICAgICAgICAgIHNjYWxlOiAwLjcsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yRHJhZy5jaGlsZHJlblswXSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsZWF2ZUltYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxlYXZlSW1hZ2UoZWwpIHtcbiAgICAgIGlmICghdGhpcy5nYWxsZXJ5LmRyYWdnaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5nYWxsZXJ5LmlzWm9vbWVkKSB7XG4gICAgICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZCAuYmFja2dyb3VuZF9fb3ZlcmxheTInKSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMixcbiAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8oZWwuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIHNjYWxlOiAxLjEsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDFcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvckRvdCwge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yRHJhZywge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvckRyYWcuY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yTWludXMsIHtcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvclBsdXMsIHtcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTsgLy9nc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvclBsdXMuY2hpbGRyZW5bMF0sIHsgc2NhbGU6IDEsIG9wYWNpdHk6IDAuMDAwMSwgZHVyYXRpb246IDAuMywgZWFzZTogJ2V4cG8ub3V0JyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvckRvdCwge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yRHJhZywge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvckRyYWcuY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yTWludXMsIHtcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvclBsdXMsIHtcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgICAgICB9KTsgLy9nc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvck1pbnVzLmNoaWxkcmVuWzBdLCB7IHNjYWxlOiAxLCBvcGFjaXR5OiAwLjAwMDEsIGR1cmF0aW9uOiAwLjMsIGVhc2U6ICdleHBvLm91dCcgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJFeHBhbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXJFeHBhbmQoKSB7XG4gICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvckRvdCwge1xuICAgICAgICBzY2FsZTogMC4zNSxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgfSk7XG4gICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvck1pbnVzLCB7XG4gICAgICAgIHNjYWxlOiAwLjM1LFxuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pOyAvL2dzYXAudG8odGhpcy5hcHBVaS4kY3Vyc29yTWludXMuY2hpbGRyZW5bMF0sIHsgc2NhbGU6IDEsIG9wYWNpdHk6IDAuMDAwMSwgZHVyYXRpb246IDAuMywgZWFzZTogJ2V4cG8ub3V0JyB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGVhdmVFeHBhbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhdmVFeHBhbmQoKSB7XG4gICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvckRvdCwge1xuICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICBvcGFjaXR5OiAwLjAwMDEsXG4gICAgICAgIGR1cmF0aW9uOiAwLjMsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLmFwcFVpLiRjdXJzb3JNaW51cywge1xuICAgICAgICBzY2FsZTogMC43LFxuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBkdXJhdGlvbjogMC4zLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnXG4gICAgICB9KTsgLy9nc2FwLnRvKHRoaXMuYXBwVWkuJGN1cnNvck1pbnVzLmNoaWxkcmVuWzBdLCB7IG9wYWNpdHk6IDEsIGR1cmF0aW9uOiAwLjMsIGVhc2U6ICdleHBvLm91dCcgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsaWNrRXhwYW5kXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsaWNrRXhwYW5kKGUsIGEsIGVsLCBpbmRleCkge1xuICAgICAgdGhpcy5nYWxsZXJ5LmlzRXhwYW5kZWQgPSB0cnVlO1xuICAgICAgdGhpcy5vcGVuTGlnaHRib3goaW5kZXgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXNpemVHYWxsZXJ5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZUdhbGxlcnkoKSB7XG4gICAgICAvLyBHZXQgYWJzb2x1dGUgcG9zaXRpb25zXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIF93aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogdGhpcy5nYWxsZXJ5LnJlZmVyZW5jZXNbaV1bMF0gLyAxMDA7XG5cbiAgICAgICAgdmFyIF9oZWlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCAqIHRoaXMuZ2FsbGVyeS5yZWZlcmVuY2VzW2ldWzFdIC8gMTAwO1xuXG4gICAgICAgIHZhciBfbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoICogdGhpcy5nYWxsZXJ5LnJlZmVyZW5jZXNbaV1bMl0gLyAxMDA7XG5cbiAgICAgICAgdmFyIF90b3AgPSB3aW5kb3cuaW5uZXJXaWR0aCAqIHRoaXMuZ2FsbGVyeS5yZWZlcmVuY2VzW2ldWzNdIC8gMTAwO1xuXG4gICAgICAgIHZhciBfcmF0aW8gPSAxIC8gKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSB3aW5kb3cuaW5uZXJXaWR0aCAqIDAuMSkgLyBfaGVpZ2h0KTtcblxuICAgICAgICB2YXIgX211bHRpcGxpZXIgPSAod2luZG93LmlubmVySGVpZ2h0IC0gd2luZG93LmlubmVyV2lkdGggKiAwLjEpIC8gX2hlaWdodDtcblxuICAgICAgICB0aGlzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbaV0gPSBbX3dpZHRoLCBfaGVpZ2h0LCBfbGVmdCwgX3RvcCwgX3JhdGlvLCBfbXVsdGlwbGllcl07XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZ2FsbGVyeS5hYnNvbHV0ZVdpZHRoID0gdGhpcy5nYWxsZXJ5LmFic29sdXRlUG9zaXRpb25zW3RoaXMuZ2FsbGVyeS5jb3VudCAtIDFdWzBdICsgdGhpcy5nYWxsZXJ5LmFic29sdXRlUG9zaXRpb25zW3RoaXMuZ2FsbGVyeS5jb3VudCAtIDFdWzJdOyAvLyBHZXQgcmVsYXRpdmUgcG9zaXRpb25zXG5cbiAgICAgIGZvciAodmFyIF9pOCA9IDA7IF9pOCA8IHRoaXMuJGdhbGxlcnlHcmlkSXRlbXMubGVuZ3RoOyBfaTgrKykge1xuICAgICAgICB2YXIgX211bHRpcGxpZXIzID0gdGhpcy5nYWxsZXJ5LmFic29sdXRlUG9zaXRpb25zW19pOF1bNV07XG5cbiAgICAgICAgdmFyIF93aWR0aDMgPSBfbXVsdGlwbGllcjMgKiB0aGlzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbX2k4XVswXTtcblxuICAgICAgICB2YXIgX2hlaWdodDMgPSBfbXVsdGlwbGllcjMgKiB0aGlzLmdhbGxlcnkuYWJzb2x1dGVQb3NpdGlvbnNbX2k4XVsxXTtcblxuICAgICAgICB2YXIgX2xlZnQzID0gX2k4ID09PSAwID8gMCA6IHRoaXMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tfaTggLSAxXVsyXSArIHRoaXMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tfaTggLSAxXVswXSArIHRoaXMuZ2FsbGVyeS5tYXJnaW47XG5cbiAgICAgICAgdmFyIF90b3AzID0gd2luZG93LmlubmVyV2lkdGggKiAwLjA1O1xuXG4gICAgICAgIHRoaXMuZ2FsbGVyeS5yZWxhdGl2ZVBvc2l0aW9uc1tfaThdID0gW193aWR0aDMsIF9oZWlnaHQzLCBfbGVmdDMsIF90b3AzXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5nYWxsZXJ5LnJlbGF0aXZlV2lkdGggPSB0aGlzLmdhbGxlcnkucmVsYXRpdmVQb3NpdGlvbnNbdGhpcy5nYWxsZXJ5LmNvdW50IC0gMV1bMF0gKyB0aGlzLmdhbGxlcnkucmVsYXRpdmVQb3NpdGlvbnNbdGhpcy5nYWxsZXJ5LmNvdW50IC0gMV1bMl07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRSZWxhdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRSZWxhdGVkKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIC8vIFNlbGVjdG9yc1xuICAgICAgdGhpcy4kcmVsYXRlZFNsaWRlciA9IHRoaXMuJHJlbGF0ZWQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpO1xuICAgICAgdGhpcy4kcmVsYXRlZFNsaWRlcklubmVyID0gdGhpcy4kcmVsYXRlZC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbm5lcicpO1xuICAgICAgdGhpcy4kcmVsYXRlZFNsaWRlckl0ZW1zID0gdGhpcy4kcmVsYXRlZC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19pdGVtJyk7XG4gICAgICB0aGlzLiRyZWxhdGVkUHJvbW90aW9ucyA9IHRoaXMuJHJlbGF0ZWQucXVlcnlTZWxlY3RvckFsbCgnLnByb21vdGlvbicpO1xuXG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRyZWxhdGVkUHJvbW90aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRyZWxhdGVkUHJvbW90aW9uc1tpXSwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIF90aGlzNy5wcm9tb3Rpb25FbnRlcihlbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHJlbGF0ZWRQcm9tb3Rpb25zW2ldLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgX3RoaXM3LnByb21vdGlvbkxlYXZlKGVsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRyZWxhdGVkU2xpZGVySW5uZXIsICdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUsIGEsIGVsKSB7XG4gICAgICAgICAgX3RoaXM3LmFwcFVpLmVudGVyRHJhZ0N1cnNvcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHJlbGF0ZWRTbGlkZXJJbm5lciwgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICBfdGhpczcuYXBwVWkubGVhdmVEcmFnQ3Vyc29yKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlbGF0ZWREcmFnZ2FibGUgPSBuZXcgU3VwZXJEcmFnZ2VyKHtcbiAgICAgICAgICBlbDogdGhpcy4kcmVsYXRlZFNsaWRlcixcbiAgICAgICAgICBlbENsaWNrYWJsZXM6IHRoaXMuJHJlbGF0ZWRQcm9tb3Rpb25zLFxuICAgICAgICAgIGlubmVyOiB0aGlzLiRyZWxhdGVkU2xpZGVySW5uZXIsXG4gICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KCkge1xuICAgICAgICAgICAgX3RoaXM3LnN1cGVyU2Nyb2xsZXIuX3Njcm9sbC5lbmFibGUgPSBmYWxzZTtcblxuICAgICAgICAgICAgZm9yICh2YXIgX2k5ID0gMDsgX2k5IDwgX3RoaXM3LiRyZWxhdGVkUHJvbW90aW9ucy5sZW5ndGg7IF9pOSsrKSB7XG4gICAgICAgICAgICAgIGdzYXAudG8oX3RoaXM3LiRyZWxhdGVkUHJvbW90aW9uc1tfaTldLCB7XG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuOTQsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGdzYXAudG8oX3RoaXM3LiRyZWxhdGVkUHJvbW90aW9uc1tfaTldLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lciAuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25EcmFnRW5kOiBmdW5jdGlvbiBvbkRyYWdFbmQoKSB7XG4gICAgICAgICAgICBfdGhpczcuc3VwZXJTY3JvbGxlci5fc2Nyb2xsLmVuYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGZvciAodmFyIF9pMTAgPSAwOyBfaTEwIDwgX3RoaXM3LiRyZWxhdGVkUHJvbW90aW9ucy5sZW5ndGg7IF9pMTArKykge1xuICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzNy4kcmVsYXRlZFByb21vdGlvbnNbX2kxMF0sIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczcuJHJlbGF0ZWRQcm9tb3Rpb25zW19pMTBdLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lciAuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLjEsXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbGF0ZWREcmFnZ2FibGUgPSBuZXcgRHJhZ2dhYmxlKHtcbiAgICAgICAgICB0YXJnZXQ6IHRoaXMuJHJlbGF0ZWRTbGlkZXIsXG4gICAgICAgICAgdGFyZ2V0SW5uZXI6IHRoaXMuJHJlbGF0ZWRTbGlkZXJJbm5lcixcbiAgICAgICAgICBzbmFwOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwcm9tb3Rpb25FbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9tb3Rpb25FbnRlcihlbCkge1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCcuaW5uZXIgLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwcm9tb3Rpb25MZWF2ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9tb3Rpb25MZWF2ZShlbCkge1xuICAgICAgaWYgKHRoaXMucmVsYXRlZERyYWdnYWJsZSAmJiB0aGlzLnJlbGF0ZWREcmFnZ2FibGUuX2RyYWcuZHJhZ2dpbmcpIHJldHVybjtcbiAgICAgIGdzYXAudG8oZWwucXVlcnlTZWxlY3RvcignLmlubmVyIC5iYWNrZ3JvdW5kX19iZycpLCB7XG4gICAgICAgIHNjYWxlOiAxLjEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjZcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyYWZcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmFmKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH0sIHtcbiAgICBrZXk6IFwicmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHsvLyBpZih0aGlzLmxpZ2h0Ym94RHJhZ2dhYmxlKVxuICAgICAgLy8gICAgIHRoaXMubGlnaHRib3hEcmFnZ2FibGUucmVzaXplKCk7XG4gICAgICAvLyB0aGlzLnJlc2l6ZUdhbGxlcnkoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVuZGVyZXJQcm9tb3Rpb25zU2luZ2xlO1xufShSZW5kZXJlcik7IC8vIERvbmB0IGZvcmdldCB0byBleHBvcnQgeW91ciByZW5kZXJlclxuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyUHJvbW90aW9uc1NpbmdsZTsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG4vLyBHc2FwXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCBTY3JvbGxUcmlnZ2VyIGZyb20gJ2dzYXAvU2Nyb2xsVHJpZ2dlcic7XG5nc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpOyAvLyBJbXBvcnQgUmVuZGVyZXJcblxuaW1wb3J0IFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIuanMnOyAvLyBpbXBvcnQgc3R5bGVzRGVmYXVsdCBmcm9tICcuL3N0eWxlc0RlZmF1bHQuY3NzJzsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4vLyBVdGlsaXRpZXNcblxuaW1wb3J0IERvbUV2ZW50cyBmcm9tICcuLi9jbGFzc2VzL2RvbUV2ZW50cyc7XG5pbXBvcnQgU3VwZXJTY3JvbGxlciBmcm9tICcuLi9jbGFzc2VzL3N1cGVyU2Nyb2xsZXInOyAvLyBPdGhlclxuLy8gaW1wb3J0IFNsaWRlciBmcm9tICcuLi9jbGFzc2VzL3NsaWRlcic7XG4vLyBpbXBvcnQgU3BsaXRUZXh0IGZyb20gJy4uL2NsYXNzZXMvc3BsaXRUZXh0JztcblxudmFyIFJlbmRlcmVyTWFzdGVyd29ya3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZW5kZXJlcikge1xuICBfaW5oZXJpdHMoUmVuZGVyZXJNYXN0ZXJ3b3JrcywgX1JlbmRlcmVyKTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJlbmRlcmVyTWFzdGVyd29ya3MpO1xuXG4gIGZ1bmN0aW9uIFJlbmRlcmVyTWFzdGVyd29ya3MoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlbmRlcmVyTWFzdGVyd29ya3MpO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlbmRlcmVyTWFzdGVyd29ya3MsIFt7XG4gICAga2V5OiBcInNlbGVjdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RvcnMoKSB7XG4gICAgICB0aGlzLiRoZXJvID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLm1hc3RlcndvcmtzX19oZXJvJyk7XG4gICAgICB0aGlzLiRpbnRybyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXN0ZXJ3b3Jrc19faW50cm8nKTtcbiAgICAgIHRoaXMuJGZlYXR1cmVzID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLm1hc3RlcndvcmtzX19mZWF0dXJlcycpO1xuICAgICAgaWYgKHRoaXMuJGZlYXR1cmVzKSB0aGlzLiRmZWF0dXJlc0l0ZW1zID0gdGhpcy4kZmVhdHVyZXMucXVlcnlTZWxlY3RvckFsbCgnLmZlYXR1cmVzX19pdGVtJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVFbnRlcigpIHtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICBnc2FwLnNldCh0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZScpLCB7XG4gICAgICAgICAgeTogJy0xMDAlJ1xuICAgICAgICB9KTtcbiAgICAgICAgZ3NhcC5zZXQodGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UgaW1nJyksIHtcbiAgICAgICAgICB5OiAnMTAwJSdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGdzYXAuc2V0KHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmJnJyksIHtcbiAgICAgICAgc2NhbGVZOiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCA/IDAgOiAxXG4gICAgICB9KTtcbiAgICAgIGdzYXAuc2V0KHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmNlbnRlcicpLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByZWVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByZWVudGVyKCkge1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgIGdzYXAudG8odGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UnKSwge1xuICAgICAgICAgIHk6ICcwJScsXG4gICAgICAgICAgZHVyYXRpb246IDEuOCxcbiAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgZGVsYXk6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIGdzYXAudG8odGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UgaW1nJyksIHtcbiAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgIGR1cmF0aW9uOiAxLjgsXG4gICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgIGRlbGF5OiAwXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBnc2FwLnRvKHRoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmJnJyksIHtcbiAgICAgICAgc2NhbGVZOiAxLFxuICAgICAgICBkdXJhdGlvbjogMS42LFxuICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgIGRlbGF5OiAwLjJcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byh0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5tYXNrIC5jZW50ZXInKSwge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjgsXG4gICAgICAgIGRlbGF5OiAxXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXIoKSB7XG4gICAgICB0aGlzLmFwcFVpLiRpbmZvQ29udGVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiaW5mby1zdWJqZWN0XCJdJykudmFsdWUgPSAnSW5mb3JtYWNpw7NuIHNvYnJlIE1hc3RlcndvcmtzJztcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy5wYXJhbGxheEhlcm8oKTtcbiAgICAgIHRoaXMuaW5pdEZlYXR1cmVzKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInBhcmFsbGF4SGVyb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJhbGxheEhlcm8oKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy4kaGVybykge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gLSh3aW5kb3cuaW5uZXJXaWR0aCAqIDAuMDUpO1xuICAgICAgICB0aGlzLnN1cGVyVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJGhlcm8sXG4gICAgICAgICAgc3RhcnQ6ICd0b3AgdG9wJyxcbiAgICAgICAgICBlbmQ6ICdib3R0b20gdG9wJyxcbiAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24gb25VcGRhdGUoc2VsZikge1xuICAgICAgICAgICAgZ3NhcC50byhfdGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UgaW1nJyksIHtcbiAgICAgICAgICAgICAgc2NhbGU6IDEgKyAwLjEgKiBzZWxmLnByb2dyZXNzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdzYXAudG8oX3RoaXMuJGhlcm8ucXVlcnlTZWxlY3RvcignLm1hc2sgLmJnJyksIHtcbiAgICAgICAgICAgICAgeTogb2Zmc2V0ICogc2VsZi5wcm9ncmVzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdEZlYXR1cmVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRGZWF0dXJlcygpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB0aGlzLmZlYXR1cmVzVGltZWxpbmVzID0gW107XG5cbiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHtcbiAgICAgICAgaWYgKCFfdGhpczIuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgICAgX3RoaXMyLmRvbUV2ZW50cy5hZGQoX3RoaXMyLiRmZWF0dXJlc0l0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJy50cmlnZ2VyJyksICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIENsb3NlIG1lbnVcbiAgICAgICAgICAgIGdzYXAudG8oX3RoaXMyLmFwcFVpLiRoZWFkZXIsIHtcbiAgICAgICAgICAgICAgeTogJy0xMDAlJyxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDEuNCxcbiAgICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzMi5hcHBVaS5oZWFkZXIuaXNMb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gX3RoaXMyLiRmZWF0dXJlc0l0ZW1zW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcblxuICAgICAgICAgICAgX3RoaXMyLmFwcFVpLnByZXZpb3VzU2Nyb2xsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIG9mZnNldCAtIDE7XG4gICAgICAgICAgICBnc2FwLnRvKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwge1xuICAgICAgICAgICAgICBzY3JvbGxUb3A6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgKyBvZmZzZXQsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAxLjQsXG4gICAgICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczIuYXBwVWkuaGVhZGVyLmlzTG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoX3RoaXMyLiRmZWF0dXJlc0l0ZW1zW2ldLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSB7XG4gICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMyLiRmZWF0dXJlc0l0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJy5pbmZvJyksIHtcbiAgICAgICAgICAgICAgICB5OiAnNTAlJyxcbiAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEuNFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczIuJGZlYXR1cmVzSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmluZm8gLnd5c2l3eWcnKSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICAgICAgICBlYXNlOiAncG93ZXIyLm91dCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgICAgICAgICAgICBkZWxheTogMFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBfdGhpczIuJGZlYXR1cmVzSXRlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ3NhcC50byhfdGhpczIuJGZlYXR1cmVzSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmluZm8nKSwge1xuICAgICAgICAgICAgICAgIHk6ICcwJScsXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8uaW5PdXQnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxLjRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGdzYXAudG8oX3RoaXMyLiRmZWF0dXJlc0l0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJy5pbmZvIC53eXNpd3lnJyksIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdwb3dlcjIub3V0JyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICAgICAgICAgIGRlbGF5OiAxXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIF90aGlzMi4kZmVhdHVyZXNJdGVtc1tpXS5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBnc2FwLnNldChfdGhpczIuJGZlYXR1cmVzSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmRfX2JnJyksIHtcbiAgICAgICAgICB5OiBfdGhpczIuYXBwU3RvcmUuaXNEZXNrdG9wID8gLXdpbmRvdy5pbm5lckhlaWdodCArIDIwMCA6IC0od2luZG93LmlubmVySGVpZ2h0ICogMC41KSArIDIwMCxcbiAgICAgICAgICBzY2FsZTogMS4yXG4gICAgICAgIH0sIDApO1xuICAgICAgICBnc2FwLnNldChfdGhpczIuJGZlYXR1cmVzSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmRfX21hc2snKSwge1xuICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHZhciBmZWF0dXJlVGltZWxpbmUgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgZWFzZTogJ25vbmUnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICB0cmlnZ2VyOiBfdGhpczIuJGZlYXR1cmVzSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQnKSxcbiAgICAgICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIGVuZDogJ2JvdHRvbSBib3R0b20nXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZmVhdHVyZVRpbWVsaW5lLnRvKF90aGlzMi4kZmVhdHVyZXNJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZF9fYmcnKSwge1xuICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGZlYXR1cmVUaW1lbGluZS50byhfdGhpczIuJGZlYXR1cmVzSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmRfX21hc2snKSwge1xuICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICBkdXJhdGlvbjogMC41XG4gICAgICAgIH0sIDApO1xuXG4gICAgICAgIF90aGlzMi5mZWF0dXJlc1RpbWVsaW5lcy5wdXNoKGZlYXR1cmVUaW1lbGluZSk7XG4gICAgICB9O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGZlYXR1cmVzSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgX2xvb3AoaSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJhZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByYWYoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfV0pO1xuXG4gIHJldHVybiBSZW5kZXJlck1hc3RlcndvcmtzO1xufShSZW5kZXJlcik7IC8vIERvbmB0IGZvcmdldCB0byBleHBvcnQgeW91ciByZW5kZXJlclxuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyTWFzdGVyd29ya3M7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuLy8gR3NhcFxuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCc7XG5pbXBvcnQgU2Nyb2xsVHJpZ2dlciBmcm9tICdnc2FwL1Njcm9sbFRyaWdnZXInO1xuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTsgLy8gSW1wb3J0IFJlbmRlcmVyXG5cbmltcG9ydCBSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyLmpzJzsgLy8gaW1wb3J0IHN0eWxlc0RlZmF1bHQgZnJvbSAnLi9zdHlsZXNEZWZhdWx0LmNzcyc7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuLy8gVXRpbGl0aWVzXG5cbmltcG9ydCBEb21FdmVudHMgZnJvbSAnLi4vY2xhc3Nlcy9kb21FdmVudHMnO1xuaW1wb3J0IFN1cGVyU2Nyb2xsZXIgZnJvbSAnLi4vY2xhc3Nlcy9zdXBlclNjcm9sbGVyJzsgLy8gT3RoZXJcbi8vIGltcG9ydCBTbGlkZXIgZnJvbSAnLi4vY2xhc3Nlcy9zbGlkZXInO1xuXG5pbXBvcnQgU3BsaXRUZXh0IGZyb20gJy4uL2NsYXNzZXMvc3BsaXRUZXh0JztcblxudmFyIFJlbmRlcmVyQmxvZyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlbmRlcmVyKSB7XG4gIF9pbmhlcml0cyhSZW5kZXJlckJsb2csIF9SZW5kZXJlcik7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihSZW5kZXJlckJsb2cpO1xuXG4gIGZ1bmN0aW9uIFJlbmRlcmVyQmxvZygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVuZGVyZXJCbG9nKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSZW5kZXJlckJsb2csIFt7XG4gICAga2V5OiBcInNlbGVjdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RvcnMoKSB7XG4gICAgICB0aGlzLiRsaXN0ID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLmJsb2dfX2xpc3QnKTtcblxuICAgICAgaWYgKHRoaXMuJGxpc3QpIHtcbiAgICAgICAgdGhpcy4kbGlzdEZpbHRlciA9IHRoaXMuJGxpc3QucXVlcnlTZWxlY3RvcignLmZpbHRlcicpO1xuICAgICAgICB0aGlzLiRsaXN0RmlsdGVyVHJpZ2dlciA9IHRoaXMuJGxpc3QucXVlcnlTZWxlY3RvcignLmZpbHRlcl9fdHJpZ2dlcicpO1xuICAgICAgICB0aGlzLiRsaXN0RmlsdGVySW5uZXIgPSB0aGlzLiRsaXN0LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJfX2lubmVyJyk7XG4gICAgICAgIHRoaXMuJGxpc3RGaWx0ZXJJdGVtcyA9IHRoaXMuJGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlcl9faXRlbScpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVFbnRlcigpIHtcbiAgICAgIHRoaXMuc2V0UG9zdHMoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXIoKSB7XG4gICAgICB0aGlzLmluaXRQb3N0cygpO1xuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB0aGlzLnBpbkZpbHRlcigpO2Vsc2UgdGhpcy5pbml0RmlsdGVyKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRGaWx0ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEZpbHRlcigpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuZmlsdGVyID0ge1xuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9O1xuICAgICAgZ3NhcC5zZXQodGhpcy4kbGlzdEZpbHRlcklubmVyLCB7XG4gICAgICAgIG9wYWNpdHk6IDAuMDAwMVxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLiRsaXN0RmlsdGVyVHJpZ2dlcikge1xuICAgICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kbGlzdEZpbHRlclRyaWdnZXIsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMuZmlsdGVyLmlzT3BlbikgX3RoaXMuaGlkZUZpbHRlcigpO2Vsc2UgX3RoaXMuc2hvd0ZpbHRlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2hvd0ZpbHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93RmlsdGVyKCkge1xuICAgICAgZ3NhcC50byh0aGlzLiRsaXN0RmlsdGVySW5uZXIsIHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZWFzZTogJ3Bvd2UyLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5maWx0ZXIuaXNPcGVuID0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGlkZUZpbHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlRmlsdGVyKCkge1xuICAgICAgZ3NhcC50byh0aGlzLiRsaXN0RmlsdGVySW5uZXIsIHtcbiAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICBlYXNlOiAncG93ZTIub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuMlxuICAgICAgfSk7XG4gICAgICB0aGlzLmZpbHRlci5pc09wZW4gPSBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicGluRmlsdGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBpbkZpbHRlcigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy4kbGlzdEZpbHRlcikge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy4kbGlzdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSAodGhpcy4kbGlzdEZpbHRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyB3aW5kb3cuaW5uZXJXaWR0aCAqIDAuMjApO1xuICAgICAgICB0aGlzLnN1cGVyVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJGxpc3QsXG4gICAgICAgICAgc3RhcnQ6ICd0b3AgdG9wJyxcbiAgICAgICAgICBlbmQ6ICdib3R0b20gJyArICh0aGlzLiRsaXN0RmlsdGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArIHdpbmRvdy5pbm5lcldpZHRoICogMC4yMCkgKyAncHgnLFxuICAgICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbiBvblVwZGF0ZShzZWxmKSB7XG4gICAgICAgICAgICBnc2FwLnNldChfdGhpczIuJGxpc3RGaWx0ZXIsIHtcbiAgICAgICAgICAgICAgeTogb2Zmc2V0ICogc2VsZi5wcm9ncmVzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0UG9zdHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UG9zdHMoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdGhpcy4kcG9zdHMgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCcucG9zdCcpO1xuXG4gICAgICBpZiAodGhpcy4kcG9zdHMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRwb3N0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIFNldCBlbFxuICAgICAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICAgICAgZ3NhcC5zZXQodGhpcy4kcG9zdHNbaV0ucXVlcnlTZWxlY3RvcignLmltYWdlIGltZycpLCB7XG4gICAgICAgICAgICAgIHNjYWxlOiAxLjFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHBvc3RzW2ldLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgICBfdGhpczMuZW50ZXJQb3N0KGUsIGEsIGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kb21FdmVudHMuYWRkKHRoaXMuJHBvc3RzW2ldLCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlLCBhLCBlbCkge1xuICAgICAgICAgICAgICBfdGhpczMubGVhdmVQb3N0KGUsIGEsIGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gLy8gU2V0IHRpdGxlc1xuXG5cbiAgICAgICAgICB2YXIgJHRpdGxlID0gdGhpcy4kcG9zdHNbaV0ucXVlcnlTZWxlY3RvcignLnRpdGxlJyk7XG4gICAgICAgICAgdmFyIHNwbGl0ID0gbmV3IFNwbGl0VGV4dCgkdGl0bGUsIHtcbiAgICAgICAgICAgIHR5cGU6ICdsaW5lcywgd29yZHMnLFxuICAgICAgICAgICAgbGluZXNDbGFzczogJ2xpbmUgbGluZS0tKysnLFxuICAgICAgICAgICAgd29yZHNDbGFzczogJ3dvcmQgd29yZC0tKysnLFxuICAgICAgICAgICAgY2hhcnNDbGFzczogJ2NoYXIgY2hhci0tKysnXG4gICAgICAgICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgICAgICAgICR0aXRsZS5jbGFzc0xpc3QuYWRkKCdzcGxpdCcpO1xuICAgICAgICAgIHRoaXMuc3BsaXRUZXh0cy5wdXNoKHNwbGl0KTtcbiAgICAgICAgICB2YXIgbGluZXMgPSAkdGl0bGUucXVlcnlTZWxlY3RvckFsbCgnLmxpbmUnKTtcblxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGluZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGdzYXAuc2V0KGxpbmVzW2pdLCB7XG4gICAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICAgICAgeTogJzEwMCUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IC8vIFNldCBsaW5rXG5cblxuICAgICAgICAgIHZhciAkbGluayA9IHRoaXMuJHBvc3RzW2ldLnF1ZXJ5U2VsZWN0b3IoJy5saW5rJyk7XG4gICAgICAgICAgZ3NhcC5zZXQoJGxpbmssIHtcbiAgICAgICAgICAgIHk6ICcxMDAlJyxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdzYXAuc2V0KCRsaW5rLmNoaWxkcmVuWzBdLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjAwMDFcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnc2FwLnNldCgkbGluay5xdWVyeVNlbGVjdG9yKCdzdmcnKSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgcm90YXRpb246ICc0NTBkZWcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC5zZXQoJGxpbmsucXVlcnlTZWxlY3Rvcignc3ZnIGNpcmNsZScpLCB7XG4gICAgICAgICAgICBzdHJva2VEYXNob2Zmc2V0OiAnMTE4MS4yNHB4J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRQb3N0c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0UG9zdHMoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuJHBvc3RzKSB7XG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHtcbiAgICAgICAgICB2YXIgX2RlbGF5ID0gaSAlIDIgPyAwIDogMC4xO1xuXG4gICAgICAgICAgdmFyIHNjcm9sbHRyaWdnZXIgPSBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICB0cmlnZ2VyOiBfdGhpczQuJHBvc3RzW2ldLFxuICAgICAgICAgICAgc3RhcnQ6ICdjZW50ZXIgYm90dG9tJyxcbiAgICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgICAgICAgICAvLyBUcmlnZ2VyIGVsXG4gICAgICAgICAgICAgIC8vZ3NhcC50byh0aGlzLiRwb3N0c1tpXSwgeyBvcGFjaXR5OiAxLCB5OiAnMCUnLCBlYXNlOiAnZXhwby5vdXQnLCBkdXJhdGlvbjogMiwgZGVsYXk6IF9kZWxheSB9KTtcbiAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aXRsZXNcbiAgICAgICAgICAgICAgdmFyICR0aXRsZSA9IF90aGlzNC4kcG9zdHNbaV0ucXVlcnlTZWxlY3RvcignLnRpdGxlJyk7XG5cbiAgICAgICAgICAgICAgdmFyIGxpbmVzID0gJHRpdGxlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5lJyk7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGdzYXAudG8obGluZXNbal0sIHtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgICAgICAgICAgZGVsYXk6IGogKiAwLjEgKyBfZGVsYXlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSAvLyBUcmlnZ2VyIGxpbmtzXG5cblxuICAgICAgICAgICAgICB2YXIgJGxpbmsgPSBfdGhpczQuJHBvc3RzW2ldLnF1ZXJ5U2VsZWN0b3IoJy5saW5rJyk7XG5cbiAgICAgICAgICAgICAgZ3NhcC50bygkbGluaywge1xuICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMixcbiAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgIGRlbGF5OiBfZGVsYXlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGdzYXAudG8oJGxpbmsuY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgICAgICAgICAgZGVsYXk6IF9kZWxheVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZ3NhcC50bygkbGluay5xdWVyeVNlbGVjdG9yKCdzdmcnKSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgcm90YXRpb246ICcwJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMixcbiAgICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICAgIGRlbGF5OiBfZGVsYXlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGdzYXAudG8oJGxpbmsucXVlcnlTZWxlY3Rvcignc3ZnIGNpcmNsZScpLCB7XG4gICAgICAgICAgICAgICAgc3Ryb2tlRGFzaG9mZnNldDogJzBweCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDIsXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgICBkZWxheTogX2RlbGF5XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kcG9zdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBfbG9vcChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlbnRlclBvc3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXJQb3N0KGUsIGEsIGVsKSB7XG4gICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZSBpbWcnKSwge1xuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgZHVyYXRpb246IDAuNlxuICAgICAgfSk7XG4gICAgICBnc2FwLmtpbGxUd2VlbnNPZihbZWwucXVlcnlTZWxlY3Rvcignc3ZnJyksIGVsLnF1ZXJ5U2VsZWN0b3IoJ3N2ZyBjaXJjbGUnKV0pO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCdzdmcnKSwge1xuICAgICAgICByb3RhdGlvbjogJzQ1MGRlZycsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjhcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCdzdmcgY2lyY2xlJyksIHtcbiAgICAgICAgc3Ryb2tlRGFzaG9mZnNldDogJzExODEuMjRweCcsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjhcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsZWF2ZVBvc3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhdmVQb3N0KGUsIGEsIGVsKSB7XG4gICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZSBpbWcnKSwge1xuICAgICAgICBzY2FsZTogMS4xLFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICB9KTtcbiAgICAgIGdzYXAua2lsbFR3ZWVuc09mKFtlbC5xdWVyeVNlbGVjdG9yKCdzdmcnKSwgZWwucXVlcnlTZWxlY3Rvcignc3ZnIGNpcmNsZScpXSk7XG4gICAgICBnc2FwLnRvKGVsLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpLCB7XG4gICAgICAgIHJvdGF0aW9uOiAnMGRlZycsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjhcbiAgICAgIH0pO1xuICAgICAgZ3NhcC50byhlbC5xdWVyeVNlbGVjdG9yKCdzdmcgY2lyY2xlJyksIHtcbiAgICAgICAgc3Ryb2tlRGFzaG9mZnNldDogJzBweCcsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCcsXG4gICAgICAgIGR1cmF0aW9uOiAwLjhcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyYWZcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmFmKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH1dKTtcblxuICByZXR1cm4gUmVuZGVyZXJCbG9nO1xufShSZW5kZXJlcik7IC8vIERvbmB0IGZvcmdldCB0byBleHBvcnQgeW91ciByZW5kZXJlclxuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyQmxvZzsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG4vLyBHc2FwXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcbmltcG9ydCBTY3JvbGxUcmlnZ2VyIGZyb20gJ2dzYXAvU2Nyb2xsVHJpZ2dlcic7XG5nc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpOyAvLyBJbXBvcnQgUmVuZGVyZXJcblxuaW1wb3J0IFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIuanMnOyAvLyBpbXBvcnQgc3R5bGVzRGVmYXVsdCBmcm9tICcuL3N0eWxlc0RlZmF1bHQuY3NzJzsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4vLyBVdGlsaXRpZXNcblxuaW1wb3J0IERvbUV2ZW50cyBmcm9tICcuLi9jbGFzc2VzL2RvbUV2ZW50cyc7XG5pbXBvcnQgU3VwZXJTY3JvbGxlciBmcm9tICcuLi9jbGFzc2VzL3N1cGVyU2Nyb2xsZXInO1xuaW1wb3J0IERyYWdnYWJsZSBmcm9tICcuLi9jbGFzc2VzL0RyYWdnYWJsZSc7IC8vIE90aGVyXG4vLyBpbXBvcnQgU2xpZGVyIGZyb20gJy4uL2NsYXNzZXMvc2xpZGVyJztcbi8vIGltcG9ydCBTcGxpdFRleHQgZnJvbSAnLi4vY2xhc3Nlcy9zcGxpdFRleHQnO1xuXG52YXIgUmVuZGVyZXJCbG9nU2luZ2xlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVuZGVyZXIpIHtcbiAgX2luaGVyaXRzKFJlbmRlcmVyQmxvZ1NpbmdsZSwgX1JlbmRlcmVyKTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJlbmRlcmVyQmxvZ1NpbmdsZSk7XG5cbiAgZnVuY3Rpb24gUmVuZGVyZXJCbG9nU2luZ2xlKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZW5kZXJlckJsb2dTaW5nbGUpO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlbmRlcmVyQmxvZ1NpbmdsZSwgW3tcbiAgICBrZXk6IFwic2VsZWN0b3JzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdG9ycygpIHtcbiAgICAgIHRoaXMuJGZsZXggPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuYmxvZ3NpbmdsZV9fZmxleCcpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJldmVudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzKCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH0sIHtcbiAgICBrZXk6IFwiYmVmb3JlRW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlRW50ZXIoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJlbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbnRlcigpIHtcbiAgICAgIHRoaXMuaW5pdEdhbGxlcmllcygpO1xuICAgICAgdGhpcy5pbml0VmlkZW9zKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRHYWxsZXJpZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEdhbGxlcmllcygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuZ2FsbGVyaWVzID0gW107XG4gICAgICB0aGlzLiRnYWxsZXJpZXMgPSB0aGlzLiRmbGV4LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5Jyk7XG5cbiAgICAgIGlmICh0aGlzLiRnYWxsZXJpZXMpIHtcbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICAgIHZhciBpbWFnZXMgPSBfdGhpcy4kZ2FsbGVyaWVzWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbWFnZScpO1xuXG4gICAgICAgICAgdmFyIHJhdGlvID0gaW1hZ2VzWzBdLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tYXNwZWN0cmF0aW8nKTtcbiAgICAgICAgICBpZiAoX3RoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSBnc2FwLnNldChfdGhpcy4kZ2FsbGVyaWVzW2ldLCB7XG4gICAgICAgICAgICB3aWR0aDogMzAgKiByYXRpbyArICd2dydcbiAgICAgICAgICB9KTtlbHNlIGdzYXAuc2V0KF90aGlzLiRnYWxsZXJpZXNbaV0sIHtcbiAgICAgICAgICAgIHdpZHRoOiA3MCAqIHJhdGlvICsgJ3Z3J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBnYWxsZXJ5ID0gbmV3IERyYWdnYWJsZSh7XG4gICAgICAgICAgICB0YXJnZXQ6IF90aGlzLiRnYWxsZXJpZXNbaV0sXG4gICAgICAgICAgICB0YXJnZXRJbm5lcjogX3RoaXMuJGdhbGxlcmllc1tpXS5jaGlsZHJlblswXSxcbiAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24gb25EcmFnKCkge1xuICAgICAgICAgICAgICBnc2FwLnRvKF90aGlzLiRnYWxsZXJpZXNbaV0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmdhbGxlcmllc1tpXS5kcmFnZ2FibGVbMF0ueCAvIF90aGlzLmdhbGxlcmllc1tpXS5kcmFnZ2FibGVbMF0ubWluWFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIF90aGlzLmdhbGxlcmllcy5wdXNoKGdhbGxlcnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kZ2FsbGVyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgX2xvb3AoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFZpZGVvc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0VmlkZW9zKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMudmlkZW9zID0gW107XG4gICAgICB0aGlzLiR2aWRlb3MgPSB0aGlzLiRmbGV4LnF1ZXJ5U2VsZWN0b3JBbGwoJy52aWRlbycpO1xuXG4gICAgICBpZiAodGhpcy4kdmlkZW9zKSB7XG4gICAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoaSkge1xuICAgICAgICAgIF90aGlzMi5kb21FdmVudHMuYWRkKF90aGlzMi4kdmlkZW9zW2ldLnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fdHJpZ2dlcicpLCAnY2xpY2snLCBmdW5jdGlvbiAoZSwgYSwgZWwpIHtcbiAgICAgICAgICAgIGdzYXAudG8oX3RoaXMyLiR2aWRlb3NbaV0ucXVlcnlTZWxlY3RvcignLnZpZGVvX19vdmVybGF5JyksIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogMC4wMDAxLFxuICAgICAgICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMC44XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdzYXAudG8oX3RoaXMyLiR2aWRlb3NbaV0ucXVlcnlTZWxlY3RvcignLnZpZGVvX190cmlnZ2VyJyksIHtcbiAgICAgICAgICAgICAgc2NhbGU6IDAsXG4gICAgICAgICAgICAgIG9wYWNpdHk6IDAuMDAwMSxcbiAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDAuOFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfdGhpczIuJHZpZGVvc1tpXS5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3BsYXllcicpLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYWxsJztcblxuICAgICAgICAgICAgX3RoaXMyLiR2aWRlb3NbaV0ucXVlcnlTZWxlY3RvcignLnZpZGVvX19wbGF5ZXIgdmlkZW8nKS5zZXRBdHRyaWJ1dGUoJ2NvbnRyb2xzJywgJ2NvbnRyb2xzJyk7XG5cbiAgICAgICAgICAgIF90aGlzMi4kdmlkZW9zW2ldLnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fcGxheWVyIHZpZGVvJykucGxheSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kdmlkZW9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgX2xvb3AyKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJhZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByYWYoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfV0pO1xuXG4gIHJldHVybiBSZW5kZXJlckJsb2dTaW5nbGU7XG59KFJlbmRlcmVyKTsgLy8gRG9uYHQgZm9yZ2V0IHRvIGV4cG9ydCB5b3VyIHJlbmRlcmVyXG5cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyZXJCbG9nU2luZ2xlOyIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5cbi8vIEdzYXBcbmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnO1xuaW1wb3J0IFNjcm9sbFRyaWdnZXIgZnJvbSAnZ3NhcC9TY3JvbGxUcmlnZ2VyJztcbmdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVHJpZ2dlcik7IC8vIEltcG9ydCBSZW5kZXJlclxuXG5pbXBvcnQgUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlci5qcyc7IC8vIGltcG9ydCBzdHlsZXNEZWZhdWx0IGZyb20gJy4vc3R5bGVzRGVmYXVsdC5jc3MnOyAvL2VzbGludC1kaXNhYmxlLWxpbmVcbi8vIFV0aWxpdGllc1xuXG5pbXBvcnQgRG9tRXZlbnRzIGZyb20gJy4uL2NsYXNzZXMvZG9tRXZlbnRzJztcbmltcG9ydCBTdXBlclNjcm9sbGVyIGZyb20gJy4uL2NsYXNzZXMvc3VwZXJTY3JvbGxlcic7IC8vIE90aGVyXG4vLyBpbXBvcnQgU2xpZGVyIGZyb20gJy4uL2NsYXNzZXMvc2xpZGVyJztcbi8vIGltcG9ydCBTcGxpdFRleHQgZnJvbSAnLi4vY2xhc3Nlcy9zcGxpdFRleHQnO1xuXG52YXIgUmVuZGVyZXJDb250YWN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVuZGVyZXIpIHtcbiAgX2luaGVyaXRzKFJlbmRlcmVyQ29udGFjdCwgX1JlbmRlcmVyKTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJlbmRlcmVyQ29udGFjdCk7XG5cbiAgZnVuY3Rpb24gUmVuZGVyZXJDb250YWN0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZW5kZXJlckNvbnRhY3QpO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlbmRlcmVyQ29udGFjdCwgW3tcbiAgICBrZXk6IFwic2VsZWN0b3JzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdG9ycygpIHtcbiAgICAgIHRoaXMuJGhlcm8gPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdF9faGVybycpO1xuXG4gICAgICBpZiAodGhpcy4kaGVybykge1xuICAgICAgICB0aGlzLiRoZXJvUGluID0gdGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuc3ViY29sdW1uc19faXRlbS0tcGluJyk7XG4gICAgICAgIHRoaXMuJGhlcm9GaXggPSB0aGlzLiRoZXJvLnF1ZXJ5U2VsZWN0b3IoJy5zdWJjb2x1bW5zX19pdGVtLS1maXgnKTtcbiAgICAgICAgdGhpcy4kaGVyb1BhcmFsbGF4ID0gdGhpcy4kaGVyby5xdWVyeVNlbGVjdG9yKCcuc3ViY29sdW1uc19faXRlbS0tcGFyYWxsYXgnKTtcbiAgICAgIH1cbiAgICB9IC8vIHByZWxvYWQoKVxuICAgIC8vIHtcbiAgICAvLyAgICAgLy8gUHJlbG9hZGVyXG4gICAgLy8gICAgIGNvbnN0IF9tYWluID0gW107XG4gICAgLy8gICAgIGNvbnN0IF9zZWNvbmRhcnkgPSBbXTtcbiAgICAvLyAgICAgdGhpcy5wcmVsb2FkSXRlbXMgPSB7XG4gICAgLy8gICAgICAgICBtYWluOiBfbWFpbixcbiAgICAvLyAgICAgICAgIHNlY29uZGFyeTogX3NlY29uZGFyeVxuICAgIC8vICAgICB9O1xuICAgIC8vIH1cblxuICB9LCB7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVFbnRlcigpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICB9LCB7XG4gICAga2V5OiBcImVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyKCkge1xuICAgICAgdGhpcy5hcHBVaS4kaW5mb0NvbnRlbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImluZm8tc3ViamVjdFwiXScpLnZhbHVlID0gJ0luZm9ybWFjacOzbiBnZW5lcmFsJztcblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgIHRoaXMucGluU2lkZWJhcigpO1xuICAgICAgICB0aGlzLnBhcmFsbGF4U2lkZWJhcigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwaW5TaWRlYmFyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBpblNpZGViYXIoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy4kaGVyb1Bpbikge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy4kaGVyby5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSB0aGlzLiRoZXJvUGluLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAtIHRoaXMuJGhlcm9GaXguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC0gd2luZG93LmlubmVyV2lkdGggKiAwLjI1O1xuICAgICAgICB0aGlzLnN1cGVyVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgIHRyaWdnZXI6IHRoaXMuJGhlcm8sXG4gICAgICAgICAgc3RhcnQ6ICd0b3AgdG9wJyxcbiAgICAgICAgICBlbmQ6IG9mZnNldCArICdweCB0b3AnLFxuICAgICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbiBvblVwZGF0ZShzZWxmKSB7XG4gICAgICAgICAgICBnc2FwLnNldChfdGhpcy4kaGVyb1Bpbiwge1xuICAgICAgICAgICAgICB5OiBvZmZzZXQgKiBzZWxmLnByb2dyZXNzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwYXJhbGxheFNpZGViYXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyYWxsYXhTaWRlYmFyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLiRoZXJvUGFyYWxsYXgpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IC0od2luZG93LmlubmVyV2lkdGggKiAwLjA1KTtcbiAgICAgICAgdGhpcy5zdXBlclRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICB0cmlnZ2VyOiB0aGlzLiRoZXJvLFxuICAgICAgICAgIHN0YXJ0OiAndG9wIHRvcCcsXG4gICAgICAgICAgZW5kOiAnYm90dG9tIGJvdHRvbScsXG4gICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uIG9uVXBkYXRlKHNlbGYpIHtcbiAgICAgICAgICAgIGdzYXAuc2V0KF90aGlzMi4kaGVyb1BhcmFsbGF4LCB7XG4gICAgICAgICAgICAgIHk6IG9mZnNldCAqIHNlbGYucHJvZ3Jlc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJhZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByYWYoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfV0pO1xuXG4gIHJldHVybiBSZW5kZXJlckNvbnRhY3Q7XG59KFJlbmRlcmVyKTsgLy8gRG9uYHQgZm9yZ2V0IHRvIGV4cG9ydCB5b3VyIHJlbmRlcmVyXG5cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyZXJDb250YWN0OyIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5cbi8vIEFwcFxuaW1wb3J0IGFwcENvcmUgZnJvbSAnLi4vYXBwL2FwcENvcmUnO1xuaW1wb3J0IGFwcFN0b3JlIGZyb20gJy4uL2FwcC9hcHBTdG9yZSc7XG5pbXBvcnQgYXBwVWkgZnJvbSAnLi4vYXBwL2FwcFVpJzsgLy8gSGlnaHdheVxuXG5pbXBvcnQgSGlnaHdheSBmcm9tICdAZG9nc3R1ZGlvL2hpZ2h3YXknOyAvLyBQcmVsb2FkXG5cbmltcG9ydCBQcmVsb2FkIGZyb20gJ3ByZWxvYWQtaXQnOyAvLyBHU0FQIExpYnJhcnlcblxuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCc7XG5pbXBvcnQgZ3NhcENvcmUgZnJvbSAnZ3NhcC9nc2FwLWNvcmUnOyAvLyBUcmFuc2l0aW9uXG5cbnZhciBUcmFuc2l0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfSGlnaHdheSRUcmFuc2l0aW9uKSB7XG4gIF9pbmhlcml0cyhUcmFuc2l0aW9uLCBfSGlnaHdheSRUcmFuc2l0aW9uKTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFRyYW5zaXRpb24pO1xuXG4gIGZ1bmN0aW9uIFRyYW5zaXRpb24oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zaXRpb24pO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFRyYW5zaXRpb24sIFt7XG4gICAga2V5OiBcIm91dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvdXQoX3JlZikge1xuICAgICAgdmFyIGZyb20gPSBfcmVmLmZyb20sXG4gICAgICAgICAgZG9uZSA9IF9yZWYuZG9uZTtcbiAgICAgIC8vIFN0b3JlXG4gICAgICB0aGlzLmFwcFN0b3JlID0gYXBwU3RvcmU7IC8vIEFwcCByZWZlcmVuY2VzXG5cbiAgICAgIHRoaXMuYXBwQ29yZSA9IG5ldyBhcHBDb3JlKCk7XG4gICAgICB0aGlzLmFwcFVpID0gbmV3IGFwcFVpKCk7XG4gICAgICBpZiAodGhpcy5wcmVsb2FkTWFpbikgdGhpcy5wcmVsb2FkTWFpbi5jYW5jZWwoKTtcbiAgICAgIGlmICh0aGlzLnByZWxvYWRTZWNvbmRhcnkpIHRoaXMucHJlbG9hZFNlY29uZGFyeS5jYW5jZWwoKTsgLy8gT3V0IGFuaW1hdGlvblxuXG4gICAgICB0aGlzLm91dEFuaW1hdGlvbihmcm9tLCBkb25lKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib3V0QW5pbWF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG91dEFuaW1hdGlvbihmcm9tLCBkb25lKSB7XG4gICAgICBmcm9tLnJlbW92ZSgpO1xuICAgICAgZG9uZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfaW4oX3JlZjIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBmcm9tID0gX3JlZjIuZnJvbSxcbiAgICAgICAgICB0byA9IF9yZWYyLnRvLFxuICAgICAgICAgIGRvbmUgPSBfcmVmMi5kb25lO1xuICAgICAgLy8gU3RvcmVcbiAgICAgIHRoaXMuYXBwU3RvcmUgPSBhcHBTdG9yZTsgLy8gQXBwIHJlZmVyZW5jZXNcblxuICAgICAgdGhpcy5hcHBDb3JlID0gbmV3IGFwcENvcmUoKTtcbiAgICAgIHRoaXMuYXBwVWkgPSBuZXcgYXBwVWkoKTsgLy8gUHJlbG9hZGVyXG5cbiAgICAgIHRoaXMucHJlbG9hZE1haW4gPSBudWxsO1xuICAgICAgdGhpcy5wcmVsb2FkU2Vjb25kYXJ5ID0gbnVsbDtcbiAgICAgIHRoaXMucHJlbG9hZERlbGF5ID0gMDsgLy8gTGF6eSBsb2FkXG5cbiAgICAgIHRoaXMubGF6eUxvYWQgPSBudWxsOyAvLyBTZXQgYW5pbWF0aW9uXG5cbiAgICAgIHRoaXMuc2V0QW5pbWF0aW9uKGZyb20sIHRvKTtcbiAgICAgIHRoaXMucHJlbG9hZEl0ZW1zID0gdGhpcy5hcHBDb3JlLmhpZ2h3YXkuVG8ucHJlbG9hZEl0ZW1zO1xuXG4gICAgICBpZiAodGhpcy5wcmVsb2FkSXRlbXMubWFpbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBfcHJlbG9hZE9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgdGhpcy5wcmVsb2FkTWFpbiA9IFByZWxvYWQoKTtcbiAgICAgICAgdGhpcy5wcmVsb2FkTWFpbi5mZXRjaCh0aGlzLnByZWxvYWRJdGVtcy5tYWluKTsgLy8gdGhpcy5wcmVsb2FkTWFpbi5vbnByb2dyZXNzID0gKGV2ZW50KSA9PiB7IGNvbnNvbGUubG9nKCdQcmltYXJ5OiAnICsgZXZlbnQucHJvZ3Jlc3MgKyAnJScpOyB9O1xuXG4gICAgICAgIHRoaXMucHJlbG9hZE1haW4ub25jb21wbGV0ZSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgIHZhciBfcHJlbG9hZE9mZiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgICAgdmFyIF9wcmVsb2FkRGlmZmVyZW5jZSA9IChfcHJlbG9hZE9mZiAtIF9wcmVsb2FkT24pIC8gMTAwMDtcblxuICAgICAgICAgIHZhciBfcHJlbG9hZERlbGF5ID0gTWF0aC5tYXgoMCwgX3RoaXMucHJlbG9hZERlbGF5IC0gX3ByZWxvYWREaWZmZXJlbmNlKTtcblxuICAgICAgICAgIGdzYXAuZGVsYXllZENhbGwoX3ByZWxvYWREZWxheSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gSW4gYW5pbWF0aW9uXG4gICAgICAgICAgICBfdGhpcy5pbkFuaW1hdGlvbihmcm9tLCB0bywgZG9uZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRoaXMucHJlbG9hZEl0ZW1zLnNlY29uZGFyeS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5wcmVsb2FkU2Vjb25kYXJ5ID0gUHJlbG9hZCgpO1xuICAgICAgICAgIHRoaXMucHJlbG9hZFNlY29uZGFyeS5mZXRjaCh0aGlzLnByZWxvYWRJdGVtcy5zZWNvbmRhcnkpOyAvLyB0aGlzLnByZWxvYWRTZWNvbmRhcnkub25wcm9ncmVzcyA9IChldmVudCkgPT4geyBjb25zb2xlLmxvZygnU2Vjb25kYXJ5OiAnICsgZXZlbnQucHJvZ3Jlc3MgKyAnJScpOyB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnc2FwLmRlbGF5ZWRDYWxsKHRoaXMucHJlbG9hZERlbGF5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gSW4gYW5pbWF0aW9uXG4gICAgICAgICAgX3RoaXMuaW5BbmltYXRpb24oZnJvbSwgdG8sIGRvbmUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0QW5pbWF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFuaW1hdGlvbihmcm9tLCB0bykge30gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW5BbmltYXRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5BbmltYXRpb24oZnJvbSwgdG8sIGRvbmUpIHtcbiAgICAgIGRvbmUoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVHJhbnNpdGlvbjtcbn0oSGlnaHdheS5UcmFuc2l0aW9uKTtcblxuZXhwb3J0IGRlZmF1bHQgVHJhbnNpdGlvbjsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG4vLyBJbXBvcnQgVHJhbnNpdGlvblxuaW1wb3J0IFRyYW5zaXRpb24gZnJvbSAnLi90cmFuc2l0aW9uLmpzJzsgLy8gR1NBUCBMaWJyYXJ5XG5cbmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnOyAvLyBGYWRlXG5cbnZhciBUcmFuc2l0aW9uRmFkZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1RyYW5zaXRpb24pIHtcbiAgX2luaGVyaXRzKFRyYW5zaXRpb25GYWRlLCBfVHJhbnNpdGlvbik7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihUcmFuc2l0aW9uRmFkZSk7XG5cbiAgZnVuY3Rpb24gVHJhbnNpdGlvbkZhZGUoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zaXRpb25GYWRlKTtcblxuICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhUcmFuc2l0aW9uRmFkZSwgW3tcbiAgICBrZXk6IFwib3V0QW5pbWF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG91dEFuaW1hdGlvbihmcm9tLCBkb25lKSB7XG4gICAgICBnc2FwLmZyb21Ubyhmcm9tLCB7XG4gICAgICAgIG9wYWNpdHk6IDFcbiAgICAgIH0sIHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICBmcm9tLnJlbW92ZSgpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluQW5pbWF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluQW5pbWF0aW9uKGZyb20sIHRvLCBkb25lKSB7XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgIGRvbmUoKTtcbiAgICAgIGdzYXAudG8odG8sIHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgZHVyYXRpb246IDAuOFxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFRyYW5zaXRpb25GYWRlO1xufShUcmFuc2l0aW9uKTtcblxuZXhwb3J0IGRlZmF1bHQgVHJhbnNpdGlvbkZhZGU7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuLy8gSW1wb3J0IFRyYW5zaXRpb25cbmltcG9ydCBUcmFuc2l0aW9uIGZyb20gJy4vdHJhbnNpdGlvbi5qcyc7IC8vIEdTQVAgTGlicmFyeVxuXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJzsgLy8gTWFza1xuXG52YXIgVHJhbnNpdGlvbk1hc2sgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9UcmFuc2l0aW9uKSB7XG4gIF9pbmhlcml0cyhUcmFuc2l0aW9uTWFzaywgX1RyYW5zaXRpb24pO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoVHJhbnNpdGlvbk1hc2spO1xuXG4gIGZ1bmN0aW9uIFRyYW5zaXRpb25NYXNrKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmFuc2l0aW9uTWFzayk7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVHJhbnNpdGlvbk1hc2ssIFt7XG4gICAga2V5OiBcIm91dEFuaW1hdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvdXRBbmltYXRpb24oZnJvbSwgZG9uZSkge1xuICAgICAgZ3NhcC5zZXQodGhpcy5hcHBVaS4kbWFzaywge1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG4gICAgICB9KTtcbiAgICAgIGdzYXAuZnJvbVRvKHRoaXMuYXBwVWkuJG1hc2suY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgeTogJy0xMDAlJ1xuICAgICAgfSwge1xuICAgICAgICB5OiAnMCUnLFxuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8uaW4nLFxuICAgICAgICBkZWxheTogdGhpcy5hcHBVaS5oZWFkZXIuaXNPcGVuID8gMC44IDogMCxcbiAgICAgICAgb25TdGFydDogZnVuY3Rpb24gb25TdGFydCgpIHtcbiAgICAgICAgICBnc2FwLnRvKGZyb20sIHtcbiAgICAgICAgICAgIHk6ICc1dncnLFxuICAgICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICBmcm9tLnJlbW92ZSgpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluQW5pbWF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluQW5pbWF0aW9uKGZyb20sIHRvLCBkb25lKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBnc2FwLnNldCh0aGlzLmFwcFVpLiRsb2dvLCB7XG4gICAgICAgIHk6IDBcbiAgICAgIH0pO1xuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICBkb25lKCk7XG4gICAgICBnc2FwLnRvKHRoaXMuYXBwVWkuJG1hc2suY2hpbGRyZW5bMF0sIHtcbiAgICAgICAgeTogJzEwMCUnLFxuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcbiAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHtcbiAgICAgICAgICBnc2FwLnNldChfdGhpcy5hcHBVaS4kbWFzaywge1xuICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBUcmFuc2l0aW9uTWFzaztcbn0oVHJhbnNpdGlvbik7XG5cbmV4cG9ydCBkZWZhdWx0IFRyYW5zaXRpb25NYXNrOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuLy8gYXBwXG5pbXBvcnQgYXBwU3RvcmUgZnJvbSAnLi9hcHBTdG9yZSc7XG5pbXBvcnQgYXBwVWkgZnJvbSAnLi9hcHBVaSc7IC8vIGNsYXNzZXNcblxuaW1wb3J0IGRvbUV2ZW50cyBmcm9tICcuLi9jbGFzc2VzL2RvbUV2ZW50cyc7IC8vIEhpZ2h3YXlcblxuaW1wb3J0IEhpZ2h3YXkgZnJvbSAnQGRvZ3N0dWRpby9oaWdod2F5JzsgLy8gZ3NhcFxuXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJzsgLy8gSW1wb3J0IFJlbmRlcmVyc1xuLy8gaW1wb3J0IFJlbmRlcmVyIGZyb20gJy4uL3JlbmRlcmVycy9yZW5kZXJlcic7XG5cbmltcG9ydCBSZW5kZXJlckRlZmF1bHQgZnJvbSAnLi4vcmVuZGVyZXJzL3JlbmRlcmVyRGVmYXVsdCc7XG5pbXBvcnQgUmVuZGVyZXJIb21lIGZyb20gJy4uL3JlbmRlcmVycy9yZW5kZXJlckhvbWUnO1xuaW1wb3J0IFJlbmRlcmVyQWJvdXQgZnJvbSAnLi4vcmVuZGVyZXJzL3JlbmRlcmVyQWJvdXQnO1xuaW1wb3J0IFJlbmRlcmVyUGhpbG9zb3BoeSBmcm9tICcuLi9yZW5kZXJlcnMvcmVuZGVyZXJQaGlsb3NvcGh5JztcbmltcG9ydCBSZW5kZXJlclByb21vdGlvbnMgZnJvbSAnLi4vcmVuZGVyZXJzL3JlbmRlcmVyUHJvbW90aW9ucyc7XG5pbXBvcnQgUmVuZGVyZXJQcm9tb3Rpb25zU2luZ2xlIGZyb20gJy4uL3JlbmRlcmVycy9yZW5kZXJlclByb21vdGlvbnNTaW5nbGUnO1xuaW1wb3J0IFJlbmRlcmVyTWFzdGVyd29ya3MgZnJvbSAnLi4vcmVuZGVyZXJzL3JlbmRlcmVyTWFzdGVyd29ya3MnO1xuaW1wb3J0IFJlbmRlcmVyQmxvZyBmcm9tICcuLi9yZW5kZXJlcnMvcmVuZGVyZXJCbG9nJztcbmltcG9ydCBSZW5kZXJlckJsb2dTaW5nbGUgZnJvbSAnLi4vcmVuZGVyZXJzL3JlbmRlcmVyQmxvZ1NpbmdsZSc7XG5pbXBvcnQgUmVuZGVyZXJDb250YWN0IGZyb20gJy4uL3JlbmRlcmVycy9SZW5kZXJlckNvbnRhY3QnOyAvLyBJbXBvcnQgVHJhbnNpdGlvbnNcblxuaW1wb3J0IFRyYW5zaXRpb25GYWRlIGZyb20gJy4uL3RyYW5zaXRpb25zL3RyYW5zaXRpb25GYWRlJztcbmltcG9ydCBUcmFuc2l0aW9uTWFzayBmcm9tICcuLi90cmFuc2l0aW9ucy90cmFuc2l0aW9uTWFzayc7XG5pbXBvcnQgZ3NhcENvcmUgZnJvbSAnZ3NhcC9nc2FwLWNvcmUnO1xudmFyIF9zaW5nbGV0b24gPSBudWxsO1xuXG52YXIgYXBwQ29yZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGFwcENvcmUoZGF0YSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBhcHBDb3JlKTtcblxuICAgIGlmICghX3NpbmdsZXRvbikge1xuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgIF9zaW5nbGV0b24gPSB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gX3NpbmdsZXRvbjtcbiAgICB9IC8vIGNvbnNvbGUubG9nKCdDb25zdHJ1Y3RvciBkZSBhcHBDb3JlJyk7XG4gICAgLy8gc3RvcmVcblxuXG4gICAgdGhpcy5hcHBTdG9yZSA9IGFwcFN0b3JlOyAvLyBhcHAgcmVmZXJlbmNlc1xuXG4gICAgdGhpcy5hcHBVaSA9IG5ldyBhcHBVaSgpOyAvLyBFdmVudHNcblxuICAgIHRoaXMuZG9tRXZlbnRzID0gbmV3IGRvbUV2ZW50cygpOyAvLyBIaWdod2F5IGNvcmVcblxuICAgIHRoaXMuaGlnaHdheSA9IG51bGw7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoYXBwQ29yZSwgW3tcbiAgICBrZXk6IFwiaW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgLy8gQ2FsbCBIaWdod2F5LkNvcmUgb25jZS5cbiAgICAgIHRoaXMuaGlnaHdheSA9IG5ldyBIaWdod2F5LkNvcmUoe1xuICAgICAgICByZW5kZXJlcnM6IHtcbiAgICAgICAgICBob21lOiBSZW5kZXJlckhvbWUsXG4gICAgICAgICAgcHJvbW90aW9uczogUmVuZGVyZXJQcm9tb3Rpb25zLFxuICAgICAgICAgIHByb21vdGlvbnNzaW5nbGU6IFJlbmRlcmVyUHJvbW90aW9uc1NpbmdsZSxcbiAgICAgICAgICBhYm91dDogUmVuZGVyZXJBYm91dCxcbiAgICAgICAgICBwaGlsb3NvcGh5OiBSZW5kZXJlclBoaWxvc29waHksXG4gICAgICAgICAgbWFzdGVyd29ya3M6IFJlbmRlcmVyTWFzdGVyd29ya3MsXG4gICAgICAgICAgYmxvZzogUmVuZGVyZXJCbG9nLFxuICAgICAgICAgIGJsb2dzaW5nbGU6IFJlbmRlcmVyQmxvZ1NpbmdsZSxcbiAgICAgICAgICBjb250YWN0OiBSZW5kZXJlckNvbnRhY3QsXG4gICAgICAgICAgXCJkZWZhdWx0XCI6IFJlbmRlcmVyRGVmYXVsdFxuICAgICAgICB9LFxuICAgICAgICB0cmFuc2l0aW9uczoge1xuICAgICAgICAgIFwiZGVmYXVsdFwiOiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCA/IFRyYW5zaXRpb25NYXNrIDogVHJhbnNpdGlvbkZhZGVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmhpZ2h3YXkub24oJ05BVklHQVRFX09VVCcsIGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBmcm9tID0gX3JlZi5mcm9tLFxuICAgICAgICAgICAgdHJpZ2dlciA9IF9yZWYudHJpZ2dlcixcbiAgICAgICAgICAgIGxvY2F0aW9uID0gX3JlZi5sb2NhdGlvbjtcblxuICAgICAgICBfdGhpcy5uYXZpZ2F0ZU91dChmcm9tLCB0cmlnZ2VyLCBsb2NhdGlvbik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuaGlnaHdheS5vbignTkFWSUdBVEVfSU4nLCBmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgICAgdmFyIHRvID0gX3JlZjIudG8sXG4gICAgICAgICAgICB0cmlnZ2VyID0gX3JlZjIudHJpZ2dlcixcbiAgICAgICAgICAgIGxvY2F0aW9uID0gX3JlZjIubG9jYXRpb247XG5cbiAgICAgICAgX3RoaXMubmF2aWdhdGVJbih0bywgdHJpZ2dlciwgbG9jYXRpb24pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmhpZ2h3YXkub24oJ05BVklHQVRFX0VORCcsIGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICB2YXIgdG8gPSBfcmVmMy50byxcbiAgICAgICAgICAgIGZyb20gPSBfcmVmMy5mcm9tLFxuICAgICAgICAgICAgdHJpZ2dlciA9IF9yZWYzLnRyaWdnZXIsXG4gICAgICAgICAgICBsb2NhdGlvbiA9IF9yZWYzLmxvY2F0aW9uO1xuXG4gICAgICAgIF90aGlzLm5hdmlnYXRlRW5kKHRvLCBmcm9tLCB0cmlnZ2VyLCBsb2NhdGlvbik7XG4gICAgICB9KTsgLy8gQ29va2llIGxpbmtzXG5cbiAgICAgIHZhciBjb29raWVMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nvb2tpZS1sYXctaW5mby1iYXIgLmNvb2tpZV9hY3Rpb25fY2xvc2VfaGVhZGVyJyk7XG5cbiAgICAgIGlmIChjb29raWVMaW5rKSB7XG4gICAgICAgIGNvb2tpZUxpbmsuaHJlZiA9ICdqYXZhc2NyaXB0OnZvaWQoMCk7JztcbiAgICAgICAgY29va2llTGluay5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm91dGVyLWRpc2FibGVkJywgJycpOyAvL3RoaXMuaGlnaHdheS5kZXRhY2goY29va2llTGluayk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5hdmlnYXRlU3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbmF2aWdhdGVTdGFydCgpIHtcbiAgICAgIC8vIFN0YXJ0IG5hdmlnYXRpb24gb24gMFxuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICBpZiAoaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbikgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9ICdtYW51YWwnOyAvLyBTaG93IHN1Ym1lbnUgb24gaG9tZXBhZ2VcblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuY3VycmVudCA9PT0gJ2hvbWUnICYmIHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB0aGlzLmFwcFVpLnRyaWdnZXJTdWJtZW51KHRydWUpOyAvLyBQb3NpdGlvbiB0aGUgbWVudSBvbiBwcm9tb3Rpb25TaW5nbGVcblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuY3VycmVudCA9PT0gJ3Byb21vdGlvbnNzaW5nbGUnICYmIHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSBnc2FwLnNldChbdGhpcy5hcHBVaS4kaGVhZGVyXSwge1xuICAgICAgICB5OiAnLTIuNXZ3J1xuICAgICAgfSk7ZWxzZSBnc2FwLnNldChbdGhpcy5hcHBVaS4kaGVhZGVyXSwge1xuICAgICAgICB5OiAnMHZ3J1xuICAgICAgfSk7IC8vIFF1ZXJ5IGFkbWluIGJhciBsaW5rcywgYW5kIG5ldyBwYWdlJ3MgYWRtaW4gYmFyIGxpbmtzXG5cbiAgICAgIHZhciBsYW5ndWFnZUxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2hlYWRlciAubWVudS1pdGVtLW9iamVjdC1sYW5ndWFnZV9zd2l0Y2hlciBhJyk7XG5cbiAgICAgIGlmIChsYW5ndWFnZUxpbmtzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFuZ3VhZ2VMaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxhbmd1YWdlTGlua3NbaV0uc2V0QXR0cmlidXRlKCdkYXRhLXJvdXRlci1kaXNhYmxlZCcsICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGlnaHdheS5kZXRhY2gobGFuZ3VhZ2VMaW5rcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5hdmlnYXRlT3V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG5hdmlnYXRlT3V0KGZyb20sIHRyaWdnZXIsIGxvY2F0aW9uKSB7XG4gICAgICB0aGlzLmFwcFN0b3JlLmZyb20gPSBmcm9tLnZpZXcuZGF0YXNldC5yb3V0ZXJWaWV3OyAvLyBTaG93IHN1Ym1lbnUgb24gaG9tZXBhZ2VcblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuZnJvbSA9PT0gJ2hvbWUnICYmIHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB0aGlzLmFwcFVpLnRyaWdnZXJTdWJtZW51KGZhbHNlKTtcbiAgICAgIGlmICh0aGlzLmFwcFVpLmhlYWRlci5pc09wZW4pIHRoaXMuYXBwVWkudHJpZ2dlck1lbnUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibmF2aWdhdGVJblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBuYXZpZ2F0ZUluKHRvLCB0cmlnZ2VyLCBsb2NhdGlvbikge1xuICAgICAgdGhpcy5hcHBTdG9yZS50byA9IHRvLnZpZXcuZGF0YXNldC5yb3V0ZXJWaWV3OyAvLyBTaG93IHN1Ym1lbnUgb24gaG9tZXBhZ2VcblxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUudG8gPT09ICdob21lJyAmJiB0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkgdGhpcy5hcHBVaS50cmlnZ2VyU3VibWVudSh0cnVlKTsgLy8gUG9zaXRpb24gdGhlIG1lbnUgb24gcHJvbW90aW9uU2luZ2xlXG5cbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLnRvID09PSAncHJvbW90aW9uc3NpbmdsZScgJiYgdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3ApIGdzYXAudG8odGhpcy5hcHBVaS4kaGVhZGVyLCB7XG4gICAgICAgIHk6ICctMi41dncnLFxuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgZWFzZTogJ2V4cG8ub3V0J1xuICAgICAgfSk7ZWxzZSBnc2FwLnRvKHRoaXMuYXBwVWkuJGhlYWRlciwge1xuICAgICAgICB5OiAnMHZ3JyxcbiAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgIGVhc2U6ICdleHBvLm91dCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJuYXZpZ2F0ZUVuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBuYXZpZ2F0ZUVuZCh0bywgZnJvbSwgdHJpZ2dlciwgbG9jYXRpb24pIHtcbiAgICAgIHRoaXMuYXBwU3RvcmUudG8gPSB0by52aWV3LmRhdGFzZXQucm91dGVyVmlldzsgLy8gUmVtb3ZlIGFjdGl2ZSBpdGVtXG5cbiAgICAgIGlmICh0aGlzLmFwcFVpLiRoZWFkZXIucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpKSB0aGlzLmFwcFVpLiRoZWFkZXIucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOyAvLyBBZGQgYWN0aXZlIGl0ZW1cblxuICAgICAgaWYgKHRoaXMuYXBwVWkuJGhlYWRlci5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtLS0nICsgdGhpcy5hcHBTdG9yZS50bykpIHRoaXMuYXBwVWkuJGhlYWRlci5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtLS0nICsgdGhpcy5hcHBTdG9yZS50bykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IC8vIFNldCBjbGFzc2VzXG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdG8ucGFnZS5ib2R5LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSk7IC8vIC8vIFF1ZXJ5IGFkbWluIGJhciBsaW5rcywgYW5kIG5ldyBwYWdlJ3MgYWRtaW4gYmFyIGxpbmtzXG4gICAgICAvLyBjb25zdCBvbGRMYW5ndWFnZUxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2hlYWRlciBhJyk7XG4gICAgICAvLyBjb25zdCBuZXdMYW5ndWFnZUxpbmtzID0gdG8ucGFnZS5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJyNoZWFkZXIgYScpO1xuICAgICAgLy8gLy8gUmVwbGFjZSBldmVyeSBhZG1pbiBiYXIgbGluaydzIGhyZWYgdmFsdWUgd2l0aCBuZXcgdmFsdWVcbiAgICAgIC8vIGlmKG9sZExhbmd1YWdlTGlua3MpXG4gICAgICAvLyB7XG4gICAgICAvLyAgICAgZm9yKGxldCBpID0gMDsgaSA8IG5ld0xhbmd1YWdlTGlua3MubGVuZ3RoOyBpKyspXG4gICAgICAvLyAgICAge1xuICAgICAgLy8gICAgICAgICBvbGRMYW5ndWFnZUxpbmtzW2ldLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdjbGFzcycsIG5ld0xhbmd1YWdlTGlua3NbaV0ucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpO1xuICAgICAgLy8gICAgICAgICBvbGRMYW5ndWFnZUxpbmtzW2ldLmhyZWYgPSBuZXdMYW5ndWFnZUxpbmtzW2ldLmhyZWY7XG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICAgIC8vIERldGFjaCBhZG1pbiBiYXIgbGlua3MgZnJvbSBIaWdod2F5IHRyYW5zaXRpb25zXG4gICAgICAvLyAgICAgdGhpcy5oaWdod2F5LmRldGFjaChvbGRMYW5ndWFnZUxpbmtzKTtcbiAgICAgIC8vIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2VsZWN0b3JzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdG9ycygpIHsvLyBHZXQgYWxsIG1lbnUgbWVudUxpbmtzXG4gICAgICAvLyB0aGlzLiRtZW51TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVudSB1bCBhJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmVudHMoKSB7Ly8gZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLiRtZW51TGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vICAgICB0aGlzLmRvbUV2ZW50cy5hZGQodGhpcy4kbWVudUxpbmtzW2ldLCAnbW91c2VlbnRlcicsIChlLCBhLCBlbCkgPT4geyB0aGlzLmFwcFVpLm1lbnVFbnRlcihlLCBhLCBlbCk7IH0sIHRoaXMpO1xuICAgICAgLy8gICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh0aGlzLiRtZW51TGlua3NbaV0sICdtb3VzZWxlYXZlJywgKGUsIGEsIGVsKSA9PiB7IHRoaXMuYXBwVWkubWVudUxlYXZlKGUsIGEsIGVsKTsgfSwgdGhpcyk7XG4gICAgICAvLyB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUod2lkdGgsIGhlaWdodCkgey8vIGNvbnNvbGUubG9nKCdSZXNpemUgYXBwQ29yZTonLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIC8vICB0aGlzLmhpZ2h3YXkuSGVscGVycy5yZW5kZXJlcnNbdGhpcy5oaWdod2F5LnByb3BlcnRpZXMuc2x1Z10ucHJvdG90eXBlLnJlc2l6ZSgpO1xuICAgICAgLy8gY29uc29sZS5sb2codGhpcy5oaWdod2F5LkhlbHBlcnMucmVuZGVyZXJzLmxvY2FsZXMucHJvdG90eXBlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzaXplT3JpZW50YXRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplT3JpZW50YXRpb24oKSB7Ly8gZ3NhcC50byhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsgb3BhY2l0eTogMC4wMDAxLCBkdXJhdGlvbjogMC42LCBlYXNlOiAncG93ZXIyLm91dCcsIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgIC8vICAgICBnc2FwLnRvKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgeyBvcGFjaXR5OiAxLCBkdXJhdGlvbjogMC42LCBlYXNlOiAncG93ZXIyLm91dCcgfSk7XG4gICAgICAvLyB9fSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIGFwcENvcmU7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcENvcmU7IiwiLy9Db3B5cmlnaHQgMjAxOCBWaWNlbnRlIEx1Y2VuZG8gLSB2aWNlbkB2bHVjZW5kby5jb21cbi8vc2ltcGxlIGRlYm91bmNlIHdpdGggY2FsbGJhY2tcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChjYWxsYmFjaywgZGVsYXkpIHtcbiAgdmFyIHRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSk7XG4gIH07XG59XG47IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vLyBjc3NcbmltcG9ydCBjc3MgZnJvbSAnLi4vLi4vY3NzL3N0eWxlcy5jc3MnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4vLyBhcHBcblxuaW1wb3J0IGFwcFN0b3JlIGZyb20gJy4vYXBwU3RvcmUnO1xuaW1wb3J0IGFwcENvcmUgZnJvbSAnLi9hcHBDb3JlJztcbmltcG9ydCBhcHBVaSBmcm9tICcuL2FwcFVpJzsgLy8gY2xhc3Nlc1xuXG5pbXBvcnQgZG9tRXZlbnRzIGZyb20gJy4uL2NsYXNzZXMvZG9tRXZlbnRzJzsgLy8gZ3NhcFxuXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJzsgLy8gdXRpbHNcblxuaW1wb3J0IERlYm91bmNlIGZyb20gJy4uL3V0aWxzL2RlYm91bmNlJztcbmltcG9ydCBCb3dzZXIgZnJvbSAnYm93c2VyJztcblxudmFyIEFwcGxpY2F0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQXBwbGljYXRpb24ob3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHBsaWNhdGlvbik7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQ29uc3RydWN0b3IgZGUgYXBwJyk7XG4gICAgLy8gc3RvcmVcbiAgICB0aGlzLmFwcFN0b3JlID0gYXBwU3RvcmU7IC8vIGFwcCByZWZlcmVuY2VzXG5cbiAgICB0aGlzLmFwcENvcmUgPSBuZXcgYXBwQ29yZSgpO1xuICAgIHRoaXMuYXBwVWkgPSBuZXcgYXBwVWkoKTsgLy8gRXZlbnRzXG5cbiAgICB0aGlzLmRvbUV2ZW50cyA9IG5ldyBkb21FdmVudHMoKTsgLy8gZ2V0IGN1cnJlbnQgdXJsXG5cbiAgICB0aGlzLmFwcFN0b3JlLnJvb3RVcmwgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8gJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0OyAvLyBnZXQgY2xpZW50IGluZm9cblxuICAgIHZhciBjbGllbnRJbmZvID0gQm93c2VyLmdldFBhcnNlcih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkucGFyc2VkUmVzdWx0O1xuICAgIHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wID0gISh3aW5kb3cuaW5uZXJXaWR0aCA8IDEwMjMgfHwgd2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgIHRoaXMuc2V0T1MoY2xpZW50SW5mbyk7XG4gICAgdGhpcy5zZXREZXZpY2UoY2xpZW50SW5mbyk7XG4gICAgdGhpcy5zZXRPcmllbnRhdGlvbigpO1xuICAgIHRoaXMuYWRkQ2xhc3NlcygpO1xuICAgIHRoaXMuc2F5SGVsbG8oKTtcbiAgICB0aGlzLmNoZWNrRWxlbWVudHMoKTtcbiAgICB0aGlzLnNlbGVjdG9ycygpO1xuICAgIHRoaXMuZXZlbnRzKCk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQXBwbGljYXRpb24sIFt7XG4gICAga2V5OiBcInNldE9TXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldE9TKGNsaWVudEluZm8pIHtcbiAgICAgIHZhciBvcyA9IGNsaWVudEluZm8ub3MubmFtZS50b0xvd2VyQ2FzZSgpOyAvLyBkZXRlY3QgbWFjIGFuZCBpb3MsIGRlZmF1bHQgd2luZG93c1xuXG4gICAgICBzd2l0Y2ggKG9zKSB7XG4gICAgICAgIGNhc2UgJ21hY29zJzpcbiAgICAgICAgICB0aGlzLmFwcFN0b3JlLmNsaWVudC5vcyA9ICdtYWMnO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2lvcyc6XG4gICAgICAgICAgdGhpcy5hcHBTdG9yZS5jbGllbnQub3MgPSAnaW9zJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuYXBwU3RvcmUuY2xpZW50Lm9zID0gJ3dpbmRvd3MnO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXREZXZpY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGV2aWNlKGNsaWVudEluZm8pIHtcbiAgICAgIC8vIGdldCBkZXZpY2VcbiAgICAgIHRoaXMuYXBwU3RvcmUuY2xpZW50LmRldmljZSA9IGNsaWVudEluZm8ucGxhdGZvcm0udHlwZSA9PT0gJ2Rlc2t0b3AnID8gJ2Rlc2t0b3AnIDogJ21vYmlsZSc7IC8vIGRldGVjdCBicm93c2VyIChvbmx5IHRoZSBtYWpvciBvbmVzLCBkZWZhdWx0IGlzIGNocm9tZSlcblxuICAgICAgc3dpdGNoIChjbGllbnRJbmZvLmJyb3dzZXIubmFtZSkge1xuICAgICAgICBjYXNlICdJbnRlcm5ldCBFeHBsb3Jlcic6XG4gICAgICAgICAgdGhpcy5hcHBTdG9yZS5jbGllbnQuYnJvd3NlciA9ICdleHBsb3Jlcic7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnTWljcm9zb2Z0IEVkZ2UnOlxuICAgICAgICAgIHRoaXMuYXBwU3RvcmUuY2xpZW50LmJyb3dzZXIgPSAnZWRnZSc7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnRmlyZWZveCc6XG4gICAgICAgICAgdGhpcy5hcHBTdG9yZS5jbGllbnQuYnJvd3NlciA9ICdmaXJlZm94JztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdTYWZhcmknOlxuICAgICAgICAgIHRoaXMuYXBwU3RvcmUuY2xpZW50LmJyb3dzZXIgPSAnc2FmYXJpJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuYXBwU3RvcmUuY2xpZW50LmJyb3dzZXIgPSAnY2hyb21lJztcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0T3JpZW50YXRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T3JpZW50YXRpb24oKSB7XG4gICAgICB0aGlzLmFwcFN0b3JlLmNsaWVudC5vcmllbnRhdGlvbiA9IHRoaXMuYXBwU3RvcmUuY2xpZW50LnNpemVzLndpZHRoID4gdGhpcy5hcHBTdG9yZS5jbGllbnQuc2l6ZXMuaGVpZ2h0ID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkQ2xhc3Nlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDbGFzc2VzKCkge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5hcHBTdG9yZS5jbGllbnQuZGV2aWNlKTtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuYXBwU3RvcmUuY2xpZW50Lm9zKTtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuYXBwU3RvcmUuY2xpZW50LmJyb3dzZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzYXlIZWxsb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzYXlIZWxsbygpIHtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmNsaWVudC5icm93c2VyID09PSAnY2hyb21lJyB8fCB0aGlzLmFwcFN0b3JlLmNsaWVudC5icm93c2VyID09PSAnZmlyZWZveCcpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbJ1xcbiVjIERldmVsb3BlZCB3aXRoIOKZpSBieSBEZ3JlZXPCriAtIGh0dHBzOi8vIGRncmVlcy5zdHVkaW8gJWNcXG4nLCAnZGlzcGxheTogYmxvY2s7IHBhZGRpbmc6IDVweCAxMHB4OyBiYWNrZ3JvdW5kOiAjMDAwMDIyOyBsaW5lLWhlaWdodDogNDBweDsgY29sb3I6ICNmZmZmZmY7JywgJ2JhY2tncm91bmQ6ICNmZmY7J107XG4gICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygnRGV2ZWxvcGVkIGJ5IERncmVlc8KuJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNoZWNrRWxlbWVudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tFbGVtZW50cygpIHtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmlzRGVza3RvcCkge1xuICAgICAgICB0aGlzLiRlbGVtZW50c01vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vYmlsZV0nKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJGVsZW1lbnRzTW9iaWxlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy4kZWxlbWVudHNNb2JpbGVbaV0ucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJGVsZW1lbnRzRGVza3RvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWRlc2t0b3BdJyk7XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMuJGVsZW1lbnRzRGVza3RvcC5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICB0aGlzLiRlbGVtZW50c0Rlc2t0b3BbX2ldLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNlbGVjdG9yc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RvcnMoKSB7XG4gICAgICB0aGlzLmFwcENvcmUuc2VsZWN0b3JzKCk7XG4gICAgICB0aGlzLmFwcFVpLnNlbGVjdG9ycygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJldmVudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRzKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgLy8gYmluZCBkZWJvdW5jZWQgcmVzaXplXG4gICAgICB0aGlzLmRvbUV2ZW50cy5hZGQod2luZG93LCAncmVzaXplJywgRGVib3VuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5yZXNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICB9LCAxNTApKTtcbiAgICAgIHZhciBvcmllbnRhdGlvbkV2ZW50ID0gJ29ub3JpZW50YXRpb25jaGFuZ2UnIGluIHdpbmRvdyA/ICdvcmllbnRhdGlvbmNoYW5nZScgOiAncmVzaXplJztcbiAgICAgIHRoaXMuZG9tRXZlbnRzLmFkZCh3aW5kb3csIG9yaWVudGF0aW9uRXZlbnQsIERlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMucmVzaXplT3JpZW50YXRpb24od2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICB9LCAxNTApKTtcbiAgICAgIHRoaXMuYXBwQ29yZS5ldmVudHMoKTtcbiAgICAgIHRoaXMuYXBwVWkuZXZlbnRzKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHRoaXMuYXBwQ29yZS5pbml0KCk7XG4gICAgICB0aGlzLmFwcFVpLmluaXQoKTtcbiAgICAgIHZhciB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBcIlwiLmNvbmNhdCh2aCwgXCJweFwiKSk7XG4gICAgICB0aGlzLnJlc2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAvLyBGaXJzdCB3ZSBnZXQgdGhlIHZpZXdwb3J0IGhlaWdodCBhbmQgd2UgbXVsdGlwbGUgaXQgYnkgMSUgdG8gZ2V0IGEgdmFsdWUgZm9yIGEgdmggdW5pdFxuICAgICAgaWYgKHRoaXMuYXBwU3RvcmUuaXNEZXNrdG9wKSB7XG4gICAgICAgIHZhciB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIFwiXCIuY29uY2F0KHZoLCBcInB4XCIpKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hcHBTdG9yZS5pc0Rlc2t0b3AgPSAhKHdpbmRvdy5pbm5lcldpZHRoIDwgMTAyMyB8fCB3aW5kb3cuaW5uZXJXaWR0aCA8IHdpbmRvdy5pbm5lckhlaWdodCk7IC8vIHNldCBzaXplIHZhcnNcblxuICAgICAgdGhpcy5hcHBTdG9yZS5jbGllbnQuc2l6ZXMud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuYXBwU3RvcmUuY2xpZW50LnNpemVzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIHRoaXMuYXBwQ29yZS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICB0aGlzLmFwcFVpLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIGlmICh0aGlzLmFwcFN0b3JlLmN1cnJlbnRTZWN0aW9uICE9PSBudWxsKSB0aGlzLmFwcFN0b3JlLmN1cnJlbnRTZWN0aW9uLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTsgLy8gLy8gQ2hlY2sgb3JpZW50YXRpb25cbiAgICAgIC8vIGNvbnN0IG5ld09yaWVudGF0aW9uID0gdGhpcy5hcHBTdG9yZS5jbGllbnQuc2l6ZXMud2lkdGggPiB0aGlzLmFwcFN0b3JlLmNsaWVudC5zaXplcy5oZWlnaHQgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnO1xuICAgICAgLy8gaWYobmV3T3JpZW50YXRpb24gIT09IHRoaXMuYXBwU3RvcmUuY2xpZW50Lm9yaWVudGF0aW9uKVxuICAgICAgLy8gICAgIHRoaXMucmVzaXplT3JpZW50YXRpb24od2lkdGgsIGhlaWdodCwgbmV3T3JpZW50YXRpb24pO1xuICAgICAgLy8gdGhpcy5hcHBTdG9yZS5jbGllbnQub3JpZW50YXRpb24gPSBuZXdPcmllbnRhdGlvbjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzaXplT3JpZW50YXRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplT3JpZW50YXRpb24od2lkdGgsIGhlaWdodCwgb3JpZW50YXRpb24pIHtcbiAgICAgIHZhciB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBcIlwiLmNvbmNhdCh2aCwgXCJweFwiKSk7IC8vIENoZWNrIG9yaWVudGF0aW9uXG5cbiAgICAgIHZhciBuZXdPcmllbnRhdGlvbiA9IHRoaXMuYXBwU3RvcmUuY2xpZW50LnNpemVzLndpZHRoID4gdGhpcy5hcHBTdG9yZS5jbGllbnQuc2l6ZXMuaGVpZ2h0ID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICAgIHRoaXMuYXBwU3RvcmUuY2xpZW50Lm9yaWVudGF0aW9uID0gbmV3T3JpZW50YXRpb247XG4gICAgICB0aGlzLmFwcENvcmUucmVzaXplT3JpZW50YXRpb24od2lkdGgsIGhlaWdodCwgb3JpZW50YXRpb24pO1xuICAgICAgdGhpcy5hcHBVaS5yZXNpemVPcmllbnRhdGlvbih3aWR0aCwgaGVpZ2h0LCBvcmllbnRhdGlvbik7XG4gICAgICBpZiAodGhpcy5hcHBTdG9yZS5jdXJyZW50U2VjdGlvbiAhPT0gbnVsbCkgdGhpcy5hcHBTdG9yZS5jdXJyZW50U2VjdGlvbi5yZXNpemVPcmllbnRhdGlvbih3aWR0aCwgaGVpZ2h0LCBvcmllbnRhdGlvbik7XG4gICAgfVxuICAgIC8qIF9jaGVja09yaWVudGF0aW9uKClcbiAgICB7XG4gICAgICAgIC8vIGlmIGl0J3Mgbm90IGFmZmVjdGVkIGJ5IG9yaWVudGF0aW9uIHBhc3MgdGhlIGN1cnJlbnQgb25lICgwOiBob3Jpem9udGFsLCAxOiB2ZXJ0aWNhbClcbiAgICAgICAgaWYodGhpcy5vcmllbnRhdGlvbiA9PT0gb3JpZW50YXRpb25zLk5PTkUpXG4gICAgICAgICAgICB0aGlzLi8vICh0aGlzLmFwcFN0b3JlLmNsaWVudC5zaXplcy53aWR0aCA+IHRoaXMuYXBwU3RvcmUuY2xpZW50LnNpemVzLmhlaWdodCA/IDAgOiAxKTtcbiAgICAgICAgIGlmKHRoaXMub3JpZW50YXRpb24gPT09IG9yaWVudGF0aW9ucy5WRVJUSUNBTClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gaWYgd2lkdGggaXMgYmlnZ2VyIHRoYW4gaGVpZ2h0XG4gICAgICAgICAgICBpZih0aGlzLmFwcFN0b3JlLmNsaWVudC5zaXplcy53aWR0aCA+IHRoaXMuYXBwU3RvcmUuY2xpZW50LnNpemVzLmhlaWdodClcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZURldmljZSh0cnVlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZURldmljZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0aGlzLm9yaWVudGF0aW9uID09PSBvcmllbnRhdGlvbnMuSE9SSVpPTlRBTClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gaWYgaGVpZ2h0IGlzIGJpZ2dlciB0aGFuIHdpZHRoXG4gICAgICAgICAgICBpZih0aGlzLmFwcFN0b3JlLmNsaWVudC5zaXplcy5oZWlnaHQgPiB0aGlzLmFwcFN0b3JlLmNsaWVudC5zaXplcy53aWR0aClcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZURldmljZSh0cnVlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZURldmljZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9ICovXG4gICAgLy8gcm90YXRlRGV2aWNlKGFjdGlvbil7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgfV0pO1xuXG4gIHJldHVybiBBcHBsaWNhdGlvbjtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgQXBwbGljYXRpb247IiwiLy9hcHBzXG5pbXBvcnQgQXBwbGljYXRpb24gZnJvbSAnLi9hcHAvYXBwJzsgLy9vbiBkb2N1bWVudCByZWFkeSBjcmVhdGUgbG9hZGVyXG5cbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHtcbiAgdmFyIGFwcCA9IG5ldyBBcHBsaWNhdGlvbigpO1xufSBlbHNlIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXBwID0gbmV3IEFwcGxpY2F0aW9uKCk7XG4gIH0sIGZhbHNlKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///815\n")}},__webpack_module_cache__={},deferred;function __webpack_require__(g){var I=__webpack_module_cache__[g];if(void 0!==I)return I.exports;var n=__webpack_module_cache__[g]={exports:{}};return __webpack_modules__[g].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(g,I,n,t)=>{if(!I){var e=1/0;for(i=0;i<deferred.length;i++){for(var[I,n,t]=deferred[i],c=!0,l=0;l<I.length;l++)(!1&t||e>=t)&&Object.keys(__webpack_require__.O).every((g=>__webpack_require__.O[g](I[l])))?I.splice(l--,1):(c=!1,t<e&&(e=t));if(c){deferred.splice(i--,1);var C=n();void 0!==C&&(g=C)}}return g}t=t||0;for(var i=deferred.length;i>0&&deferred[i-1][2]>t;i--)deferred[i]=deferred[i-1];deferred[i]=[I,n,t]},__webpack_require__.n=g=>{var I=g&&g.__esModule?()=>g.default:()=>g;return __webpack_require__.d(I,{a:I}),I},__webpack_require__.d=(g,I)=>{for(var n in I)__webpack_require__.o(I,n)&&!__webpack_require__.o(g,n)&&Object.defineProperty(g,n,{enumerable:!0,get:I[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(g){if("object"==typeof window)return window}}(),__webpack_require__.o=(g,I)=>Object.prototype.hasOwnProperty.call(g,I),(()=>{var g={143:0};__webpack_require__.O.j=I=>0===g[I];var I=(I,n)=>{var t,e,[c,l,C]=n,i=0;if(c.some((I=>0!==g[I]))){for(t in l)__webpack_require__.o(l,t)&&(__webpack_require__.m[t]=l[t]);if(C)var A=C(__webpack_require__)}for(I&&I(n);i<c.length;i++)e=c[i],__webpack_require__.o(g,e)&&g[e]&&g[e][0](),g[c[i]]=0;return __webpack_require__.O(A)},n=self.webpackChunkcaledonian=self.webpackChunkcaledonian||[];n.forEach(I.bind(null,0)),n.push=I.bind(null,n.push.bind(n))})();var __webpack_exports__=__webpack_require__.O(void 0,[736],(()=>__webpack_require__(815)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();